{"version":3,"sources":["webpack://__TECTONIC__sn_fam_map/webpack/bootstrap","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__$servicenow_ui_renderer_snabbdom\"","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/constants.js","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__$servicenow_ui_core\"","webpack://__TECTONIC__sn_fam_map/./node_modules/css-loader/lib/css-base.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/googleLibs/mapHelperFunctions.js","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__$servicenow_now_icon\"","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__sn_translate\"","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__lodash_4_17_20\"","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__$servicenow_behavior_rtl_19_8_3\"","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/googleLibs/mapApiLoader.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/handlers/layerHandler.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/util/markerHtmlUtil.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/index.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/index.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/sn-fam-map.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/sn-fam-map.scss?6a30","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/sn-fam-map.scss","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/view.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/index.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-google/index.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-google/fam-map-google.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-google/fam-map-google.scss?7caa","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-google/fam-map-google.scss","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-dataprovider/index.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-dataprovider/fam-map-dataprovider.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-sidepanel/index.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-sidepanel/fam-map-sidepanel.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-sidepanel/fam-map-sidepanel.scss?41a8","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-sidepanel/fam-map-sidepanel.scss","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-markeroverlay/index.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-markeroverlay/fam-map-markeroverlay.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-markeroverlay/fam-map-markeroverlay.scss?0365","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-markeroverlay/fam-map-markeroverlay.scss","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-markeroverlay/view.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/util/commonUtil.js","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__$servicenow_now_button\"","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-clusteroverlay/index.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-clusteroverlay/fam-map-clusteroverlay.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-clusteroverlay/fam-map-clusteroverlay.scss?bbda","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-clusteroverlay/fam-map-clusteroverlay.scss","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/components/fam-map-clusteroverlay/view.js","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__$servicenow_now_card\"","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/templates/sidePanel.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/templates/widgetSlots.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/templates/clusterModal.js","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__$servicenow_now_record_list_connected\"","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__$servicenow_now_modal\"","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/actions.js","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__load_google_maps_api_2_0_2\"","webpack://__TECTONIC__sn_fam_map/external \"__TECTONIC__$servicenow_now_popover\"","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/googleLibs/markerclustererplus.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/handlers/mapActionHandler.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/handlers/markerActionHandler.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/handlers/overlayHandler.js","webpack://__TECTONIC__sn_fam_map/./src/main/plugins/com.sn_fam_map/ui.html/scripts/components/sn-fam-map/handlers/searchHandler.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__TECTONIC__$servicenow_ui_renderer_snabbdom","inActions","ADD_LAYER","UPDATE_LAYER","TOGGLE_LAYER","TRIGGER_MARKER_ACTION","TRIGGER_MAP_ACTION","TRIGGER_LOCATION_SEARCH","outActions","MARKER_SELECTED","SIDE_PANEL_OPENED","customActions","INIT_MAP","MARKER_CLICKED","MAP_CLICKED","CLUSTER_CLICKED","MARKER_OVERLAY_CLOSED","CLUSTER_ZOOM_CHANGED","nowActions","PROPERTIES_SET","PREVIEW_RECORD","TEXT_LINK_CLICKED","NOW_MODAL_OPENED_SET","NOW_CARD_CLICKED","keywords","RECORD_ID_SEPERATOR","__TECTONIC__$servicenow_ui_core","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","push","setOptions","option","googleMapsRef","addMarker","state","dispatch","props","clickAction","showInfo","googleMapsApi","mark","MapHTMLOverlay","LatLng","lat","lng","iconHtml","x","y","addListener","event","marker","addPolygon","paths","recordID","styles","editable","parseFloat","styleOptions","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","polygon","Polygon","type","setMap","path","bounds","LatLngBounds","getPaths","getLength","getAt","ii","extend","addCircle","radius","center","isNaN","parseInt","circle","Circle","setCenter","addMarkerCluster","markers","icon","distance","updateState","markLen","gridSize","markerCluster","MarkerClusterer","ignoreHidden","maxZoom","getMarkers","getZoom","areMarkersOnSamePosition","position","getCenter","getInfoOverlay","html","align","overlay","addPolyline","Polyline","setFocus","latitude","longitude","zoom","mapCenter","setZoom","fitBounds","getSize","Size","getPoint","Point","triggerClick","node","trigger","getLocation","getPlacesService","allowPlacesSearch","places","PlacesService","getPlaceLatLng","placeId","google","maps","Geocoder","geocode","results","status","geometry","location","isMapReady","setFocusToPlaceId","latLng","focusedMarker","val","bounceMarker","time","setAnimation","Animation","BOUNCE","setTimeout","getAnimation","setLatLngBounds","swLat","swLng","neLat","neLng","searchPlaces","keyword","successCallback","failureCallback","AutocompleteService","getQueryPredictions","input","predictions","PlacesServiceStatus","OK","markersOnSamePosition","first","getPosition","equals","setRadius","selectedShape","getRadius","__TECTONIC__$servicenow_now_icon","__TECTONIC__sn_translate","__TECTONIC__lodash_4_17_20","__TECTONIC__$servicenow_behavior_rtl_19_8_3","loadGoogleApi","mapElementRef","properties","mapProperties","mapSearchPlaces","mapLanguage","mapKey","mapClient","getMapApiOptions","then","getMapProperties","foundCenter","current","initializeMap","defaultFocus","initMapResolver","setInterval","clearInterval","catch","error","console","log","HtmlOverlay","OverlayView","onRemove","div","parentElement","removeChild","getDraggable","getVisible","setStyle","style","positionClass","ele","getElementsByClassName","keys","addClass","classList","add","removeClass","remove","onAdd","document","createElement","innerHTML","addDomListener","getPanes","floatPane","appendChild","draw","point","getProjection","fromLatLngToDivPixel","left","top","Map","options","language","client","libraries","obj","convertToValidJSON","ControlPosition","evalMapProp","disableDefaultUI","gestureHandling","maxLat","Math","atan","sinh","PI","restriction","latLngBounds","north","south","west","east","strictBounds","clickableIcons","indexOf","replace","eval","e","gmap","addLayerHandler","payload","action","active","collections","layerData","clone","addCount","hasLayerBound","markersCount","collection","records","newid","rec","data","setRecordMarker","focus","nodes","hasRecords","clusters","markers_","getSouthWest","getNorthEast","setMapFocus","operation","layerToggleHandler","layer","layerId","visible","onHide","onShow","layerChangeHandler","layerRef","changeRecordsToMarkers","click_action","addMarkers","setMapBounds","filter","findIndex","clearMarkers","forEach","focusLayerMarkersCount","mapFocus","addListenerOnce","tcms","markerOverlayData","skip_search","getRecordObject","title","fields","query","table","cluster_threshold","layerClickAction","record","severityLabel","severity","display","getMarkerHTML","iconLabel","cluster","iprop","split","iname","itype","icolor","ivariant","triangleIconSpacing","test","navigator","userAgent","getMarkerClusterHTML","batchHTML","createCustomElement","renderer","snabbdom","view","behaviors","behavior","rtlBehavior","initialState","createRef","selectedMarker","clickedMarker","updatedShape","markerModalOpen","clusterModalOpen","clusterModalData","searchResults","slots","loadMap","default","onChange","currentValue","previousValue","sidepanelWidth","slotStyles","actionHandlers","dispatches","side_panel","top_left","top_center","top_right","right_top","right_center","right_bottom","bottom_right","bottom_center","bottom_left","left_bottom","left_center","left_top","result","className","component-id","layers","shape","SidePanel","WidgetSlots","ClusterModal","ref","selectable","slotted","width","dir","tabindex","on-click","on-keyup","keyCode","aria-label","size","sys_id","sysid","find","label","href","variant","configAria","convertLatLngToDMS","f","display_value","toDegreesMinutesAndSeconds","coordinate","absolute","abs","degrees","floor","minutesNotTruncated","minutes","toFixed","str","parse","__TECTONIC__$servicenow_now_button","recordData","sidebar","color","append-to-payload","interaction","heading","slot","__TECTONIC__$servicenow_now_card","on-slotchange","Fragment","headerLabel","opened","limit","hideHeader","hideRowSelector","hideSelectAll","hideCellFilter","hideColumnFiltering","hideQuickEdit","__TECTONIC__$servicenow_now_record_list_connected","__TECTONIC__$servicenow_now_modal","mapActions","markerActions","actionTypes","COMPONENT_BOOTSTRAPPED","effect","stopPropagation","mapActionHandler","markerActionHandler","initSearchService","markerClickHandler","mapClickHandler","markerOverlayClosedHandler","clusterZoomChangeHandler","clusterClickHandler","modalOpenSetHandler","__TECTONIC__load_google_maps_api_2_0_2","__TECTONIC__$servicenow_now_popover","OverlayViewSafe","type1","type2","coercePixels","pixels","undefined","ClusterIcon","cluster_","styles_","icon_","center_","div_","sums_","visible_","getMap","cMouseDownInCluster","cDraggingMapByCluster","mc","getMarkerClusterer","version","major","minor","gmVersion","show","overlayMouseTarget","boundsChangedListener_","getZoomOnClick","mz","getMaxZoom","theBounds","getBounds","cancelBubble","parentNode","hide","removeListener","clearInstanceListeners","pos","getPosFromLatLng_","className_","cssText","createCss_","text","getTitle","ariaLabelFn","sums","index","max","min","anchorText_","anchorText","anchorIcon_","anchorIcon","height","getClusterClass","getZIndex","cursor","reduce","acc","latlng","Cluster","markerClusterer_","map_","minClusterSize_","getMinimumClusterSize","averageCenter_","getAverageCenter","bounds_","clusterIcon_","getStyles","getIcon","markerDispatch","isMarkerAlreadyAdded_","calculateBounds_","isAdded","mCount","contains","getExtendedBounds","numStyles","getCalculator","useStyle","getOption","prop","def","clusters_","listeners_","activeMap_","ready_","zIndex_","zIndex","Marker","MAX_ZINDEX","gridSize_","minimumClusterSize","maxZoom_","title_","zoomOnClick_","ignoreHidden_","enableRetinaIcons_","imagePath_","imagePath","IMAGE_PATH","imageExtension_","imageExtension","IMAGE_EXTENSION","imageSizes_","imageSizes","IMAGE_SIZES","calculator_","calculator","CALCULATOR","batchSize_","batchSize","BATCH_SIZE","batchSizeIE_","batchSizeIE","BATCH_SIZE_IE","clusterClass_","clusterClass","toLowerCase","setupStyles_","clusterDiv","repaint","prevZoom_","minZoom","mapTypes","getMapTypeId","resetViewport_","redraw_","withDefaultStyle","url","padding","getIgnoreHidden","zoomOnClick","averageCenter","enableRetinaIcons","nodraw","pushMarkerTo_","removed","removeMarker_","splice","oldClusters","slice","projection","tr","bl","trPix","blPix","ne","fromDivPixelToLatLng","sw","createClusters_","p1","p2","dLat","dLon","a","sin","cos","atan2","sqrt","clusterToAddTo","distanceBetweenPoints_","isMarkerInClusterBounds","clusteredMarkersSeverity","sort","sev1","sev2","intSev1","intSev2","val1","val2","highestSeverityIcon","pop","iFirst","timerRefStatic","clearTimeout","mapBounds","iLast","isMarkerInBounds_","addToClosestCluster_","window","updateIcon","count","dv","overrides","assign","textColor","textSize","textDecoration","textLineHeight","fontWeight","fontStyle","fontFamily","backgroundPosition","resetMapToDefault","hoveredItem","eventCount","selectMarker","mi","cm","changeMarkerShape","updated","impact_type","impact_area","impact_radius","setEditable","setPath","setVisible","reveredMarker","impact_state","inputType","inputPath","inputRadius","newValue","updatedMarker","pathArray","getPath","canCloseOverlay","some","marker_count","first_id","showClusterOverlay","showMarkerRecordList","searchKeyword","executeSearchWithPlaces","searchLayer","gotPlacesResults","gotLayerResults","structured_formatting","main_text","sublabel","description","random","substr","interleaveSearchResult","layersResults","sortBy","includes"],"mappings":"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","file":"sn-fam-map.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n","module.exports = __TECTONIC__$servicenow_ui_renderer_snabbdom;","export const inActions = {\n    ADD_LAYER: \"FAM_MAP#ADD_LAYER_REQUESTED\",\n    UPDATE_LAYER: \"FAM_MAP#UPDATE_LAYER_REQUESTED\",\n    TOGGLE_LAYER: \"FAM_MAP#TOGGLE_LAYER_REQUESTED\",\n    TRIGGER_MARKER_ACTION: \"FAM_MAP#TRIGGER_MARKER_ACTION\",\n    TRIGGER_MAP_ACTION: \"FAM_MAP#TRIGGER_MAP_ACTION\",\n    TRIGGER_LOCATION_SEARCH: 'FAM_MAP#TRIGGER_LOCATION_SEARCH'\n};\n\nexport const outActions = {\n    MARKER_SELECTED: \"FAM_MAP#MARKER_SELECTED\",\n    SIDE_PANEL_OPENED: 'FAM_MAP#SIDE_PANEL_OPENED'\n};\n\nexport const customActions = {\n    INIT_MAP: \"FAM_MAP#INIT_MAP\",\n    MARKER_CLICKED: \"FAM_MAP#MARKER_CLICKED\",\n    MAP_CLICKED: 'FAM_MAP#MAP_CLICKED',\n    CLUSTER_CLICKED: \"FAM_MAP#CLUSTER_CLICKED\",\n    MARKER_OVERLAY_CLOSED: 'FAM_MAP#MARKER_OVERLAY_CLOSED',\n    CLUSTER_ZOOM_CHANGED: 'FAM_MAP#CLUSTER_ZOOM_CHANGED'\n};\n\nexport const nowActions = {\n    PROPERTIES_SET: 'PROPERTIES_SET',\n    PREVIEW_RECORD: 'PREVIEW_RECORD',\n    TEXT_LINK_CLICKED: 'TEXT_LINK_CLICKED',\n    NOW_MODAL_OPENED_SET: 'NOW_MODAL#OPENED_SET',\n    NOW_CARD_CLICKED: 'NOW_CARD#CLICKED'\n};\n\nexport const keywords = {\n    RECORD_ID_SEPERATOR: \"#\"\n};","module.exports = __TECTONIC__$servicenow_ui_core;","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","import { customActions, keywords } from \"../constants\";\nimport MarkerClusterer from './markerclustererplus';\nimport { MapHTMLOverlay } from './mapApiLoader';\nimport '@servicenow/now-icon';\n\nexport const setOptions = ({ googleMapsRef }, option, value) => {\n    googleMapsRef.setOptions({\n        [option]: value\n    });\n}\n\nexport const addMarker = (state, dispatch, props, clickAction, showInfo) => {\n    const { googleMapsApi, googleMapsRef } = state;\n\n    let mark = new MapHTMLOverlay(new googleMapsApi.LatLng(props.lat, props.lng), props.iconHtml, { x: -17, y: -43 }, props);\n    (function (mark, dispatch) {\n        mark.addListener('click', (event) => {\n            dispatch(customActions.MARKER_CLICKED, { event: event, marker: mark, clickAction, showInfo });\n        });\n    })(mark, dispatch);\n\n    return mark;\n};\n\nexport const addPolygon = (state, paths, recordID, styles, editable = false) => {\n    if (paths) {\n        paths = paths.map(p => {\n            return {\n                lat: parseFloat(p[1]),\n                lng: parseFloat(p[0])\n            };\n        });\n        let styleOptions = styles || {\n            strokeColor: \"#DD8581\",\n            strokeOpacity: 0.8,\n            strokeWeight: 2,\n            fillColor: \"#F1CECD\",\n            fillOpacity: 0.65\n        };\n        const { googleMapsApi, googleMapsRef } = state;\n        let polygon = new googleMapsApi.Polygon({\n            ...styleOptions,\n            paths,\n            editable,\n            props: { type: 'polygon', id: recordID }\n        });\n        polygon.setMap(googleMapsRef);\n\n        var bounds = new googleMapsApi.LatLngBounds();\n        var paths = polygon.getPaths();\n        var path;\n        for (var i = 0; i < paths.getLength(); i++) {\n            path = paths.getAt(i);\n            for (var ii = 0; ii < path.getLength(); ii++) {\n                bounds.extend(path.getAt(ii));\n            }\n        }\n        polygon.bounds = bounds;\n\n        return polygon;\n    }\n\n};\n\nexport const addCircle = (state, radius, center, recordID, styles, editable = false) => {\n    if (radius && center) {\n        if (isNaN(radius)) radius = parseInt(radius);\n        if (isNaN(center.lat)) center.lat = parseInt(center.lat);\n        if (isNaN(center.lng)) center.lng = parseInt(center.lng);\n\n        let styleOptions = styles || {\n            strokeColor: \"#DD8581\",\n            strokeOpacity: 0.8,\n            strokeWeight: 2,\n            fillColor: \"#F1CECD\",\n            fillOpacity: 0.65\n        };\n        const { googleMapsApi, googleMapsRef } = state;\n        let circle = new googleMapsApi.Circle({\n            ...styleOptions,\n            radius,\n            center,\n            editable,\n            props: { type: 'circle', id: recordID }\n        });\n        circle.setMap(googleMapsRef);\n        googleMapsApi.event.addListener(circle, 'center_changed', function () {\n            circle.setCenter(center);\n        });\n        return circle;\n    }\n};\n\nexport const addMarkerCluster = (state, markers, icon, distance, clickAction, dispatch, updateState) => {\n    const { googleMapsApi, googleMapsRef } = state;\n    const markLen = markers.length;\n    let gridSize = 60;\n\n    if (markLen > 25000) gridSize = 300;\n    else if (markLen > 10000) gridSize = 200;\n    else if (markLen > 5000) gridSize = 150;\n    else if (markLen > 3000) gridSize = 120;\n    else if (markLen > 100) gridSize = 100;\n\n    if (markLen > 1000) distance = 40000;\n\n    let markerCluster = new MarkerClusterer(googleMapsRef, markers, { icon, ignoreHidden: true, distance, maxZoom: 22, gridSize }, dispatch);\n\n    googleMapsApi.event.addListener(markerCluster, \"clusterclick\", function (c) {\n\n        const markers = c.getMarkers();\n        // Only open modal if completely zoomed in\n        if (googleMapsRef.getZoom() == 22 && areMarkersOnSamePosition(markers)) {\n            dispatch(customActions.CLUSTER_CLICKED, { markers, clickAction, position: c.getCenter() });\n        }\n    });\n    return markerCluster;\n}\n\nexport const getInfoOverlay = (position, html, map, align, props) => {\n    let overlay = new MapHTMLOverlay(position, html, align, props);\n    overlay.setMap(map);\n    return overlay;\n}\n\nexport const addPolyline = (state, props) => {\n    const { googleMapsApi, googleMapsRef } = state;\n    return new googleMapsApi.Polyline({\n        map: googleMapsRef,\n        ...props\n    });\n};\n\nexport const setFocus = (state, latitude, longitude, zoom) => {\n    const { googleMapsApi, googleMapsRef } = state;\n    if (googleMapsApi && googleMapsRef && latitude && longitude) {\n        let mapCenter = new googleMapsApi.LatLng(latitude, longitude);\n        googleMapsRef.setZoom(zoom || 7);\n        googleMapsRef.setCenter(mapCenter);\n    }\n};\n\nexport const fitBounds = ({ googleMapsRef }, bounds) => {\n    googleMapsRef.fitBounds(bounds);\n};\n\nexport const getSize = (state, s) => {\n    return new state.googleMapsApi.Size(s[0], s[1]);\n};\n\nexport const getPoint = (state, p) => {\n    return new state.googleMapsApi.Point(p[0], p[1]);\n};\n\nexport const triggerClick = (state, node) => {\n    return new state.googleMapsApi.event.trigger(node, 'click');\n};\n\nexport const getLocation = (state, lat, lng) => {\n    return new state.googleMapsApi.LatLng(lat, lng);\n};\n\nexport const getPlacesService = (state) => {\n    const { googleMapsRef, googleMapsApi, allowPlacesSearch } = state;\n    if (allowPlacesSearch)\n        return new googleMapsApi.places.PlacesService(googleMapsRef);\n};\n\nexport const getPlaceLatLng = (placeId) => {\n    const geocoder = new google.maps.Geocoder();\n    geocoder.geocode({ placeId }, (results, status) => {\n        if (status === \"OK\" && results[0]) {\n            return {\n                lat: results[0].geometry.location.lat(),\n                lng: results[0].geometry.location.lng()\n            }\n        }\n    });\n    return null;\n};\n\nexport const isMapReady = () => {\n    if (typeof google !== 'undefined' && google.maps)\n        return true;\n    return false;\n};\n\nexport const setFocusToPlaceId = (placeId, updateState, state) => {\n    const geocoder = new google.maps.Geocoder();\n    geocoder.geocode({ placeId }, (results, status) => {\n        if (status === \"OK\" && results[0]) {\n            let latLng = {\n                lat: results[0].geometry.location.lat(),\n                lng: results[0].geometry.location.lng()\n            };\n\n            setFocus(state, latLng.lat, latLng.lng, 10);\n            updateState({ focusedMarker: { type: 'location', latitude: latLng.lat, longitude: latLng.lng } });\n        }\n\n    });\n};\n\nexport const setZoom = (state, val) => {\n    const { googleMapsRef } = state;\n    return googleMapsRef.setZoom(googleMapsRef.getZoom() + val);\n};\n\nexport const bounceMarker = (state, marker, time = 500) => {\n    marker.setAnimation(state.googleMapsApi.Animation.BOUNCE);\n    setTimeout(() => {\n        if (marker.getAnimation() !== null)\n            marker.setAnimation(null);\n    }, time);\n};\n\nexport const setLatLngBounds = ({ googleMapsApi }, swLat, swLng, neLat, neLng) => {\n    return new googleMapsApi.LatLngBounds(\n        new googleMapsApi.LatLng(swLat, swLng),\n        new googleMapsApi.LatLng(neLat, neLng)\n    );\n};\n\nexport const searchPlaces = (state, keyword, successCallback, failureCallback, updateState) => {\n    const { googleMapsApi } = state;\n    if (googleMapsApi && googleMapsApi.places) {\n        const service = new googleMapsApi.places.AutocompleteService();\n        service.getQueryPredictions({ input: keyword },\n            (predictions, status) => {\n                if (status == googleMapsApi.places.PlacesServiceStatus.OK)\n                    successCallback(predictions, updateState);\n                else\n                    failureCallback(updateState);\n            }\n        )\n    }\n};\n\nconst areMarkersOnSamePosition = (markers) => {\n    let markersOnSamePosition = false;\n    if (markers && markers.length > 1) { // atleast 2 markers needed for a cluster.\n        let first = markers[0].getPosition();\n        markersOnSamePosition = true;\n        for (let m in markers) {\n            if (!markers[m].getPosition().equals(first)) {\n                markersOnSamePosition = false;\n                break;\n            }\n        }\n    }\n    return markersOnSamePosition;\n};\n\nexport const setRadius = (selectedShape) => {\n    const earthRadius = 6378137;\n    google.maps.event.addListener(selectedShape, 'radius_changed', function () {\n        if (selectedShape.getRadius() > earthRadius) {\n            selectedShape.setRadius(earthRadius);\n        }\n    });\n}\n","module.exports = __TECTONIC__$servicenow_now_icon;","module.exports = __TECTONIC__sn_translate;","module.exports = __TECTONIC__lodash_4_17_20;","module.exports = __TECTONIC__$servicenow_behavior_rtl_19_8_3;","import loadGoogleMapsApi from 'load-google-maps-api';\nimport { customActions } from '../constants';\n\nexport const loadGoogleApi = ({ state: { mapElementRef, properties: { mapProperties, mapSearchPlaces, mapLanguage, mapKey, mapClient } }, updateState, dispatch }) => {\n\tloadGoogleMapsApi(getMapApiOptions(mapSearchPlaces, mapLanguage, mapKey, mapClient), 20000)\n\t\t.then((googleMapsApi) => {\n\n\t\t\tconst { props, foundCenter } = getMapProperties(mapProperties, googleMapsApi);\n\n\t\t\t//Initialize Map with properties\n\t\t\tif (mapElementRef && mapElementRef.current) {\n\t\t\t\tupdateState({\n\t\t\t\t\tgoogleMapsApi,\n\t\t\t\t\tgoogleMapsRef: initializeMap(googleMapsApi, mapElementRef, props, dispatch),\n\t\t\t\t\tdefaultFocus: foundCenter ? { source: 'properties', lat: props.center.lat, lng: props.center.lng } : null\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlet initMapResolver = setInterval(() => {\n\t\t\t\t\tif (mapElementRef && mapElementRef.current) {\n\t\t\t\t\t\tclearInterval(initMapResolver);\n\t\t\t\t\t\tupdateState({\n\t\t\t\t\t\t\tgoogleMapsApi,\n\t\t\t\t\t\t\tgoogleMapsRef: initializeMap(googleMapsApi, mapElementRef, props, dispatch),\n\t\t\t\t\t\t\tdefaultFocus: foundCenter ? { source: 'properties', lat: props.center.lat, lng: props.center.lng } : null\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.log('Cannot load google maps API', error);\n\t\t})\n};\n\n\n\nexport let MapHTMLOverlay = null;\n\nexport const initializeMap = (googleMapsApi, mapElementRef, mapProperties, dispatch) => {\n\tfunction HtmlOverlay(position, content, align = { x: 0, y: 0 }, props = {}) {\n\t\tthis.position = position;\n\t\tthis.content = content;\n\t\tthis.props = props;\n\t\tthis.align = align;\n\t}\n\n\tHtmlOverlay.prototype = new googleMapsApi.OverlayView();\n\tHtmlOverlay.prototype.onRemove = function () {\n\t\tif (this.div.parentElement)\n\t\t\tthis.div.parentElement.removeChild(this.div);\n\t}\n\tHtmlOverlay.prototype.getDraggable = function () {\n\t\treturn false;\n\t};\n\tHtmlOverlay.prototype.getPosition = function () {\n\t\treturn this.position;\n\t};\n\tHtmlOverlay.prototype.getVisible = function () {\n\t\treturn true;\n\t};\n\tHtmlOverlay.prototype.setStyle = function (style, positionClass) {\n\t\tlet ele = this.div && this.div.getElementsByClassName(positionClass)\n\t\tif (ele && ele[0] && style) {\n\t\t\tObject.keys(style).map(key => {\n\t\t\t\tele[0].style[key] = style[key];\n\t\t\t})\n\t\t}\n\t};\n\tHtmlOverlay.prototype.addClass = function (name, positionClass) {\n\t\tif (this.div) {\n\t\t\tlet ele = this.div && this.div.getElementsByClassName(positionClass)\n\t\t\tif (ele && ele[0] && name)\n\t\t\t\tele[0].classList.add(name);\n\t\t}\n\t};\n\tHtmlOverlay.prototype.removeClass = function (name, positionClass) {\n\t\tif (this.div) {\n\t\t\tlet ele = this.div && this.div.getElementsByClassName(positionClass)\n\t\t\tif (ele && ele[0] && name)\n\t\t\t\tele[0].classList.remove(name);\n\t\t}\n\t};\n\t//init your html element here\n\tHtmlOverlay.prototype.onAdd = function () {\n\t\tthis.div = document.createElement('DIV');\n\t\tthis.div.style.position = 'absolute';\n\t\tthis.div.innerHTML = this.content;\n\t\tgoogle.maps.event.addDomListener(this.div, 'click', event => {\n\t\t\tgoogle.maps.event.trigger(this, 'click', event);\n\t\t});\n\n\t\tthis.getPanes().floatPane.appendChild(this.div);\n\t}\n\n\tHtmlOverlay.prototype.draw = function () {\n\t\tvar point = this.getProjection().fromLatLngToDivPixel(this.position);\n\t\tif (point) {\n\t\t\tthis.div.style.left = `${point.x + this.align.x}px`;\n\t\t\tthis.div.style.top = `${point.y + this.align.y}px`;\n\t\t}\n\t}\n\n\tMapHTMLOverlay = HtmlOverlay;\n\tconst map = new googleMapsApi.Map(mapElementRef.current, mapProperties);\n\tmap.addListener(\"click\", (event) => {\n\t\tdispatch(customActions.MAP_CLICKED, event);\n\t});\n\n\treturn map;\n}\n\nexport const getMapApiOptions = (mapSearchPlaces, mapLanguage, mapKey, mapClient) => {\n\n\tvar options = {};\n\toptions.language = mapLanguage;\n\n\tif (mapKey)\n\t\toptions.key = mapKey;\n\telse\n\t\toptions.client = mapClient || 'gme-servicenow';\n\n\tif (mapSearchPlaces)\n\t\toptions.libraries = ['places'];\n\treturn options;\n};\n\nexport const getMapProperties = (mapProperties, googleMapsApi) => {\n\tlet props = {};\n\tlet foundCenter = false;\n\tif (mapProperties)\n\t\tmapProperties.map(p => {\n\t\t\tif (p.value) {\n\t\t\t\tswitch (p.type) {\n\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tprops[p.name] = p.value == \"true\" ? true : p.value == \"false\" ? false : p.value;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"control\":\n\t\t\t\t\tcase \"object\":\n\n\t\t\t\t\t\tlet obj = convertToValidJSON(p.value) || {};\n\t\t\t\t\t\tif (p.type == \"control\" && p.position)\n\t\t\t\t\t\t\tobj.position = googleMapsApi.ControlPosition[p.position];\n\n\t\t\t\t\t\tif (Object.keys(obj).length) {\n\t\t\t\t\t\t\tObject.keys(obj).map(o => {\n\t\t\t\t\t\t\t\tobj[o] = evalMapProp(obj[o], googleMapsApi);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tprops[p.name] = obj;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (p.name === \"center\" && p.value.lat && p.value.lng) {\n\t\t\t\t\t\t\tfoundCenter = true;\n\t\t\t\t\t\t\tprops[p.name] = p.value;\n\t\t\t\t\t\t} else if (p.name !== \"center\")\n\t\t\t\t\t\t\tprops[p.name] = p.value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\tif (!props.disableDefaultUI)\n\t\tprops.disableDefaultUI = true;\n\n\n\tif (!props.gestureHandling)\n\t\tprops.gestureHandling = \"greedy\";\n\n\tif (!props.center)\n\t\tprops.center = { lat: 17, lng: -17 }\n\telse if (!props.zoom)\n\t\tprops.zoom = 7;\n\n\tif (!props.zoom)\n\t\tprops.zoom = 3;\n\n\tvar maxLat = Math.atan(Math.sinh(Math.PI)) * 180 / Math.PI;\n\tprops.restriction = {\n\t\tlatLngBounds: {\n\t\t\tnorth: maxLat,\n\t\t\tsouth: -maxLat,\n\t\t\twest: -180,\n\t\t\teast: 180\n\t\t},\n\t\tstrictBounds: true\n\t};\n\tprops.clickableIcons = false;\n\n\treturn { props, foundCenter };\n};\n\nconst evalMapProp = (p, googleMapsApi) => {\n\ttry {\n\t\tif (typeof p === \"string\" && p.indexOf(\"google.maps\") != -1) {\n\t\t\tp = p.replace(/google.maps/ig, \"googleMapsApi\");\n\t\t\tp = eval(p);\n\t\t}\n\t} catch (e) { }\n\treturn p;\n}","import { inActions, keywords } from '../constants';\nimport { getMarkerHTML } from '../util/markerHtmlUtil';\nimport { findIndex } from 'lodash';\nimport * as gmap from '../googleLibs/mapHelperFunctions';\nimport { clone } from 'lodash';\n\nexport const addLayerHandler = ({ state, updateState, dispatch, action: { payload } }) => {\n    const { googleMapsApi, googleMapsRef, defaultFocus } = state;\n    if (payload && payload.id && payload.active && payload.collections && payload.collections.length) {\n        if (googleMapsApi && googleMapsRef) {\n            let layerData = state.layerData ? clone(state.layerData) : {};\n            let addCount = 0;\n            let bounds = defaultFocus && defaultFocus.source == 'properties' ? null : new googleMapsApi.LatLngBounds();\n            let hasLayerBound = false;\n            let markersCount = 0;\n\n            payload.collections.map(collection => {\n                if (collection.id && collection.records) {\n                    var newid = payload.id + keywords.RECORD_ID_SEPERATOR + collection.id;\n                    if (!layerData[newid]) {\n                        let rec = {};\n                        const data = setRecordMarker(state, dispatch, collection, payload, payload.focus ? bounds : null);\n                        if (data && data.nodes) {\n                            rec = data.nodes;\n                            if (data.bounds) {\n                                bounds = data.hasRecords ? data.bounds : null;\n                                hasLayerBound = true;\n                            }\n                            layerData[newid] = rec;\n                            addCount++;\n                            if (rec.focus && rec.clusters && rec.clusters.markers_ && rec.clusters.markers_.length)\n                                markersCount = rec.clusters.markers_.length;\n                        }\n                    }\n                }\n            });\n\n            if (addCount) {\n                if (hasLayerBound && bounds) {\n                    const maxLat = Math.atan(Math.sinh(Math.PI)) * 180 / Math.PI;\n                    const swLat = bounds.getSouthWest().lat();\n                    const neLat = bounds.getNorthEast().lat();\n                    if (swLat < -maxLat || neLat > maxLat)\n                        bounds = gmap.setLatLngBounds(state, swLat < -maxLat ? -maxLat : swLat, bounds.getSouthWest().lng(), neLat > maxLat ? maxLat : neLat, bounds.getNorthEast().lng());\n                    setMapFocus(state, markersCount, bounds);\n                    updateState([\n                        {\n                            path: 'defaultFocus',\n                            value: {\n                                source: 'record',\n                                bounds: bounds\n                            },\n                            operation: 'set'\n                        },\n                        {\n                            path: 'layerData',\n                            value: layerData,\n                            operation: 'assign'\n                        },\n                    ]);\n                } else {\n                    updateState({\n                        path: 'layerData',\n                        value: layerData,\n                        operation: 'assign'\n                    });\n                }\n            }\n        } else {\n            setTimeout(() => {\n                dispatch(inActions.ADD_LAYER, payload);\n            }, 200);\n        }\n    }\n};\n\nexport const layerToggleHandler = ({ action: { payload: { layer, collection } }, state, updateState, dispatch }) => {\n    const { layerData, googleMapsRef } = state;\n    if (layerData && googleMapsRef) {\n        const layerId = layer + keywords.RECORD_ID_SEPERATOR + collection;\n        if (layer && collection) {\n            if (layerData[layerId])\n                if (layerData[layerId].visible)\n                    onHide(layerData[layerId], layerId, updateState, state);\n                else\n                    onShow(layerData[layerId], googleMapsRef, layerId, updateState)\n        } else if (layer) {\n            Object.keys(layerData).map(key => {\n                if (key.indexOf(layer + keywords.RECORD_ID_SEPERATOR) == 0) {\n                    if (layerData[key].visible)\n                        onHide(layerData[key], key + collection, updateState, state);\n                    else\n                        onShow(layerData[key], googleMapsRef, key + collection, updateState)\n                }\n            })\n        }\n    }\n};\n\nexport const layerChangeHandler = ({ action: { payload: { action, layer, collection, records } }, state, updateState, dispatch }) => {\n    const { layerData, googleMapsRef, defaultFocus } = state;\n    if (layerData && googleMapsRef && layer && collection && records) {\n        const layerId = layer + keywords.RECORD_ID_SEPERATOR + collection;\n        const layerRef = layerData[layerId];\n        if (layerRef) {\n            switch (action) {\n                case 'add_records':\n                    {\n                        let markers = changeRecordsToMarkers(state, dispatch, layer, collection, records, layerRef.click_action);\n                        if (layerRef.clusters) {\n                            layerRef.clusters.addMarkers(markers);\n                            setMapBounds(state, layerRef.clusters, layerRef.focus, defaultFocus, layerId, updateState);\n                        }\n                        break;\n                    }\n                case 'remove_records':\n                    if (layerRef.clusters) {\n                        let markers = layerRef.clusters.markers_.filter(mark => findIndex(records, { id: mark.props.id }) == -1);\n                        layerRef.clusters.clearMarkers();\n                        layerRef.clusters.markers_ = [];\n                        layerRef.clusters.addMarkers(markers);\n                        setMapBounds(state, layerRef.clusters, layerRef.focus, defaultFocus, layerId, updateState);\n                    }\n                    break;\n\n                case 'replace_records':\n                    {\n                        let { markers, bounds } = changeRecordsToMarkers(state, dispatch, layer, collection, records, layerRef.click_action, defaultFocus && defaultFocus.source == 'properties' ? false : layerRef.focus);\n                        if (layerRef.clusters) {\n                            layerRef.clusters.clearMarkers();\n                            layerRef.clusters.addMarkers(markers);\n                            setMapBounds(state, layerRef.clusters, layerRef.focus, defaultFocus, layerId, updateState, bounds);\n                        }\n                        break;\n                    }\n                default:\n                    break;\n            }\n        }\n    }\n};\n\nexport const setMapBounds = (state, clusters, focus, defaultFocus, layerId, updateState, bounds) => {\n    const { googleMapsApi } = state;\n    if (focus && !(defaultFocus && defaultFocus.source == 'properties')) {\n        if (!bounds) {\n            if (clusters.markers_ && clusters.markers_.length) {\n                bounds = new googleMapsApi.LatLngBounds();\n                clusters.markers_.forEach(marker => {\n                    bounds.extend(marker.getPosition());\n                });\n            } else {\n                defaultFocus.bounds = null;\n            }\n        }\n        if (bounds) {\n            const maxLat = Math.atan(Math.sinh(Math.PI)) * 180 / Math.PI;\n            const swLat = bounds.getSouthWest().lat();\n            const neLat = bounds.getNorthEast().lat();\n            if (swLat < -maxLat || neLat > maxLat)\n                bounds = gmap.setLatLngBounds(state, swLat < -maxLat ? -maxLat : swLat, bounds.getSouthWest().lng(), neLat > maxLat ? maxLat : neLat, bounds.getNorthEast().lng());\n        }\n    }\n    if (bounds) {\n        updateState(\n            [{\n                path: 'defaultFocus',\n                value: {\n                    source: 'record',\n                    bounds: bounds\n                },\n                operation: 'set'\n            }, {\n                path: 'layerData.' + layerId + '.clusters',\n                value: clusters,\n                operation: 'set'\n            }]\n        );\n    } else {\n        updateState({\n            path: 'layerData.' + layerId + '.clusters',\n            value: clusters,\n            operation: 'set'\n        })\n    }\n    setMapFocus(state, clusters.markers_ && clusters.markers_.length, bounds);\n};\n\nexport const setMapFocus = (state, focusLayerMarkersCount = 0, bounds) => {\n    const { googleMapsRef, googleMapsApi, defaultFocus } = state;\n    let mapFocus = true;\n    if (bounds) {\n        gmap.fitBounds(state, bounds);\n        gmap.fitBounds(state, bounds);\n    } else if (defaultFocus) {\n        if (defaultFocus.source == 'properties' && defaultFocus.lat && defaultFocus.lng) {\n            let bounds = new googleMapsApi.LatLngBounds();\n            let mapCenter = new googleMapsApi.LatLng(defaultFocus.lat, defaultFocus.lng);\n            bounds.extend(mapCenter);\n            gmap.fitBounds(state, bounds);\n            googleMapsRef.setCenter(mapCenter);\n        } else if (defaultFocus.bounds) {\n            gmap.fitBounds(state, defaultFocus.bounds);\n            gmap.fitBounds(state, defaultFocus.bounds);\n        } else {\n            googleMapsRef.setZoom(2);\n        }\n    } else {\n        googleMapsRef.setZoom(2);\n    }\n    if (focusLayerMarkersCount > 1) {\n        mapFocus = false;\n    }\n    googleMapsApi.event.addListenerOnce(googleMapsRef, 'bounds_changed', function (event) {\n        if (googleMapsRef.getZoom() > 7) {\n            if (mapFocus)\n                googleMapsRef.setZoom(2);\n            else\n                googleMapsRef.setZoom(7);\n        }\n    });\n};\n\nexport const onShow = (layer, googleMapsRef, layerId, updateState) => {\n    if (layer.clusters && layer.tcms) {\n        layer.clusters.addMarkers(layer.tcms);\n        layer.tcms = null;\n    }\n    layer.visible = true;\n    updateState([\n        {\n            path: \"layerData.\" + layerId,\n            value: { ...layer },\n            operation: 'set'\n        },\n        {\n            path: 'cluserOverlayData',\n            value: null,\n            operation: 'set'\n        }\n    ]);\n};\n\nexport const onHide = (layer, layerId, updateState, state) => {\n\n    if (layer.clusters) {\n        layer.tcms = layer.clusters.markers_;\n        layer.clusters.clearMarkers();\n    }\n\n    if (state.markerOverlayData)\n        state.markerOverlayData.setMap(null);\n\n    layer.visible = false;\n\n    updateState([\n        {\n            path: \"layerData.\" + layerId,\n            value: { ...layer },\n            operation: 'set'\n        },\n        {\n            path: 'markerOverlayData',\n            value: null,\n            operation: 'set'\n        }\n    ]);\n};\n\nexport const setRecordMarker = (state, dispatch, c, l, bounds, updateState) => {\n    let nodes = {};\n    let markers = [];\n\n    if (l.click_action)\n        nodes.click_action = l.click_action;\n\n    if (c.skip_search)\n        nodes.skip_search = c.skip_search;\n\n    c.records.map(rec => {\n        if (rec.latitude && rec.longitude && !isNaN(rec.latitude) && !isNaN(rec.longitude)) {\n            const marker = gmap.addMarker(state, dispatch, getRecordObject(rec, c, l), l.click_action || \"\", rec.title || rec.name || (rec.fields && rec.fields.length));\n\n            if (c.name)\n                nodes.name = c.name + '';\n            if (c.query)\n                nodes.query = c.query;\n            if (c.table)\n                nodes.table = c.table;\n            if (l.focus && bounds) {\n                bounds.extend(marker.position);\n                nodes.focus = true;\n            }\n            markers.push(marker);\n        }\n    });\n\n    const distance = l.cluster_threshold && markers.length < l.cluster_threshold ? 10 : null;\n\n    nodes.clusters = gmap.addMarkerCluster(state, markers, c.icon, distance, l.click_action || \"\", dispatch, updateState);\n    nodes.visible = true;\n    return { nodes, bounds, hasRecords: markers.length != 0 };\n};\n\nconst changeRecordsToMarkers = (state, dispatch, layer, collection, records, layerClickAction, hasLayerBound) => {\n    let markers = [];\n    let bounds = hasLayerBound ? new state.googleMapsApi.LatLngBounds() : null;\n    records.map(rec => {\n        if (rec.latitude && rec.longitude && !isNaN(rec.latitude) && !isNaN(rec.longitude)) {\n            const marker = gmap.addMarker(state, dispatch, getRecordObject(rec, { id: collection }, { id: layer }), layerClickAction || \"\", rec.title || rec.name || (rec.fields && rec.fields.length));\n            if (bounds)\n                bounds.extend(marker.position);\n            markers.push(marker);\n        }\n    });\n\n    return { markers, bounds };\n};\n\nconst getRecordObject = (record, collection, layer) => {\n    let severityLabel = record.severity && record.severity.display ? record.severity.display : \"Unknown\";\n    return {\n        iconHtml: getMarkerHTML(record.icon || collection.icon || \"map-pin-fill\", severityLabel),\n        icon: record.icon || collection.icon || \"map-pin-fill\",\n        query: record.query + '',\n        id: record.id,\n        layer: layer.id,\n        collection: collection.id,\n        lat: record.latitude,\n        lng: record.longitude,\n        title: record.title || record.name || \"\",\n        severity: record.severity || \"\",\n        fields: record.fields || \"\",\n    };\n};\n","import '@servicenow/now-popover';\n\nexport const getMarkerHTML = (icon = \"triangle-exclamation-fill\", iconLabel = \"Unknown\", cluster) => {\n    const iprop = icon.split(',');\n    const iname = iprop[0];\n    let itype = iprop[1] || '';\n    const icolor = iprop[2] || '';\n    const ivariant = iprop[3] || 'tertiary';\n    let triangleIconSpacing = \"\";\n\n    if (cluster)\n        itype = 'cluster-' + itype;\n\n    if (iname === \"triangle-exclamation-fill\")\n        triangleIconSpacing = 'alert-triangle-icon'\n\n    switch (itype) {\n        case 'circle':\n            return `\n            <div class=\"html-marker\">\n                <div class=\"circle mark ${triangleIconSpacing} -${icolor} -${ivariant}\">\n                    <now-icon icon=\"${iname}\" size=\"sm\"></now-icon>\n                </div>\n            </div>\n        `;\n        case 'circle-label':\n            return `\n            <div class=\"html-marker\">\n                <div class=\"circle mark ${triangleIconSpacing} -${icolor} -${ivariant}\">\n                    <now-icon icon=\"${iname}\" size=\"sm\"></now-icon>\n                </div>\n\n                <div class=\"focus-popup -${icolor} -${ivariant}\" style=\"transition: ${/^((?!chrome|android).)*safari/i.test(navigator.userAgent) ? 'width 0.01s' : 'width 0.5s'}\">\n                    <now-icon icon=\"${iname}\" size=\"sm\"></now-icon>\n                    <span> ${iconLabel} </span>\n                </div>\n            </div>\n        `;\n        case 'cluster-circle':\n        case 'cluster-circle-label':\n            return `\n        <div class=\"html-marker\">\n            <div class=\"cluster-circle circle mark ${triangleIconSpacing} -${icolor} -${ivariant}\">\n                <now-icon  icon=\"${iname}\" size=\"sm\"></now-icon>\n            </div>\n        </div>\n        `;\n        case 'square':\n            return `\n            <div class=\"html-marker\">\n                <div class=\"square mark -${icolor} -${ivariant}\">\n                    <now-icon icon=\"${iname}\" size=\"sm\"></now-icon>\n                </div>\n            </div>\n        `;\n\n        default:\n            return `\n            <div class=\"html-marker\">\n                <div class=\"pointer mark -${icolor} -${ivariant}\">\n                    <now-icon icon=\"${iname}\" size=\"sm\"></now-icon>\n                    <div class=\"html-marker-tail\"></div>\n                </div>\n            </div>\n        `;\n    }\n}\n\nexport const getMarkerClusterHTML = (icon, batchHTML) => {\n    return `<div class=\"cluster-html\">\n        <div class=\"badge\">${batchHTML}</div>\n        ${getMarkerHTML(icon, \"\", true)}\n    </div>`\n}","import './components/sn-fam-map';","import './sn-fam-map';\n","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom, { createRef } from '@seismic/snabbdom-renderer';\nimport rtlBehavior from '@servicenow/behavior-rtl';\nimport styles from './sn-fam-map.scss';\nimport view from './view';\nimport actionHandlers from './actions';\nimport { customActions } from './constants';\n\n/**\n * Google Map to manage crisis alerts and impacted assets\n * \n * ```\n * import '@relative-path/app-bcm-crisis-map';\n * \n * <sn-fam-map>\n * \t\tmap-key=\"\"\n * \t\tmap-client=\"\"\n * \t\tmap-language=\"\"\n * \t\tmap-search-places=\"\"\n * \t\tmap-properties=\"\"\n * \t\tsidepanel-width=\"\"\n * \t\tslot-styles=\"\"\n * </sn-fam-map>\n * ```\n * \n * @seismicElement sn-fam-map\n * @summary Seismic component to render google map with markers, shapes and other components within slots\n */\n\ncreateCustomElement('sn-fam-map', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tbehaviors: [{ behavior: rtlBehavior }],\n\tstyles,\n\tinitialState: {\n\t\tmapElementRef: createRef(),\n\t\tgoogleMapsApi: null,\n\t\tgoogleMapsRef: null,\n\t\tdefaultFocus: null,\n\t\tlayerData: {},\n\t\tfocusedMarker: {},\n\t\tselectedMarker: {},\n\t\tclickedMarker: {},\n\t\tselectedShape: {},\n\t\tupdatedShape: {},\n\t\tmarkerOverlayData: null,\n\t\tmarkerModalOpen: false,\n\t\tclusterModalOpen: false,\n\t\tclusterModalData: {},\n\t\tsearchResults: [],\n\t\tslots: []\n\t},\n\tproperties: {\n\t\t/**\n\t\t * Won't load map unless loadMap is true\n\t\t * @type {Boolean}\n\t\t */\n\t\t loadMap: {\n\t\t\tdefault: true,\n\t\t\tonChange(currentValue, previousValue, dispatch) {\n\t\t\t\tif (currentValue)\n\t\t\t\t\tdispatch(customActions.INIT_MAP);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Google Map Key\n\t\t * @type {String}\n\t\t */\n\t\tmapKey: {\n\t\t\tdefault: ''\n\t\t},\n\t\t/**\n\t\t * Google Map Client Id\n\t\t * @type {String}\n\t\t */\n\t\tmapClient: {\n\t\t\tdefault: 'gme-servicenow'\n\t\t},\n\t\t/**\n\t\t * Google Map Language\n\t\t * @type {String}\n\t\t */\n\t\tmapLanguage: {\n\t\t\tdefault: 'en'\n\t\t},\n\t\t/**\n\t\t * Google Map Other properties\n\t\t * These can be same as google map official doc\n\t\t * \n\t\t * @type {Array}\n\t\t */\n\t\tmapProperties: {\n\t\t\tdefault: [\n\t\t\t\t{\n\t\t\t\t\tname: 'gestureHandling',\n\t\t\t\t\tvalue: 'greedy',\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tposition: ''\n\t\t\t\t}, {\n\t\t\t\t\tname: 'zoom',\n\t\t\t\t\tvalue: 3\n\t\t\t\t}, {\n\t\t\t\t\tname: 'center',\n\t\t\t\t\tvalue: { lat: 17, lng: -17 }\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t/**\n\t\t * Enable Google Map Places Api Search\n\t\t * @type {Boolean}\n\t\t */\n\t\tmapSearchPlaces: {\n\t\t\tdefault: false,\n\t\t},\n\t\t/**\n\t\t * Width for sidepanel slot element\n\t\t * @type {String}\n\t\t */\n\t\tsidepanelWidth: {\n\t\t\tdefault: '400px'\n\t\t},\n\t\t/**\n\t\t * Slyle for slot elements\n\t\t * @type {JSON}\n\t\t */\n\t\tslotStyles: {\n\t\t\tdefault: {}\n\t\t}\n\t},\n\tactionHandlers,\n\tdispatches: {\n\t\t/**\n\t\t * Dispatched when the user focuses on the button thing.\n\t\t * @type {{ count: number }}\n\t\t */\n\t},\n\tslots: {\n\t\t/**\n\t\t * Different availabel slots on map to add any external components to intract with map\n\t\t */\n\t\tside_panel: {},\n\t\tcenter: {},\n\t\ttop_left: {},\n\t\ttop_center: {},\n\t\ttop_right: {},\n\t\tright_top: {},\n\t\tright_center: {},\n\t\tright_bottom: {},\n\t\tbottom_right: {},\n\t\tbottom_center: {},\n\t\tbottom_left: {},\n\t\tleft_bottom: {},\n\t\tleft_center: {},\n\t\tleft_top: {}\n\t}\n});\n","\n        var result = require(\"!!../../../../../../../../node_modules/css-loader/index.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./sn-fam-map.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".container{display:flex;position:relative;height:100%!important;width:100%!important}.container .side-section{position:relative;display:inline-block;height:100%;width:auto;z-index:2000}.container .side-section fam-map-sidepanel{display:flex;height:100%}.container .side-section .sidepanel{position:relative;z-index:900;height:100%}.container .side-section .sidepanel slot{height:100%}.container .map-section{position:relative;display:flex;flex-grow:1;height:100%!important}.container .map-section .widget{position:absolute;z-index:100}.container .map-section .widget.center{top:50%;left:50%;transform:translate(-50%,-50%)}.container .map-section .widget.top-left{top:1rem}:host(:not([dir=rtl])) .container .map-section .widget.top-left,:root:not([dir=rtl]) .container .map-section .widget.top-left{left:1rem}:host([dir=rtl]) .container .map-section .widget.top-left,:root[dir=rtl] .container .map-section .widget.top-left{right:1rem}.container .map-section .widget.top-center{left:50%;top:1rem;transform:translate(-50%)}.container .map-section .widget.top-right{top:1rem}:host(:not([dir=rtl])) .container .map-section .widget.top-right,:root:not([dir=rtl]) .container .map-section .widget.top-right{right:1rem}:host([dir=rtl]) .container .map-section .widget.top-right,:root[dir=rtl] .container .map-section .widget.top-right{left:1rem}.container .map-section .widget.right-top{top:10%}:host(:not([dir=rtl])) .container .map-section .widget.right-top,:root:not([dir=rtl]) .container .map-section .widget.right-top{right:1rem}:host([dir=rtl]) .container .map-section .widget.right-top,:root[dir=rtl] .container .map-section .widget.right-top{left:1rem}.container .map-section .widget.right-center{top:50%;transform:translateY(-50%)}:host(:not([dir=rtl])) .container .map-section .widget.right-center,:root:not([dir=rtl]) .container .map-section .widget.right-center{right:1rem}:host([dir=rtl]) .container .map-section .widget.right-center,:root[dir=rtl] .container .map-section .widget.right-center{left:1rem}.container .map-section .widget.right-bottom{bottom:10%}:host(:not([dir=rtl])) .container .map-section .widget.right-bottom,:root:not([dir=rtl]) .container .map-section .widget.right-bottom{right:1rem}:host([dir=rtl]) .container .map-section .widget.right-bottom,:root[dir=rtl] .container .map-section .widget.right-bottom{left:1rem}.container .map-section .widget.bottom-right{bottom:1rem}:host(:not([dir=rtl])) .container .map-section .widget.bottom-right,:root:not([dir=rtl]) .container .map-section .widget.bottom-right{right:1rem}:host([dir=rtl]) .container .map-section .widget.bottom-right,:root[dir=rtl] .container .map-section .widget.bottom-right{left:1rem}.container .map-section .widget.bottom-center{left:50%;bottom:1rem;transform:translate(-50%)}.container .map-section .widget.bottom-left{bottom:1rem}:host(:not([dir=rtl])) .container .map-section .widget.bottom-left,:root:not([dir=rtl]) .container .map-section .widget.bottom-left{left:1rem}:host([dir=rtl]) .container .map-section .widget.bottom-left,:root[dir=rtl] .container .map-section .widget.bottom-left{right:1rem}.container .map-section .widget.left-bottom{bottom:10%}:host(:not([dir=rtl])) .container .map-section .widget.left-bottom,:root:not([dir=rtl]) .container .map-section .widget.left-bottom{left:1rem}:host([dir=rtl]) .container .map-section .widget.left-bottom,:root[dir=rtl] .container .map-section .widget.left-bottom{right:1rem}.container .map-section .widget.left-center{top:50%;transform:translateY(-50%)}:host(:not([dir=rtl])) .container .map-section .widget.left-center,:root:not([dir=rtl]) .container .map-section .widget.left-center{left:1rem}:host([dir=rtl]) .container .map-section .widget.left-center,:root[dir=rtl] .container .map-section .widget.left-center{right:1rem}.container .map-section .widget.left-top{top:10%}:host(:not([dir=rtl])) .container .map-section .widget.left-top,:root:not([dir=rtl]) .container .map-section .widget.left-top{left:1rem}:host([dir=rtl]) .container .map-section .widget.left-top,:root[dir=rtl] .container .map-section .widget.left-top{right:1rem}.container .map-section .google-map{width:100%}.marker-list-item{display:flex;justify-content:space-between;padding:1em}.marker-list-item .field{width:40%}.marker-list-item .field .field-label{color:#637274;font-size:14px;letter-spacing:0;line-height:15px}.marker-list-item .field .field-value{color:#161b1c;font-size:14px;letter-spacing:0;line-height:15px}\", \"\"]);\n\n// exports\n","import './components';\nimport '@servicenow/now-icon';\nimport { SidePanel } from './templates/sidePanel';\nimport { WidgetSlots } from './templates/widgetSlots';\nimport { ClusterModal } from './templates/clusterModal';\n\nexport default (state, { updateState }) => {\n    const { layerData, updatedShape, selectedMarker, searchResults } = state;\n    return (\n        <div className=\"container\">\n            <fam-map-dataprovider component-id=\"fam-map-dataprovider\" layers={layerData} shape={updatedShape} marker={selectedMarker} searchResults={searchResults} />\n            <div className=\"side-section\">\n                <SidePanel state={state} updateState={updateState} />\n            </div>\n            <div className=\"map-section\">\n                <WidgetSlots state={state} updateState={updateState} />\n                <ClusterModal state={state} />\n                <div className=\"google-map\">\n                    <fam-map-google mapElementRef={state.mapElementRef} />\n                </div>\n            </div>\n        </div>\n    );\n};","import './fam-map-google';\nimport './fam-map-dataprovider';\nimport './fam-map-sidepanel';\nimport './fam-map-markeroverlay';\nimport './fam-map-clusteroverlay';","import './fam-map-google';","import { createCustomElement } from '@seismic/core';\nimport snabbdom from '@seismic/snabbdom-renderer';\nimport style from './fam-map-google.scss';\n\nexport const view = ({ properties: { mapElementRef } }) => {\n  return <div className=\"map-container\" ref={mapElementRef}></div>\n};\n\ncreateCustomElement('fam-map-google', {\n  renderer: {\n    type: snabbdom,\n    view\n  },\n  properties: {\n    mapElementRef: {\n      default: null\n    },\n  },\n  styles: style\n});","\n        var result = require(\"!!../../../../../../../../../../node_modules/css-loader/index.js!../../../../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./fam-map-google.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".map-container{height:100%;width:100%;margin:0;padding:0}.map-container .cluster-html{z-index:1000;width:-moz-fit-content;width:fit-content}.map-container .cluster-html .badge{position:absolute;top:-12px;left:18px;background-color:RGB(var(--now-color_alert--info-2,14,120,196));padding:2px 4px;text-align:center;z-index:600;color:#fff;font-size:.75rem}.map-container .html-marker{position:relative;z-index:100;cursor:pointer;display:flex;width:100%}.map-container .html-marker .bounce{animation-name:bounce-marker;animation-timing-function:linear}.map-container .html-marker .circle{border-radius:50%;border:2px solid #fff}.map-container .html-marker .square{border:none}.map-container .html-marker .pointer{border:solid 1px RGB(var(--now-color_brand--primary,var(--now-color--brand-1,41,62,64)));border-radius:5px}.map-container .html-marker .pointer .html-marker-tail{position:absolute;left:5px;bottom:-14px;width:0;height:0;border:7px solid transparent;border-top-color:RGB(var(--now-color_brand--primary,var(--now-color--brand-1,41,62,64)));cursor:pointer}.map-container .html-marker .focus-popup{position:absolute;height:26px;color:#fff;border:2px solid #fff;border-radius:12px;display:flex;align-items:center;width:26px;opacity:0;overflow:hidden;will-change:auto}.map-container .html-marker .focus-popup span{padding:0 .75rem 0 .25rem;color:#000}.map-container .html-marker .focus-popup now-icon{padding:.25rem}.map-container .html-marker .focus-popup.-critical.-primary{background-color:RGB(var(--now-color_alert--critical-2,200,60,54))}.map-container .html-marker .focus-popup.-critical.-secondary{background-color:RGB(var(--now-color_alert--critical-1,221,133,129))}.map-container .html-marker .focus-popup.-critical.-tertiary{background-color:RGB(var(--now-color_alert--critical-0,241,206,205));color:RGB(var(--now-color_alert--critical-2,200,60,54))}.map-container .html-marker .focus-popup.-high.-primary{background-color:RGB(var(--now-color_alert--high-4,144,89,9))}.map-container .html-marker .focus-popup.-high.-secondary{background-color:RGB(var(--now-color_alert--high-1,233,184,111))}.map-container .html-marker .focus-popup.-high.-tertiary{background-color:RGB(var(--now-color_alert--high-0,245,222,189));color:RGB(var(--now-color_alert--high-2,221,145,34))}.map-container .html-marker .focus-popup.-warning.-primary{background-color:RGB(var(--now-color_alert--warning-4,128,120,0))}.map-container .html-marker .focus-popup.-warning.-secondary{background-color:RGB(var(--now-color_alert--warning-1,226,216,89))}.map-container .html-marker .focus-popup.-warning.-tertiary{background-color:RGB(var(--now-color_alert--warning-0,242,237,179))}.map-container .html-marker .focus-popup.-moderate.-primary{background-color:RGB(var(--now-color_alert--moderate-2,84,86,207))}.map-container .html-marker .focus-popup.-moderate.-secondary{background-color:RGB(var(--now-color_alert--moderate-1,148,149,225))}.map-container .html-marker .focus-popup.-moderate.-tertiary{background-color:RGB(var(--now-color_alert--moderate-0,212,213,243));color:RGB(var(--now-color_alert--moderate-2,84,86,207))}.map-container .html-marker .focus-popup.-positive.-primary{background-color:RGB(var(--now-color_alert--positive-2,37,131,43))}.map-container .html-marker .focus-popup.-positive.-secondary{background-color:RGB(var(--now-color_alert--positive-1,119,178,123))}.map-container .html-marker .focus-popup.-positive.-tertiary{background-color:RGB(var(--now-color_alert--positive-0,201,224,202))}.map-container .html-marker .focus-popup.-info.-primary{background-color:RGB(var(--now-color_alert--info-2,14,120,196))}.map-container .html-marker .focus-popup.-info.-secondary{background-color:RGB(var(--now-color_alert--info-1,104,171,218))}.map-container .html-marker .focus-popup.-info.-tertiary{background-color:RGB(var(--now-color_alert--info-0,195,221,240));color:RGB(var(--now-color_alert--info-2,14,120,196))}.map-container .html-marker .focus-popup.-low.-primary{background-color:RGB(var(--now-color_alert--low-2,102,102,102))}.map-container .html-marker .focus-popup.-low.-secondary{background-color:RGB(var(--now-color_alert--low-1,159,159,159))}.map-container .html-marker .focus-popup.-low.-tertiary{background-color:RGB(var(--now-color_alert--low-0,217,217,217));color:RGB(var(--now-color_alert--low-2,102,102,102))}.map-container .html-marker .focus-popup.-magenta.-primary{background-color:RGB(var(--now-color_grouped--magenta-4,142,85,135))}.map-container .html-marker .focus-popup.-magenta.-secondary{background-color:RGB(var(--now-color_grouped--magenta-1,221,168,215))}.map-container .html-marker .focus-popup.-magenta.-tertiary{background-color:RGB(var(--now-color_grouped--magenta-0,239,215,236))}.map-container .html-marker .focus-popup.-pink.-primary{background-color:RGB(var(--now-color_grouped--pink-4,142,85,100))}.map-container .html-marker .focus-popup.-pink.-secondary{background-color:RGB(var(--now-color_grouped--pink-1,221,168,182))}.map-container .html-marker .focus-popup.-pink.-tertiary{background-color:RGB(var(--now-color_grouped--pink-0,239,215,221))}.map-container .html-marker .focus-popup.-orange.-primary{background-color:RGB(var(--now-color_grouped--orange-4,151,90,74))}.map-container .html-marker .focus-popup.-orange.-secondary{background-color:RGB(var(--now-color_grouped--orange-1,229,173,158))}.map-container .html-marker .focus-popup.-orange.-tertiary{background-color:RGB(var(--now-color_grouped--orange-0,243,217,210))}.map-container .html-marker .focus-popup.-yellow.-primary{background-color:RGB(var(--now-color_grouped--yellow-4,168,145,71))}.map-container .html-marker .focus-popup.-yellow.-secondary{background-color:RGB(var(--now-color_grouped--yellow-1,245,224,155))}.map-container .html-marker .focus-popup.-yellow.-tertiary{background-color:RGB(var(--now-color_grouped--yellow-0,251,241,209))}.map-container .html-marker .focus-popup.-brown.-primary{background-color:RGB(var(--now-color_grouped--brown-4,109,97,83))}.map-container .html-marker .focus-popup.-brown.-secondary{background-color:RGB(var(--now-color_grouped--brown-1,191,179,167))}.map-container .html-marker .focus-popup.-brown.-tertiary{background-color:RGB(var(--now-color_grouped--brown-0,225,220,214))}.map-container .html-marker .focus-popup.-green.-primary{background-color:RGB(var(--now-color_grouped--green-4,103,119,88))}.map-container .html-marker .focus-popup.-green.-secondary{background-color:RGB(var(--now-color_grouped--green-1,185,200,171))}.map-container .html-marker .focus-popup.-green.-tertiary{background-color:RGB(var(--now-color_grouped--green-0,223,230,216))}.map-container .html-marker .focus-popup.-green-yellow.-primary{background-color:RGB(var(--now-color_grouped--green-yellow-4,108,121,66))}.map-container .html-marker .focus-popup.-green-yellow.-secondary{background-color:RGB(var(--now-color_grouped--green-yellow-1,189,202,150))}.map-container .html-marker .focus-popup.-green-yellow.-tertiary{background-color:RGB(var(--now-color_grouped--green-yellow-0,225,230,207))}.map-container .html-marker .focus-popup.-blue.-primary{background-color:RGB(var(--now-color_grouped--blue-4,84,123,143))}.map-container .html-marker .focus-popup.-blue.-secondary{background-color:RGB(var(--now-color_grouped--blue-1,167,204,222))}.map-container .html-marker .focus-popup.-blue.-tertiary{background-color:RGB(var(--now-color_grouped--blue-0,215,231,240))}.map-container .html-marker .focus-popup.-gray.-primary{background-color:RGB(var(--now-color_grouped--gray-4,97,102,105))}.map-container .html-marker .focus-popup.-gray.-secondary{background-color:RGB(var(--now-color_grouped--gray-1,180,184,187))}.map-container .html-marker .focus-popup.-gray.-tertiary{background-color:RGB(var(--now-color_grouped--gray-0,220,222,224))}.map-container .html-marker .focus-popup.-teal.-primary{background-color:RGB(var(--now-color_grouped--teal-4,73,122,114))}.map-container .html-marker .focus-popup.-teal.-secondary{background-color:RGB(var(--now-color_grouped--teal-1,157,202,195))}.map-container .html-marker .focus-popup.-teal.-tertiary{background-color:RGB(var(--now-color_grouped--teal-0,210,231,227))}.map-container .html-marker .focus-popup.-purple.-primary{background-color:RGB(var(--now-color_grouped--purple-4,127,109,146))}.map-container .html-marker .focus-popup.-purple.-secondary{background-color:RGB(var(--now-color_grouped--purple-1,207,190,225))}.map-container .html-marker .focus-popup.-purple.-tertiary{background-color:RGB(var(--now-color_grouped--purple-0,233,225,241))}.map-container .html-marker .focus-popup-hover,.map-container .html-marker .focus-popup:hover,.map-container .html-marker .mark:hover~.focus-popup{opacity:1;width:max-content}.map-container .html-marker .mark.circle{width:26px;height:26px}.map-container .html-marker .mark{display:flex;background-color:RGB(var(--now-color_brand--primary,var(--now-color--brand-1,41,62,64)));color:#fff;box-sizing:border-box;cursor:pointer;width:24px;height:24px;align-self:flex-end;animation-duration:2s;animation-iteration-count:infinite;margin:0 auto 0 auto;transform-origin:bottom}.map-container .html-marker .mark now-icon{margin:auto}.map-container .html-marker .mark now-popover{margin-top:.25rem}.map-container .html-marker .mark.alert-triangle-icon now-icon{margin-left:.35rem;margin-bottom:.35rem}.map-container .html-marker .mark.-critical.-primary{background-color:RGB(var(--now-color_alert--critical-2,200,60,54))}.map-container .html-marker .mark.-critical.-secondary{background-color:RGB(var(--now-color_alert--critical-1,221,133,129))}.map-container .html-marker .mark.-critical.-tertiary{background-color:RGB(var(--now-color_alert--critical-0,241,206,205));color:RGB(var(--now-color_alert--critical-2,200,60,54))}.map-container .html-marker .mark.-critical.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-critical.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_alert--critical-2,200,60,54))}.map-container .html-marker .mark.-high.-primary{background-color:RGB(var(--now-color_alert--high-4,144,89,9))}.map-container .html-marker .mark.-high.-secondary{background-color:RGB(var(--now-color_alert--high-1,233,184,111))}.map-container .html-marker .mark.-high.-tertiary{background-color:RGB(var(--now-color_alert--high-0,245,222,189));color:RGB(var(--now-color_alert--high-2,221,145,34))}.map-container .html-marker .mark.-high.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-high.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_alert--high-2,221,145,34))}.map-container .html-marker .mark.-warning.-primary{background-color:RGB(var(--now-color_alert--warning-4,128,120,0))}.map-container .html-marker .mark.-warning.-secondary{background-color:RGB(var(--now-color_alert--warning-1,226,216,89))}.map-container .html-marker .mark.-warning.-tertiary{background-color:RGB(var(--now-color_alert--warning-0,242,237,179))}.map-container .html-marker .mark.-warning.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-warning.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_alert--warning-2,210,195,0))}.map-container .html-marker .mark.-moderate.-primary{background-color:RGB(var(--now-color_alert--moderate-2,84,86,207))}.map-container .html-marker .mark.-moderate.-secondary{background-color:RGB(var(--now-color_alert--moderate-1,148,149,225))}.map-container .html-marker .mark.-moderate.-tertiary{background-color:RGB(var(--now-color_alert--moderate-0,212,213,243));color:RGB(var(--now-color_alert--moderate-2,84,86,207))}.map-container .html-marker .mark.-moderate.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-moderate.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_alert--moderate-2,84,86,207))}.map-container .html-marker .mark.-positive.-primary{background-color:RGB(var(--now-color_alert--positive-2,37,131,43))}.map-container .html-marker .mark.-positive.-secondary{background-color:RGB(var(--now-color_alert--positive-1,119,178,123))}.map-container .html-marker .mark.-positive.-tertiary{background-color:RGB(var(--now-color_alert--positive-0,201,224,202))}.map-container .html-marker .mark.-positive.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-positive.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_alert--positive-2,37,131,43))}.map-container .html-marker .mark.-info.-primary{background-color:RGB(var(--now-color_alert--info-2,14,120,196))}.map-container .html-marker .mark.-info.-secondary{background-color:RGB(var(--now-color_alert--info-1,104,171,218))}.map-container .html-marker .mark.-info.-tertiary{background-color:RGB(var(--now-color_alert--info-0,195,221,240));color:RGB(var(--now-color_alert--info-2,14,120,196))}.map-container .html-marker .mark.-info.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-info.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_alert--info-2,14,120,196))}.map-container .html-marker .mark.-low.-primary{background-color:RGB(var(--now-color_alert--low-2,102,102,102))}.map-container .html-marker .mark.-low.-secondary{background-color:RGB(var(--now-color_alert--low-1,159,159,159))}.map-container .html-marker .mark.-low.-tertiary{background-color:RGB(var(--now-color_alert--low-0,217,217,217));color:RGB(var(--now-color_alert--low-2,102,102,102))}.map-container .html-marker .mark.-low.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-low.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_alert--low-2,102,102,102))}.map-container .html-marker .mark.-magenta.-primary{background-color:RGB(var(--now-color_grouped--magenta-4,142,85,135))}.map-container .html-marker .mark.-magenta.-secondary{background-color:RGB(var(--now-color_grouped--magenta-1,221,168,215))}.map-container .html-marker .mark.-magenta.-tertiary{background-color:RGB(var(--now-color_grouped--magenta-0,239,215,236))}.map-container .html-marker .mark.-magenta.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-magenta.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_grouped--magenta-2,203,121,193))}.map-container .html-marker .mark.-pink.-primary{background-color:RGB(var(--now-color_grouped--pink-4,142,85,100))}.map-container .html-marker .mark.-pink.-secondary{background-color:RGB(var(--now-color_grouped--pink-1,221,168,182))}.map-container .html-marker .mark.-pink.-tertiary{background-color:RGB(var(--now-color_grouped--pink-0,239,215,221))}.map-container .html-marker .mark.-pink.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-pink.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_grouped--pink-2,203,121,143))}.map-container .html-marker .mark.-orange.-primary{background-color:RGB(var(--now-color_grouped--orange-4,151,90,74))}.map-container .html-marker .mark.-orange.-secondary{background-color:RGB(var(--now-color_grouped--orange-1,229,173,158))}.map-container .html-marker .mark.-orange.-tertiary{background-color:RGB(var(--now-color_grouped--orange-0,243,217,210))}.map-container .html-marker .mark.-orange.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-orange.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_grouped--orange-2,215,129,106))}.map-container .html-marker .mark.-yellow.-primary{background-color:RGB(var(--now-color_grouped--yellow-4,168,145,71))}.map-container .html-marker .mark.-yellow.-secondary{background-color:RGB(var(--now-color_grouped--yellow-1,245,224,155))}.map-container .html-marker .mark.-yellow.-tertiary{background-color:RGB(var(--now-color_grouped--yellow-0,251,241,209))}.map-container .html-marker .mark.-yellow.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-yellow.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_grouped--yellow-2,240,207,101))}.map-container .html-marker .mark.-brown.-primary{background-color:RGB(var(--now-color_grouped--brown-4,109,97,83))}.map-container .html-marker .mark.-brown.-secondary{background-color:RGB(var(--now-color_grouped--brown-1,191,179,167))}.map-container .html-marker .mark.-brown.-tertiary{background-color:RGB(var(--now-color_grouped--brown-0,225,220,214))}.map-container .html-marker .mark.-brown.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-brown.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_grouped--brown-2,156,138,119))}.map-container .html-marker .mark.-green.-primary{background-color:RGB(var(--now-color_grouped--green-4,103,119,88))}.map-container .html-marker .mark.-green.-secondary{background-color:RGB(var(--now-color_grouped--green-1,185,200,171))}.map-container .html-marker .mark.-green.-tertiary{background-color:RGB(var(--now-color_grouped--green-0,223,230,216))}.map-container .html-marker .mark.-green.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-green.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_grouped--green-2,147,170,125))}.map-container .html-marker .mark.-green-yellow.-primary{background-color:RGB(var(--now-color_grouped--green-yellow-4,108,121,66))}.map-container .html-marker .mark.-green-yellow.-secondary{background-color:RGB(var(--now-color_grouped--green-yellow-1,189,202,150))}.map-container .html-marker .mark.-green-yellow.-tertiary{background-color:RGB(var(--now-color_grouped--green-yellow-0,225,230,207))}.map-container .html-marker .mark.-green-yellow.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-green-yellow.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_grouped--green-yellow-2,154,173,94))}.map-container .html-marker .mark.-blue.-primary{background-color:RGB(var(--now-color_grouped--blue-4,84,123,143))}.map-container .html-marker .mark.-blue.-secondary{background-color:RGB(var(--now-color_grouped--blue-1,167,204,222))}.map-container .html-marker .mark.-blue.-tertiary{background-color:RGB(var(--now-color_grouped--blue-0,215,231,240))}.map-container .html-marker .mark.-blue.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-blue.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_grouped--blue-2,120,176,204))}.map-container .html-marker .mark.-gray.-primary{background-color:RGB(var(--now-color_grouped--gray-4,97,102,105))}.map-container .html-marker .mark.-gray.-secondary{background-color:RGB(var(--now-color_grouped--gray-1,180,184,187))}.map-container .html-marker .mark.-gray.-tertiary{background-color:RGB(var(--now-color_grouped--gray-0,220,222,224))}.map-container .html-marker .mark.-gray.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-gray.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_grouped--gray-2,139,145,150))}.map-container .html-marker .mark.-teal.-primary{background-color:RGB(var(--now-color_grouped--teal-4,73,122,114))}.map-container .html-marker .mark.-teal.-secondary{background-color:RGB(var(--now-color_grouped--teal-1,157,202,195))}.map-container .html-marker .mark.-teal.-tertiary{background-color:RGB(var(--now-color_grouped--teal-0,210,231,227))}.map-container .html-marker .mark.-teal.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-teal.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_grouped--teal-2,104,174,163))}.map-container .html-marker .mark.-purple.-primary{background-color:RGB(var(--now-color_grouped--purple-4,127,109,146))}.map-container .html-marker .mark.-purple.-secondary{background-color:RGB(var(--now-color_grouped--purple-1,207,190,225))}.map-container .html-marker .mark.-purple.-tertiary{background-color:RGB(var(--now-color_grouped--purple-0,233,225,241))}.map-container .html-marker .mark.-purple.-tertiary.cluster-circle:hover,.map-container .html-marker .mark.-purple.-tertiary.focus-cluster-hover{box-shadow:0 0 20px 10px RGB(var(--now-color_grouped--purple-2,181,155,209))}@keyframes bounce-marker{0%{transform:translateY(0)}50%{transform:translateY(-30px)}to{transform:translateY(0)}}\", \"\"]);\n\n// exports\n","import './fam-map-dataprovider';\n","import { createCustomElement } from '@servicenow/ui-core';\n\ncreateCustomElement('fam-map-dataprovider', {\n  properties: {\n    layers: {\n      default: {},\n      selectable: true\n    },\n    marker: {\n      default: {},\n      selectable: true\n    },\n    shape: {\n      default: {},\n      selectable: true\n    },\n    searchResults: {\n      default: {},\n      selectable: true\n    }\n  }\n});","import './fam-map-sidepanel';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport style from './fam-map-sidepanel.scss';\nimport '@servicenow/now-icon';\nimport { t } from 'sn-translate';\nimport { outActions } from  '../../constants';\nimport rtlBehavior from '@servicenow/behavior-rtl';\n\nexport const view = (state, { updateState, dispatch }) => {\n  const { visible, properties: { slotted, width, dir } } = state;\n  return (\n    <div className=\"side-panel\">\n      <div className=\"content\" style={{ 'width': visible && slotted ? \"0px\" : width }}>\n        <slot name=\"content\" />\n      </div>\n      {slotted ? \n        <div className=\"toggle\" \n          tabindex=\"2\" \n          on-click={() => {\n            updateState({ visible: !visible }); \n            dispatch(outActions.SIDE_PANEL_OPENED, { value: !visible });\n          }} \n          on-keyup={(e) => { \n            if(e.keyCode == 13)\n              updateState({ visible: !visible });\n              dispatch(outActions.SIDE_PANEL_OPENED, { value: !visible });\n            }}\n            aria-label={visible && slotted ? t('Expand side panel') : t('Collapse side panel')}\n          >\n        <div className=\"t-icon\">\n          {visible ? <now-icon icon={dir == \"rtl\" ? \"caret-left-fill\": \"caret-right-fill\"} size=\"md\"></now-icon> : <now-icon icon={dir == \"rtl\" ? \"caret-right-fill\": \"caret-left-fill\"} size=\"md\"></now-icon>}\n        </div>\n      </div> : <div></div>}\n    </div>\n  )\n};\n\ncreateCustomElement('fam-map-sidepanel', {\n  renderer: {\n    type: snabbdom,\n    view\n  },\n  initialState: {\n    visible: false\n  },\n  properties: {\n    slotted: {\n      default: false\n    },\n    width: {\n      default: \"400px\"\n    }\n  },\n  behaviors: [{ behavior: rtlBehavior }],\n  styles: style\n});","\n        var result = require(\"!!../../../../../../../../../../node_modules/css-loader/index.js!../../../../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./fam-map-sidepanel.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host(:not([dir=rtl])) .toggle,:root:not([dir=rtl]) .toggle{border-left:none;right:-15px}:host([dir=rtl]) .toggle,:root[dir=rtl] .toggle{left:-15px;border-right:none}:host(:not([dir=rtl])) .content,:root:not([dir=rtl]) .content{border-right:1px solid RGB(var(--now-color--neutral-4,191,197,198))}:host([dir=rtl]) .content,:root[dir=rtl] .content{border-left:1px solid RGB(var(--now-color--neutral-4,191,197,198))}.side-panel{position:relative;display:inline-block;width:auto;height:100%;z-index:1000}.side-panel .toggle{display:inline-block;position:absolute;height:40px;z-index:200;background-color:RGB(var(--now-color--neutral-0,255,255,255));cursor:pointer;border:.5px solid RGB(var(--now-color--neutral-4,191,197,198))}.side-panel .toggle .t-icon{position:relative;background-color:RGB(var(--now-color--neutral-21,0,0,0));width:14px}.side-panel .toggle .t-icon now-icon{margin-top:11px;position:absolute;margin-left:-2px}.side-panel .content{position:relative;display:block;width:0;transition:.5s;background-color:RGB(var(--now-color--neutral-0,255,255,255));overflow-y:auto;overflow-x:hidden;display:inline-block;height:100%;will-change:width}.side-panel .toggle:focus{box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;border-radius:0;outline:none;border:1px RGB(var(--now-color--primary-1,30,133,109)) solid}\", \"\"]);\n\n// exports\n","import './fam-map-markeroverlay';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport { nowActions } from '../../constants';\nimport styles from './fam-map-markeroverlay.scss';\nimport view from './view';\n\nexport const actionHandlers = {\n  [nowActions.TEXT_LINK_CLICKED]: ({ action: { payload: { record } }, dispatch }) => {\n    var i = record;\n    if (typeof i == 'object')\n      i = i.record;\n\n    switch (i) {\n      case \"overlaylink\":\n        dispatch(nowActions.PREVIEW_RECORD , { table: i.table, sys_id: i.sysid })\n        break;\n    }\n  }\n};\n\ncreateCustomElement('fam-map-markeroverlay', {\n  renderer: {\n    type: snabbdom,\n    view\n  },\n  properties: {\n    layerData: {\n      default: {}\n    },\n    record: {\n      default: null\n    },\n    layer: {\n      default: null\n    },\n    collection: {\n      default: null\n    }\n  },\n  styles,\n  actionHandlers\n});","\n        var result = require(\"!!../../../../../../../../../../node_modules/css-loader/index.js!../../../../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./fam-map-markeroverlay.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}.now-a11y-label{position:absolute;overflow:hidden;width:1px;height:auto;margin:0;border:none;padding:0;white-space:nowrap;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%)}.now-align{display:flex}.now-align.-row.-reverse{flex-direction:row-reverse}.now-align.-column{flex-direction:column}.now-align.-column.-reverse{flex-direction:column-reverse}.now-align.-wrap{flex-wrap:wrap}.now-align.-inline{justify-content:space-between}.now-align.-inline-center{justify-content:center}.now-align.-inline-end{justify-content:flex-end}.now-align.-block-start{align-items:flex-start}.now-align.-block-center{align-items:center}.now-align.-block-end{align-items:flex-end}.now-m-block--xxs{margin-block-end:.125rem}.now-m-block--xxs,.now-m-block-start--xxs{margin-block-start:.125rem}.now-m-block-end--xxs{margin-block-end:.125rem}.now-m-inline--xxs{margin-inline-end:.125rem}.now-m-inline--xxs,.now-m-inline-start--xxs{margin-inline-start:.125rem}.now-m-inline-end--xxs{margin-inline-end:.125rem}.now-m-block--xs{margin-block-end:.25rem}.now-m-block--xs,.now-m-block-start--xs{margin-block-start:.25rem}.now-m-block-end--xs{margin-block-end:.25rem}.now-m-inline--xs{margin-inline-end:.25rem}.now-m-inline--xs,.now-m-inline-start--xs{margin-inline-start:.25rem}.now-m-inline-end--xs{margin-inline-end:.25rem}.now-m-block--sm{margin-block-end:.5rem}.now-m-block--sm,.now-m-block-start--sm{margin-block-start:.5rem}.now-m-block-end--sm{margin-block-end:.5rem}.now-m-inline--sm{margin-inline-end:.5rem}.now-m-inline--sm,.now-m-inline-start--sm{margin-inline-start:.5rem}.now-m-inline-end--sm{margin-inline-end:.5rem}.now-m-block--md{margin-block-end:.75rem}.now-m-block--md,.now-m-block-start--md{margin-block-start:.75rem}.now-m-block-end--md{margin-block-end:.75rem}.now-m-inline--md{margin-inline-end:.75rem}.now-m-inline--md,.now-m-inline-start--md{margin-inline-start:.75rem}.now-m-inline-end--md{margin-inline-end:.75rem}.now-m-block--lg{margin-block-end:1rem}.now-m-block--lg,.now-m-block-start--lg{margin-block-start:1rem}.now-m-block-end--lg{margin-block-end:1rem}.now-m-inline--lg{margin-inline-end:1rem}.now-m-inline--lg,.now-m-inline-start--lg{margin-inline-start:1rem}.now-m-inline-end--lg{margin-inline-end:1rem}.now-m-block--xl{margin-block-end:1.5rem}.now-m-block--xl,.now-m-block-start--xl{margin-block-start:1.5rem}.now-m-block-end--xl{margin-block-end:1.5rem}.now-m-inline--xl{margin-inline-end:1.5rem}.now-m-inline--xl,.now-m-inline-start--xl{margin-inline-start:1.5rem}.now-m-inline-end--xl{margin-inline-end:1.5rem}.now-m-block--xxl{margin-block-end:2rem}.now-m-block--xxl,.now-m-block-start--xxl{margin-block-start:2rem}.now-m-block-end--xxl{margin-block-end:2rem}.now-m-inline--xxl{margin-inline-end:2rem}.now-m-inline--xxl,.now-m-inline-start--xxl{margin-inline-start:2rem}.now-m-inline-end--xxl{margin-inline-end:2rem}.now-m-block--3xl{margin-block-end:2.5rem}.now-m-block--3xl,.now-m-block-start--3xl{margin-block-start:2.5rem}.now-m-block-end--3xl{margin-block-end:2.5rem}.now-m-inline--3xl{margin-inline-end:2.5rem}.now-m-inline--3xl,.now-m-inline-start--3xl{margin-inline-start:2.5rem}.now-m-inline-end--3xl{margin-inline-end:2.5rem}.now-m-block--0{margin-block-end:0}.now-m-block--0,.now-m-block-start--0{margin-block-start:0}.now-m-block-end--0{margin-block-end:0}.now-m-inline--0{margin-inline-end:0}.now-m-inline--0,.now-m-inline-start--0{margin-inline-start:0}.now-m-inline-end--0{margin-inline-end:0}.now-p-block--xxs{padding-block-end:.125rem}.now-p-block--xxs,.now-p-block-start--xxs{padding-block-start:.125rem}.now-p-block-end--xxs{padding-block-end:.125rem}.now-p-inline--xxs{padding-inline-end:.125rem}.now-p-inline--xxs,.now-p-inline-start--xxs{padding-inline-start:.125rem}.now-p-inline-end--xxs{padding-inline-end:.125rem}.now-p-block--xs{padding-block-end:.25rem}.now-p-block--xs,.now-p-block-start--xs{padding-block-start:.25rem}.now-p-block-end--xs{padding-block-end:.25rem}.now-p-inline--xs{padding-inline-end:.25rem}.now-p-inline--xs,.now-p-inline-start--xs{padding-inline-start:.25rem}.now-p-inline-end--xs{padding-inline-end:.25rem}.now-p-block--sm{padding-block-end:.5rem}.now-p-block--sm,.now-p-block-start--sm{padding-block-start:.5rem}.now-p-block-end--sm{padding-block-end:.5rem}.now-p-inline--sm{padding-inline-end:.5rem}.now-p-inline--sm,.now-p-inline-start--sm{padding-inline-start:.5rem}.now-p-inline-end--sm{padding-inline-end:.5rem}.now-p-block--md{padding-block-end:.75rem}.now-p-block--md,.now-p-block-start--md{padding-block-start:.75rem}.now-p-block-end--md{padding-block-end:.75rem}.now-p-inline--md{padding-inline-end:.75rem}.now-p-inline--md,.now-p-inline-start--md{padding-inline-start:.75rem}.now-p-inline-end--md{padding-inline-end:.75rem}.now-p-block--lg{padding-block-end:1rem}.now-p-block--lg,.now-p-block-start--lg{padding-block-start:1rem}.now-p-block-end--lg{padding-block-end:1rem}.now-p-inline--lg{padding-inline-end:1rem}.now-p-inline--lg,.now-p-inline-start--lg{padding-inline-start:1rem}.now-p-inline-end--lg{padding-inline-end:1rem}.now-p-block--xl{padding-block-end:1.5rem}.now-p-block--xl,.now-p-block-start--xl{padding-block-start:1.5rem}.now-p-block-end--xl{padding-block-end:1.5rem}.now-p-inline--xl{padding-inline-end:1.5rem}.now-p-inline--xl,.now-p-inline-start--xl{padding-inline-start:1.5rem}.now-p-inline-end--xl{padding-inline-end:1.5rem}.now-p-block--xxl{padding-block-end:2rem}.now-p-block--xxl,.now-p-block-start--xxl{padding-block-start:2rem}.now-p-block-end--xxl{padding-block-end:2rem}.now-p-inline--xxl{padding-inline-end:2rem}.now-p-inline--xxl,.now-p-inline-start--xxl{padding-inline-start:2rem}.now-p-inline-end--xxl{padding-inline-end:2rem}.now-p-block--3xl{padding-block-end:2.5rem}.now-p-block--3xl,.now-p-block-start--3xl{padding-block-start:2.5rem}.now-p-block-end--3xl{padding-block-end:2.5rem}.now-p-inline--3xl{padding-inline-end:2.5rem}.now-p-inline--3xl,.now-p-inline-start--3xl{padding-inline-start:2.5rem}.now-p-inline-end--3xl{padding-inline-end:2.5rem}.now-p-block--0{padding-block-end:0}.now-p-block--0,.now-p-block-start--0{padding-block-start:0}.now-p-block-end--0{padding-block-end:0}.now-p-inline--0{padding-inline-end:0}.now-p-inline--0,.now-p-inline-start--0{padding-inline-start:0}.now-p-inline-end--0{padding-inline-end:0}.now-line-height-crop:after,.now-line-height-crop:before{content:\\\"\\\";display:block;height:0}.now-line-height-crop:before{margin-block-start:calc(var(--now-line-height-crop--before, -.25em)*1)}.now-line-height-crop:after{margin-block-end:calc(var(--now-line-height-crop--after, -.125em)*1)}.now-line-height-crop+.now-line-height-crop{margin-block-start:calc(var(--now-line-height-crop--after, -.125em)*1*-1)}.now-line-height-crop--sm:after,.now-line-height-crop--sm:before{content:\\\"\\\";display:block;height:0}.now-line-height-crop--sm:before{margin-block-start:calc(var(--now-line-height-crop--before, -.25em)*1.06667)}.now-line-height-crop--sm:after{margin-block-end:calc(var(--now-line-height-crop--after, -.125em)*1.06667)}.now-line-height-crop--sm+.now-line-height-crop--sm{margin-block-start:calc(var(--now-line-height-crop--after, -.125em)*1.06667*-1)}.now-heading--lg,.now-heading--md,.now-heading--xl{font-weight:600;color:RGB(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)))}.now-heading--md{font-size:1rem}.now-heading--lg{font-size:1.25rem}.now-heading--xl{font-size:1.5rem}.now-text--normal{font-weight:400}.now-text--semibold{font-weight:600}.now-text--bold{font-weight:700}.now-text--sm{font-size:.75rem}.now-text--md{font-size:1rem}.now-text--lg{font-size:1.25rem}.now-text--primary{color:RGB(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)))}.now-text--secondary{color:RGB(var(--now-color_text--secondary,var(--now-color--neutral-12,66,80,81)))}.now-text--tertiary{color:RGB(var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)))}:host{position:absolute;display:inline-block;margin-left:-130px;z-index:1000;bottom:56px}.container{width:250px;min-height:75px;background-color:RGB(var(--now-color--neutral-0,255,255,255));padding:1rem;box-shadow:1px 3px 6px RGB(var(--now-color--neutral-5,172,180,181));transition:transform .2s ease-out}.container .title{font-size:1rem;padding-bottom:.75rem}.container .secondary{color:RGB(var(--now-color--neutral-8,117,130,132));font-size:.75rem;padding-top:.125rem}.container .tail{position:absolute;width:0;height:0;border:10px solid transparent;border-top-color:RGB(var(--now-color--neutral-0,255,255,255));bottom:-20px;left:115px}\", \"\"]);\n\n// exports\n","import { convertLatLngToDMS } from '../../util/commonUtil';\nimport { nowActions, keywords } from '../../constants';\nimport '@servicenow/now-button';\n\nexport default (state, { dispatch }) => {\n    const { properties: { layerData, record, layer, collection } } = state;\n\n    if (!layerData || !record || !layer || !collection || !layerData[layer + keywords.RECORD_ID_SEPERATOR + collection])\n        return;\n\n    let rec = null;\n    const layerRef = layerData[layer + keywords.RECORD_ID_SEPERATOR + collection];\n    if (layerRef.markers && layerRef.markers[record])\n        rec = layerRef.markers[record].props;\n    else if (layerRef.clusters.markers_)\n        rec = layerRef.clusters.markers_.find(m => m.props && m.props.id == record).props;\n\n    if (!rec || !rec.title)\n        return;\n\n    return < div className=\"container\" >\n        <div>\n            <div className=\"title\">\n                <now-text-link label={rec.title}\n                    href=\"javascript:void(0)\"\n                    on-click={() => dispatch(nowActions.PREVIEW_RECORD, { table: layerRef.table || rec.table, sys_id: rec.id })}\n                    variant=\"secondary\" configAria={{}}>\n                </now-text-link>\n            </div>\n            <div className=\"loc\">{convertLatLngToDMS(rec.lat, rec.lng)}</div>\n        </div>\n        {rec.fields && rec.fields.map(f =>\n            <div className=\"secondary\">{f.label} : {f.display_value}</div>\n        )}\n        <div className=\"tail\"></div>\n    </div >\n};","export const convertLatLngToDMS = (lat, lng) => {\n    var latitude = toDegreesMinutesAndSeconds(lat);\n    var latitudeCardinal = lat >= 0 ? \"N\" : \"S\";\n\n    var longitude = toDegreesMinutesAndSeconds(lng);\n    var longitudeCardinal = lng >= 0 ? \"E\" : \"W\";\n\n    return latitude + \" \" + latitudeCardinal + \", \" + longitude + \" \" + longitudeCardinal;\n}\n\nconst toDegreesMinutesAndSeconds = (coordinate) => {\n    var absolute = Math.abs(coordinate);\n    var degrees = Math.floor(absolute);\n    var minutesNotTruncated = (absolute - degrees) * 60;\n    var minutes = Math.floor(minutesNotTruncated);\n    var seconds = ((minutesNotTruncated - minutes) * 60).toFixed(3);\n\n    return degrees + \" \" + minutes + \" \" + seconds;\n}\n\nexport const convertToValidJSON = (str) => {\n    var obj = {};\n    if (str && str != \"{}\") {\n        let s = str || '';\n        // preserve newlines, etc - use valid JSON\n        s = s.replace(/\\\\n/g, \"\\\\n\")\n            .replace(/\\\\'/g, \"\\\\'\")\n            .replace(/\\\\\"/g, '\\\\\"')\n            .replace(/\\\\&/g, \"\\\\&\")\n            .replace(/\\\\r/g, \"\\\\r\")\n            .replace(/\\\\t/g, \"\\\\t\")\n            .replace(/\\\\b/g, \"\\\\b\")\n            .replace(/\\\\f/g, \"\\\\f\");\n        // remove non-printable and other non-valid JSON chars\n        s = s.replace(/[\\u0000-\\u0019]+/g, \"\");\n        try {\n            let val = JSON.parse(s);\n            if (val && typeof val == \"object\" && Object.keys(val).length)\n                obj = val;\n        }\n        catch (e) { obj = {};}\n    }\n    return obj;\n}","module.exports = __TECTONIC__$servicenow_now_button;","import './fam-map-clusteroverlay';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport styles from './fam-map-clusteroverlay.scss';\nimport view from './view';\n\n\ncreateCustomElement('fam-map-clusteroverlay', {\n  renderer: {\n    type: snabbdom,\n    view\n  },\n  properties: {\n    layerData: {\n      default: {}\n    },\n    records: {\n      default: []\n    },\n    layer: {\n      default: \"\"\n    },\n    collection: {\n      default: \"\"\n    }\n  },\n  styles\n});","\n        var result = require(\"!!../../../../../../../../../../node_modules/css-loader/index.js!../../../../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./fam-map-clusteroverlay.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".container{min-height:75px;background-color:RGB(var(--now-color--neutral-0,255,255,255));padding:.5rem 1rem 1rem 1rem;box-shadow:1px 3px 6px RGB(var(--now-color--neutral-5,172,180,181));transition:transform .2s ease-out;position:absolute;bottom:0}.container .cluster-detail-container .cluster-detail-overlay{width:400px}.container .cluster-detail-container now-card{margin:.75rem 0}.container .tail{position:absolute;width:0;height:0;border:10px solid transparent;border-top-color:RGB(var(--now-color--neutral-0,255,255,255));bottom:-20px;left:207px}\", \"\"]);\n\n// exports\n","import { t } from 'sn-translate';\nimport '@servicenow/now-card';\nimport { keywords } from '../../constants';\n\nexport default ({ properties: { records, layer, collection, layerData } }, { dispatch }) => {\n    const layerRef = layerData[layer + keywords.RECORD_ID_SEPERATOR + collection];\n    if (!records || !layerRef)\n        return;\n    let recordData = [];\n    layerRef.clusters.markers_ && layerRef.clusters.markers_.map(mark => {\n        if (records.indexOf(mark.props.id) > -1) {\n            recordData.push(mark.props);\n        }\n    });\n    return (\n        recordData && recordData.length ?\n        <div className=\"container\">\n            <div className=\"cluster-detail-container\">\n                <h2>{t(\"Multiple {0}\", layerRef.name)}</h2>\n                <div className=\"cluster-detail-overlay\">\n                    {recordData.map((rec) => {\n                        return (\n                            <div>\n                                <now-card size=\"md\" sidebar={{ color: rec.severity.color, variant: 'secondary' }}\n                                    append-to-payload={{ record: rec.id, type: 'recordClusterCard', layer, collection }} interaction=\"click\">\n                                    <now-card-header heading={{ \"label\": rec.title, \"size\": \"sm\", \"lines\": 1, variant: 'secondary' }}>\n                                        <now-highlighted-value slot=\"metadata\" label={rec.severity.display} color={rec.severity.color} variant=\"tertiary\" icon=\"\"></now-highlighted-value>\n                                    </now-card-header>\n                                </now-card>\n                            </div>\n                        );\n                    })\n                    }\n                </div>\n            </div>\n\n            <div className=\"tail\"></div>\n        </div >\n            : null\n    )\n\n}","module.exports = __TECTONIC__$servicenow_now_card;","export const SidePanel = ({ state, updateState }) => {\n    const slotted = state.slots.length ? state.slots.indexOf('side_panel') != -1 : false;\n    return <fam-map-sidepanel slotted={slotted} width={slotted ? state.properties.sidepanelWidth : 0}> \n        <div slot=\"content\" className=\"sidepanel\" style={{ width: slotted ? state.properties.sidepanelWidth : 0 }}>\n            <slot name=\"side_panel\" on-slotchange={e => { updateState({ path: 'slots', value: 'side_panel', operation: 'push' }) }}></slot>\n        </div>\n    </fam-map-sidepanel>\n}","import { Fragment } from '@servicenow/ui-renderer-snabbdom';\n\nexport const WidgetSlots = ({ state, updateState }) => {\n    return (\n        <Fragment>\n            <div className=\"widget center\" style={{ display: state.slots.length && state.slots.indexOf('center') != -1 ? 'block' : 'none', ...state.properties.slotStyles.center }}>\n                <slot name=\"center\" on-slotchange={() => { updateState({ path: 'slots', value: 'center', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget top-left\" style={{ display: state.slots.length && state.slots.indexOf('top_left') != -1 ? 'block' : 'none', ...state.properties.slotStyles.top_left }}>\n                <slot name=\"top_left\" on-slotchange={() => { updateState({ path: 'slots', value: 'top_left', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget top-center\" style={{ display: state.slots.length && state.slots.indexOf('top_center') != -1 ? 'block' : 'none', ...state.properties.slotStyles.top_center }}>\n                <slot name=\"top_center\" on-slotchange={() => { updateState({ path: 'slots', value: 'top_center', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget top-right\" style={{ display: state.slots.length && state.slots.indexOf('top_right') != -1 ? 'block' : 'none', ...state.properties.slotStyles.top_right }}>\n                <slot name=\"top_right\" on-slotchange={() => { updateState({ path: 'slots', value: 'top_right', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget right-top\" style={{ display: state.slots.length && state.slots.indexOf('right_top') != -1 ? 'block' : 'none', ...state.properties.slotStyles.right_top }}>\n                <slot name=\"right_top\" on-slotchange={() => { updateState({ path: 'slots', value: 'right_top', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget right-center\" style={{ display: state.slots.length && state.slots.indexOf('right_center') != -1 ? 'block' : 'none', ...state.properties.slotStyles.right_center }}>\n                <slot name=\"right_center\" on-slotchange={() => { updateState({ path: 'slots', value: 'right_center', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget right-bottom\" style={{ display: state.slots.length && state.slots.indexOf('right_bottom') != -1 ? 'block' : 'none', ...state.properties.slotStyles.right_bottom }}>\n                <slot name=\"right_bottom\" on-slotchange={() => { updateState({ path: 'slots', value: 'right_bottom', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget bottom-right\" style={{ display: state.slots.length && state.slots.indexOf('bottom_right') != -1 ? 'block' : 'none', ...state.properties.slotStyles.bottom_right }}>\n                <slot name=\"bottom_right\" on-slotchange={() => { updateState({ path: 'slots', value: 'bottom_right', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget bottom-center\" style={{ display: state.slots.length && state.slots.indexOf('bottom_center') != -1 ? 'block' : 'none', ...state.properties.slotStyles.bottom_center }}>\n                <slot name=\"bottom_center\" on-slotchange={() => { updateState({ path: 'slots', value: 'bottom_center', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget bottom-left\" style={{ display: state.slots.length && state.slots.indexOf('bottom_left') != -1 ? 'block' : 'none', ...state.properties.slotStyles.bottom_left }}>\n                <slot name=\"bottom_left\" on-slotchange={() => { updateState({ path: 'slots', value: 'bottom_left', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget left-bottom\" style={{ display: state.slots.length && state.slots.indexOf('left_bottom') != -1 ? 'block' : 'none', ...state.properties.slotStyles.left_bottom }}>\n                <slot name=\"left_bottom\" on-slotchange={() => { updateState({ path: 'slots', value: 'left_bottom', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget left-center\" style={{ display: state.slots.length && state.slots.indexOf('left_center') != -1 ? 'block' : 'none', ...state.properties.slotStyles.left_center }}>\n                <slot name=\"left_center\" on-slotchange={() => { updateState({ path: 'slots', value: 'left_center', operation: 'push' }) }}></slot>\n            </div>\n            <div className=\"widget left-top\" style={{ display: state.slots.length && state.slots.indexOf('left_top') != -1 ? 'block' : 'none', ...state.properties.slotStyles.left_top }}>\n                <slot name=\"left_top\" on-slotchange={() => { updateState({ path: 'slots', value: 'left_top', operation: 'push' }) }}></slot>\n            </div>\n        </Fragment>\n    )\n}","import '@servicenow/now-record-list-connected';\nimport '@servicenow/now-modal';\nimport { t } from 'sn-translate';\n\nexport const ClusterModal = ({ state: { clusterModalData, clusterModalOpen } }) => {\n    return clusterModalOpen && clusterModalData && clusterModalData.table && clusterModalData.query ? (\n        <now-modal size=\"lg\" headerLabel={t(\"Multiple {0}\", clusterModalData.name)} opened={clusterModalOpen} >\n            <div className=\"modal-content\">\n                <now-record-list-connected\n                    table={clusterModalData.table}\n                    query={clusterModalData.query}\n                    limit={10}\n                    hideHeader={true}\n                    hideRowSelector={true}\n                    hideSelectAll={true}\n                    hideCellFilter={true}\n                    hideColumnFiltering={true}\n                    hideQuickEdit={true}\n                ></now-record-list-connected>\n            </div>\n        </now-modal>\n    ) : null;\n};","module.exports = __TECTONIC__$servicenow_now_record_list_connected;","module.exports = __TECTONIC__$servicenow_now_modal;","import { customActions, inActions, nowActions, outActions } from './constants';\nimport { actionTypes } from '@servicenow/ui-core';\nimport { loadGoogleApi } from './googleLibs/mapApiLoader';\nimport * as layer from './handlers/layerHandler';\nimport * as mapActions from './handlers/mapActionHandler';\nimport * as markerActions from './handlers/markerActionHandler';\nimport * as overlay from './handlers/overlayHandler';\nimport { initSearchService } from './handlers/searchHandler';\n\n\nexport default {\n\t[actionTypes.COMPONENT_BOOTSTRAPPED]: {\n\t\teffect: ({ state: { properties: { loadMap } }, dispatch }) => {\n\t\t\tif(loadMap)\n\t\t\t\tdispatch(customActions.INIT_MAP);\n\t\t},\n\t\tstopPropagation: true\n\t},\n\t[customActions.INIT_MAP]: {\n\t\teffect: loadGoogleApi,\n\t\tstopPropagation: true\n\t},\n\t[inActions.ADD_LAYER]: {\n\t\teffect: layer.addLayerHandler,\n\t\tstopPropagation: true\n\t},\n\t[inActions.UPDATE_LAYER]: {\n\t\teffect: layer.layerChangeHandler,\n\t\tstopPropagation: true\n\t},\n\t[inActions.TOGGLE_LAYER]: {\n\t\teffect: layer.layerToggleHandler,\n\t\tstopPropagation: true\n\t},\n\t[inActions.TRIGGER_MAP_ACTION]: {\n\t\teffect: mapActions.mapActionHandler,\n\t\tstopPropagation: true\n\t},\n\t[inActions.TRIGGER_MARKER_ACTION]: {\n\t\teffect: markerActions.markerActionHandler,\n\t\tstopPropagation: true\n\t},\n\t[inActions.TRIGGER_LOCATION_SEARCH]: {\n\t\teffect: initSearchService,\n\t\tstopPropagation: true\n\t},\n\t[customActions.MARKER_CLICKED]: {\n\t\teffect: markerActions.markerClickHandler,\n\t\tstopPropagation: true\n\t},\n\t[customActions.MAP_CLICKED]: {\n\t\teffect: mapActions.mapClickHandler,\n\t\tstopPropagation: true\n\t},\n\t[customActions.MARKER_OVERLAY_CLOSED]: {\n\t\teffect: overlay.markerOverlayClosedHandler,\n\t\tstopPropagation: true\n\t},\n\t[customActions.CLUSTER_ZOOM_CHANGED]: {\n\t\teffect: overlay.clusterZoomChangeHandler,\n\t\tstopPropagation: true\n\t},\n\t[customActions.CLUSTER_CLICKED]: {\n\t\teffect: overlay.clusterClickHandler,\n\t\tstopPropagation: true\n\t},\n\t[nowActions.NOW_MODAL_OPENED_SET]: {\n\t\teffect: overlay.modalOpenSetHandler,\n\t\tstopPropagation: true\n\t},\n\t[nowActions.NOW_CARD_CLICKED]: {\n\t\teffect: ({ action: { payload: { record, type, layer, collection } }, dispatch, updateState }) => {\n\t\t\tif (type == 'recordClusterCard') {\n\t\t\t\tlet payload = { layer, collection, record };\n\t\t\t\tdispatch(outActions.MARKER_SELECTED, payload);\n\t\t\t\tupdateState({ clickedMarker: payload });\n\t\t\t}\n\t\t},\n\t\tstopPropagation: true\n\t}\n};","module.exports = __TECTONIC__load_google_maps_api_2_0_2;","module.exports = __TECTONIC__$servicenow_now_popover;","import { getMarkerClusterHTML } from '../util/markerHtmlUtil';\nimport { customActions } from '../constants';\n/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Extends an object's prototype by another's.\n *\n * @param type1 The Type to be extended.\n * @param type2 The Type to extend with.\n * @ignore\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction extend(type1, type2) {\n    // eslint-disable-next-line prefer-const\n    for (let property in type2.prototype) {\n        type1.prototype[property] = type2.prototype[property];\n    }\n}\n/**\n * @ignore\n */\nclass OverlayViewSafe {\n    constructor() {\n        // MarkerClusterer implements google.maps.OverlayView interface. We use the\n        // extend function to extend MarkerClusterer with google.maps.OverlayView\n        // because it might not always be available when the code is defined so we\n        // look for it at the last possible moment. If it doesn't exist now then\n        // there is no point going ahead :)\n        extend(OverlayViewSafe, google.maps.OverlayView);\n    }\n}\n\n/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n *\n * @hidden\n */\nfunction toCssText(styles) {\n    return Object.keys(styles)\n        .reduce((acc, key) => {\n        if (styles[key]) {\n            acc.push(key + \":\" + styles[key]);\n        }\n        return acc;\n    }, [])\n        .join(\";\");\n}\n/**\n *\n * @hidden\n */\nfunction coercePixels(pixels) {\n    return pixels ? pixels + \"px\" : undefined;\n}\n/**\n * A cluster icon.\n */\nclass ClusterIcon extends OverlayViewSafe {\n    /**\n     * @param cluster_ The cluster with which the icon is to be associated.\n     * @param styles_ An array of {@link ClusterIconStyle} defining the cluster icons\n     *  to use for various cluster sizes.\n     */\n    constructor(cluster_, styles_, icon_) {\n        super();\n        this.cluster_ = cluster_;\n        this.styles_ = styles_;\n        this.icon_ = icon_;\n        this.center_ = null;\n        this.div_ = null;\n        this.sums_ = null;\n        this.visible_ = false;\n        this.style = null;\n        this.setMap(cluster_.getMap()); // Note: this causes onAdd to be called\n    }\n    /**\n     * Adds the icon to the DOM.\n     */\n    onAdd() {\n        let cMouseDownInCluster;\n        let cDraggingMapByCluster;\n        const mc = this.cluster_.getMarkerClusterer();\n        const [major, minor] = google.maps.version.split(\".\");\n        const gmVersion = parseInt(major, 10) * 100 + parseInt(minor, 10);\n        this.div_ = document.createElement(\"div\");\n        if (this.visible_) {\n            this.show();\n        }\n        this.getPanes().overlayMouseTarget.appendChild(this.div_);\n        // Fix for Issue 157\n        this.boundsChangedListener_ = google.maps.event.addListener(this.getMap(), \"bounds_changed\", function () {\n            cDraggingMapByCluster = cMouseDownInCluster;\n        });\n        google.maps.event.addDomListener(this.div_, \"mousedown\", () => {\n            cMouseDownInCluster = true;\n            cDraggingMapByCluster = false;\n        });\n        // March 1, 2018: Fix for this 3.32 exp bug, https://issuetracker.google.com/issues/73571522\n        // But it doesn't work with earlier releases so do a version check.\n        if (gmVersion >= 332) {\n            // Ugly version-dependent code\n            google.maps.event.addDomListener(this.div_, \"touchstart\", e => {\n                e.stopPropagation();\n            });\n        }\n        google.maps.event.addDomListener(this.div_, \"click\", e => {\n            cMouseDownInCluster = false;\n            if (!cDraggingMapByCluster) {\n                /**\n                 * This event is fired when a cluster marker is clicked.\n                 * @name MarkerClusterer#click\n                 * @param {Cluster} c The cluster that was clicked.\n                 * @event\n                 */\n                google.maps.event.trigger(mc, \"click\", this.cluster_);\n                google.maps.event.trigger(mc, \"clusterclick\", this.cluster_); // deprecated name\n                // The default click handler follows. Disable it by setting\n                // the zoomOnClick property to false.\n                if (mc.getZoomOnClick()) {\n                    // Zoom into the cluster.\n                    const mz = mc.getMaxZoom();\n                    const theBounds = this.cluster_.getBounds();\n                    mc.getMap().fitBounds(theBounds);\n                    // There is a fix for Issue 170 here:\n                    setTimeout(function () {\n                        mc.getMap().fitBounds(theBounds);\n                        // Don't zoom beyond the max zoom level\n                        if (mz !== null && mc.getMap().getZoom() > mz) {\n                            mc.getMap().setZoom(mz + 1);\n                        }\n                    }, 100);\n                }\n                // Prevent event propagation to the map:\n                e.cancelBubble = true;\n                if (e.stopPropagation) {\n                    e.stopPropagation();\n                }\n            }\n        });\n        google.maps.event.addDomListener(this.div_, \"mouseover\", () => {\n            /**\n             * This event is fired when the mouse moves over a cluster marker.\n             * @name MarkerClusterer#mouseover\n             * @param {Cluster} c The cluster that the mouse moved over.\n             * @event\n             */\n            google.maps.event.trigger(mc, \"mouseover\", this.cluster_);\n        });\n        google.maps.event.addDomListener(this.div_, \"mouseout\", () => {\n            /**\n             * This event is fired when the mouse moves out of a cluster marker.\n             * @name MarkerClusterer#mouseout\n             * @param {Cluster} c The cluster that the mouse moved out of.\n             * @event\n             */\n            google.maps.event.trigger(mc, \"mouseout\", this.cluster_);\n        });\n    }\n    /**\n     * Removes the icon from the DOM.\n     */\n    onRemove() {\n        if (this.div_ && this.div_.parentNode) {\n            this.hide();\n            google.maps.event.removeListener(this.boundsChangedListener_);\n            google.maps.event.clearInstanceListeners(this.div_);\n            this.div_.parentNode.removeChild(this.div_);\n            this.div_ = null;\n        }\n    }\n    /**\n     * Draws the icon.\n     */\n    draw() {\n        if (this.visible_) {\n            const pos = this.getPosFromLatLng_(this.center_);\n            this.div_.style.top = pos.y + \"px\";\n            this.div_.style.left = pos.x + \"px\";\n        }\n    }\n    /**\n     * Hides the icon.\n     */\n    hide() {\n        if (this.div_) {\n            this.div_.style.display = \"none\";\n        }\n        this.visible_ = false;\n    }\n    /**\n     * Positions and shows the icon.\n     */\n    show() {\n        if (this.div_) {\n            this.div_.className = this.className_;\n            this.div_.style.cssText = this.createCss_(this.getPosFromLatLng_(this.center_));\n            this.div_.innerHTML = getMarkerClusterHTML(this.icon_, this.sums_.text );\n            if (typeof this.sums_.title === \"undefined\" || this.sums_.title === \"\") {\n                this.div_.title = this.cluster_.getMarkerClusterer().getTitle();\n            }\n            else {\n                this.div_.title = this.sums_.title;\n            }\n            this.div_.style.display = \"\";\n        }\n        this.visible_ = true;\n    }\n    getLabelDivHtml() {\n        const mc = this.cluster_.getMarkerClusterer();\n        const ariaLabel = mc.ariaLabelFn(this.sums_.text);\n        return `<div aria-label=\"${ariaLabel}\" tabindex=\"0\">\n        <span aria-hidden=\"true\">${this.sums_.text}</span>\n      </div>`;\n    }\n    /**\n     * Sets the icon styles to the appropriate element in the styles array.\n     *\n     * @ignore\n     * @param sums The icon label text and styles index.\n     */\n    useStyle(sums) {\n        this.sums_ = sums;\n        let index = Math.max(0, sums.index - 1);\n        index = Math.min(this.styles_.length - 1, index);\n        this.style = this.styles_[index];\n        this.anchorText_ = this.style.anchorText || [0, 0];\n        this.anchorIcon_ = this.style.anchorIcon || [\n            Math.floor(this.style.height / 2),\n            Math.floor(this.style.width / 2)\n        ];\n        this.className_ =\n            this.cluster_.getMarkerClusterer().getClusterClass() +\n                \" \" +\n                (this.style.className || \"cluster-\" + index);\n    }\n    /**\n     * Sets the position at which to center the icon.\n     *\n     * @param center The latlng to set as the center.\n     */\n    setCenter(center) {\n        this.center_ = center;\n    }\n    /**\n     * Creates the `cssText` style parameter based on the position of the icon.\n     *\n     * @param pos The position of the icon.\n     * @return The CSS style text.\n     */\n    createCss_(pos) {\n        return toCssText({\n            \"z-index\": `${this.cluster_.getMarkerClusterer().getZIndex()}`,\n            top: coercePixels(pos.y),\n            left: coercePixels(pos.x),\n            width: coercePixels(this.style.width),\n            height: coercePixels(this.style.height),\n            cursor: \"pointer\",\n            position: \"absolute\",\n            \"-webkit-user-select\": \"none\",\n            \"-khtml-user-select\": \"none\",\n            \"-moz-user-select\": \"none\",\n            \"-o-user-select\": \"none\",\n            \"user-select\": \"none\"\n        });\n    }\n    /**\n     * Returns the position at which to place the DIV depending on the latlng.\n     *\n     * @param latlng The position in latlng.\n     * @return The position in pixels.\n     */\n    getPosFromLatLng_(latlng) {\n        const pos = this.getProjection().fromLatLngToDivPixel(latlng);\n        pos.x = Math.floor(pos.x - this.anchorIcon_[1]);\n        pos.y = Math.floor(pos.y - this.anchorIcon_[0]);\n        return pos;\n    }\n}\n\n/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Creates a single cluster that manages a group of proximate markers.\n *  Used internally, do not call this constructor directly.\n */\nclass Cluster {\n    /**\n     *\n     * @param markerClusterer_ The `MarkerClusterer` object with which this\n     *  cluster is associated.\n     */\n    constructor(markerClusterer_) {\n        this.markerClusterer_ = markerClusterer_;\n        this.map_ = this.markerClusterer_.getMap();\n        this.minClusterSize_ = this.markerClusterer_.getMinimumClusterSize();\n        this.averageCenter_ = this.markerClusterer_.getAverageCenter();\n        this.markers_ = []; // TODO: type;\n        this.center_ = null;\n        this.bounds_ = null;\n        this.clusterIcon_ = new ClusterIcon(this, this.markerClusterer_.getStyles(), this.markerClusterer_.getIcon());\n        this.markerDispatch = this.markerClusterer_.dispatch;\n    }\n    /**\n     * Returns the number of markers managed by the cluster. You can call this from\n     * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n     *\n     * @return The number of markers in the cluster.\n     */\n    getSize() {\n        return this.markers_.length;\n    }\n    /**\n     * Returns the array of markers managed by the cluster. You can call this from\n     * a `click`, `mouseover`, or `mouseout` event handler for the `MarkerClusterer` object.\n     *\n     * @return The array of markers in the cluster.\n     */\n    getMarkers() {\n        return this.markers_;\n    }\n    /**\n     * Returns the center of the cluster. You can call this from\n     * a `click`, `mouseover`, or `mouseout` event handler\n     * for the `MarkerClusterer` object.\n     *\n     * @return The center of the cluster.\n     */\n    getCenter() {\n        return this.center_;\n    }\n    /**\n     * Returns the map with which the cluster is associated.\n     *\n     * @return The map.\n     * @ignore\n     */\n    getMap() {\n        return this.map_;\n    }\n    /**\n     * Returns the `MarkerClusterer` object with which the cluster is associated.\n     *\n     * @return The associated marker clusterer.\n     * @ignore\n     */\n    getMarkerClusterer() {\n        return this.markerClusterer_;\n    }\n    /**\n     * Returns the bounds of the cluster.\n     *\n     * @return the cluster bounds.\n     * @ignore\n     */\n    getBounds() {\n        const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n        const markers = this.getMarkers();\n        for (let i = 0; i < markers.length; i++) {\n            bounds.extend(markers[i].getPosition());\n        }\n        return bounds;\n    }\n    /**\n     * Removes the cluster from the map.\n     *\n     * @ignore\n     */\n    remove() {\n        this.clusterIcon_.setMap(null);\n        this.markers_ = [];\n        delete this.markers_;\n    }\n    /**\n     * Adds a marker to the cluster.\n     *\n     * @param marker The marker to be added.\n     * @return True if the marker was added.\n     * @ignore\n     */\n    addMarker(marker) {\n        if (this.isMarkerAlreadyAdded_(marker)) {\n            return false;\n        }\n        if (!this.center_) {\n            this.center_ = marker.getPosition();\n            this.calculateBounds_();\n        }\n        else {\n            if (this.averageCenter_) {\n                const l = this.markers_.length + 1;\n                const lat = (this.center_.lat() * (l - 1) + marker.getPosition().lat()) / l;\n                const lng = (this.center_.lng() * (l - 1) + marker.getPosition().lng()) / l;\n                this.center_ = new google.maps.LatLng(lat, lng);\n                this.calculateBounds_();\n            }\n        }\n        marker.isAdded = true;\n        this.markers_.push(marker);\n        const mCount = this.markers_.length;\n        const mz = this.markerClusterer_.getMaxZoom();\n        if (mz !== null && this.map_.getZoom() > mz) {\n            // Zoomed in past max zoom, so show the marker.\n            if (marker.getMap() !== this.map_) {\n                marker.setMap(this.map_);\n            }\n        }\n        else if (mCount < this.minClusterSize_) {\n            // Min cluster size not reached so show the marker.\n            if (marker.getMap() !== this.map_) {\n                marker.setMap(this.map_);\n            }\n        }\n        else if (mCount === this.minClusterSize_) {\n            // Hide the markers that were showing.\n            for (let i = 0; i < mCount; i++) {\n                this.markers_[i].setMap(null);\n            }\n        }\n        else {\n            marker.setMap(null);\n        }\n        return true;\n    }\n    /**\n     * Determines if a marker lies within the cluster's bounds.\n     *\n     * @param marker The marker to check.\n     * @return True if the marker lies in the bounds.\n     * @ignore\n     */\n    isMarkerInClusterBounds(marker) {\n        return this.bounds_.contains(marker.getPosition());\n    }\n    /**\n     * Calculates the extended bounds of the cluster with the grid.\n     */\n    calculateBounds_() {\n        const bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n        this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n    }\n    /**\n     * Updates the cluster icon.\n     */\n    updateIcon() {\n        const mCount = this.markers_.length;\n        const mz = this.markerClusterer_.getMaxZoom();\n        if (mz !== null && this.map_.getZoom() > mz) {\n            this.clusterIcon_.hide();\n            return;\n        }\n        if (mCount < this.minClusterSize_) {\n            // Min cluster size not yet reached.\n            this.clusterIcon_.hide();\n            return;\n        }\n        const numStyles = this.markerClusterer_.getStyles().length;\n        const sums = this.markerClusterer_.getCalculator()(this.markers_, numStyles);\n        this.markerDispatch(customActions.CLUSTER_ZOOM_CHANGED, { markers: this.markers_, zoom:  this.map_.getZoom()} );\n        this.clusterIcon_.setCenter(this.center_);\n        this.clusterIcon_.useStyle(sums);\n        this.clusterIcon_.show();\n    }\n    /**\n     * Determines if a marker has already been added to the cluster.\n     *\n     * @param marker The marker to check.\n     * @return True if the marker has already been added.\n     */\n    isMarkerAlreadyAdded_(marker) {\n        if (this.markers_.indexOf) {\n            return this.markers_.indexOf(marker) !== -1;\n        }\n        else {\n            for (let i = 0; i < this.markers_.length; i++) {\n                if (marker === this.markers_[i]) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n}\n\n/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @ignore\n */\nconst getOption = (options, prop, def) => {\n    if (options[prop] !== undefined) {\n        return options[prop];\n    }\n    else {\n        return def;\n    }\n};\nclass MarkerClusterer extends OverlayViewSafe {\n    /**\n     * Creates a MarkerClusterer object with the options specified in {@link MarkerClustererOptions}.\n     * @param map The Google map to attach to.\n     * @param markers The markers to be added to the cluster.\n     * @param options The optional parameters.\n     */\n    constructor(map, markers = [], options = {}, dispatch) {\n        super();\n        this.options = options;\n        this.dispatch = dispatch;\n        this.markers_ = [];\n        this.clusters_ = [];\n        this.listeners_ = [];\n        this.activeMap_ = null;\n        this.ready_ = false;\n        this.ariaLabelFn = this.options.ariaLabelFn || (() => \"\");\n        this.zIndex_ = this.options.zIndex || google.maps.Marker.MAX_ZINDEX + 1;\n        this.gridSize_ = this.options.gridSize || 100;\n        this.minClusterSize_ = this.options.minimumClusterSize || 2;\n        this.maxZoom_ = this.options.maxZoom || null;\n        this.styles_ = this.options.styles || [];\n        this.title_ = this.options.title || \"\";\n        this.zoomOnClick_ = getOption(this.options, \"zoomOnClick\", true);\n        this.averageCenter_ = getOption(this.options, \"averageCenter\", false);\n        this.ignoreHidden_ = getOption(this.options, \"ignoreHidden\", false);\n        this.enableRetinaIcons_ = getOption(this.options, \"enableRetinaIcons\", false);\n        this.imagePath_ = this.options.imagePath || MarkerClusterer.IMAGE_PATH;\n        this.imageExtension_ = this.options.imageExtension || MarkerClusterer.IMAGE_EXTENSION;\n        this.imageSizes_ = this.options.imageSizes || MarkerClusterer.IMAGE_SIZES;\n        this.calculator_ = this.options.calculator || MarkerClusterer.CALCULATOR;\n        this.batchSize_ = this.options.batchSize || MarkerClusterer.BATCH_SIZE;\n        this.batchSizeIE_ = this.options.batchSizeIE || MarkerClusterer.BATCH_SIZE_IE;\n        this.clusterClass_ = this.options.clusterClass || \"cluster\";\n        this.icon = this.options.icon || \"map-pin-fill\"; //'triangle-exclamation-fill';\n        this.distance = this.options.distance || 20000;\n        if (navigator.userAgent.toLowerCase().indexOf(\"msie\") !== -1) {\n            // Try to avoid IE timeout when processing a huge number of markers:\n            this.batchSize_ = this.batchSizeIE_;\n        }\n        this.setupStyles_();\n        this.addMarkers(markers, true);\n        this.setMap(map); // Note: this causes onAdd to be called\n    }\n     /**\n     * Adds the class to the DOM for MarkerClusterer.\n     * @param name The class name to attach to DOM.\n     * @param positionClass The class name with whom name will be attached to.\n     * @param record The sys_id of selected record to find the marker.\n     */\n    addClass(name, positionClass, cluster) {\n        let clusterDiv = cluster && cluster.clusterIcon_ && cluster.clusterIcon_.div_;\n\t\tif (clusterDiv) {\n\t\t\tlet ele = clusterDiv.getElementsByClassName(positionClass);\n\t\t\tif (ele && ele[0] && name)\n\t\t\t\tele[0].classList.add(name);\n\t\t}\n    }\n    /**\n     * Removes the class from the DOM for MarkerClusterer.\n     * @param name The class name to remove from DOM.\n     * @param positionClass The name of class used to find the div from which removal needs to be done.\n     * @param record The sys_id of selected record to find the marker.\n     */\n    removeClass(name, positionClass, cluster) {\n        let clusterDiv = cluster && cluster.clusterIcon_ && cluster.clusterIcon_.div_;\n\t\tif (clusterDiv) {\n\t\t\tlet ele = clusterDiv&& clusterDiv.getElementsByClassName(positionClass);\n\t\t\tif (ele && ele[0] && name)\n\t\t\t\tele[0].classList.remove(name);\n\t\t}\n    }\n    \n    onAdd() {\n        this.activeMap_ = this.getMap();\n        this.ready_ = true;\n        this.repaint();\n        this.prevZoom_ = this.getMap().getZoom();\n        // Add the map event listeners\n        this.listeners_ = [\n            google.maps.event.addListener(this.getMap(), \"zoom_changed\", () => {\n                const map = this.getMap(); // eslint-disable-line @typescript-eslint/no-explicit-any\n                // Fix for bug #407\n                // Determines map type and prevents illegal zoom levels\n                const minZoom = map.minZoom || 0;\n                const maxZoom = Math.min(map.maxZoom || 100, map.mapTypes[map.getMapTypeId()].maxZoom);\n                const zoom = Math.min(Math.max(this.getMap().getZoom(), minZoom), maxZoom);\n                if (this.prevZoom_ != zoom) {\n                    this.prevZoom_ = zoom;\n                    this.resetViewport_(false);\n                }\n            }),\n            google.maps.event.addListener(this.getMap(), \"idle\", () => {\n                this.redraw_();\n            })\n        ];\n    }\n    /**\n     * Implementation of the onRemove interface method.\n     * Removes map event listeners and all cluster icons from the DOM.\n     * All managed markers are also put back on the map.\n     * @ignore\n     */\n    onRemove() {\n        // Put all the managed markers back on the map:\n        for (let i = 0; i < this.markers_.length; i++) {\n            if (this.markers_[i].getMap() !== this.activeMap_) {\n                this.markers_[i].setMap(this.activeMap_);\n            }\n        }\n        // Remove all clusters:\n        for (let i = 0; i < this.clusters_.length; i++) {\n            this.clusters_[i].remove();\n        }\n        this.clusters_ = [];\n        // Remove map event listeners:\n        for (let i = 0; i < this.listeners_.length; i++) {\n            google.maps.event.removeListener(this.listeners_[i]);\n        }\n        this.listeners_ = [];\n        this.activeMap_ = null;\n        this.ready_ = false;\n    }\n    /**\n     * Implementation of the draw interface method.\n     * @ignore\n     */\n    draw() { }\n    /**\n     * Sets up the styles object.\n     */\n    setupStyles_() {\n        if (this.styles_.length > 0) {\n            return;\n        }\n        for (let i = 0; i < this.imageSizes_.length; i++) {\n            const size = this.imageSizes_[i];\n            this.styles_.push(MarkerClusterer.withDefaultStyle({\n                url: this.imagePath_ + (i + 1) + \".\" + this.imageExtension_,\n                height: size,\n                width: size\n            }));\n        }\n    }\n    /**\n     *  Fits the map to the bounds of the markers managed by the clusterer.\n     */\n    fitMapToMarkers(padding) {\n        const markers = this.getMarkers();\n        const bounds = new google.maps.LatLngBounds();\n        for (let i = 0; i < markers.length; i++) {\n            // March 3, 2018: Bug fix -- honor the ignoreHidden property\n            if (markers[i].getVisible() || !this.getIgnoreHidden()) {\n                bounds.extend(markers[i].getPosition());\n            }\n        }\n        this.getMap().fitBounds(bounds, padding);\n    }\n    /**\n     * Returns the value of the `gridSize` property.\n     *\n     * @return The grid size.\n     */\n    getGridSize() {\n        return this.gridSize_;\n    }\n    /**\n     * Sets the value of the `gridSize` property.\n     *\n     * @param gridSize The grid size.\n     */\n    setGridSize(gridSize) {\n        this.gridSize_ = gridSize;\n    }\n    /**\n     * Returns the value of the `minimumClusterSize` property.\n     *\n     * @return The minimum cluster size.\n     */\n    getMinimumClusterSize() {\n        return this.minClusterSize_;\n    }\n    /**\n     * Sets the value of the `minimumClusterSize` property.\n     *\n     * @param minimumClusterSize The minimum cluster size.\n     */\n    setMinimumClusterSize(minimumClusterSize) {\n        this.minClusterSize_ = minimumClusterSize;\n    }\n    /**\n     *  Returns the value of the `maxZoom` property.\n     *\n     *  @return The maximum zoom level.\n     */\n    getMaxZoom() {\n        return this.maxZoom_;\n    }\n    /**\n     *  Sets the value of the `maxZoom` property.\n     *\n     *  @param maxZoom The maximum zoom level.\n     */\n    setMaxZoom(maxZoom) {\n        this.maxZoom_ = maxZoom;\n    }\n    getZIndex() {\n        return this.zIndex_;\n    }\n    setZIndex(zIndex) {\n        this.zIndex_ = zIndex;\n    }\n    /**\n     *  Returns the value of the `styles` property.\n     *\n     *  @return The array of styles defining the cluster markers to be used.\n     */\n    getStyles() {\n        return this.styles_;\n    }\n    /**\n     *  Sets the value of the `styles` property.\n     *\n     *  @param styles The array of styles to use.\n     */\n    setStyles(styles) {\n        this.styles_ = styles;\n    }\n    /**\n     *  Returns the value of the `styles` property.\n     *\n     *  @return The array of styles defining the cluster markers to be used.\n     */\n    getIcon() {\n        return this.icon;\n    }\n    /**\n     * Returns the value of the `title` property.\n     *\n     * @return The content of the title text.\n     */\n    getTitle() {\n        return this.title_;\n    }\n    /**\n     *  Sets the value of the `title` property.\n     *\n     *  @param title The value of the title property.\n     */\n    setTitle(title) {\n        this.title_ = title;\n    }\n    /**\n     * Returns the value of the `zoomOnClick` property.\n     *\n     * @return True if zoomOnClick property is set.\n     */\n    getZoomOnClick() {\n        return this.zoomOnClick_;\n    }\n    /**\n     *  Sets the value of the `zoomOnClick` property.\n     *\n     *  @param zoomOnClick The value of the zoomOnClick property.\n     */\n    setZoomOnClick(zoomOnClick) {\n        this.zoomOnClick_ = zoomOnClick;\n    }\n    /**\n     * Returns the value of the `averageCenter` property.\n     *\n     * @return True if averageCenter property is set.\n     */\n    getAverageCenter() {\n        return this.averageCenter_;\n    }\n    /**\n     *  Sets the value of the `averageCenter` property.\n     *\n     *  @param averageCenter The value of the averageCenter property.\n     */\n    setAverageCenter(averageCenter) {\n        this.averageCenter_ = averageCenter;\n    }\n    /**\n     * Returns the value of the `ignoreHidden` property.\n     *\n     * @return True if ignoreHidden property is set.\n     */\n    getIgnoreHidden() {\n        return this.ignoreHidden_;\n    }\n    /**\n     *  Sets the value of the `ignoreHidden` property.\n     *\n     *  @param ignoreHidden The value of the ignoreHidden property.\n     */\n    setIgnoreHidden(ignoreHidden) {\n        this.ignoreHidden_ = ignoreHidden;\n    }\n    /**\n     * Returns the value of the `enableRetinaIcons` property.\n     *\n     * @return True if enableRetinaIcons property is set.\n     */\n    getEnableRetinaIcons() {\n        return this.enableRetinaIcons_;\n    }\n    /**\n     *  Sets the value of the `enableRetinaIcons` property.\n     *\n     *  @param enableRetinaIcons The value of the enableRetinaIcons property.\n     */\n    setEnableRetinaIcons(enableRetinaIcons) {\n        this.enableRetinaIcons_ = enableRetinaIcons;\n    }\n    /**\n     * Returns the value of the `imageExtension` property.\n     *\n     * @return The value of the imageExtension property.\n     */\n    getImageExtension() {\n        return this.imageExtension_;\n    }\n    /**\n     *  Sets the value of the `imageExtension` property.\n     *\n     *  @param imageExtension The value of the imageExtension property.\n     */\n    setImageExtension(imageExtension) {\n        this.imageExtension_ = imageExtension;\n    }\n    /**\n     * Returns the value of the `imagePath` property.\n     *\n     * @return The value of the imagePath property.\n     */\n    getImagePath() {\n        return this.imagePath_;\n    }\n    /**\n     *  Sets the value of the `imagePath` property.\n     *\n     *  @param imagePath The value of the imagePath property.\n     */\n    setImagePath(imagePath) {\n        this.imagePath_ = imagePath;\n    }\n    /**\n     * Returns the value of the `imageSizes` property.\n     *\n     * @return The value of the imageSizes property.\n     */\n    getImageSizes() {\n        return this.imageSizes_;\n    }\n    /**\n     *  Sets the value of the `imageSizes` property.\n     *\n     *  @param imageSizes The value of the imageSizes property.\n     */\n    setImageSizes(imageSizes) {\n        this.imageSizes_ = imageSizes;\n    }\n    /**\n     * Returns the value of the `calculator` property.\n     *\n     * @return the value of the calculator property.\n     */\n    getCalculator() {\n        return this.calculator_;\n    }\n    /**\n     * Sets the value of the `calculator` property.\n     *\n     * @param calculator The value of the calculator property.\n     */\n    setCalculator(calculator) {\n        this.calculator_ = calculator;\n    }\n    /**\n     * Returns the value of the `batchSizeIE` property.\n     *\n     * @return the value of the batchSizeIE property.\n     */\n    getBatchSizeIE() {\n        return this.batchSizeIE_;\n    }\n    /**\n     * Sets the value of the `batchSizeIE` property.\n     *\n     *  @param batchSizeIE The value of the batchSizeIE property.\n     */\n    setBatchSizeIE(batchSizeIE) {\n        this.batchSizeIE_ = batchSizeIE;\n    }\n    /**\n     * Returns the value of the `clusterClass` property.\n     *\n     * @return the value of the clusterClass property.\n     */\n    getClusterClass() {\n        return this.clusterClass_;\n    }\n    /**\n     * Sets the value of the `clusterClass` property.\n     *\n     *  @param clusterClass The value of the clusterClass property.\n     */\n    setClusterClass(clusterClass) {\n        this.clusterClass_ = clusterClass;\n    }\n    /**\n     *  Returns the array of markers managed by the clusterer.\n     *\n     *  @return The array of markers managed by the clusterer.\n     */\n    getMarkers() {\n        return this.markers_;\n    }\n    /**\n     *  Returns the number of markers managed by the clusterer.\n     *\n     *  @return The number of markers.\n     */\n    getTotalMarkers() {\n        return this.markers_.length;\n    }\n    /**\n     * Returns the current array of clusters formed by the clusterer.\n     *\n     * @return The array of clusters formed by the clusterer.\n     */\n    getClusters() {\n        return this.clusters_;\n    }\n    /**\n     * Returns the number of clusters formed by the clusterer.\n     *\n     * @return The number of clusters formed by the clusterer.\n     */\n    getTotalClusters() {\n        return this.clusters_.length;\n    }\n    /**\n     * Adds a marker to the clusterer. The clusters are redrawn unless\n     *  `nodraw` is set to `true`.\n     *\n     * @param marker The marker to add.\n     * @param nodraw Set to `true` to prevent redrawing.\n     */\n    addMarker(marker, nodraw) {\n        this.pushMarkerTo_(marker);\n        if (!nodraw) {\n            this.redraw_();\n        }\n    }\n    /**\n     * Adds an array of markers to the clusterer. The clusters are redrawn unless\n     *  `nodraw` is set to `true`.\n     *\n     * @param markers The markers to add.\n     * @param nodraw Set to `true` to prevent redrawing.\n     */\n    addMarkers(markers, nodraw) {\n        for (const key in markers) {\n            if (Object.prototype.hasOwnProperty.call(markers, key)) {\n                this.pushMarkerTo_(markers[key]);\n            }\n        }\n        if (!nodraw) {\n            this.redraw_();\n        }\n    }\n    /**\n     * Pushes a marker to the clusterer.\n     *\n     * @param marker The marker to add.\n     */\n    pushMarkerTo_(marker) {\n        // If the marker is draggable add a listener so we can update the clusters on the dragend:\n        if (marker.getDraggable()) {\n            google.maps.event.addListener(marker, \"dragend\", () => {\n                if (this.ready_) {\n                    marker.isAdded = false;\n                    this.repaint();\n                }\n            });\n        }\n        marker.isAdded = false;\n        this.markers_.push(marker);\n    }\n    /**\n     * Removes a marker from the cluster.  The clusters are redrawn unless\n     *  `nodraw` is set to `true`. Returns `true` if the\n     *  marker was removed from the clusterer.\n     *\n     * @param marker The marker to remove.\n     * @param nodraw Set to `true` to prevent redrawing.\n     * @return True if the marker was removed from the clusterer.\n     */\n    removeMarker(marker, nodraw) {\n        const removed = this.removeMarker_(marker);\n        if (!nodraw && removed) {\n            this.repaint();\n        }\n        return removed;\n    }\n    /**\n     * Removes an array of markers from the cluster. The clusters are redrawn unless\n     *  `nodraw` is set to `true`. Returns `true` if markers were removed from the clusterer.\n     *\n     * @param markers The markers to remove.\n     * @param nodraw Set to `true` to prevent redrawing.\n     * @return True if markers were removed from the clusterer.\n     */\n    removeMarkers(markers, nodraw) {\n        let removed = false;\n        for (let i = 0; i < markers.length; i++) {\n            const r = this.removeMarker_(markers[i]);\n            removed = removed || r;\n        }\n        if (!nodraw && removed) {\n            this.repaint();\n        }\n        return removed;\n    }\n    /**\n     * Removes a marker and returns true if removed, false if not.\n     *\n     * @param marker The marker to remove\n     * @return Whether the marker was removed or not\n     */\n    removeMarker_(marker) {\n        let index = -1;\n        if (this.markers_.indexOf) {\n            index = this.markers_.indexOf(marker);\n        }\n        else {\n            for (let i = 0; i < this.markers_.length; i++) {\n                if (marker === this.markers_[i]) {\n                    index = i;\n                    break;\n                }\n            }\n        }\n        if (index === -1) {\n            // Marker is not in our list of markers, so do nothing:\n            return false;\n        }\n        marker.setMap(null);\n        this.markers_.splice(index, 1); // Remove the marker from the list of managed markers\n        return true;\n    }\n    /**\n     * Removes all clusters and markers from the map and also removes all markers\n     *  managed by the clusterer.\n     */\n    clearMarkers() {\n        this.resetViewport_(true);\n        this.markers_ = [];\n    }\n    /**\n     * Recalculates and redraws all the marker clusters from scratch.\n     *  Call this after changing any properties.\n     */\n    repaint() {\n        const oldClusters = this.clusters_.slice();\n        this.clusters_ = [];\n        this.resetViewport_(false);\n        this.redraw_();\n        // Remove the old clusters.\n        // Do it in a timeout to prevent blinking effect.\n        setTimeout(function () {\n            for (let i = 0; i < oldClusters.length; i++) {\n                oldClusters[i].remove();\n            }\n        }, 0);\n    }\n    /**\n     * Returns the current bounds extended by the grid size.\n     *\n     * @param bounds The bounds to extend.\n     * @return The extended bounds.\n     * @ignore\n     */\n    getExtendedBounds(bounds) {\n        const projection = this.getProjection();\n        // Turn the bounds into latlng.\n        const tr = new google.maps.LatLng(bounds.getNorthEast().lat(), bounds.getNorthEast().lng());\n        const bl = new google.maps.LatLng(bounds.getSouthWest().lat(), bounds.getSouthWest().lng());\n        // Convert the points to pixels and the extend out by the grid size.\n        const trPix = projection.fromLatLngToDivPixel(tr);\n        trPix.x += this.gridSize_;\n        trPix.y -= this.gridSize_;\n        const blPix = projection.fromLatLngToDivPixel(bl);\n        blPix.x -= this.gridSize_;\n        blPix.y += this.gridSize_;\n        // Convert the pixel points back to LatLng\n        const ne = projection.fromDivPixelToLatLng(trPix);\n        const sw = projection.fromDivPixelToLatLng(blPix);\n        // Extend the bounds to contain the new bounds.\n        bounds.extend(ne);\n        bounds.extend(sw);\n        return bounds;\n    }\n    /**\n     * Redraws all the clusters.\n     */\n    redraw_() {\n        this.createClusters_(0);\n    }\n    /**\n     * Removes all clusters from the map. The markers are also removed from the map\n     *  if `hide` is set to `true`.\n     *\n     * @param hide Set to `true` to also remove the markers from the map.\n     */\n    resetViewport_(hide) {\n        // Remove all the clusters\n        for (let i = 0; i < this.clusters_.length; i++) {\n            this.clusters_[i].remove();\n        }\n        this.clusters_ = [];\n        // Reset the markers to not be added and to be removed from the map.\n        for (let i = 0; i < this.markers_.length; i++) {\n            const marker = this.markers_[i];\n            marker.isAdded = false;\n            if (hide) {\n                marker.setMap(null);\n            }\n        }\n    }\n    /**\n     * Calculates the distance between two latlng locations in km.\n     *\n     * @param p1 The first lat lng point.\n     * @param p2 The second lat lng point.\n     * @return The distance between the two points in km.\n     * @link http://www.movable-type.co.uk/scripts/latlong.html\n     */\n    distanceBetweenPoints_(p1, p2) {\n        const R = 6371; // Radius of the Earth in km\n        const dLat = ((p2.lat() - p1.lat()) * Math.PI) / 180;\n        const dLon = ((p2.lng() - p1.lng()) * Math.PI) / 180;\n        const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n            Math.cos((p1.lat() * Math.PI) / 180) *\n                Math.cos((p2.lat() * Math.PI) / 180) *\n                Math.sin(dLon / 2) *\n                Math.sin(dLon / 2);\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n        return R * c;\n    }\n    /**\n     * Determines if a marker is contained in a bounds.\n     *\n     * @param marker The marker to check.\n     * @param bounds The bounds to check against.\n     * @return True if the marker is in the bounds.\n     */\n    isMarkerInBounds_(marker, bounds) {\n        return bounds.contains(marker.getPosition());\n    }\n    /**\n     * Adds a marker to a cluster, or creates a new cluster.\n     *\n     * @param marker The marker to add.\n     */\n    addToClosestCluster_(marker) {\n        let clusterToAddTo = null;\n        let distance = this.distance; \n        for (let i = 0; i < this.clusters_.length; i++) {\n            const cluster = this.clusters_[i];\n            const center = cluster.getCenter();\n            if (center) {\n                const d = this.distanceBetweenPoints_(center, marker.getPosition());\n                if (d < distance) {\n                    distance = d;\n                    clusterToAddTo = cluster;\n                }\n            }\n        }\n        if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n            clusterToAddTo.addMarker(marker);\n            let property = marker.props;\n            if(property.severity && property.icon) {\n                let clusteredMarkersSeverity = [];\n                clusterToAddTo.markers_.map(marker => {\n                    clusteredMarkersSeverity.push(marker.props.severity);\n                });\n                if(clusteredMarkersSeverity.length) {\n                    clusteredMarkersSeverity.sort((sev1, sev2) => {\n                        const intSev1 = parseInt(sev1.value);\n                        const intSev2 = parseInt(sev2.value);\n                        if (intSev1 && intSev2) {\n                            return intSev1 - intSev2;\n                        } else {\n                            let val1 = sev1.value.toLowerCase(),\n                            val2 = sev2.value.toLowerCase();\n                            if (val1 < val2) {\n                                return -1;\n                            }\n                            if (val1 > val2) {\n                                return 1;\n                            }\n                            return 0;\n                        }\n                    });\n                    let highestSeverityIcon = property.icon.split(\",\");\n                    highestSeverityIcon && (highestSeverityIcon.length > 1) && highestSeverityIcon.pop();\n                    highestSeverityIcon.push(clusteredMarkersSeverity[0].color);\n                    this.icon = highestSeverityIcon.join(\",\");\n                    this.options.icon = this.icon;\n                    clusterToAddTo.clusterIcon_.icon_ = this.icon;\n                }\n            }\n        }\n        else {\n            const cluster = new Cluster(this);\n            cluster.addMarker(marker);\n            this.clusters_.push(cluster);\n        }\n    }\n    /**\n     * Creates the clusters. This is done in batches to avoid timeout errors\n     *  in some browsers when there is a huge number of markers.\n     *\n     * @param iFirst The index of the first marker in the batch of\n     *  markers to be added to clusters.\n     */\n    createClusters_(iFirst) {\n        if (!this.ready_) {\n            return;\n        }\n        // Cancel previous batch processing if we're working on the first batch:\n        if (iFirst === 0) {\n            google.maps.event.trigger(this, \"clusteringbegin\", this);\n            if (typeof this.timerRefStatic !== \"undefined\") {\n                clearTimeout(this.timerRefStatic);\n                delete this.timerRefStatic;\n            }\n        }\n        // Get our current map view bounds.\n        // Create a new bounds object so we don't affect the map.\n        //\n        // See Comments 9 & 11 on Issue 3651 relating to this workaround for a Google Maps bug:\n        let mapBounds;\n        if (this.getMap().getZoom() > 3) {\n            mapBounds = new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(), this.getMap().getBounds().getNorthEast());\n        }\n        else {\n            mapBounds = new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472, -178.48388434375), new google.maps.LatLng(-85.08136444384544, 178.00048865625));\n        }\n        const bounds = this.getExtendedBounds(mapBounds);\n        const iLast = Math.min(iFirst + this.batchSize_, this.markers_.length);\n        for (let i = iFirst; i < iLast; i++) {\n            const marker = this.markers_[i];\n            if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n                if (!this.ignoreHidden_ || (this.ignoreHidden_ && marker.getVisible())) \n                    this.addToClosestCluster_(marker);\n            }\n        }\n        if (iLast < this.markers_.length) {\n            this.timerRefStatic = window.setTimeout(() => {\n                this.createClusters_(iLast);\n            }, 0);\n        }\n        else {\n            delete this.timerRefStatic;\n            google.maps.event.trigger(this, \"clusteringend\", this);\n            for (let i = 0; i < this.clusters_.length; i++) {\n                this.clusters_[i].updateIcon();\n            }\n        }\n    }\n    /**\n     * The default function for determining the label text and style\n     * for a cluster icon.\n     *\n     * @param markers The array of markers represented by the cluster.\n     * @param numStyles The number of marker styles available.\n     * @return The information resource for the cluster.\n     */\n    static CALCULATOR(markers, numStyles) {\n        let index = 0;\n        const count = markers.length;\n        let dv = count;\n        while (dv !== 0) {\n            dv = Math.floor(dv / 10);\n            index++;\n        }\n        index = Math.min(index, numStyles);\n        return {\n            text: count.toString(),\n            index: index,\n            title: \"\"\n        };\n    }\n    /**\n     * Generates default styles augmented with user passed values.\n     * Useful when you want to override some default values but keep untouched\n     *\n     * @param overrides override default values\n     */\n    static withDefaultStyle(overrides) {\n        return Object.assign({ textColor: \"black\", textSize: 11, textDecoration: \"none\", textLineHeight: overrides.height, fontWeight: \"bold\", fontStyle: \"normal\", fontFamily: \"Arial,sans-serif\", backgroundPosition: \"0 0\" }, overrides);\n    }\n}\n/**\n * The number of markers to process in one batch.\n */\nMarkerClusterer.BATCH_SIZE = 2000;\n/**\n * The number of markers to process in one batch (IE only).\n */\nMarkerClusterer.BATCH_SIZE_IE = 500;\n/**\n * The default root name for the marker cluster images.\n */\nMarkerClusterer.IMAGE_PATH = \"\";\n/**\n * The default extension name for the marker cluster images.\n */\nMarkerClusterer.IMAGE_EXTENSION = \"\";\n/**\n * The default array of sizes for the marker cluster images.\n */\nMarkerClusterer.IMAGE_SIZES = [26];\n\n/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default MarkerClusterer;\n//# sourceMappingURL=markerclustererplus.esm.js.map\n","import * as gmap from '../googleLibs/mapHelperFunctions';\nimport { keywords } from '../constants';\nimport { setMapFocus } from './layerHandler';\n\nexport const mapClickHandler = ({ state }) => {\n    if (state.markerOverlayData)\n        state.markerOverlayData.setMap(null);\n};\n\nexport const mapActionHandler = ({ state, updateState, action: { payload: { action, type, value } } }) => {\n    switch (action) {\n        case 'focus':\n            if (type == 'coordinates') { //if someone wants to focus to any coordinates\n                gmap.setFocus(state, value.latitude, value.longitude, value.zoom || 10);\n                updateState({ focusedMarker: { type: 'location', latitude: value.latitude, longitude: value.longitude, zoom: value.zoom } });\n            } else { //type == place /// value = place_id\n                gmap.setFocusToPlaceId(value, updateState, state);\n            }\n            break;\n        case 'unfocus':\n            if (state.focusedMarker && Object.keys(state.focusedMarker).length)\n                resetMapToDefault(state, updateState);\n            break;\n        case 'zoom_in':\n            gmap.setZoom(state, 1);\n            break;\n        case 'zoom_out':\n            gmap.setZoom(state, -1);\n            break;\n        case 'reset':\n            if (type != 'map') {\n                const { focusedMarker, layerData } = state;\n                if (focusedMarker && focusedMarker.type == 'location') {\n                    gmap.setFocus(state, focusedMarker.latitude, focusedMarker.longitude, 10);\n                    break;\n                } else if (focusedMarker && focusedMarker.type == 'record') {\n                    const layerRef = layerData[focusedMarker.layer + keywords.RECORD_ID_SEPERATOR + focusedMarker.collection];\n                    const rec = layerRef && layerRef.markers ? layerRef.markers[focusedMarker.record] : \"\";\n                    if (rec)\n                        gmap.setFocus(state, rec.position.lat(), rec.position.lng(), 10);\n                    break;\n                }\n            }\n        default:\n            resetMapToDefault(state, updateState);\n            break;\n    }\n};\n\nconst resetMapToDefault = (state, updateState) => {\n    const { googleMapsRef, layerData, selectedShape, selectedMarker: { layer, collection } } = state;\n    let markersCount = 0;\n    if (layer && collection && layerData && layerData[layer + keywords.RECORD_ID_SEPERATOR + collection]) {\n        const cluster = layerData[layer + keywords.RECORD_ID_SEPERATOR + collection].clusters || null;\n        if (cluster) {\n            //Show collection clusters, in list view\n            cluster.setMap && cluster.setMap(googleMapsRef);\n            cluster.markers_ && cluster.markers_.map(m => {\n                m.setMap(googleMapsRef);\n            });\n\n            markersCount = cluster.markers_.length;\n        }\n    }\n    setMapFocus(state, markersCount);\n\n    if (selectedShape && selectedShape.setMap) {\n        selectedShape.setMap(null);\n        updateState({\n            selectedShape: {},\n            selectedMarker: {},\n            focusedMarker: {},\n            clickedMarker: {},\n            updatedShape: {},\n            searchResults: []\n        });\n    } else\n        updateState({\n            focusedMarker: {},\n            selectedMarker: {},\n            clickedMarker: {},\n            updatedShape: {},\n            searchResults: []\n        })\n};","import * as gmap from '../googleLibs/mapHelperFunctions';\nimport { inActions, keywords, outActions } from '../constants';\nimport { findIndex, clone } from 'lodash';\nlet hoveredItem = {};\nlet eventCount = 0;\nexport const markerActionHandler = ({ state, dispatch, updateState, action: { payload } }) => {\n    const { layerData, googleMapsRef, selectedShape } = state;\n    const { layer, collection, record, action = \"\", type = \"\", recordData } = payload;\n    if (layer && collection && record) {\n        if (googleMapsRef && layerData && layerData[layer + keywords.RECORD_ID_SEPERATOR + collection]) {\n            const layerRef = layerData[layer + keywords.RECORD_ID_SEPERATOR + collection];\n            const cluster = layerRef && layerRef.clusters;\n            let marker;\n            if (cluster && cluster.markers_) {\n                let mi = findIndex(cluster.markers_, { props: { id: record } });\n                if (mi > -1)\n                    marker = cluster.markers_[mi];\n            }\n            let focusedMarker = { key: 'record', ...payload };\n            if (marker) {\n                switch (action) {\n                    case 'hover':\n                        if (type == 'out') {\n                            //clear old hover\n                            if (hoveredItem.cluster && hoveredItem.layer) {\n                                hoveredItem.layer.removeClass('focus-cluster-hover', 'cluster-circle', hoveredItem.cluster);\n                                hoveredItem.cluster = null;\n                                hoveredItem.layer = null;\n                            }\n                            if (hoveredItem.marker) {\n                                hoveredItem.marker.removeClass('focus-popup-hover', 'focus-popup');\n                                hoveredItem.marker = null;\n                            }\n                        } else {\n                            //clear old hover\n                            if (hoveredItem.marker) {\n                                hoveredItem.marker.removeClass('focus-popup-hover', 'focus-popup');\n                                hoveredItem.marker = null;\n                            }\n                            if (hoveredItem.cluster && hoveredItem.layer) {\n                                hoveredItem.layer.removeClass('focus-cluster-hover', 'cluster-circle', hoveredItem.cluster);\n                                hoveredItem.cluster = null;\n                                hoveredItem.layer = null;\n                            }\n\n                            let cm = null;\n                            if (cluster && cluster.clusters_ && cluster.clusters_.length) {\n                                cm = cluster.clusters_.find(c => {\n                                    return c.markers_.find(m => {\n                                        return m.props && m.props.id === record;\n                                    });\n                                });\n                                if (cm && cm.markers_.length > 1) {\n                                    cluster.addClass('focus-cluster-hover', 'cluster-circle', cm);\n                                    hoveredItem.cluster = cm;\n                                    hoveredItem.layer = cluster;\n                                    hoveredItem.marker = null;\n                                } else {\n                                    marker.addClass('focus-popup-hover', 'focus-popup');\n                                    hoveredItem.marker = marker;\n                                    hoveredItem.cluster = null;\n                                    hoveredItem.layer = null;\n                                }\n\n                            }\n\n                            if (!cm) {\n                                marker.addClass('focus-popup-hover', 'focus-popup');\n                                hoveredItem.marker = marker;\n                                hoveredItem.cluster = null;\n                                hoveredItem.layer = null;\n                            }\n                        }\n                        break;\n                    case 'focus':\n                        updateState({ focusedMarker });\n\n                        gmap.setFocus(state, marker.position.lat(), marker.position.lng(), 10);\n                        break;\n\n                    case 'shape':\n                        changeMarkerShape(state, dispatch, updateState, marker.props, type, recordData)\n                        break;\n\n                    case 'reset':\n                        if (selectedShape && selectedShape.props && selectedShape.props.type) {\n                            if (selectedShape.props.type == \"polygon\") {\n                                gmap.fitBounds(state, selectedShape.bounds);\n                                gmap.fitBounds(state, selectedShape.bounds);\n                            } else {\n                                gmap.fitBounds(state, selectedShape.getBounds());\n                                gmap.fitBounds(state, selectedShape.getBounds());\n                            }\n                        } else\n                            selectMarker(state, updateState, marker.props, payload, focusedMarker);\n                        break;\n                    case 'select':\n                    default: {\n                        //clear old hovered marker\n                        if (hoveredItem.marker)\n                            hoveredItem.marker.removeClass('focus-popup-hover', 'focus-popup');\n                        if (hoveredItem.cluster && hoveredItem.layer)\n                            hoveredItem.layer.removeClass('focus-cluster-hover', 'cluster-circle', hoveredItem.cluster);\n\n                        selectMarker(state, updateState, marker.props, payload, focusedMarker);\n                    }\n                }\n            }\n        } else {\n            if (eventCount < 30) {\n                eventCount++;\n                setTimeout(() => {\n                    dispatch(inActions.TRIGGER_MARKER_ACTION, payload);\n                }, 200);\n            }\n        }\n    }\n};\n\nexport const markerClickHandler = ({ action, state, updateState, dispatch }) => {\n    let { marker, clickAction, showInfo } = action.payload;\n    if ((clickAction == \"\" || clickAction == \"info\") && showInfo) {\n        const html = `\n            <fam-map-markeroverlay\n            layer-data=\"@fam-map-dataprovider/layers\"\n            record=\"${marker.props.id}\" \n            layer=\"${marker.props.layer}\" \n            collection=\"${marker.props.collection}\"/>\n            `;\n\n        if (state.markerOverlayData)\n            state.markerOverlayData.setMap(null);\n        let overlay = gmap.getInfoOverlay(marker.position, html, state.googleMapsRef, { x: 0, y: 0 }, marker.props);\n\n        updateState({\n            markerOverlayData: overlay\n        })\n    } else if (clickAction == 'select' && marker.props) {\n        const payload = { layer: marker.props.layer, collection: marker.props.collection, record: marker.props.id };\n        dispatch(outActions.MARKER_SELECTED, payload);\n        updateState({ clickedMarker: payload });\n    }\n};\n\nconst selectMarker = (state, updateState, rec, payload, focusedMarker) => {\n    const { layerData, selectedShape, selectedMarker } = state;\n    const { layer, collection, record } = payload;\n    let updated = false;\n    if (layerData && layerData[layer + keywords.RECORD_ID_SEPERATOR + collection]) {\n        let markers = [];\n        const cluster = layerData[layer + keywords.RECORD_ID_SEPERATOR + collection].clusters || null;\n        if (cluster) {\n            //Hide all clusters, on single record selection (Detail view)\n            cluster.setMap && cluster.setMap(null);\n            markers = cluster.markers_;\n        }\n        for (const m in markers) {\n            if (markers[m].props.id !== record)\n                markers[m] && markers[m].setMap(null);\n        }\n    }\n\n    if (selectedShape && selectedShape.setMap)\n        selectedShape.setMap(null);\n\n    let recordData = payload.recordData || selectedMarker;\n    if (recordData) {\n        if ((!recordData.impact_type || recordData.impact_type == \"polygon\") && recordData.impact_area && recordData.impact_area.length) {\n            const polygon = gmap.addPolygon(state, recordData.impact_area, recordData.id);\n            if (polygon) {\n                gmap.fitBounds(state, polygon.bounds);\n                gmap.fitBounds(state, polygon.bounds);\n                updated = true;\n                updateState({\n                    selectedShape: polygon,\n                    selectedMarker: { layer, collection, record, lat: rec.lat, lng: rec.lng, ...recordData },\n                    focusedMarker\n                });\n            }\n        } else if (recordData.impact_radius || recordData.impact_radius == 0) {\n            if (recordData.impact_radius == 0)\n                recordData.impact_radius = 500;\n            const circle = gmap.addCircle(state, recordData.impact_radius, { lat: rec.lat, lng: rec.lng }, recordData.id);\n            if (circle) {\n                gmap.fitBounds(state, circle.getBounds());\n                gmap.fitBounds(state, circle.getBounds());\n                updated = true;\n                updateState({\n                    selectedShape: circle,\n                    selectedMarker: { layer, collection, record, lat: rec.lat, lng: rec.lng, ...recordData },\n                    focusedMarker\n                });\n\n            }\n        }\n    }\n    if (!updated)\n        updateState({\n            focusedMarker\n        });\n\n    hoveredItem = {};\n};\n\nconst changeMarkerShape = (state, dispatch, updateState, rec, type, recordData) => {\n    const { selectedMarker, selectedShape } = state;\n    if (selectedShape && selectedShape.setEditable) {\n        switch (type) {\n            case 'polygon':\n                if (selectedShape.props.type == \"polygon\" && selectedShape.setPath && !selectedShape.editable)\n                    selectedShape.setEditable(true);\n                else if (selectedShape.props.type == \"circle\") {\n                    let paths = selectedMarker.impact_area;\n                    if (!paths) {\n                        const bounds = selectedShape.getBounds();\n                        paths = [\n                            [bounds.getNorthEast().lng(), bounds.getNorthEast().lat()],\n                            [bounds.getSouthWest().lng(), bounds.getSouthWest().lat()],\n                            [bounds.getSouthWest().lng(), bounds.getNorthEast().lat()],\n                            [bounds.getNorthEast().lng(), bounds.getSouthWest().lat()],\n                        ];\n                    }\n\n                    selectedShape.setMap(null);\n                    selectedShape.setVisible(false);\n                    if (selectedShape.props) {\n                        const polygon = gmap.addPolygon(state, paths, selectedShape.props.id, null, true);\n                        gmap.fitBounds(state, polygon.bounds);\n                        updateState({ selectedShape: polygon });\n                    }\n                }\n                break;\n\n            case 'circle':\n                if (selectedShape.props.type == \"circle\" && !selectedShape.editable) {\n                    selectedShape.setEditable(true);\n                    gmap.setRadius(selectedShape);\n                } else if (selectedShape.props.type == \"polygon\") {\n                    selectedShape.setMap(null);\n                    selectedShape.setVisible(false);\n                    const circle = gmap.addCircle(state, 1000, { lat: rec.lat, lng: rec.lng }, selectedShape.props.id, null, true);\n                    gmap.fitBounds(state, circle.getBounds());\n                    updateState({ selectedShape: circle });\n                    gmap.setRadius(circle);\n                }\n                break;\n\n            case 'revert':\n                if (selectedShape.editable)\n                    selectedShape.setEditable(false);\n\n                let reveredMarker = null;\n                if (recordData) {\n                    reveredMarker = clone(selectedMarker);\n                    reveredMarker.impact_type = recordData.impact_type;\n                    reveredMarker.impact_area = recordData.impact_area;\n                    reveredMarker.impact_radius = recordData.impact_radius;\n                    reveredMarker.impact_state = recordData.impact_state;\n                } else\n                    reveredMarker = selectedMarker;\n\n                const inputType = reveredMarker.impact_type || 'polygon';\n                let inputPath = reveredMarker.impact_area || \"\";\n                let inputRadius = reveredMarker.impact_radius || 500;\n\n                if (inputType == \"polygon\" && inputPath) {\n                    if (selectedShape.props.type == \"polygon\" && selectedShape.setPath) {\n                        const paths = inputPath.map(p => {\n                            return {\n                                lat: parseFloat(p[1]),\n                                lng: parseFloat(p[0])\n                            };\n                        });\n                        selectedShape.setPath(paths);\n                        if (recordData)\n                            updateState({ selectedMarker: reveredMarker });\n                    } else { //Should remove circle and create polygon during revert, if impacted area shape is changed before\n                        selectedShape.setMap(null);\n                        selectedShape.setVisible(false);\n                        const polygon = gmap.addPolygon(state, inputPath, selectedShape.props.id);\n                        if (polygon.bounds)\n                            gmap.fitBounds(state, polygon.bounds);\n                        if (recordData)\n                            updateState({ selectedShape: polygon, selectedMarker: reveredMarker });\n                        else\n                            updateState({ selectedShape: polygon });\n                    }\n                } else if (inputRadius) {\n                    selectedShape.setMap(null);\n                    selectedShape.setVisible(false);\n                    const circle = gmap.addCircle(state, inputRadius, { lat: rec.lat, lng: rec.lng }, selectedShape.props.id, null, true);\n                    gmap.fitBounds(state, circle.getBounds());\n                    if (recordData)\n                        updateState({ selectedShape: circle, selectedMarker: reveredMarker });\n                    else\n                        updateState({ selectedShape: circle });\n                }\n                break;\n\n            case 'update':\n                if (selectedShape && selectedShape.props) {\n                    var newValue;\n                    let updatedMarker = clone(selectedMarker);\n                    if (selectedShape.props.type == 'polygon') {\n                        let pathArray = selectedShape.getPath();\n                        newValue = [];\n                        pathArray.forEach(p => {\n                            newValue.push([p.lng(), p.lat()]);\n                        });\n                        updatedMarker.impact_area = newValue;\n                    } else {\n                        newValue = selectedShape.getRadius();\n                        updatedMarker.impact_radius = newValue;\n                    }\n                    if (newValue) {\n                        updatedMarker.impact_type = selectedShape.props.type;\n                        updatedMarker.impact_state = 'customised';\n                        updateState({\n                            updatedShape: { id: selectedShape.props.id, shape: selectedShape.props.type, value: newValue },\n                            selectedMarker: updatedMarker\n                        });\n                    }\n                }\n\n\n            default:\n                if (selectedShape.editable)\n                    selectedShape.setEditable(false);\n\n        }\n    }\n};","import { keywords } from \"../constants\";\nimport * as gmap from '../googleLibs/mapHelperFunctions';\n\nexport const markerOverlayClosedHandler = ({ action, state, updateState }) => {\n    state.markerOverlayData.setMap(null);\n    updateState({\n        markerOverlayData: null\n    })\n};\n\nexport const clusterZoomChangeHandler = ({ action: { payload: { markers, zoom } }, state: { markerOverlayData }, updateState }) => {\n    if (markerOverlayData && markerOverlayData.map && markerOverlayData.map.zoom != 22) {\n        let canCloseOverlay = false;\n        if (markerOverlayData.props.id) {\n            canCloseOverlay = markers.some(m => markerOverlayData.props.id === m.props.id);\n        } else if (markerOverlayData.props.marker_count && markerOverlayData.props.first_id && markers.length != markerOverlayData.props.marker_count) {\n            if (zoom < 10 || markers.some(m => markerOverlayData.props.first_id === m.props.id))\n                canCloseOverlay = true;\n        }\n        if (canCloseOverlay) {\n            markerOverlayData.setMap(null);\n            updateState({\n                markerOverlayData: null\n            })\n        }\n    }\n};\n\nexport const clusterClickHandler = ({ updateState, action: { payload: { markers, clickAction, position } }, state }) => {\n    let { layerData } = state;\n    if (markers && markers.length) {\n        const rec = markers[0].props;\n        const layerRef = layerData[rec.layer + keywords.RECORD_ID_SEPERATOR + rec.collection];\n        if (layerRef) {\n            if (layerRef.table && (!clickAction || clickAction == 'info')) {\n                showMarkerRecordList(markers, rec, layerRef, updateState);\n            } else if (clickAction && clickAction == 'select') {\n                showClusterOverlay(markers, position, rec.layer, rec.collection, state, updateState);\n            }\n        }\n    }\n};\n\nexport const showMarkerRecordList = (markers, rec, layerRef, updateState) => {\n    let query = \"\";\n    if (markers.length < 20) {\n        query = \"sys_idIN\" + markers.map(m => m.props.id).join(',');\n    } else {\n        query = layerRef.query ? layerRef.query + '^' : \"\";\n        query = query + rec.query;\n    }\n    updateState([\n        {\n            path: 'clusterModalData',\n            value: {\n                query,\n                table: layerRef.table,\n                name: layerRef.name\n            },\n            operation: 'assign'\n        },\n        {\n            path: 'clusterModalOpen',\n            value: true,\n            operation: 'set'\n        }\n    ]);\n};\n\n\nexport const showClusterOverlay = (markers, position, layer, collection, state, updateState) => {\n    let records = markers.map((marker) => {\n        return marker.props.id;\n    });\n\n    const html = `\n    <fam-map-clusteroverlay\n        layer-data=\"@fam-map-dataprovider/layers\"\n        records=\"${records.join(',')}\" \n        layer=\"${layer}\" \n        collection=\"${collection}\">\n    </fam-map-clusteroverlay>`;\n\n    if (state.markerOverlayData)\n        state.markerOverlayData.setMap(null);\n    let overlay = gmap.getInfoOverlay(position, html, state.googleMapsRef, { x: -230, y: -50 }, { first_id: markers[0].props.id, marker_count: markers.length });\n\n    updateState({\n        markerOverlayData: overlay\n    })\n};\n\nexport const modalOpenSetHandler = ({ updateState }) => {\n    updateState({ clusterModalOpen: false, clusterModalData: {} });\n};\n","import * as gmap from '../googleLibs/mapHelperFunctions';\nimport { sortBy } from 'lodash';\n\nexport const initSearchService = ({ state, updateState, action: { payload: { searchKeyword } } }) => {\n  const { properties: { mapSearchPlaces }, layerData } = state;\n  if (mapSearchPlaces) {\n    executeSearchWithPlaces(state, searchKeyword, updateState);\n  } else {\n    let searchResults = searchLayer(layerData, searchKeyword);\n    updateState({ searchResults });\n  }\n\n};\n\n\nconst executeSearchWithPlaces = (state, searchKeyword, updateState) => {\n  const { layerData } = state;\n  let searchResults = [];\n  let gotPlacesResults = false;\n  let gotLayerResults = false;\n  \n  try {\n    const processPlacesSearchResults = (results, updateState) => {\n      searchResults.push(...results.map((r) => {\n        return {\n          ...r,\n          label: r.structured_formatting.main_text,\n          sublabel: r.description,\n          icon: \"map-pin-fill\",\n          id: Math.random().toString(36).substr(2, 9)\n        };\n      }));\n\n      gotPlacesResults = true;\n      if (gotLayerResults)\n        interleaveSearchResult(searchResults, updateState);\n    };\n\n    const processPlacesSearchFailure = (updateState) => {\n      gotPlacesResults = true;\n      if (gotLayerResults)\n        interleaveSearchResult(searchResults, updateState);\n      console.error('Somethng went wrong with places API!');\n      return;\n    };\n\n    gmap.searchPlaces(state, searchKeyword, processPlacesSearchResults, processPlacesSearchFailure, updateState);\n    searchResults.push(...searchLayer(layerData, searchKeyword));\n    gotLayerResults = true;\n    if (gotPlacesResults)\n      interleaveSearchResult(searchResults, updateState);\n\n  } catch (e) {\n  }\n};\n\nconst searchLayer = (layerData, searchKeyword) => {\n  let layersResults = [];\n\n  Object.keys(layerData).forEach(key => {\n    if (!layerData[key].skip_search && layerData[key].clusters && layerData[key].clusters.markers_) {\n      let markers = sortBy(layerData[key].clusters.markers_, ['props.title']);\n      let count = 0;\n      for (var m in markers) {\n        if (markers[m].props.title.toLowerCase().includes(searchKeyword)) {\n          layersResults.push({ ...markers[m].props, label: markers[m].props.title, sublabel: markers[m].props.title });\n          if (count > 20)\n            break;\n          else\n            count++;\n        }\n      }\n    }\n  });\n\n  return layersResults;\n};\n\nconst interleaveSearchResult = (searchResults, updateState) => {\n  if (searchResults.length > 20) {\n    searchResults = sortBy(searchResults, ['label']);\n    searchResults.splice(20, searchResults.length - 21);\n  }\n  updateState({ searchResults });\n};\n"],"sourceRoot":""}