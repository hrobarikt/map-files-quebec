{"version":3,"sources":["webpack://__TECTONIC__sn_component_workspace_agent_assist/webpack/bootstrap","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_ui_renderer_snabbdom\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_ui_core\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./node_modules/css-loader/lib/css-base.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/util/agentAssistUtils.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__lodash_4_17_4[\\\"get\\\"]\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__sn_translate\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/consts.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__lodash_4_17_4[\\\"isEmpty\\\"]\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/viewUtils/uiActionCommonUtils.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/viewUtils/attachUtils.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/viewUtils/linkUtils.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/viewUtils/copyResolUtils.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_ui_effect_graphql\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-details-container/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/viewUtils/makeUIActionRestEffect.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_ui_effect_http\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers/searchActionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/viewUtils/restUtils.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/viewUtils/flagUtils.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-header/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_now_alert\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers/searchGraphqlQuery.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_now_toggle\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-as/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-filter/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-header/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-footer/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_now_empty_state\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__sn_component_timeago\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__lodash_4_17_4[\\\"escape\\\"]\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_now_record_common\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__lodash_4_17_4[\\\"cloneDeep\\\"]\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers/actionStateActionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-box/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-box/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/viewUtils/updateRelDocUtils.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-action-footer/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-recommendation-record/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__lodash_4_17_4[\\\"pick\\\"]\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__lodash_4_17_4[\\\"isObject\\\"]\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-recommendation-record/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-result-list-item/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-result-list-item/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__lodash_4_17_4[\\\"isNil\\\"]\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-footer/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-catalog-detail/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-component-record-detail/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./node_modules/sn-uxpage-presource/src/createPreSourceBehavior.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/now-agent-assist.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__lodash_4_17_4[\\\"unescape\\\"]\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/util/logger.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers/postActionRefreshGraphqlQuery.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-box/sn-aa-search-box.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-box/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-box/styles.scss?cf6e","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-box/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-as/sn-aa-search-as.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-as/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-as/styles.scss?5cae","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-as/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-as/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-filter/sn-aa-search-filter.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-filter/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_now_dropdown\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-filter/styles.scss?08aa","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-filter/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-filter/actions.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers/actionActionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/sn-aa-action-modal.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/styles.scss?b25f","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_now_modal\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$devsnc_sn_form_controls\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-modal/actionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-header/action-header.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-header/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-header/styles.scss?ec71","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-header/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-action-header/actionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers/searchControlsContainerActionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers/detailsContainerActionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers/configActionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers/configGraphqlQuery.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers/toggleViewActionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/actionHandlers/resultsContainerHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/styles.scss?6d34","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-no-results/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-no-results/sn-aa-no-results.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-no-results/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-no-results/styles.scss?cbfe","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-no-results/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-headerbar/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-headerbar/sn-aa-headerbar.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-headerbar/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-headerbar/styles.scss?9a43","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-headerbar/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-container/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-container/sn-aa-results-container.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-container/styles.scss?ac5c","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-container/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-container/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-list/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-list/sn-aa-results-list.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-list/styles.scss?c70f","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-list/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-list/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-recommendation-record/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-recommendation-record/sn-aa-recommendation-record.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-recommendation-record/styles.scss?2177","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-recommendation-record/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-result-list-item/sn-aa-result-list-item.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-result-list-item/styles.scss?8e0e","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-result-list-item/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-result-list-item/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-header/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-header/sn-aa-article-header.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-header/styles.scss?9590","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-header/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-header/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-body/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-body/sn-aa-article-body.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-body/styles.scss?cfbf","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-body/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-body/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-footer/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-footer/sn-aa-article-footer.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-footer/styles.scss?7f02","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-footer/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-article-footer/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-time-ago/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-time-ago/sn-aa-time-ago.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-time-ago/styles.scss?f065","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-time-ago/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-time-ago/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-action-footer/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-action-footer/sn-aa-action-footer.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-action-footer/styles.scss?71d9","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-action-footer/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/resultListItem/sn-aa-action-footer/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-footer/sn-aa-results-footer.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-footer/styles.scss?b69f","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-footer/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchResultsContainer/sn-aa-results-footer/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-controls-container/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-controls-container/sn-aa-search-controls-container.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-controls-container/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-controls-container/styles.scss?cc10","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/searchControlsContainer/sn-aa-search-controls-container/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-details-container/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-details-container/sn-aa-details-container.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-details-container/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-catalog-detail/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-catalog-detail/sn-aa-catalog-detail.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-catalog-detail/styles.scss?6518","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-catalog-detail/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-catalog-detail/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-catalog-detail/actionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-response-template-detail/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-response-template-detail/sn-aa-response-template-detail.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-response-template-detail/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-response-template-detail/styles.scss?4876","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-response-template-detail/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_now_button\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-component-record-detail/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-component-record-detail/sn-aa-component-record-detail.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-component-record-detail/actionHandler.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-component-record-detail/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_now_label_value\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-component-record-detail/styles.scss?f4e6","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-component-record-detail/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__sn_component_workspace_knowledge\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-details-container/actionHandlers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-details-container/styles.scss?81ab","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-aa-details-container/styles.scss","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/now-agent-assist/behaviors.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./node_modules/sn-uxpage-presource/src/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./node_modules/sn-uxpage-presource/src/getPageSettings.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./node_modules/sn-uxpage-presource/src/getProperty.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./node_modules/sn-uxpage-presource/src/getPageProp.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./node_modules/sn-uxpage-presource/src/user.behaviors.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__$servicenow_behavior_focus_19_4_4\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-agent-assist-uib/index.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-agent-assist-uib/sn-agent-assist-uib.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-agent-assist-uib/actionMappers.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/external \"__TECTONIC__lodash_4_17_4[\\\"isArray\\\"]\"","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-agent-assist-uib/view.js","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-agent-assist-uib/styles.scss?546a","webpack://__TECTONIC__sn_component_workspace_agent_assist/./src/sn-agent-assist-uib/styles.scss"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__TECTONIC__$servicenow_ui_renderer_snabbdom","__TECTONIC__$servicenow_ui_core","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","push","handleSysUiActionEvent","actionSysId","dispatch","UI_ACTION_BAR_ACTIONS","ACTION_CLICK","setFormFields","fields","saveForm","actions","fieldNamesArr","keys","fieldName","displayValue","action","GFORM_SET_VALUE","payload","saveFormAction","GFORM_SAVE","GFORM_INTERNAL_BATCH_ACTIONS","fieldEditable","replaceBadSpaces","string","decodeURIComponent","replace","showTabMessage","type","message","table","sysId","ADD_NOTIFICATIONS","notifications","sys_id","filterActionsByShowOnNew","isNewRecord","filter","showOnNew","getItemActionsMap","meta","isRecommendation","recommendationObj","recommendationAction","footerActions","actionId","actionName","restAPI","badge","reverseDisplayValue","headerActions","getRecommendationActions","isAdditionalResource","filterActionsByResult","items","resource_details","resourceId","split","processMetaAdditionalFields","additionalFields","limit","returnObj","bodyAdditionalFields","footerAdditionalFields","field","idx","arr","fieldValues","fieldObj","fieldLabel","fieldDisplayValue","getAttachFieldObj","attachActionConfig","currentTable","attachFieldName","fieldArray","useAttachNoteField","attachNoteField","DEFAULT_CONFIG","attachmentFields","includes","parseId","extractRecommendationResult","results","recommendation_result","parse","recommendation_action","recommendation_common_field","parseRecommendationObj","isEmptySearchTermAllowed","state","configs","allowEmptySearchTerm","resource","resourceSelectorState","selectedResource","additionalResNames","some","e","isListView","view","LIST_VIEW","generateUniqueKey","pre","Date","getTime","sanitizeHTMLSnippet","str","sanitized","substring","copyToClipboard","Promise","resolve","reject","tempElement","document","createElement","innerHTML","style","height","opacity","position","left","zIndex","body","appendChild","window","getSelection","removeAllRanges","range","createRange","success","selectNode","addRange","execCommand","err","removeChild","baseLinkFromRootDir","link","startsWith","isEmptyObj","obj","autoFocus","host","selector","setTimeout","shadowRoot","querySelector","focus","isUibClassDecorator","isUib","cssClass","selectResultItemByIndex","nowAgentAssistEl","resultItemEl","error","LOG","createLog","readonly","sys_readonly","visible","relatedLinks","title","toLowerCase","data","recommendationType","TASK_SOURCE_TYPES","__TECTONIC__lodash_4_17_4","__TECTONIC__sn_translate","AGENT_ASSIST","icon","WORKSPACE","maxLimit","attachmentType","CARD_VIEW_META_FIELD_LIMIT_PER_LINE","CARD_VIEW_META_FIELD_LIMIT","DETAIL_VIEW_VISIBLE_ACTION_LIMIT","DETAIL_VIEW_META_FIELD_LIMIT","SEARCHER","VISIBLE_ACTIONS","Set","RECOMMENDATION_HEADER_ICON","DEFAULT_RECOMMENDATION_HEADER_TITLE","RECOMMENDATION_DETECTION","RECOMMENDATION_PROPOSAL","DETAIL_VIEW","DEFAULT_RESOURCES_DISPLAY","AA_BOOTSTRAPPED","MAJOR_FIELD_BY_TABLE","incident","sn_customerservice_case","ENABLE_ACTIONABLE_FEEDBACK_ON_FLAG","PREVIEW_RECORD","AGENT_ASSIST_OPEN_RECORD_REQUESTED","AGENT_ASSIST_ADD_NOTIFICATIONS_REQUESTED","AGENT_ASSIST_SAVE_RECORD_REQUESTED","AGENT_ASSIST_TRIGGER_RECORD_UI_ACTION_REQUESTED","AGENT_ASSIST_SET_RECORD_VALUE_REQUESTED","externalActionMap","RESET_MODAL_STATE","getInitialModalState","active","activeModal","attachUtils","linkUtils","copyResolUtils","resetModalState","modalState","modalActionHandlers","coeffects","updateState","AA_PAGE_CHANGE_SEARCH","AA_UI_ACTION_CLICKED","AA_UPDATE_ACTION_STATE","AA_POST_ACTION_REFRESH","AA_POST_ACTION_REFRESH_SUCCEEDED","AA_REQUEST_CONFIG","AA_CONFIG_REQUEST_START","AA_CONFIG_REQUEST_SUCCESS","AA_CONFIG_REQUEST_FAILED","AA_CONFIG_IN_STATE","AA_UPDATE_REL_DOC","AA_POST_REL_DOC","AA_POST_REL_DOC_SUCCEEDED","AA_POST_REL_DOC_AH","AA_ATTACH_MODAL_SUBMIT","AA_ATTACH_MODAL_CANCEL","AA_ATTACH_MODAL_USER_INPUT","ATTACH_ACTION_ID","ATTACH_ACTION_PATH","AA_FETCH_ATTACHMENT","AA_FETCH_ATTACHMENT_SUCCESS","AA_FETCH_ATTACHMENT_ERROR","ATTACH_ARTICLE_DISPLAY","CANCEL_DISPLAY","getInnerComponent","attachModalState","currentFields","userInputObj","article","attachment","attachFieldLabel","userInputValue","Fragment","className","short_description","number","label","maxlength","onValueChange","_inputHandler","getFooterActions","variant","clickActionType","getHeaderLabel","actionHandlers","modalInternalActions","effect","stopPropagation","modalExternalActions","interceptors","before","context","effects","itemData","itemIndex","uiActionConfig","attachFieldObj","args","attach","result","properties","currentSysId","footerAction","actionValue","remove","fieldValue","fetchAttachment","requestData","relevant_doc","attachment_type","actionPath","AA_LINK_TO_ACTION_MODAL_SUBMIT","AA_LINK_TO_ACTION_MODAL_CANCEL","LINK_TO","LINK","linkModalState","resourceRecord","alert","expanded","manageExpanded","status","icon-name","confirmationMessage","work_notes","comments","actionDisplayValue","modalTitle","linkField","newEffect","errorMessage","successMessage","tableName","cardLabel","infoMessage","recordId","linkType","resourceTable","isAgentAssist","AA_COPYRES_MODAL_SUBMIT","AA_COPYRES_MODAL_CANCEL","AA_COPYRES_MODAL_USER_INPUT","COPYRES_ACTION_ID","AA_FETCH_RESOL_DETAIL","AA_FETCH_RESOL_DETAIL_RECOMMENDATION","AA_FETCH_RESOL_DETAIL_SUCCESS","AA_FETCH_RESOL_DETAIL_ERROR","COPY_RESOLUTION_DISPLAY","copyResolModalState","resolDetails","resourceNumber","currentNumber","alertText","resolutionInputs","display-value","display_value","choices","input","info_message","copyInfo","allFieldsAvailable","missingFields","handleCopyResolution","commonField","commonFieldValue","commonFieldDisplayValue","close_notes","copyResolutionForRecommendation","actionTargetTable","fetchResolDetail","__TECTONIC__$servicenow_ui_effect_graphql","AA_CONTAINER_SET_STATE","PROPERTIES_SET","AA_TOGGLE_DETAIL_VIEW","AA_CONTAINER_SHOW_PREV","AA_CONTAINER_SHOW_NEXT","AA_LIST_ITEM_REFOCUS","successActionType","errorActionType","createHttpEffect","method","dataParam","pathParams","__TECTONIC__$servicenow_ui_effect_http","buildBaseSearchRequestPayload","AA_FORM_SEARCH_AS_FIELD_CHANGED","AA_FORM_SEARCH_FIELD_CHANGED","AA_SEARCH","AA_SEARCH_STARTED","AA_SEARCH_SUCCEEDED","AA_SEARCH_FAILED","AA_UPDATE_SEARCH_STATE","AA_UPDATE_SEARCH_STATE_AND_ACTION_STATE","options","searchAsState","searchState","sourceField","formSearchField","currentSearchTerm","formSysID","formTable","tableConfig","cxsTableConfig","session","query","offset","originalQuery","resources","searchAs","isSearcherSelected","selected","user","includeRecommendation","recommendation","recommendationOnly","includePinnedArticles","uiType","logSearch","form","tn","serialized","_serializeFormFields","_buildSearchRequestPayload","warn","fieldsSerialized","trim","searchUtils","private","AA_RESOURCE_CHANGE_SEARCH","AA_SEARCH_BOX_CONTENT_CHANGED","AA_SEARCH_AS_CHANGE_SEARCH","isInitialSearch","loading","resourceSysId","selectedSearcher","selectedResourceInSearcher","searcherResourceNames","src","searchBoxValue","requestPayload","newSourceField","newCurrentSearchTerm","formSearchTerm","searchBoxText","newFormSearchField","newFormSearchTerm","newFields","newOffset","direction","newUserDisplayValue","newUserSysId","searchAsIsToggled","searchAsUser","createGraphQLEffect","SearchGraphQLQuery","variableList","searchVariableList","startActionType","isSearching","errors","GlideContextualSearch_Query","searchRequest","searchResults","searchResultsExcludeRecommendation","slice","excludeRecommendation","nextActionsData","returnedResults","hasMoreResults","resultsPerPage","amountOfPinnedArticles","Math","max","unshift","actionStates","actionStateUtils","updateActionState","nextPressed","detailViewState","nextPageLoading","prevPressed","prevPageLoading","detailProps","showDetail","selectedIndex","start","selectedItem","end","stack","REST_ACTION_ID","DEFAULT_ERROR_MESSAGE","restUtils","restModalState","modalInfoMsg","modalFields","modalBody","currentId","postModalRestRequired","actionStage","infoMsg","successful","errMsg","updateCurrentRecord","updateCurrentFields","useModal","updateCurrentRecordPreModal","updateCurrentFieldsPreModal","updateCurrentRecordPostModal","updateCurrentFieldsPostModal","startRestAction","FLAG_ACTION_ID","AA_FLAG_ACT_MODAL_SUBMIT","FLAG_ACTION_PATH","AA_FLAG_MODAL_USER_INPUT","AA_FLAG_ACTION","AA_INSERT_KB_ARTICLE_REQUEST","AA_INSERT_KB_ARTICLE_REQUEST_STARTED","AA_INSERT_KB_ARTICLE_SUCCEEDED","AA_INSERT_KB_ARTICLE_FAILED","SAVE_DISPLAY","FLAG_ARTICLE_DISPLAY","insertKBFeedbackEffect","flagUtils","flagModalState","errorMessageAlert","required","autofocus","invalid","disabled","actionConfirmModalProps","flagComment","reason","sysProperties","createTaskOnFlag","comment","default","updateRelDocUtils","__TECTONIC__$servicenow_now_alert","searchVariables","searchQuery","__TECTONIC__$servicenow_now_toggle","COMPONENT_BOOTSTRAPPED","COMPONENT_PROPERTY_CHANGED","actionTypes","AA_GET_ACTIONS_BY_CONDITION","AA_GET_ACTIONS_BY_CONDITION_SUCCEEDED","AA_UPDATE_ACTION_HEADER_STATE","AA_ACTION_CLICKED","AA_FOOTER_PREV_CLICKED","AA_FOOTER_NEXT_CLICKED","__TECTONIC__$servicenow_now_empty_state","__TECTONIC__sn_component_timeago","__TECTONIC__$servicenow_now_record_common","postActionRefreshGraphqlQuery","path","operation","oldActionStates","newActionState","forEach","visibleActions","Map","itemID","itemTableName","relevant_doc_table","itemSysId","relevance","actionLabel","actionValueCleanSpaces","has","actionProperties","set","sourceDoc","sourceDocUrl","cleanActionValue","index","original_search_terms","relevant_doc_url","relevant","score","source_doc","source_doc_url","search_resource_config","displayed_on","search_request","fullSearchResults","Array","from","itemsCondition","x","hexString","instanceId","actionStateCondition","AA_PROPOSE_RECOMMENDATION","AA_CLOSE_RECOMMENDATION","RECOMMENDATION_DEFAULT_ID","isDetection","formRecordInfo","formTimeStamp","size","recommendation_title","iconName","bare","on-click","config-aria","recommendationHeader","form-record-info","item-index","action-states","is-new-record","tabIndex","role","recommendationBody","primaryAction","visible-actions","is-detection","recommendationFooter","AA_RESULT_ONCLICK","AA_RESULT_ONKEYPRESS","AA_LOAD_CATALOG_DETAIL_REQUEST","AA_LOAD_CATALOG_DETAIL_STARTED","AA_LOAD_CATALOG_DETAIL_SUCCEEDED","AA_LOAD_CATALOG_DETAIL_FAILED","AA_GET_LATEST_WORKNOTE","AA_GET_LATEST_WORKNOTE_SUCCESS","AA_GET_LATEST_WORKNOTE_ERROR","AA_RECORD_SET_STATE","createPreSourceBehavior","componentTagName","dsName","transform","storeSeed","initialState","console","getPreSource","defVal","getBehaviorProp","undefined","createCustomElement","renderer","snabbdom","behaviors","timeAgoBehaviors","focusBehavior","searchFields","showSearcherFirst","searcherResources","searcherResActions","defaultResource","additionalResources","additionalResActions","searcherLabel","show","now","pageProps","showNext","showPrev","getProperty","reflect","styles","onBootstrap","enable","logLevel","LOG_LEVEL_ALL","LOG_LEVEL_ERROR","LOG_LEVEL_DEBUG","LOG_LEVEL_LOG","LOG_LEVEL_INFO","LOG_LEVEL_WARN","disable","_log","level","splice","apply","debug","arguments","log","info","configUtils","actionUtils","searchControlsContainerUtils","detailsContianerHandlers","toggleViewActionHandlers","resultsContainerHandlers","isLoading","handleValueChange","target","placeholder","aria-label","on-keyup","on-blur","on-focus","config","agentAssistInstanceId","headerText","checked","selectedList","dropdownItems","searcherGroup","searcherRes","additionalRes","searcherResWithGroup","getDropdownItems","hide-caret","hide-label","select","tooltip-content","selected-items","__TECTONIC__$servicenow_now_dropdown","actionClickedEffect","params","sysparm_parent_table","sysparm_parent_sys_id","catalogItemLink","catalogItemSPLink","linkToOpen","full_view_url","open","card_snippet","then","actionType","kbAttachment","formTimeStampChangedEffect","proposeRecommendationEffect","proposeUIActionSysId","closeRecommendationEffect","modalUtils","getModalUtils","opened","header-label","footer-actions","__TECTONIC__$servicenow_now_modal","__TECTONIC__$devsnc_sn_form_controls","dropdownOpened","actionsFiltered","filteredActions","isSelected","mainActions","otherActions","tags","displayText","aria-describedby","hasReverse","getAction","standaloneActions","shouldReverse","iconSize","manageOpened","dropdownMenu","getActionsByCondition","allActions","dropdownItemClickEffect","dropdownBtnClickEffect","getActionsByConditionSucceededEffect","newActions","actionClickedHandlerEffect","detailViewBootstrappedEffect","cardAndDetailViewPropsChangedEffect","previousValue","after","newIndex","virtualIndex","resultItems","resultItem","resultCount","retrieveActions","cxsResources","currentActionCondition","actionCondition","order","resourceActions","sort","actionA","actionB","sortActions","buildSearchAsConfig","searchAsConfigActive","searchAsConfigField","searchAsConfigFieldDisplay","initializeTableConfig","Number","cxs_context_config_id","cxs_table_field_config","allowResultPreviewButtons","resourceLabel","buildResourceSelectorConfig","resultsHeaderTextDisplay","getInitialSearchFieldState","initialSearchField","availableSearchFields","f","defaultFields","default_config","searchFieldsStr","reduce","a","b","cxsTableConfigSysId","ConfigGraphQLQuery","buildAndValidateConfigs","initializeSearchAsState","linkTarget","componentId","configuredSearchFields","foundChangedField","oldValue","newValue","formAction","selectedIndexIgnorePinned","carouselProps","agentAssistName","configSearchAs","searchAsFieldValue","searchAsUserSysId","newSearchAsUserValue","newSearchAsUserDisplayalue","searchAsProps","searchControlsContainerTag","is-uib","actionProps","innerContent","parentId","form-time-stamp","header-text","searchResourceResults","showNoResults","noResources","bodyText","aria-live","no-resources","cxs-table-config-active","hidden","getListViewContent","cxsTableConfigActive","emptyStateHeaderText","emptyStateBodyText","iconType","containerClass","itemActionStates","recommendationItem","fullList","itemActions","fillGrid","totalItems","idealGridSize","ceil","fill","searchResultList","showItem","event","cardOnclick","composedPath","elem","tagName","classList","contains","isCommunity","additionalFieldsObj","additional_fields","on-keypress","parent-key","is-recommendation","cardHeader","is-community","body-additional-fields","cardBody","showFooter","source-id","footer-additional-fields","cardFooter","parentKey","COMMUNITY_CONFIG","community_blog","edsIcon","community_question","community_answer","getCardLabel","card_label","table_name","header","cardIcon","card_icon","headerIcon","headerTitle","card_title","titleRow","snippet","snippetRow","additionalFieldsArray","metaFieldsNestedArray","j","truncated","align","metaRows","sourceId","dateField","fieldArr","filteredArr","modified_display","views","helpful","footerItems","notPinnedItems","viewCount","votes","answerCount","footerField","createdOnFields","updatedOnFields","getFooterItems","time_stamp","system_time","isUTC","transformState","time","lastUpdated","getTickTime","timeStamp","systemTime","computed","timeAgo","dateBoth","dateOnly","SnTimeAgo","setUpdateFn","update","indexOf","onClickHandler","children","detailsContainerRef","nextItem","prevItem","footerNavBar","ref","el","icon-set","DetailComponentName","detail_component_name","component-id","sys-id","frameless","pinned","getItem","catalogItem","ignore_price","price","description","aria-hidden","picture","props","fetchCatalogDetailEffect","getTitle","getBody","__TECTONIC__$servicenow_now_button","legacyHandleAllActions","workNote","showLatestWorkNote","onConnect","record_id","successAction","errorAction","worknote","additionFieldsObj","detail_additional_fields","getAdditionalFields","detail_title","previewObj","detail_link","getLink","detail_show_work_note","getLatestWorkNote","__TECTONIC__$servicenow_now_label_value","__TECTONIC__sn_component_workspace_knowledge","COMPONENT_DOM_READY","getBehaviors","getPageProp","getPageProperties","preUserData","preUserRoles","preUserPrefs","preWsConfigSysId","propertyName","defaultValue","preferences","__TECTONIC__$servicenow_behavior_focus_19_4_4","actionMappers"],"mappings":"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","file":"sn-component-workspace-agent-assist.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 52);\n","module.exports = __TECTONIC__$servicenow_ui_renderer_snabbdom;","module.exports = __TECTONIC__$servicenow_ui_core;","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","import get from 'lodash/get';\nimport unescape from 'lodash/unescape';\nimport {\n\tLIST_VIEW,\n\tDEFAULT_CONFIG,\n\tTASK_SOURCE_TYPES,\n\tGFORM_SAVE,\n\tGFORM_INTERNAL_BATCH_ACTIONS,\n\tGFORM_SET_VALUE,\n\tADD_NOTIFICATIONS\n} from '../consts';\nimport { UI_ACTION_BAR_ACTIONS } from '@servicenow/now-record-common';\nimport { createLog } from '../util/logger';\n\nexport const LOG = createLog('snComponentWorkspaceAgentAssist');\n\n/**\n * Dispatch NOW_RECORD_UI_ACTION_BAR#CLICKED to submit a System UI Action, such as \"Propose Major Incident\".\n * It should support the workspace client script for System UI Action.\n *\n * @param {string} actionSysId - The sys_id of the System UI Action.\n * @param {object} dispatch\n */\nexport function handleSysUiActionEvent(actionSysId, dispatch) {\n\tdispatch(UI_ACTION_BAR_ACTIONS.ACTION_CLICK, {\n\t\tactionSysId: actionSysId\n\t});\n}\n\nexport function setFormFields(fields, saveForm, dispatch) {\n\tif (!fields || !dispatch) {\n\t\treturn;\n\t}\n\n\tlet actions = [];\n\tconst fieldNamesArr = Object.keys(fields);\n\n\tfor (let i = 0; i < fieldNamesArr.length; i++) {\n\t\tconst fieldName = fieldNamesArr[i];\n\t\tconst value = fields[fieldName].value;\n\t\tconst displayValue = fields[fieldName].displayValue;\n\n\t\tconst action = {\n\t\t\tname: GFORM_SET_VALUE,\n\t\t\tpayload: { fieldName, value, displayValue }\n\t\t};\n\t\tactions.push(action);\n\t}\n\n\tif (saveForm) {\n\t\t// Append GFORM_SAVE action\n\t\tconst saveFormAction = {\n\t\t\tname: GFORM_SAVE,\n\t\t\tpayload: {}\n\t\t};\n\t\tactions.push(saveFormAction);\n\t}\n\n\tdispatch(GFORM_INTERNAL_BATCH_ACTIONS, {\n\t\tactions: actions\n\t});\n}\n\nexport function fieldEditable(fieldName, fields) {\n\tif (\n\t\t!fieldName ||\n\t\t!Object.prototype.hasOwnProperty.call(fields, fieldName)\n\t) {\n\t\treturn false;\n\t}\n\n\tconst { readonly, sys_readonly, visible } = fields[fieldName];\n\tif (!visible || readonly || sys_readonly) {\n\t\treturn false;\n\t}\n\n\t//If the field is visible, and not readonly by any means, return true\n\treturn true;\n}\n\nexport function replaceBadSpaces(string) {\n\treturn decodeURIComponent(\n\t\tencodeURIComponent(string)\n\t\t\t.replace(/%C2%A0/g, '%20')\n\t\t\t.replace(/%09%09+|%20%20+/g, '')\n\t);\n}\n\nexport function showTabMessage(type, message, table, sysId, dispatch) {\n\tdispatch(ADD_NOTIFICATIONS, {\n\t\tnotifications: [\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tmessage: message,\n\t\t\t\tsys_id: sysId,\n\t\t\t\ttable: table\n\t\t\t}\n\t\t]\n\t});\n}\n\n// This can be refactored by using\n// condition in ui action config\nfunction filterActionsByResult(actions, item) {\n\tconst { source } = item.meta;\n\tif (!actions || !item) {\n\t\treturn null;\n\t}\n\n\tif (source === 'catalog') {\n\t\t//if there is no relatedLink for order, we don't show order button.\n\t\tif (\n\t\t\t!item.relatedLinks ||\n\t\t\titem.relatedLinks.length === 0 ||\n\t\t\t!item.relatedLinks.some(\n\t\t\t\tlink => link.title.toLowerCase() === 'order'\n\t\t\t)\n\t\t) {\n\t\t\treturn actions.filter(action => action.actionId !== 'order');\n\t\t}\n\t}\n\n\treturn actions;\n}\n\nexport function filterActionsByShowOnNew(actions, isNewRecord) {\n\tif (!isNewRecord) {\n\t\treturn actions;\n\t}\n\n\treturn actions.filter(action => action.showOnNew);\n}\n\nexport function getItemActionsMap(item, actions) {\n\tconst { source } = item.meta;\n\tif (isRecommendation(item)) {\n\t\treturn getRecommendationActions(item);\n\t}\n\n\tif (!isAdditionalResource(item)) {\n\t\tfor (const key in actions) {\n\t\t\tif (actions[key].name === source) {\n\t\t\t\treturn {\n\t\t\t\t\tfooterActions: [],\n\t\t\t\t\theaderActions: filterActionsByResult(\n\t\t\t\t\t\tactions[key].items,\n\t\t\t\t\t\titem\n\t\t\t\t\t)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\tif (isAdditionalResource(item) && item.meta.resource_details) {\n\t\tconst [resourceId] = item.meta.resource_details.split(':');\n\t\treturn {\n\t\t\tfooterActions: [],\n\t\t\theaderActions: actions[resourceId].items\n\t\t};\n\t}\n\n\treturn {\n\t\tfooterActions: [],\n\t\theaderActions: []\n\t};\n}\n\nfunction getRecommendationActions(recommendationObj) {\n\tlet recommendationAction = get(\n\t\trecommendationObj,\n\t\t'meta.recommendation_action',\n\t\t''\n\t);\n\treturn {\n\t\tfooterActions: [\n\t\t\t{\n\t\t\t\tactionId: get(\n\t\t\t\t\trecommendationAction,\n\t\t\t\t\t'primary_action.actionId',\n\t\t\t\t\t''\n\t\t\t\t),\n\t\t\t\tactionName: get(\n\t\t\t\t\trecommendationAction,\n\t\t\t\t\t'primary_action.actionName',\n\t\t\t\t\t''\n\t\t\t\t),\n\t\t\t\tvalue: get(recommendationAction, 'primary_action.value', ''),\n\t\t\t\trestAPI: get(\n\t\t\t\t\trecommendationAction,\n\t\t\t\t\t'primary_action.restAPI',\n\t\t\t\t\t''\n\t\t\t\t),\n\t\t\t\tdisplayValue: get(\n\t\t\t\t\trecommendationAction,\n\t\t\t\t\t'primary_action.displaValue',\n\t\t\t\t\t''\n\t\t\t\t),\n\t\t\t\tbadge: get(recommendationAction, 'primary_action.badge', ''),\n\t\t\t\treverseDisplayValue: get(\n\t\t\t\t\trecommendationAction,\n\t\t\t\t\t'primary_action.reverseDisplayValue',\n\t\t\t\t\t''\n\t\t\t\t)\n\t\t\t}\n\t\t],\n\t\theaderActions: [...get(recommendationAction, 'additional_actions', '')]\n\t};\n}\n\nexport function processMetaAdditionalFields(additionalFields, limit) {\n\tlet returnObj = {\n\t\tbodyAdditionalFields: [],\n\t\tfooterAdditionalFields: []\n\t};\n\t//e.g. 'state///State///Closed|||impact///Impact///3 - Low|||category///Category///Inquiry / Help|||caller_id///Caller///Rick Berzle|||assigned_to///Assigned to///Don Goodliffe'\n\tif (!additionalFields) {\n\t\treturn returnObj;\n\t}\n\n\tadditionalFields.split('|||').map((field, idx, arr) => {\n\t\t// limit field number, excluding footer fields\n\t\tif (idx >= limit && idx < arr.length - 2) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst fieldValues = field.split('///');\n\t\tif (\n\t\t\tfieldValues.length < 3 ||\n\t\t\t!fieldValues[2] ||\n\t\t\tfieldValues[2] == 'null'\n\t\t) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst fieldObj = {\n\t\t\tfieldName: fieldValues[0],\n\t\t\tfieldLabel: fieldValues[1],\n\t\t\tfieldDisplayValue: fieldValues[2]\n\t\t};\n\t\tif (idx < arr.length - 2) {\n\t\t\treturnObj.bodyAdditionalFields.push(fieldObj);\n\t\t} else {\n\t\t\treturnObj.footerAdditionalFields.push(fieldObj);\n\t\t}\n\t\treturn null;\n\t});\n\treturn returnObj;\n}\n\n/**\n * util function for figuring out which field to attach to\n * @param {object} attachActionConfig - the action config of attach\n * @param {object} fields - field object of current form\n * @param {string} currentTable - table name of current form record\n * @returns {object} returns the object to which field text will be attached; empty object means, don't attach to any field, only log the action; null means no valid field found.\n */\nexport function getAttachFieldObj(attachActionConfig, fields, currentTable) {\n\tlet attachFieldName = null;\n\tlet fieldArray = [];\n\tconst { useAttachNoteField, attachNoteField } = attachActionConfig;\n\tif (\n\t\t((typeof useAttachNoteField === 'boolean' && useAttachNoteField) ||\n\t\t\tuseAttachNoteField === 'true') &&\n\t\t!attachNoteField\n\t) {\n\t\treturn {};\n\t}\n\n\tif (\n\t\t((typeof useAttachNoteField === 'boolean' && useAttachNoteField) ||\n\t\t\tuseAttachNoteField === 'true') &&\n\t\tattachNoteField\n\t) {\n\t\tfieldArray = attachNoteField.split(',');\n\t}\n\n\tfor (const item of fieldArray.concat(DEFAULT_CONFIG.attachmentFields)) {\n\t\tif (!item) {\n\t\t\tbreak;\n\t\t}\n\n\t\tlet table = null;\n\t\tlet field = item;\n\t\tif (item.includes('.')) {\n\t\t\t[table, field] = item.split('.');\n\t\t}\n\t\tif (table && table !== currentTable) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!fieldEditable(field, fields)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tattachFieldName = field;\n\t\tbreak;\n\t}\n\n\tif (attachFieldName) {\n\t\treturn {\n\t\t\t...fields[attachFieldName],\n\t\t\tname: attachFieldName\n\t\t};\n\t}\n\n\treturn null;\n}\n\nexport function parseId(id) {\n\tif (!id || !id.length) {\n\t\treturn null;\n\t}\n\n\tid = id.split(':');\n\tif (id.length !== 2) {\n\t\treturn {\n\t\t\ttable: '',\n\t\t\tsys_id: ''\n\t\t};\n\t}\n\n\treturn {\n\t\ttable: id[0],\n\t\tsys_id: id[1]\n\t};\n}\n\nexport function isRecommendation(data) {\n\tconst recommendationType = get(data, 'meta.recommendation_type', '');\n\treturn (\n\t\trecommendationType === 'detection' || recommendationType === 'proposal'\n\t);\n}\n\nexport function extractRecommendationResult(results) {\n\tif (results.length === 0) {\n\t\treturn null;\n\t}\n\n\tif (!isRecommendation(results[0])) {\n\t\treturn null;\n\t}\n\n\tvar item = parseRecommendationObj(results[0]);\n\treturn item;\n}\n\nfunction parseRecommendationObj(item) {\n\treturn {\n\t\t...item,\n\t\tmeta: {\n\t\t\t...item.meta,\n\t\t\trecommendation_result: JSON.parse(\n\t\t\t\tget(item, 'meta.recommendation_result', '')\n\t\t\t),\n\t\t\trecommendation_action: JSON.parse(\n\t\t\t\tget(item, 'meta.recommendation_action', '')\n\t\t\t),\n\t\t\trecommendation_common_field: JSON.parse(\n\t\t\t\tget(item, 'meta.recommendation_common_field', '')\n\t\t\t)\n\t\t}\n\t};\n}\n\nexport function isEmptySearchTermAllowed(state) {\n\tif (!state.configs.allowEmptySearchTerm) {\n\t\treturn false;\n\t}\n\n\tconst resource = state.resourceSelectorState.selectedResource;\n\tconst addResNames = state.configs.additionalResNames;\n\treturn addResNames.some(e => {\n\t\treturn e.value === resource;\n\t});\n}\n\nexport function isAdditionalResource(data) {\n\tif (isRecommendation(data)) {\n\t\treturn false;\n\t}\n\n\tconst { source } = data.meta;\n\treturn TASK_SOURCE_TYPES.includes(source);\n}\n\nexport function isListView(view) {\n\treturn view === LIST_VIEW;\n}\n\nexport function generateUniqueKey(pre) {\n\treturn `${pre}_${new Date().getTime()}`;\n}\n\nexport function sanitizeHTMLSnippet(str) {\n\tconst sanitized = str\n\t\t.replace(/(<([^>]+)>)/gi, '')\n\t\t.replace(/&nbsp;/gi, ' ')\n\t\t//substring 500 to reduce the length rendered to dom, improve performance\n\t\t.substring(0, 500);\n\treturn unescape(sanitized);\n}\n\nexport function copyToClipboard(str) {\n\treturn new Promise(function(resolve, reject) {\n\t\tconst tempElement = document.createElement('div');\n\t\ttempElement.innerHTML = str;\n\n\t\t// Hide the temporary element & move it offscreen\n\t\ttempElement.style.height = '0';\n\t\ttempElement.style.opacity = '0';\n\t\ttempElement.style.position = 'fixed';\n\t\ttempElement.style.left = '-9999px';\n\t\ttempElement.style.zIndex = '-1';\n\n\t\tdocument.body.appendChild(tempElement);\n\t\twindow.getSelection().removeAllRanges();\n\n\t\tconst range = document.createRange();\n\t\trange.selectNode(tempElement);\n\t\twindow.getSelection().addRange(range);\n\n\t\tlet success;\n\t\ttry {\n\t\t\tsuccess = document.execCommand('copy');\n\t\t} catch (err) {\n\t\t\tsuccess = false;\n\t\t} finally {\n\t\t\tdocument.body.removeChild(tempElement);\n\t\t}\n\n\t\treturn success ? resolve() : reject();\n\t});\n}\n\nexport function baseLinkFromRootDir(link) {\n\tif (!link) {\n\t\treturn '';\n\t}\n\n\tif (link.startsWith('/') || link.startsWith('http')) {\n\t\treturn link;\n\t}\n\n\treturn '/' + link;\n}\n\nexport function isEmptyObj(obj) {\n\tfor (let key in obj) {\n\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nexport function autoFocus(host, selector) {\n\tsetTimeout(() => host.shadowRoot.querySelector(selector).focus(), 100);\n}\n\nexport function isUibClassDecorator(isUib, cssClass) {\n\treturn cssClass + (isUib ? ' is-uib' : '');\n}\n\nexport function selectResultItemByIndex(nowAgentAssistEl, i) {\n\tlet resultItemEl = null;\n\ttry {\n\t\tresultItemEl = nowAgentAssistEl.shadowRoot\n\t\t\t.querySelector('sn-aa-results-container')\n\t\t\t.shadowRoot.querySelector('sn-aa-results-list')\n\t\t\t.shadowRoot.querySelector(\n\t\t\t\t`sn-aa-result-list-item:nth-child(${i + 1})`\n\t\t\t)\n\t\t\t.shadowRoot.querySelector('article');\n\t} catch (error) {\n\t\tresultItemEl = null;\n\t}\n\treturn resultItemEl;\n}\n","module.exports = __TECTONIC__lodash_4_17_4[\"get\"];","module.exports = __TECTONIC__sn_translate;","import { t } from 'sn-translate';\nimport { UI_ACTION_BAR_ACTIONS } from '@servicenow/now-record-common';\n\nexport const AGENT_ASSIST = {\n\tvalue: 'agent_assist',\n\ticon: 'graduation-cap',\n\tdisplayValue: t('Agent Assist')\n};\n\nexport const WORKSPACE = 'workspace';\nexport const TASK_SOURCE_TYPES = ['gliderecordsearch', 'scriptresource'];\n\nexport const DEFAULT_CONFIG = {\n\tmaxLimit: 10,\n\tlimit: 10,\n\tattachmentType: 'embed_link',\n\tattachmentFields: ['comments', 'description']\n};\n\nexport const CARD_VIEW_META_FIELD_LIMIT_PER_LINE = 3;\n\nexport const CARD_VIEW_META_FIELD_LIMIT = 5;\n\nexport const DETAIL_VIEW_VISIBLE_ACTION_LIMIT = 2;\n\nexport const DETAIL_VIEW_META_FIELD_LIMIT = 20;\n\nexport const SEARCHER = 'searcher';\n\nexport const VISIBLE_ACTIONS = new Set(['attach', 'This helped']); //TODO refactor, consider visibility by the condition if 'badge_label' is empty\n\nexport const RECOMMENDATION_HEADER_ICON = 'circle-info-outline';\n\nexport const DEFAULT_RECOMMENDATION_HEADER_TITLE = t('Recommendation');\n\nexport const RECOMMENDATION_DETECTION = 'detection';\n\nexport const RECOMMENDATION_PROPOSAL = 'proposal';\n\nexport const DETAIL_VIEW = 'detail_view';\n\nexport const LIST_VIEW = 'list_view';\n\nexport const DEFAULT_RESOURCES_DISPLAY = t('Default Resources');\n\nexport const AA_BOOTSTRAPPED = 'AGENT_ASSIST#BOOTSTRAPPED';\n//Table to major field mapping. Supports currently major use case for Incident and Case tables.\nexport const MAJOR_FIELD_BY_TABLE = {\n\tincident: 'major_incident_state',\n\tsn_customerservice_case: 'major_case_state'\n};\n//TODO used to be majorFieldOfTable, need to recover this behavior.\n\nexport const ENABLE_ACTIONABLE_FEEDBACK_ON_FLAG =\n\t'glide.knowman.feedback.enable_actionable_feedback_for_flag';\n\nexport const GFORM_INTERNAL_BATCH_ACTIONS = 'GFORM_INTERNAL#BATCH_ACTIONS';\nexport const GFORM_SET_VALUE = 'GFORM#SET_VALUE';\nexport const GFORM_SAVE = 'GFORM#SAVE';\nexport const ADD_NOTIFICATIONS = 'ADD_NOTIFICATIONS';\nexport const PREVIEW_RECORD = 'PREVIEW_RECORD';\n\nexport const AGENT_ASSIST_OPEN_RECORD_REQUESTED =\n\t'AGENT_ASSIST#OPEN_RECORD_REQUESTED';\nexport const AGENT_ASSIST_ADD_NOTIFICATIONS_REQUESTED =\n\t'AGENT_ASSIST#ADD_NOTIFICATIONS_REQUESTED';\nexport const AGENT_ASSIST_SAVE_RECORD_REQUESTED =\n\t'AGENT_ASSIST#SAVE_RECORD_REQUESTED';\nexport const AGENT_ASSIST_TRIGGER_RECORD_UI_ACTION_REQUESTED =\n\t'AGENT_ASSIST#TRIGGER_RECORD_UI_ACTION_REQUESTED';\nexport const AGENT_ASSIST_SET_RECORD_VALUE_REQUESTED =\n\t'AGENT_ASSIST#SET_RECORD_VALUE_REQUESTED';\n\nexport const externalActionMap = {\n\t[GFORM_SET_VALUE]: AGENT_ASSIST_SET_RECORD_VALUE_REQUESTED,\n\t[GFORM_SAVE]: AGENT_ASSIST_SAVE_RECORD_REQUESTED,\n\t[ADD_NOTIFICATIONS]: AGENT_ASSIST_ADD_NOTIFICATIONS_REQUESTED,\n\t[PREVIEW_RECORD]: AGENT_ASSIST_OPEN_RECORD_REQUESTED,\n\t[UI_ACTION_BAR_ACTIONS.ACTION_CLICK]: AGENT_ASSIST_TRIGGER_RECORD_UI_ACTION_REQUESTED\n};\n\n// (() => {})(externalActionMap);\n","module.exports = __TECTONIC__lodash_4_17_4[\"isEmpty\"];","import attachUtils from './attachUtils';\nimport linkUtils from './linkUtils';\nimport copyResolUtils from './copyResolUtils';\nconst EDS_MODAL_OPENED_SET = 'NOW_MODAL#OPENED_SET';\nexport const RESET_MODAL_STATE = 'RESET_MODAL_STATE';\n\nexport const getInitialModalState = () => {\n\treturn {\n\t\tactive: false,\n\t\tactiveModal: '',\n\t\t...attachUtils.getInitialModalState(),\n\t\t...linkUtils.getInitialModalState(),\n\t\t...copyResolUtils.getInitialModalState()\n\t};\n};\n\nconst resetModalState = state => {\n\treturn {\n\t\t...state,\n\t\tmodalState: {\n\t\t\t...getInitialModalState()\n\t\t}\n\t};\n};\n\nexport const modalActionHandlers = {\n\t[EDS_MODAL_OPENED_SET]: coeffects => {\n\t\tconst { state, action, updateState } = coeffects;\n\t\tif (!action.payload.value) {\n\t\t\tupdateState({ ...resetModalState(state) });\n\t\t}\n\t},\n\t[RESET_MODAL_STATE]: coeffects => {\n\t\tconst { state, updateState } = coeffects;\n\n\t\tupdateState({ ...resetModalState(state) });\n\t}\n};\n","export const AA_PAGE_CHANGE_SEARCH = 'AGENT_ASSIST#PAGE_CHANGE_SEARCH';\nexport const AA_BOOTSTRAPPED = 'AGENT_ASSIST#BOOTSTRAPPED';\nexport const AA_UI_ACTION_CLICKED = 'AGENT_ASSIST#UI_ACTION_CLICKED';\nexport const AA_UPDATE_ACTION_STATE = 'AGENT_ASSIST#UPDATE_ACTION_STATE';\n/* refresh following things after action is commited\n * action badge state from cxs_rel_doc tables\n * recommendation card\n */\nexport const AA_POST_ACTION_REFRESH = 'AGENT_ASSIST#POST_ACTION_REFRESH';\nexport const AA_POST_ACTION_REFRESH_SUCCEEDED =\n\t'AGENT_ASSIST#POST_ACTION_REFRESH_SUCCEEDED';\n\nexport const AA_REQUEST_CONFIG = 'AGENT_ASSIST#REQUEST_CONFIG';\nexport const AA_CONFIG_REQUEST_START = 'AGENT_ASSIST#CONFIG_REQUEST_START';\nexport const AA_CONFIG_REQUEST_SUCCESS = 'AGENT_ASSIST#CONFIG_REQUEST_SUCCESS';\nexport const AA_CONFIG_REQUEST_FAILED = 'AGENT_ASSIST#CONFIG_REQUEST_FAILED';\nexport const AA_CONFIG_IN_STATE = 'AGENT_ASSIST#CONFIG_IN_STATE';\n","export const AA_UPDATE_REL_DOC = 'AGENT_ASSIST#UPDATE_REL_DOC';\nexport const AA_POST_REL_DOC = 'AGENT_ASSIST#POST_REL_DOC';\nexport const AA_POST_REL_DOC_SUCCEEDED = 'AGENT_ASSIST#POST_REL_DOC_SUCCEEDED';\nexport const AA_POST_REL_DOC_AH = 'AGENT_ASSIST#POST_REL_DOC_AH';\n//AA_POST_REL_DOC_AH: handle helpful/unhelpful/unattach post into active stream","import get from 'lodash/get';\nimport escape from 'lodash/escape';\nimport { Fragment } from '@servicenow/ui-renderer-snabbdom'; //eslint-disable-line no-unused-vars\nimport { t } from 'sn-translate';\nimport makeUIActionRestEffect from './makeUIActionRestEffect';\nimport {\n\tsetFormFields,\n\treplaceBadSpaces,\n\tshowTabMessage\n} from '../../util/agentAssistUtils';\nimport { AA_UPDATE_REL_DOC } from '../actions';\nimport { RESET_MODAL_STATE } from './uiActionCommonUtils';\n\nexport const AA_ATTACH_MODAL_SUBMIT = 'AGENT_ASSIST#ATTACH_MODAL_SUBMIT';\nexport const AA_ATTACH_MODAL_CANCEL = 'AGENT_ASSIST#ATTACH_MODAL_CANCEL';\nexport const AA_ATTACH_MODAL_USER_INPUT =\n\t'AGENT_ASSIST#ATTACH_ACT_MODAL_USER_INPUT';\nexport const ATTACH_ACTION_ID = 'attach'; //to match the action_id in cxs_ui_action\nexport const ATTACH_ACTION_PATH = 'attach'; //to match rest resource name\nexport const AA_FETCH_ATTACHMENT = 'AGENT_ASSIST#FETCH_ATTACHMENT';\nexport const AA_FETCH_ATTACHMENT_SUCCESS =\n\t'AGENT_ASSIST#FFETCH_ATTACHMENT_SUCCESS';\nexport const AA_FETCH_ATTACHMENT_ERROR = 'AGENT_ASSIST#FFETCH_ATTACHMENT_ERROR';\nconst ATTACH_ARTICLE_DISPLAY = t('Attach Article');\nconst CANCEL_DISPLAY = t('Cancel');\n\nconst attachUtils = {\n\tgetInnerComponent(\n\t\tattachModalState = {},\n\t\tcurrentFields = {}, //eslint-disable-line no-unused-vars\n\t\tuserInputObj = {},\n\t\tdispatch\n\t) {\n\t\tconst _inputHandler = userInputObj => {\n\t\t\tdispatch(AA_ATTACH_MODAL_USER_INPUT, userInputObj);\n\t\t};\n\n\t\tconst { article } = attachModalState.attachment; //TODO get\n\t\tconst attachFieldLabel = get(\n\t\t\tattachModalState,\n\t\t\t'attachFieldObj.label',\n\t\t\tt('Add Comments')\n\t\t);\n\t\tconst attachFieldName = get(\n\t\t\tattachModalState,\n\t\t\t'attachFieldObj.name',\n\t\t\t'comments'\n\t\t);\n\t\tconst userInputValue = get(\n\t\t\tuserInputObj,\n\t\t\t`${attachFieldName}.value`,\n\t\t\t''\n\t\t);\n\t\t//TODO pass in field object, and add field computation here.\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"aa-modal--body\">\n\t\t\t\t\t<div className=\"aa-card\">\n\t\t\t\t\t\t<div className=\"aa-card--row\">\n\t\t\t\t\t\t\t<div className=\"aa-card--title aa-card--title__lg\">\n\t\t\t\t\t\t\t\t<span>{article.short_description}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"aa-card--body\">\n\t\t\t\t\t\t\t\t<span>{article.number}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"aa-modal--input\">\n\t\t\t\t\t\t<sn-record-input\n\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\tlabel={attachFieldLabel}\n\t\t\t\t\t\t\tvalue={userInputValue}\n\t\t\t\t\t\t\tmaxlength=\"4000\"\n\t\t\t\t\t\t\tonValueChange={(\n\t\t\t\t\t\t\t\t{ value, displayValue } //eslint-disable-line no-unused-vars\n\t\t\t\t\t\t\t) =>\n\t\t\t\t\t\t\t\t_inputHandler({\n\t\t\t\t\t\t\t\t\t[get(\n\t\t\t\t\t\t\t\t\t\tattachModalState,\n\t\t\t\t\t\t\t\t\t\t'attachFieldObj.name',\n\t\t\t\t\t\t\t\t\t\t'comments'\n\t\t\t\t\t\t\t\t\t)]: {\n\t\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t},\n\n\tgetFooterActions(userInputObj = {}) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tvariant: 'primary',\n\t\t\t\tlabel: ATTACH_ARTICLE_DISPLAY,\n\t\t\t\tclickActionType: AA_ATTACH_MODAL_SUBMIT,\n\t\t\t\tuserInputObj\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'secondary',\n\t\t\t\tlabel: CANCEL_DISPLAY,\n\t\t\t\tclickActionType: RESET_MODAL_STATE\n\t\t\t}\n\t\t];\n\t},\n\n\tgetHeaderLabel() {\n\t\treturn ATTACH_ARTICLE_DISPLAY;\n\t},\n\n\tgetInitialModalState() {\n\t\treturn {\n\t\t\t[ATTACH_ACTION_ID]: {}\n\t\t};\n\t},\n\tactionHandlers: {\n\t\tmodalInternalActions: {\n\t\t\t[AA_ATTACH_MODAL_USER_INPUT]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tuserInputObj: action.payload\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tstopPropagation: true\n\t\t\t}\n\t\t},\n\t\tmodalExternalActions: {\n\t\t\t//Fetch attachment\n\t\t\t[AA_FETCH_ATTACHMENT]: {\n\t\t\t\t...makeUIActionRestEffect(\n\t\t\t\t\tAA_FETCH_ATTACHMENT_SUCCESS,\n\t\t\t\t\tAA_FETCH_ATTACHMENT_ERROR\n\t\t\t\t),\n\t\t\t\tinterceptors: [\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: context => ({\n\t\t\t\t\t\t\t...context,\n\t\t\t\t\t\t\teffects: [\n\t\t\t\t\t\t\t\t...context.effects,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t//Store itemData uiActionConfig itemIndex for later use\n\t\t\t\t\t\t\t\t\teffect: coeffects => {\n\t\t\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\t\t\t\t\tupdateState\n\t\t\t\t\t\t\t\t\t\t} = coeffects;\n\t\t\t\t\t\t\t\t\t\tupdateState({\n\t\t\t\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\t\t\t\t\t\t[ATTACH_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tATTACH_ACTION_ID\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\titemData:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload.itemData,\n\t\t\t\t\t\t\t\t\t\t\t\t\titemIndex:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.itemIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuiActionConfig:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.uiActionConfig,\n\t\t\t\t\t\t\t\t\t\t\t\t\tattachFieldObj:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.attachFieldObj\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\targs: [context.coeffects]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\t\t\t[AA_FETCH_ATTACHMENT_SUCCESS]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\t\tconst { payload } = action;\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\tactiveModal: ATTACH_ACTION_ID,\n\t\t\t\t\t\t\t[ATTACH_ACTION_ID]: {\n\t\t\t\t\t\t\t\t...state.modalState.attach,\n\t\t\t\t\t\t\t\tattachment: payload.result\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\t\t\t[AA_FETCH_ATTACHMENT_ERROR]: { stopPropagation: true },\n\t\t\t[AA_ATTACH_MODAL_SUBMIT]: {\n\t\t\t\t//dispatch to form, update relevant doc, and clear modalState, show message.\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t[ATTACH_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\tuiActionConfig,\n\t\t\t\t\t\t\t\t\tattachment,\n\t\t\t\t\t\t\t\t\titemData,\n\t\t\t\t\t\t\t\t\titemIndex,\n\t\t\t\t\t\t\t\t\tattachFieldObj\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\ttable: currentTable,\n\t\t\t\t\t\t\t\tsysId: currentSysId\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} = {\n\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t[ATTACH_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\tuiActionConfig: {},\n\t\t\t\t\t\t\t\t\tattachment: {},\n\t\t\t\t\t\t\t\t\titemData: {},\n\t\t\t\t\t\t\t\t\tattachFieldObj: {}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\ttable: '',\n\t\t\t\t\t\t\t\tsysId: ''\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\t\tfooterAction: { userInputObj }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} = {\n\t\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\t\tfooterAction: { userInputObj: null }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdispatch\n\t\t\t\t\t} = coeffects;\n\t\t\t\t\tif (attachFieldObj && attachFieldObj.name) {\n\t\t\t\t\t\t//send update rel\n\t\t\t\t\t\tdispatch(AA_UPDATE_REL_DOC, {\n\t\t\t\t\t\t\titemData,\n\t\t\t\t\t\t\titemIndex,\n\t\t\t\t\t\t\tactionValue: uiActionConfig.value,\n\t\t\t\t\t\t\tremove: false\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t//add informessage\n\t\t\t\t\t\tshowTabMessage(\n\t\t\t\t\t\t\t'info',\n\t\t\t\t\t\t\t'<span>' +\n\t\t\t\t\t\t\t\tt(\n\t\t\t\t\t\t\t\t\t'Details of {0} have been added to the {1} field',\n\t\t\t\t\t\t\t\t\tescape(itemData.title),\n\t\t\t\t\t\t\t\t\tattachFieldObj.label\n\t\t\t\t\t\t\t\t) +\n\t\t\t\t\t\t\t\t'</span>',\n\t\t\t\t\t\t\tcurrentTable,\n\t\t\t\t\t\t\tcurrentSysId,\n\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t//add to form field and save\n\t\t\t\t\t\tconst fieldValue = replaceBadSpaces(\n\t\t\t\t\t\t\tget(\n\t\t\t\t\t\t\t\tuserInputObj,\n\t\t\t\t\t\t\t\t`${attachFieldObj.name}.value`,\n\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t) +\n\t\t\t\t\t\t\t\t'\\n' +\n\t\t\t\t\t\t\t\tattachment.article.content\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetFormFields(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t[attachFieldObj.name]: {\n\t\t\t\t\t\t\t\t\tvalue: fieldValue,\n\t\t\t\t\t\t\t\t\tdisplayValue: fieldValue\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttrue, // save form\n\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t//reset modalState\n\t\t\t\t\t\tdispatch(RESET_MODAL_STATE);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\t\t\t[AA_ATTACH_MODAL_CANCEL]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, updateState } = coeffects;\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\tactive: false,\n\t\t\t\t\t\t\tactiveModal: '',\n\t\t\t\t\t\t\t[ATTACH_ACTION_ID]: {}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tstopPropagation: true\n\t\t\t}\n\t\t}\n\t},\n\tfetchAttachment: (\n\t\t{ action, data, itemIndex, attachmentType, attachFieldObj },\n\t\tdispatch\n\t) => {\n\t\tdispatch(AA_FETCH_ATTACHMENT, {\n\t\t\titemData: data,\n\t\t\tuiActionConfig: action,\n\t\t\titemIndex,\n\t\t\tattachFieldObj,\n\t\t\trequestData: {\n\t\t\t\trelevant_doc: data.id,\n\t\t\t\tattachment_type: attachmentType\n\t\t\t},\n\t\t\tactionPath: ATTACH_ACTION_PATH\n\t\t});\n\t}\n};\n\nexport default attachUtils;\n","import get from 'lodash/get';\nimport escape from 'lodash/escape';\nimport { Fragment } from '@servicenow/ui-renderer-snabbdom'; //eslint-disable-line no-unused-vars\nimport { t } from 'sn-translate';\nimport makeUIActionRestEffect from './makeUIActionRestEffect';\nimport {\n\tfieldEditable,\n\tsetFormFields,\n\tshowTabMessage\n} from '../../util/agentAssistUtils';\nimport { AA_UPDATE_REL_DOC } from '../actions';\nimport '@servicenow/now-alert';\nimport { RESET_MODAL_STATE } from './uiActionCommonUtils';\n\nexport const AA_LINK_TO_ACTION_MODAL_SUBMIT =\n\t'AGENT_ASSIST#LINK_TO_ACT_MODAL_SUBMIT';\nexport const AA_LINK_TO_ACTION_MODAL_CANCEL =\n\t'AGENT_ASSIST#LINK_TO_ACT_MODAL_CANCEL';\nexport const LINK_TO = 'link_to';\nexport const LINK = 'link';\nconst AA_LINK_MODAL_INPUT = 'AGENT_ASSIST#LINK_MODAL_USER_INPUT_COMMENT';\nconst AA_LINK_TO_ACTION_SUCCESS = 'AGENT_ASSIST#LINK_TO_ACTION_SUCCESS';\nconst AA_LINK_TO_ACTION_ERROR = 'AGENT_ASSIST#LINK_TO_ACTION_ERROR';\nconst linkUtils = {\n\tgetInnerComponent(\n\t\tlinkModalState = {},\n\t\tcurrentFields = {},\n\t\tuserInputObj = {},\n\t\tdispatch\n\t) {\n\t\tconst _inputHandler = userInputObj => {\n\t\t\tdispatch(AA_LINK_MODAL_INPUT, userInputObj);\n\t\t};\n\n\t\tconst { resourceRecord = {} } = linkModalState; //TODO get\n\t\tconst alert =\n\t\t\tget(currentFields, 'number.displayValue', false) &&\n\t\t\tget(resourceRecord, 'number', null) ? (\n\t\t\t\tget(linkModalState, 'confirmationMessage', false) ? (\n\t\t\t\t\t<now-alert\n\t\t\t\t\t\texpanded=\"false\"\n\t\t\t\t\t\tmanageExpanded=\"false\"\n\t\t\t\t\t\tstatus=\"info\"\n\t\t\t\t\t\ticon-name=\"circle-info-outline\"\n\t\t\t\t\t\tcontent={t(\n\t\t\t\t\t\t\tlinkModalState.confirmationMessage,\n\t\t\t\t\t\t\tresourceRecord.number,\n\t\t\t\t\t\t\tcurrentFields.number.displayValue\n\t\t\t\t\t\t)}\n\t\t\t\t\t></now-alert>\n\t\t\t\t) : (\n\t\t\t\t\t<now-alert\n\t\t\t\t\t\texpanded=\"false\"\n\t\t\t\t\t\tmanageExpanded=\"false\"\n\t\t\t\t\t\tstatus=\"info\"\n\t\t\t\t\t\ticon-name=\"circle-info-outline\"\n\t\t\t\t\t\tcontent={t(\n\t\t\t\t\t\t\t'You are linking the current {0} as a child to {1}.',\n\t\t\t\t\t\t\tcurrentFields.number.displayValue,\n\t\t\t\t\t\t\tresourceRecord.number\n\t\t\t\t\t\t)}\n\t\t\t\t\t></now-alert>\n\t\t\t\t)\n\t\t\t) : null;\n\n\t\t//TODO pass in field object, and add field computation here.\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"aa-modal--body\">\n\t\t\t\t\t{alert}\n\t\t\t\t\t{!get(currentFields, 'work_notes', null) ? null : (\n\t\t\t\t\t\t<div className=\"aa-modal--input\">\n\t\t\t\t\t\t\t<sn-record-input\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\tlabel={currentFields['work_notes'].label}\n\t\t\t\t\t\t\t\tvalue={get(\n\t\t\t\t\t\t\t\t\tuserInputObj,\n\t\t\t\t\t\t\t\t\t'work_notes.value',\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tmaxlength=\"4000\"\n\t\t\t\t\t\t\t\tonValueChange={({ value }) =>\n\t\t\t\t\t\t\t\t\t_inputHandler({\n\t\t\t\t\t\t\t\t\t\twork_notes: {\n\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\tdisplayValue: value\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{!get(currentFields, 'comments', null) ? null : (\n\t\t\t\t\t\t<div className=\"aa-modal--input\">\n\t\t\t\t\t\t\t<sn-record-input\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\tlabel={currentFields['comments'].label}\n\t\t\t\t\t\t\t\tvalue={get(userInputObj, 'comments.value', '')}\n\t\t\t\t\t\t\t\tmaxlength=\"4000\"\n\t\t\t\t\t\t\t\tonValueChange={({ value }) =>\n\t\t\t\t\t\t\t\t\t_inputHandler({\n\t\t\t\t\t\t\t\t\t\tcomments: {\n\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\tdisplayValue: value\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t},\n\n\tgetFooterActions(userInputObj = '', modalState = {}) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tvariant: 'primary',\n\t\t\t\tlabel: modalState.actionDisplayValue,\n\t\t\t\tclickActionType: AA_LINK_TO_ACTION_MODAL_SUBMIT,\n\t\t\t\tuserInputObj\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'secondary',\n\t\t\t\tlabel: t('Cancel'),\n\t\t\t\tclickActionType: RESET_MODAL_STATE\n\t\t\t}\n\t\t];\n\t},\n\n\tgetHeaderLabel(linkModalState = {}) {\n\t\treturn linkModalState.modalTitle;\n\t},\n\n\tgetInitialModalState() {\n\t\treturn {\n\t\t\t[LINK_TO]: {},\n\t\t\t[LINK]: {}\n\t\t};\n\t},\n\tactionHandlers: {\n\t\tmodalInternalActions: {\n\t\t\t[AA_LINK_MODAL_INPUT]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tuserInputObj: {\n\t\t\t\t\t\t\t...state.userInputObj,\n\t\t\t\t\t\t\t...action.payload\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tstopPropagation: true\n\t\t\t}\n\t\t},\n\t\tmodalExternalActions: {\n\t\t\t[LINK_TO]: {\n\t\t\t\t...makeUIActionRestEffect(\n\t\t\t\t\tAA_LINK_TO_ACTION_SUCCESS,\n\t\t\t\t\tAA_LINK_TO_ACTION_ERROR\n\t\t\t\t),\n\t\t\t\tinterceptors: [\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: context => ({\n\t\t\t\t\t\t\t...context,\n\t\t\t\t\t\t\teffects: [\n\t\t\t\t\t\t\t\t...context.effects,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t//Store itemData uiActionConfig itemIndex for later use\n\t\t\t\t\t\t\t\t\teffect: coeffects => {\n\t\t\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\t\t\t\t\tupdateState\n\t\t\t\t\t\t\t\t\t\t} = coeffects;\n\t\t\t\t\t\t\t\t\t\tupdateState({\n\t\t\t\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\t\t\t\t\t\t[LINK_TO]: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tLINK_TO\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\titemData:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload.itemData,\n\t\t\t\t\t\t\t\t\t\t\t\t\titemIndex:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.itemIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuiActionConfig:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.uiActionConfig,\n\t\t\t\t\t\t\t\t\t\t\t\t\tactionDisplayValue:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.actionDisplayValue\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\targs: [context.coeffects]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\t\t\t[AA_LINK_TO_ACTION_SUCCESS]: {\n\t\t\t\teffect: () => {},\n\t\t\t\targs: [],\n\t\t\t\tinterceptors: [\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: context => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tcoeffects: {\n\t\t\t\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\t\t\t\tpayload: { result: { linkField } } = {\n\t\t\t\t\t\t\t\t\t\t\tresult: { linkField: null }\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tpayload\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t// action,\n\t\t\t\t\t\t\t\t\tdispatch,\n\t\t\t\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\t\t\t\tproperties: { fields, table, sysId }\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcoeffects\n\t\t\t\t\t\t\t} = context;\n\t\t\t\t\t\t\tlet newEffect = {};\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tlinkField &&\n\t\t\t\t\t\t\t\tfields &&\n\t\t\t\t\t\t\t\tfieldEditable(linkField, fields)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tnewEffect = {\n\t\t\t\t\t\t\t\t\teffect: coeffects => {\n\t\t\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\t\tupdateState\n\t\t\t\t\t\t\t\t\t\t} = coeffects;\n\t\t\t\t\t\t\t\t\t\tupdateState({\n\t\t\t\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\t\t\t\t\t\tactiveModal: LINK_TO,\n\t\t\t\t\t\t\t\t\t\t\t\t[LINK_TO]: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tLINK_TO\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\t...payload.result\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\targs: [coeffects]\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewEffect = {\n\t\t\t\t\t\t\t\t\teffect: () => {\n\t\t\t\t\t\t\t\t\t\tconst errorMessage = t(\n\t\t\t\t\t\t\t\t\t\t\t'Link action is unavailable because {0} field is not present on current record form',\n\t\t\t\t\t\t\t\t\t\t\tfields[linkField]\n\t\t\t\t\t\t\t\t\t\t\t\t? fields[linkField].label\n\t\t\t\t\t\t\t\t\t\t\t\t: linkField\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tshowTabMessage(\n\t\t\t\t\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\t\t\t\t\terrorMessage,\n\t\t\t\t\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\t\t\t\t\tsysId,\n\t\t\t\t\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\targs: []\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...context,\n\t\t\t\t\t\t\t\teffects: [...context.effects, newEffect]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\t\t\t[AA_LINK_TO_ACTION_ERROR]: { stopPropagation: true },\n\t\t\t[AA_LINK_TO_ACTION_MODAL_SUBMIT]: coeffects => {\n\t\t\t\t//dispatch to form, update relevant doc, and clear modalState, show message.\n\t\t\t\tconst { state } = coeffects;\n\t\t\t\tconst {\n\t\t\t\t\tstate: {\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t[LINK_TO]: {\n\t\t\t\t\t\t\t\tuiActionConfig,\n\t\t\t\t\t\t\t\titemData,\n\t\t\t\t\t\t\t\titemIndex,\n\t\t\t\t\t\t\t\tresourceRecord,\n\t\t\t\t\t\t\t\tlinkField,\n\t\t\t\t\t\t\t\tsuccessMessage\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tproperties: { table: currentTable, sysId: currentSysId }\n\t\t\t\t\t} = {\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t[LINK_TO]: {\n\t\t\t\t\t\t\t\tuiActionConfig: {},\n\t\t\t\t\t\t\t\titemData: {},\n\t\t\t\t\t\t\t\tresourceRecord: {},\n\t\t\t\t\t\t\t\tlinkField: '',\n\t\t\t\t\t\t\t\tsuccessMessage: ''\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttable: '',\n\t\t\t\t\t\t\tsysId: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\taction: {\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tfooterAction: { userInputObj }\n\t\t\t\t\t\t}\n\t\t\t\t\t} = {\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tfooterAction: { userInputObj: {} }\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdispatch\n\t\t\t\t} = coeffects;\n\t\t\t\t//send update rel\n\t\t\t\tdispatch(AA_UPDATE_REL_DOC, {\n\t\t\t\t\titemData,\n\t\t\t\t\titemIndex,\n\t\t\t\t\tactionValue: uiActionConfig.value,\n\t\t\t\t\tremove: false\n\t\t\t\t});\n\n\t\t\t\t//add informessage\n\t\t\t\tconst tableName = get(\n\t\t\t\t\titemData,\n\t\t\t\t\t'meta.table_name',\n\t\t\t\t\t'incident'\n\t\t\t\t).toLowerCase();\n\t\t\t\tconst cardLabel = get(\n\t\t\t\t\titemData,\n\t\t\t\t\t'meta.card_label',\n\t\t\t\t\t'incident'\n\t\t\t\t).toLowerCase();\n\t\t\t\tlet infoMessage = t(\n\t\t\t\t\t'{0} has been linked to this {1}',\n\t\t\t\t\tescape(resourceRecord.number),\n\t\t\t\t\ttableName\n\t\t\t\t);\n\t\t\t\tif (cardLabel === 'incident' && tableName === cardLabel) {\n\t\t\t\t\tinfoMessage = t(\n\t\t\t\t\t\t'{0} has been set as the parent of this {1}',\n\t\t\t\t\t\tescape(resourceRecord.number),\n\t\t\t\t\t\ttableName\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (successMessage) {\n\t\t\t\t\tinfoMessage = t(\n\t\t\t\t\t\tsuccessMessage,\n\t\t\t\t\t\tescape(resourceRecord.number),\n\t\t\t\t\t\tget(state, 'currentFields.number.displayValue')\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tshowTabMessage(\n\t\t\t\t\t'info',\n\t\t\t\t\tinfoMessage,\n\t\t\t\t\tcurrentTable,\n\t\t\t\t\tcurrentSysId,\n\t\t\t\t\tdispatch\n\t\t\t\t);\n\n\t\t\t\t//add to form field and save\n\t\t\t\tsetFormFields(\n\t\t\t\t\t{\n\t\t\t\t\t\t[linkField]: {\n\t\t\t\t\t\t\tvalue: resourceRecord.sys_id,\n\t\t\t\t\t\t\tdisplayValue: resourceRecord.number\n\t\t\t\t\t\t},\n\t\t\t\t\t\t...userInputObj\n\t\t\t\t\t},\n\t\t\t\t\ttrue, // save form\n\t\t\t\t\tdispatch\n\t\t\t\t);\n\n\t\t\t\t//reset modalState\n\t\t\t\tdispatch(RESET_MODAL_STATE);\n\t\t\t},\n\t\t\t[AA_LINK_TO_ACTION_MODAL_CANCEL]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, updateState } = coeffects;\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\tactive: false,\n\t\t\t\t\t\t\tactiveModal: '',\n\t\t\t\t\t\t\t[LINK_TO]: {}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tstopPropagation: true\n\t\t\t}\n\t\t}\n\t},\n\tlink: ({ action, data, itemIndex }, dispatch) => {\n\t\tconst [table, recordId] = data.id.split(':');\n\t\tif (!table || !recordId) {\n\t\t\treturn;\n\t\t}\n\t\tconst [linkType] = action.actionId.split(':');\n\n\t\tdispatch(linkType === 'link_to' ? LINK_TO : LINK, {\n\t\t\titemData: data,\n\t\t\tuiActionConfig: action,\n\t\t\titemIndex,\n\t\t\trequestData: {\n\t\t\t\tresourceTable: table,\n\t\t\t\tresourceId: recordId,\n\t\t\t\tactionId: action.actionId,\n\t\t\t\tisAgentAssist: true\n\t\t\t},\n\t\t\tactionPath: action.restAPI,\n\t\t\tactionDisplayValue: action.displayValue || t('Submit')\n\t\t});\n\t}\n};\n\nexport default linkUtils;\n","import get from 'lodash/get';\nimport { Fragment } from '@servicenow/ui-renderer-snabbdom'; //eslint-disable-line no-unused-vars\nimport { t } from 'sn-translate';\nimport makeUIActionRestEffect from './makeUIActionRestEffect';\nimport {\n\tfieldEditable,\n\tsetFormFields,\n\t// replaceBadSpaces,\n\tshowTabMessage,\n\tparseId,\n\tisRecommendation\n} from '../../util/agentAssistUtils';\nimport { AA_UPDATE_REL_DOC } from '../actions';\nimport { RESET_MODAL_STATE } from './uiActionCommonUtils';\n\nexport const AA_COPYRES_MODAL_SUBMIT = 'AGENT_ASSIST#COPYRES_MODAL_SUBMIT';\nexport const AA_COPYRES_MODAL_CANCEL = 'AGENT_ASSIST#COPYRES_MODAL_CANCEL';\nexport const AA_COPYRES_MODAL_USER_INPUT =\n\t'AGENT_ASSIST#COPYRES_ACT_MODAL_USER_INPUT';\nexport const COPYRES_ACTION_ID = 'copy_resolution'; //to match the action_id in cxs_ui_action\nexport const AA_FETCH_RESOL_DETAIL = 'AGENT_ASSIST#FETCH_RESOL_DETAIL';\nexport const AA_FETCH_RESOL_DETAIL_RECOMMENDATION =\n\t'AGENT_ASSIST#FETCH_RESOL_DETAIL_RECOMMENDATION';\nexport const AA_FETCH_RESOL_DETAIL_SUCCESS =\n\t'AGENT_ASSIST#FETCH_RESOL_DETAIL_SUCCESS';\nexport const AA_FETCH_RESOL_DETAIL_ERROR =\n\t'AGENT_ASSIST#FETCH_RESOL_DETAIL_ERROR';\nexport const COPY_RESOLUTION_DISPLAY = t('Copy Resolution');\n//TODO multi export vs single export\nconst copyResolUtils = {\n\tgetInnerComponent(\n\t\tcopyResolModalState = {},\n\t\tcurrentFields = {},\n\t\tuserInputObj = {},\n\t\tdispatch\n\t) {\n\t\tconst _inputHandler = userInputObj => {\n\t\t\tdispatch(AA_COPYRES_MODAL_USER_INPUT, userInputObj);\n\t\t};\n\n\t\tconst { resolDetails, meta } = copyResolModalState;\n\t\t//close_code might not be available for case\n\t\tconst resourceNumber = get(meta, 'number.display_value', null);\n\t\tconst currentNumber = get(currentFields, 'number.displayValue', null);\n\t\tlet alertText = null;\n\t\tif (resourceNumber && currentNumber) {\n\t\t\talertText = t(\n\t\t\t\t'You are applying the resolution code and notes from {0} to {1}.',\n\t\t\t\tresourceNumber,\n\t\t\t\tcurrentNumber\n\t\t\t);\n\t\t} else if (currentNumber) {\n\t\t\talertText = t(\n\t\t\t\t'You are applying the resolution code to {0}.',\n\t\t\t\tcurrentNumber\n\t\t\t);\n\t\t}\n\n\t\tconst resolutionInputs = Object.keys(resolDetails)\n\t\t\t.map(key => {\n\t\t\t\tif (\n\t\t\t\t\t!key ||\n\t\t\t\t\ttypeof key !== 'string' ||\n\t\t\t\t\t!currentFields.hasOwnProperty(key) //eslint-disable-line\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\t// note the difference between userInputObj and resolDetails - resolDetails comes from rest response while userInputObj has value only after user provided inputs\n\t\t\t\tif (key.includes('_code')) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"aa-modal--input\" key={key}>\n\t\t\t\t\t\t\t<sn-record-choice\n\t\t\t\t\t\t\t\tlabel={currentFields[key].label}\n\t\t\t\t\t\t\t\tvalue={get(\n\t\t\t\t\t\t\t\t\tuserInputObj,\n\t\t\t\t\t\t\t\t\t`${key}.value`,\n\t\t\t\t\t\t\t\t\tresolDetails[key].value\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tdisplay-value={get(\n\t\t\t\t\t\t\t\t\tuserInputObj,\n\t\t\t\t\t\t\t\t\t`${key}.displayValue`,\n\t\t\t\t\t\t\t\t\tresolDetails[key].display_value\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tchoices={currentFields[key].choices}\n\t\t\t\t\t\t\t\tonValueChange={({ value, displayValue }) => {\n\t\t\t\t\t\t\t\t\t_inputHandler({\n\t\t\t\t\t\t\t\t\t\t[key]: {\n\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\tdisplayValue\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"aa-modal--input\" key={key}>\n\t\t\t\t\t\t\t<sn-record-input\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\tmaxlength=\"4000\"\n\t\t\t\t\t\t\t\tlabel={currentFields[key].label}\n\t\t\t\t\t\t\t\tvalue={get(\n\t\t\t\t\t\t\t\t\tuserInputObj,\n\t\t\t\t\t\t\t\t\t`${key}.value`,\n\t\t\t\t\t\t\t\t\tget(resolDetails, `${key}.value`, '')\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tdisplay-value={get(\n\t\t\t\t\t\t\t\t\tuserInputObj,\n\t\t\t\t\t\t\t\t\t`${key}.displayValue`,\n\t\t\t\t\t\t\t\t\tget(\n\t\t\t\t\t\t\t\t\t\tresolDetails,\n\t\t\t\t\t\t\t\t\t\t`${key}.display_value`,\n\t\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tonValueChange={({ value, displayValue }) => {\n\t\t\t\t\t\t\t\t\t_inputHandler({\n\t\t\t\t\t\t\t\t\t\t[key]: {\n\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\tdisplayValue\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.filter(input => !!input);\n\n\t\tif (!resolutionInputs || resolutionInputs.length < 1) {\n\t\t\talertText = t('Resolution fields not available.');\n\t\t}\n\n\t\tconst alert = alertText ? (\n\t\t\t<now-alert\n\t\t\t\texpanded=\"false\"\n\t\t\t\tmanageExpanded=\"false\"\n\t\t\t\tstatus=\"info\"\n\t\t\t\ticon-name=\"circle-info-outline\"\n\t\t\t\tcontent={alertText}\n\t\t\t></now-alert>\n\t\t) : null;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"aa-modal--body\">\n\t\t\t\t\t{alert}\n\t\t\t\t\t{resolutionInputs}\n\t\t\t\t\t<div className=\"aa-modal--input\">\n\t\t\t\t\t\t<sn-record-input\n\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\tlabel={currentFields['work_notes'].label}\n\t\t\t\t\t\t\tvalue={get(userInputObj, 'work_notes.value', '')}\n\t\t\t\t\t\t\tmaxlength=\"4000\"\n\t\t\t\t\t\t\tonValueChange={({ value }) => {\n\t\t\t\t\t\t\t\t_inputHandler({\n\t\t\t\t\t\t\t\t\twork_notes: {\n\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\tdisplayValue: value\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"aa-modal--input\">\n\t\t\t\t\t\t<sn-record-input\n\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\tlabel={currentFields['comments'].label}\n\t\t\t\t\t\t\tvalue={get(userInputObj, 'comments.value', '')}\n\t\t\t\t\t\t\tmaxlength=\"4000\"\n\t\t\t\t\t\t\tonValueChange={({ value }) => {\n\t\t\t\t\t\t\t\t_inputHandler({\n\t\t\t\t\t\t\t\t\tcomments: {\n\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\tdisplayValue: value\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t},\n\n\tgetFooterActions(userInputObj = {}) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tvariant: 'primary',\n\t\t\t\tlabel: COPY_RESOLUTION_DISPLAY,\n\t\t\t\tclickActionType: AA_COPYRES_MODAL_SUBMIT,\n\t\t\t\tuserInputObj\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'secondary',\n\t\t\t\tlabel: t('Cancel'),\n\t\t\t\tclickActionType: RESET_MODAL_STATE\n\t\t\t}\n\t\t];\n\t},\n\n\tgetHeaderLabel() {\n\t\treturn COPY_RESOLUTION_DISPLAY;\n\t},\n\n\tgetInitialModalState() {\n\t\treturn {\n\t\t\t[COPYRES_ACTION_ID]: {}\n\t\t};\n\t},\n\tactionHandlers: {\n\t\tmodalInternalActions: {\n\t\t\t[AA_COPYRES_MODAL_USER_INPUT]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tuserInputObj: {\n\t\t\t\t\t\t\t...state.userInputObj,\n\t\t\t\t\t\t\t...action.payload\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tstopPropagation: true\n\t\t\t}\n\t\t},\n\t\tmodalExternalActions: {\n\t\t\t[AA_FETCH_RESOL_DETAIL]: {\n\t\t\t\t...makeUIActionRestEffect(\n\t\t\t\t\tAA_FETCH_RESOL_DETAIL_SUCCESS,\n\t\t\t\t\tAA_FETCH_RESOL_DETAIL_ERROR\n\t\t\t\t),\n\t\t\t\tinterceptors: [\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: context => ({\n\t\t\t\t\t\t\t...context,\n\t\t\t\t\t\t\teffects: [\n\t\t\t\t\t\t\t\t...context.effects,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t//Store itemData uiActionConfig itemIndex for later use\n\t\t\t\t\t\t\t\t\teffect: coeffects => {\n\t\t\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\t\t\t\t\tupdateState\n\t\t\t\t\t\t\t\t\t\t} = coeffects;\n\t\t\t\t\t\t\t\t\t\tupdateState({\n\t\t\t\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\t\t\t\t\t\t[COPYRES_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tCOPYRES_ACTION_ID\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\titemData:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload.itemData,\n\t\t\t\t\t\t\t\t\t\t\t\t\titemIndex:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.itemIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuiActionConfig:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.uiActionConfig\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\targs: [context.coeffects]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\t\t\t[AA_FETCH_RESOL_DETAIL_SUCCESS]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\t\tconst { payload } = action;\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\tactiveModal: COPYRES_ACTION_ID,\n\t\t\t\t\t\t\t[COPYRES_ACTION_ID]: {\n\t\t\t\t\t\t\t\t...state.modalState[COPYRES_ACTION_ID],\n\t\t\t\t\t\t\t\tinfoMessage: payload.result.info_message,\n\t\t\t\t\t\t\t\tresolDetails: payload.result.payload,\n\t\t\t\t\t\t\t\tmeta: payload.result.meta\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\t\t\t[AA_FETCH_RESOL_DETAIL_SUCCESS]: {\n\t\t\t\teffect: () => {},\n\t\t\t\targs: [],\n\t\t\t\tinterceptors: [\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: context => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tcoeffects: {\n\t\t\t\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\t\t\t\t\tresult: { payload: copyInfo }\n\t\t\t\t\t\t\t\t\t\t} = { result: { payload: {} } },\n\t\t\t\t\t\t\t\t\t\tpayload\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\taction, //eslint-disable-line no-unused-vars\n\t\t\t\t\t\t\t\t\tdispatch,\n\t\t\t\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\t\t\t\tproperties: { fields, table, sysId }\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcoeffects\n\t\t\t\t\t\t\t} = context;\n\n\t\t\t\t\t\t\tlet allFieldsAvailable = true;\n\t\t\t\t\t\t\tlet newEffect = {};\n\t\t\t\t\t\t\tconst missingFields = Object.keys(copyInfo)\n\t\t\t\t\t\t\t\t.map(key => {\n\t\t\t\t\t\t\t\t\tif (!fieldEditable(key, fields)) {\n\t\t\t\t\t\t\t\t\t\tallFieldsAvailable = false;\n\t\t\t\t\t\t\t\t\t\treturn fields[key]\n\t\t\t\t\t\t\t\t\t\t\t? fields[key].label\n\t\t\t\t\t\t\t\t\t\t\t: key;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.filter(item => item !== null);\n\t\t\t\t\t\t\tif (allFieldsAvailable) {\n\t\t\t\t\t\t\t\tnewEffect = {\n\t\t\t\t\t\t\t\t\teffect: coeffects => {\n\t\t\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\t\tupdateState\n\t\t\t\t\t\t\t\t\t\t} = coeffects;\n\t\t\t\t\t\t\t\t\t\tupdateState({\n\t\t\t\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\t\t\t\t\t\tactiveModal: COPYRES_ACTION_ID,\n\t\t\t\t\t\t\t\t\t\t\t\t[COPYRES_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tCOPYRES_ACTION_ID\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\tinfoMessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayload.result\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.info_message,\n\t\t\t\t\t\t\t\t\t\t\t\t\tresolDetails:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayload.result.payload,\n\t\t\t\t\t\t\t\t\t\t\t\t\tmeta: payload.result.meta\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\targs: [coeffects]\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewEffect = {\n\t\t\t\t\t\t\t\t\teffect: (\n\t\t\t\t\t\t\t\t\t\tmissingFields,\n\t\t\t\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\t\t\t\tsysId,\n\t\t\t\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\t\tconst errorMessage = t(\n\t\t\t\t\t\t\t\t\t\t\t'Copy Resolution action is unavailable because following fields are not present on current record form: {0}',\n\t\t\t\t\t\t\t\t\t\t\tmissingFields.join(',')\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tshowTabMessage(\n\t\t\t\t\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\t\t\t\t\terrorMessage,\n\t\t\t\t\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\t\t\t\t\tsysId,\n\t\t\t\t\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\targs: [\n\t\t\t\t\t\t\t\t\t\tmissingFields,\n\t\t\t\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\t\t\t\tsysId,\n\t\t\t\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...context,\n\t\t\t\t\t\t\t\teffects: [...context.effects, newEffect]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\t\t\t[AA_FETCH_RESOL_DETAIL_ERROR]: { stopPropagation: true },\n\t\t\t[AA_FETCH_RESOL_DETAIL_RECOMMENDATION]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\t\tconst { payload } = action;\n\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\tactiveModal: COPYRES_ACTION_ID,\n\t\t\t\t\t\t\t[COPYRES_ACTION_ID]: {\n\t\t\t\t\t\t\t\t...state.modalState[COPYRES_ACTION_ID],\n\t\t\t\t\t\t\t\tinfoMessage: t('Resolution details are copied'),\n\t\t\t\t\t\t\t\tresolDetails: payload.resolDetails,\n\t\t\t\t\t\t\t\tuiActionConfig: payload.uiActionConfig,\n\t\t\t\t\t\t\t\titemIndex: payload.itemIndex,\n\t\t\t\t\t\t\t\titemData: payload.itemData\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\t\t\t//Modal buttons:\n\t\t\t[AA_COPYRES_MODAL_SUBMIT]: coeffects => {\n\t\t\t\t//dispatch to form, update relevant doc, and clear modalState, show message.\n\n\t\t\t\tconst {\n\t\t\t\t\tstate: {\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t[COPYRES_ACTION_ID]: {\n\t\t\t\t\t\t\t\tuiActionConfig,\n\t\t\t\t\t\t\t\titemData,\n\t\t\t\t\t\t\t\titemIndex,\n\t\t\t\t\t\t\t\tinfoMessage,\n\t\t\t\t\t\t\t\tresolDetails\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tproperties: { table: currentTable, sysId: currentSysId }\n\t\t\t\t\t} = {\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t[COPYRES_ACTION_ID]: {\n\t\t\t\t\t\t\t\tuiActionConfig: {},\n\t\t\t\t\t\t\t\titemData: {},\n\t\t\t\t\t\t\t\tinfoMessage: '',\n\t\t\t\t\t\t\t\tresolDetails: {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttable: '',\n\t\t\t\t\t\t\tsysId: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\taction: {\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tfooterAction: { userInputObj }\n\t\t\t\t\t\t}\n\t\t\t\t\t} = {\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tfooterAction: { userInputObj: null }\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdispatch\n\t\t\t\t} = coeffects;\n\n\t\t\t\t//send update rel\n\t\t\t\tdispatch(AA_UPDATE_REL_DOC, {\n\t\t\t\t\titemData,\n\t\t\t\t\titemIndex,\n\t\t\t\t\tactionValue: uiActionConfig.value,\n\t\t\t\t\tremove: false\n\t\t\t\t});\n\t\t\t\t//add informessage\n\t\t\t\tshowTabMessage(\n\t\t\t\t\t'info',\n\t\t\t\t\tinfoMessage,\n\t\t\t\t\tcurrentTable,\n\t\t\t\t\tcurrentSysId,\n\t\t\t\t\tdispatch\n\t\t\t\t);\n\t\t\t\t//add to form field and save\n\t\t\t\t//userInputObj, if present, will override resolDetails\n\t\t\t\t//TODO replace bad space for work_notes and comments\n\t\t\t\t// const fieldValue =  replaceBadSpaces(userInputObj);\n\t\t\t\tsetFormFields(\n\t\t\t\t\t{\n\t\t\t\t\t\t...resolDetails,\n\t\t\t\t\t\t...userInputObj\n\t\t\t\t\t}, //TODO refactor try to generalize and combine resolDetail and userInput\n\t\t\t\t\ttrue,\n\t\t\t\t\tdispatch\n\t\t\t\t);\n\n\t\t\t\t//reset modalState\n\t\t\t\tdispatch(RESET_MODAL_STATE);\n\t\t\t},\n\t\t\t[AA_COPYRES_MODAL_CANCEL]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, updateState } = coeffects;\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\tactive: false,\n\t\t\t\t\t\t\tactiveModal: '',\n\t\t\t\t\t\t\t[COPYRES_ACTION_ID]: {}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tstopPropagation: true\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst copyResolutionForRecommendation = function(\n\t{ action, data, itemIndex },\n\tdispatch\n) {\n\tconst commonField = get(\n\t\tdata,\n\t\t'meta.recommendation_common_field.common_field',\n\t\t''\n\t);\n\tconst commonFieldValue = get(data, 'meta.recommendation_result.value', '');\n\tconst commonFieldDisplayValue = get(\n\t\tdata,\n\t\t'meta.recommendation_result.display_value',\n\t\t''\n\t);\n\tconst resolDetails = {\n\t\t[commonField]: {\n\t\t\tvalue: commonFieldValue,\n\t\t\tdisplay_value: commonFieldDisplayValue\n\t\t},\n\t\tclose_notes: {\n\t\t\tvalue: '',\n\t\t\tdisplay_value: ''\n\t\t}\n\t};\n\tdispatch(AA_FETCH_RESOL_DETAIL_RECOMMENDATION, {\n\t\titemData: data,\n\t\tuiActionConfig: action,\n\t\titemIndex,\n\t\tresolDetails\n\t});\n};\n\nconst fetchResolDetail = function({ action, data, itemIndex }, dispatch) {\n\tconst { actionId } = action;\n\tconst [, actionTargetTable] = actionId.split(':');\n\tconst actionPath = `copy_${actionTargetTable}_resolution`;\n\tconst parsed = parseId(data.id);\n\tconst requestData = {\n\t\tresourceId: parsed.sys_id,\n\t\tactionId: actionId\n\t};\n\n\tdispatch(AA_FETCH_RESOL_DETAIL, {\n\t\titemData: data,\n\t\tuiActionConfig: action,\n\t\titemIndex,\n\t\trequestData,\n\t\tactionPath: actionPath\n\t});\n};\n\nexport const handleCopyResolution = function(\n\t{ action, data, itemIndex },\n\tdispatch\n) {\n\tif (isRecommendation(data)) {\n\t\tcopyResolutionForRecommendation({ action, data, itemIndex }, dispatch);\n\t} else {\n\t\tfetchResolDetail({ action, data, itemIndex }, dispatch);\n\t}\n};\n\nexport default copyResolUtils;\n","module.exports = __TECTONIC__$servicenow_ui_effect_graphql;","export const AA_CONTAINER_SET_STATE = 'AGENT_ASSIST#CONTAINER_SET_STATE';\nexport const PROPERTIES_SET = 'PROPERTIES_SET';\nexport const AA_TOGGLE_DETAIL_VIEW = 'AGENT_ASSIST#TOGGLE_DETAIL_VIEW';\nexport const AA_CONTAINER_SHOW_PREV = 'AGENT_ASSIST#CONTAINER_SHOW_PREV';\nexport const AA_CONTAINER_SHOW_NEXT = 'AGENT_ASSIST#CONTAINER_SHOW_NEXT';\nexport const AA_LIST_ITEM_REFOCUS = 'AGENT_ASSIST#LIST_ITEM_REFOCUS';\n","import { createHttpEffect } from '@servicenow/ui-effect-http';\n\nexport default (successActionType, errorActionType) => {\n\treturn createHttpEffect(\n\t\t'/api/now/cxs_actions/:actionPath',\n\t\t{\n\t\t\tmethod: 'POST',\n\t\t\tdataParam: 'requestData',\n\t\t\tpathParams: ['actionPath'],\n\t\t\tsuccessActionType: successActionType,\n\t\t\terrorActionType: errorActionType\n\t\t}\n\t);\n};\n","module.exports = __TECTONIC__$servicenow_ui_effect_http;","import get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport cloneDeep from 'lodash/cloneDeep';\nimport SearchGraphQLQuery, { searchVariableList } from './searchGraphqlQuery';\nimport { createGraphQLEffect } from '@servicenow/ui-effect-graphql';\nimport { actionStateUtils } from './actionStateActionHandlers';\nimport { WORKSPACE, SEARCHER } from '../../consts';\nimport { AA_CONFIG_IN_STATE } from '../actions';\nimport { AA_SEARCH_BOX_CONTENT_CHANGED } from '../../searchControlsContainer/sn-aa-search-box/index';\nimport { AA_SEARCH_AS_CHANGE_SEARCH } from '../../searchControlsContainer/sn-aa-search-as/index';\nimport { AA_RESOURCE_CHANGE_SEARCH } from '../../searchControlsContainer/sn-aa-search-filter/index';\nimport {\n\tLOG,\n\textractRecommendationResult,\n\tisRecommendation,\n\tisEmptySearchTermAllowed\n} from '../../util/agentAssistUtils';\n\n//TODO move actions to place of dispatch\nexport const AA_FORM_SEARCH_AS_FIELD_CHANGED =\n\t'AGENT_ASSIST#FORM_SEARCH_AS_FIELD_CHANGED';\nexport const AA_FORM_SEARCH_FIELD_CHANGED =\n\t'AGENT_ASSIST#FORM_SEARCH_FIELD_CHANGED';\nexport const AA_PAGE_CHANGE_SEARCH = 'AGENT_ASSIST#PAGE_CHANGE_SEARCH';\nexport const AA_SEARCH = 'AGENT_ASSIST#SEARCH';\nexport const AA_SEARCH_STARTED = 'AGENT_ASSIST#SEARCH_STARTED';\nexport const AA_SEARCH_SUCCEEDED = 'AGENT_ASSIST#SEARCH_SUCCEEDED';\nexport const AA_SEARCH_FAILED = 'AGENT_ASSIST#SEARCH_FAILED';\nexport const AA_UPDATE_SEARCH_STATE = 'AGENT_ASSIST#UPDATE_SEARCH_STATE';\nexport const AA_UPDATE_SEARCH_STATE_AND_ACTION_STATE =\n\t'AGENT_ASSIST#UPDATE_SEARCH_STATE_AND_ACTION_STATE';\n\nexport function buildBaseSearchRequestPayload(state, options = {}) {\n\tconst { searchAsState, searchState } = state;\n\tconst sourceField = !isEmpty(options.sourceField)\n\t\t? options.sourceField\n\t\t: !isEmpty(searchState.sourceField)\n\t\t? searchState.sourceField\n\t\t: searchState.formSearchField;\n\tconst currentSearchTerm = searchState.currentSearchTerm;\n\n\treturn {\n\t\tformSysID: state.properties.sysId,\n\t\tformTable: state.properties.table,\n\t\ttableConfig: state.properties.cxsTableConfig,\n\t\tisNewRecord: state.properties.isNewRecord || false,\n\t\tcontext: state.configs.context,\n\t\tsession: state.properties.sysId,\n\t\tlimit: state.configs.limit,\n\t\tmaxLimit: state.configs.maxLimit,\n\t\tquery: currentSearchTerm,\n\t\tsourceField,\n\t\toffset: 0, //Search from search text/resource/searchas change should start from first page\n\t\toriginalQuery: '',\n\t\tresources: state.resourceSelectorState.resources,\n\t\tsearchAs:\n\t\t\tsearchAsState.isSearcherSelected && searchAsState.selected\n\t\t\t\t? searchAsState.user.value\n\t\t\t\t: '',\n\t\tincludeRecommendation: !(\n\t\t\tstate.properties.isNewRecord || state.recommendation.item\n\t\t),\n\t\trecommendationOnly: false,\n\t\tincludePinnedArticles: true,\n\t\tuser: 'javascript:gs.getUserID()',\n\t\tuiType: WORKSPACE,\n\t\tlogSearch: false, //reference PRB1311989 + STRY50009545\n\t\tform: JSON.stringify({\n\t\t\ttn: state.properties.table,\n\t\t\tsys_id: state.properties.sysId,\n\t\t\tserialized: _serializeFormFields(state)\n\t\t}),\n\t\t...options\n\t};\n}\n\nfunction _buildSearchRequestPayload(state, options) {\n\t// When configuration is inactive, then we shouldn't allow search.\n\tif (!state.configs.active) {\n\t\tLOG.warn('Configuration is inactive, aborting search');\n\t\treturn null;\n\t}\n\n\tconst allowEmptySearchTerm = isEmptySearchTermAllowed(state);\n\tconst payload = buildBaseSearchRequestPayload(state, options);\n\tif (!allowEmptySearchTerm && !payload.query) {\n\t\tLOG.warn('search term is empty, aborting search');\n\t\treturn null;\n\t}\n\n\treturn payload;\n}\n\n/**\n * Function description: convert 'state.properties.fields' to the format that can be further used to build encoded query in Java side and it is aligned with g_form.serialized on platform.\n * @param {object} state\n * @return {str} fieldsSerialized\n */\nfunction _serializeFormFields(state) {\n\tlet fieldsSerialized = '';\n\tconst fields = { ...state.properties.fields };\n\tconst tableName = state.properties.table;\n\tfor (const field in fields) {\n\t\tif (typeof fields[field].value !== 'undefined') {\n\t\t\tfieldsSerialized =\n\t\t\t\tfieldsSerialized +\n\t\t\t\t'&' +\n\t\t\t\ttableName +\n\t\t\t\t'.' +\n\t\t\t\tfield +\n\t\t\t\t'=' +\n\t\t\t\tfields[field].value;\n\t\t}\n\t\tif (typeof fields[field].displayValue !== 'undefined') {\n\t\t\tfieldsSerialized =\n\t\t\t\tfieldsSerialized +\n\t\t\t\t'&' +\n\t\t\t\t'sys_display.' +\n\t\t\t\ttableName +\n\t\t\t\t'.' +\n\t\t\t\tfield +\n\t\t\t\t'=' +\n\t\t\t\tfields[field].displayValue;\n\t\t}\n\t}\n\treturn fieldsSerialized\n\t\t.substring(1) // substring is used to remove the first '&'.\n\t\t.trim()\n\t\t.replace(/\\s/g, '+');\n}\n\nfunction excludeRecommendation(searchResults) {\n\t// We should always return the copy, instead of the reference.\n\tif (searchResults && searchResults.length !== 0) {\n\t\treturn isRecommendation(searchResults[0])\n\t\t\t? searchResults.slice(1)\n\t\t\t: searchResults.slice(0);\n\t}\n\n\t// When searchResults is empty array, [], then we still need to return the copy, instead of the reference.\n\treturn searchResults.slice(0);\n}\n\nexport const searchUtils = {\n\tactions: {\n\t\t[AA_CONFIG_IN_STATE]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_RESOURCE_CHANGE_SEARCH]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_SEARCH_BOX_CONTENT_CHANGED]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_PAGE_CHANGE_SEARCH]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_SEARCH_AS_CHANGE_SEARCH]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_SEARCH]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_SEARCH_STARTED]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_SEARCH_SUCCEEDED]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_UPDATE_SEARCH_STATE]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_UPDATE_SEARCH_STATE_AND_ACTION_STATE]: {\n\t\t\tprivate: true\n\t\t}\n\t},\n\n\tactionHandlers: {\n\t\t//Initial Search\n\t\t[AA_CONFIG_IN_STATE]: coeffects => {\n\t\t\tconst { dispatch, state, updateState } = coeffects;\n\t\t\tconst payload = _buildSearchRequestPayload(state, {\n\t\t\t\tisInitialSearch: true\n\t\t\t});\n\n\t\t\tif (payload) {\n\t\t\t\tdispatch(AA_SEARCH, payload);\n\t\t\t}\n\t\t\t// At this moment, configs.loading is still true, so we need to set it back to false if we stop searching. We show \"No Matches Found\" only when both configs.loading and searchState.isSearching are false.\n\t\t\t// Affected case: a new record with an empty short description (empty search field) should first see \"Loading Search Results...\", and then show \"No Matches found\".\n\t\t\telse {\n\t\t\t\tupdateState({\n\t\t\t\t\t...state,\n\t\t\t\t\tconfigs: {\n\t\t\t\t\t\t...state.configs,\n\t\t\t\t\t\tloading: false\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t//selected resource changed\n\t\t[AA_RESOURCE_CHANGE_SEARCH]: coeffects => {\n\t\t\tconst {\n\t\t\t\tdispatch,\n\t\t\t\tstate,\n\t\t\t\taction: {\n\t\t\t\t\tpayload: { resourceSysId }\n\t\t\t\t},\n\t\t\t\tupdateState\n\t\t\t} = coeffects;\n\t\t\t//TODO KL duplicate code in searchControlsContainerUtils\n\t\t\tconst selectedSearcher = resourceSysId === SEARCHER;\n\t\t\tconst selectedResourceInSearcher = state.configs.searcherResourceNames.some(\n\t\t\t\tsrc => src.value === resourceSysId\n\t\t\t);\n\t\t\tupdateState({\n\t\t\t\t...state,\n\t\t\t\tresourceSelectorState: {\n\t\t\t\t\t...state.resourceSelectorState,\n\t\t\t\t\tactive: true,\n\t\t\t\t\tselectedResource: resourceSysId,\n\t\t\t\t\tresources: selectedSearcher ? [] : [resourceSysId]\n\t\t\t\t},\n\t\t\t\t//Search As option only shows for searcher resources\n\t\t\t\tsearchAsState: {\n\t\t\t\t\t...state.searchAsState,\n\t\t\t\t\tisSearcherSelected:\n\t\t\t\t\t\tselectedSearcher || selectedResourceInSearcher\n\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t: false,\n\t\t\t\t\tselected:\n\t\t\t\t\t\tselectedSearcher || selectedResourceInSearcher\n\t\t\t\t\t\t\t? state.searchAsState.selected\n\t\t\t\t\t\t\t: false //When selected non-searcher resource, reset searchAs selected.\n\t\t\t\t},\n\t\t\t\tsearchState: {\n\t\t\t\t\t...state.searchState,\n\t\t\t\t\tisInitialSearch: false\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst resources = resourceSysId === SEARCHER ? [] : [resourceSysId];\n\t\t\tconst payload = _buildSearchRequestPayload(state, {\n\t\t\t\tresources: resources\n\t\t\t});\n\t\t\tif (payload) {\n\t\t\t\tdispatch(AA_SEARCH, payload);\n\t\t\t}\n\t\t},\n\t\t//Search box content changed\n\t\t[AA_SEARCH_BOX_CONTENT_CHANGED]: coeffects => {\n\t\t\tconst { dispatch, state, action, updateState } = coeffects;\n\t\t\tconst searchBoxValue = action.payload.searchBoxValue.trim();\n\t\t\tconst currentSearchTerm = state.searchState.currentSearchTerm;\n\n\t\t\t//TODO check for bad space\n\t\t\tlet requestPayload = null;\n\t\t\t// varialbes for state\n\t\t\tlet newSourceField = 'additional_search';\n\t\t\tlet newCurrentSearchTerm = searchBoxValue;\n\t\t\tlet originalQuery = state.searchState.formSearchTerm;\n\t\t\tlet logSearch = true;\n\n\t\t\tif (!searchBoxValue) {\n\t\t\t\t//if search text is empty, use form to search\n\t\t\t\tnewSourceField = state.searchState.formSearchField;\n\t\t\t\tnewCurrentSearchTerm = state.searchState.formSearchTerm;\n\t\t\t\toriginalQuery = '';\n\t\t\t\tlogSearch = false;\n\t\t\t}\n\n\t\t\tif (currentSearchTerm === newCurrentSearchTerm) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdateState({\n\t\t\t\t...state,\n\t\t\t\tsearchState: {\n\t\t\t\t\t...state.searchState,\n\t\t\t\t\tisInitialSearch: false,\n\t\t\t\t\tsearchBoxText: searchBoxValue || '',\n\t\t\t\t\tsourceField: newSourceField,\n\t\t\t\t\tcurrentSearchTerm: newCurrentSearchTerm\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trequestPayload = _buildSearchRequestPayload(state, {\n\t\t\t\tquery: newCurrentSearchTerm,\n\t\t\t\toriginalQuery: originalQuery,\n\t\t\t\tsourceField: newSourceField,\n\t\t\t\tlogSearch: logSearch\n\t\t\t});\n\n\t\t\tif (requestPayload) {\n\t\t\t\tdispatch(AA_SEARCH, requestPayload);\n\t\t\t}\n\t\t},\n\t\t[AA_FORM_SEARCH_FIELD_CHANGED]: coeffects => {\n\t\t\tconst { dispatch, state, action, updateState } = coeffects;\n\t\t\t// const {searchState: {searchBoxText}} = state;\n\n\t\t\t//new values for search state\n\t\t\tlet newFormSearchField = action.payload.formSearchField;\n\t\t\tlet newFormSearchTerm = action.payload.formSearchTerm;\n\t\t\tlet newCurrentSearchTerm = state.searchState.currentSearchTerm;\n\n\t\t\tif (state.searchState.sourceField !== 'additional_search') {\n\t\t\t\tnewCurrentSearchTerm = newFormSearchTerm;\n\t\t\t}\n\n\t\t\tupdateState({\n\t\t\t\t...state,\n\t\t\t\tcurrentFields: cloneDeep(action.payload.newFields),\n\t\t\t\tsearchState: {\n\t\t\t\t\t...state.searchState,\n\t\t\t\t\tisInitialSearch: false,\n\t\t\t\t\tformSearchField: newFormSearchField,\n\t\t\t\t\tformSearchTerm: newFormSearchTerm,\n\t\t\t\t\tcurrentSearchTerm: newCurrentSearchTerm || ''\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Dispatch form field change search only if the user hasn't manually entered a search string in the search box\n\t\t\tif (state.searchState.sourceField === 'additional_search') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst payload = _buildSearchRequestPayload(state, {\n\t\t\t\tquery: newCurrentSearchTerm,\n\t\t\t\tsourceField: newFormSearchField\n\t\t\t});\n\t\t\tif (payload) {\n\t\t\t\tdispatch(AA_SEARCH, payload);\n\t\t\t}\n\t\t},\n\t\t[AA_PAGE_CHANGE_SEARCH]: coeffects => {\n\t\t\tconst { dispatch, state, action, updateState } = coeffects;\n\t\t\tconst oldOffset = state.searchState.offset;\n\t\t\tconst resultsPerPage = state.configs.limit;\n\t\t\tconst direction = action.payload.direction;\n\t\t\tconst newOffset = oldOffset + resultsPerPage * direction;\n\n\t\t\tupdateState({\n\t\t\t\t...state,\n\t\t\t\tsearchState: {\n\t\t\t\t\t...state.searchState,\n\t\t\t\t\tisInitialSearch: false\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst payload = _buildSearchRequestPayload(state, {\n\t\t\t\toffset: newOffset\n\t\t\t});\n\n\t\t\tdispatch(AA_SEARCH, payload);\n\t\t},\n\t\t// Once the reference field of \"search as\" gets updated, we need to update searchAsState, and then re-do the search if search as toggled.\n\t\t// This action will be called only when search as is configured.\n\t\t[AA_FORM_SEARCH_AS_FIELD_CHANGED]: coeffects => {\n\t\t\tconst { dispatch, state, action, updateState } = coeffects;\n\t\t\tconst newUserDisplayValue = action.payload.newUserDisplayValue;\n\t\t\tconst newUserSysId = action.payload.newUserSysId;\n\t\t\t// Update searchAsState because search as reference field get changed\n\t\t\tupdateState({\n\t\t\t\t...state,\n\t\t\t\tsearchAsState: {\n\t\t\t\t\t...state.searchAsState,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tdisplayValue: newUserDisplayValue,\n\t\t\t\t\t\tvalue: newUserSysId\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsearchState: {\n\t\t\t\t\t...state.searchState,\n\t\t\t\t\tisInitialSearch: false\n\t\t\t\t}\n\t\t\t});\n\t\t\t// Re-do the search when search as toggle is on and search as reference field is not empty\n\t\t\tconst searchAsIsToggled = get(\n\t\t\t\tstate,\n\t\t\t\t'searchAsState.selected',\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tif (!isEmpty(newUserSysId) && searchAsIsToggled) {\n\t\t\t\tdispatch(AA_SEARCH_AS_CHANGE_SEARCH, {\n\t\t\t\t\tsearchAsUser: newUserSysId\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t//search as toggled\n\t\t[AA_SEARCH_AS_CHANGE_SEARCH]: coeffects => {\n\t\t\tconst { dispatch, state, action } = coeffects;\n\t\t\t//TODO KL searchControlsContainerUtils duplicate code?\n\t\t\t// console.log(AA_SEARCH_AS_CHANGE_SEARCH, coeffects);\n\t\t\t//TODO empty search, and update state\n\n\t\t\tconst payload = _buildSearchRequestPayload(state, {\n\t\t\t\tsearchAs: action.payload.searchAsUser\n\t\t\t});\n\t\t\t//TODO updateState is done in actionHandlerSearchContrlsContainer...\n\t\t\tif (payload) {\n\t\t\t\tdispatch(AA_SEARCH, payload);\n\t\t\t}\n\t\t},\n\t\t//Search GraphQL request\n\t\t[AA_SEARCH]: createGraphQLEffect(SearchGraphQLQuery, {\n\t\t\tvariableList: searchVariableList,\n\t\t\tstartActionType: AA_SEARCH_STARTED,\n\t\t\tsuccessActionType: AA_SEARCH_SUCCEEDED,\n\t\t\terrorActionType: AA_SEARCH_FAILED\n\t\t}),\n\t\t[AA_SEARCH_STARTED]: coeffects => {\n\t\t\tconst { state, updateState } = coeffects;\n\t\t\tupdateState({\n\t\t\t\t...state,\n\t\t\t\tsearchState: {\n\t\t\t\t\t...state.searchState,\n\t\t\t\t\tisSearching: true\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[AA_SEARCH_SUCCEEDED]: coeffects => {\n\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t// console.log(AA_SEARCH_SUCCEEDED + ' action.payload', action.payload);\n\t\t\t//If GraphQL succeeded, but search is errored\n\t\t\t//If there is partial data, we will proceed with error logged.\n\t\t\tif (action.payload.errors && action.payload.errors.length > 0) {\n\t\t\t\tLOG.error(\n\t\t\t\t\t'Search returned with ' +\n\t\t\t\t\t\taction.payload.errors.length +\n\t\t\t\t\t\t' error(s)',\n\t\t\t\t\taction.payload.errors\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!action.payload.data ||\n\t\t\t\t!action.payload.data.GlideContextualSearch_Query\n\t\t\t) {\n\t\t\t\tLOG.error(\n\t\t\t\t\t'Search returned with empty data: ',\n\t\t\t\t\taction.payload.data\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst searchRequest = get(\n\t\t\t\taction.payload,\n\t\t\t\t'data.GlideContextualSearch_Query.request',\n\t\t\t\t''\n\t\t\t);\n\t\t\tconst searchResults = get(\n\t\t\t\taction.payload,\n\t\t\t\t'data.GlideContextualSearch_Query.results',\n\t\t\t\t[]\n\t\t\t);\n\t\t\tconst searchResultsExcludeRecommendation = excludeRecommendation(\n\t\t\t\tsearchResults\n\t\t\t); // Exclude the recommendation from searchResults if any. This should return a copy, instead of a reference.\n\t\t\tconst nextActionsData = get(\n\t\t\t\taction.payload,\n\t\t\t\t'data.GlideContextualSearch_Query.meta.recorded_actions',\n\t\t\t\tnull\n\t\t\t);\n\t\t\tconst returnedResults =\n\t\t\t\tget(\n\t\t\t\t\taction.payload,\n\t\t\t\t\t'data.GlideContextualSearch_Query.meta.returned_results',\n\t\t\t\t\t0\n\t\t\t\t) || 0; // This is the number of results returned for current page, including the amount of pinned articles if any.\n\t\t\tconst hasMoreResults =\n\t\t\t\tget(\n\t\t\t\t\taction.payload,\n\t\t\t\t\t'data.GlideContextualSearch_Query.meta.has_more_results',\n\t\t\t\t\tfalse\n\t\t\t\t) || false; // True if we can query more results from backend. Note that we may exceed maxlimit.\n\t\t\tconst resultsPerPage = get(state, 'configs.limit', 10); // This is the value we configured from Table Configuration.\n\t\t\tconst amountOfPinnedArticles = Math.max(\n\t\t\t\treturnedResults - resultsPerPage,\n\t\t\t\t0\n\t\t\t); // Get the amount of pinned articles for first page. Only the first page will show pinned articles.\n\n\t\t\t// Add recommendation item to the search results if it is already in the state\n\t\t\t// coz if it is already in the state the gql query won't fetch it and the searchResults won't have it.\n\t\t\t// We add it here to populate the actionStates object.\n\t\t\tif (state.recommendation.item) {\n\t\t\t\tsearchResults.unshift(state.recommendation.item);\n\t\t\t}\n\n\t\t\tconst actionStates = actionStateUtils.updateActionState(\n\t\t\t\tnextActionsData,\n\t\t\t\t{},\n\t\t\t\tsearchResults\n\t\t\t);\n\n\t\t\tconst recommendation = {\n\t\t\t\titem: state.recommendation.item\n\t\t\t\t\t? state.recommendation.item\n\t\t\t\t\t: extractRecommendationResult(searchResults)\n\t\t\t};\n\n\t\t\tconst nextPressed = state.detailViewState.nextPageLoading;\n\t\t\tconst prevPressed = state.detailViewState.prevPageLoading;\n\t\t\tlet detailProps = null;\n\t\t\t// console.log('searchRequest', searchRequest);\n\t\t\tif (state.detailViewState.showDetail) {\n\t\t\t\tif (nextPressed) {\n\t\t\t\t\tdetailProps = {\n\t\t\t\t\t\tshowDetail: true,\n\t\t\t\t\t\tselectedIndex: searchRequest.meta.window.start,\n\t\t\t\t\t\t// Pagination in detail view should only traverse the normal results excluding the recommendation\n\t\t\t\t\t\t// because we don't support the page navigation in the detail view of the recommendation.\n\t\t\t\t\t\tselectedItem: searchResultsExcludeRecommendation[0]\n\t\t\t\t\t};\n\t\t\t\t} else if (prevPressed) {\n\t\t\t\t\tdetailProps = {\n\t\t\t\t\t\tshowDetail: true,\n\t\t\t\t\t\tselectedIndex:\n\t\t\t\t\t\t\tsearchRequest.meta.window.end +\n\t\t\t\t\t\t\tamountOfPinnedArticles -\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t// Pagination in detail view should only traverse the normal results excluding the recommendation\n\t\t\t\t\t\t// because we don't support the page navigation in the detail view of the recommendation.\n\t\t\t\t\t\tselectedItem:\n\t\t\t\t\t\t\tsearchResultsExcludeRecommendation[\n\t\t\t\t\t\t\t\tsearchResultsExcludeRecommendation.length - 1\n\t\t\t\t\t\t\t]\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tupdateState({\n\t\t\t\tconfigs: {\n\t\t\t\t\t...state.configs,\n\t\t\t\t\tloading: false\n\t\t\t\t},\n\t\t\t\tsearchState: {\n\t\t\t\t\t...state.searchState,\n\t\t\t\t\tisSearching: false,\n\t\t\t\t\tsearchRequest: searchRequest,\n\t\t\t\t\tsearchResults: searchResultsExcludeRecommendation,\n\t\t\t\t\treturnedResults: returnedResults,\n\t\t\t\t\thasMoreResults: hasMoreResults,\n\t\t\t\t\toffset: searchRequest.meta.window.start,\n\t\t\t\t\tamountOfPinnedArticles: amountOfPinnedArticles\n\t\t\t\t},\n\t\t\t\trecommendation: {\n\t\t\t\t\t...state.recommendation,\n\t\t\t\t\t...recommendation\n\t\t\t\t},\n\t\t\t\tactionStates: actionStates,\n\t\t\t\tdetailViewState: {\n\t\t\t\t\t...detailProps\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[AA_SEARCH_FAILED]: coeffects => {\n\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\tLOG.error(action.payload.stack);\n\t\t\tupdateState({\n\t\t\t\t...state,\n\t\t\t\tsearchState: {\n\t\t\t\t\t...state.searchState,\n\t\t\t\t\terror: action.payload\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[AA_UPDATE_SEARCH_STATE_AND_ACTION_STATE]: coeffects => {\n\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\tconst {\n\t\t\t\tpayload: { searchState, actionStates }\n\t\t\t} = action;\n\t\t\tupdateState({\n\t\t\t\t...state,\n\t\t\t\tsearchState: {\n\t\t\t\t\t...state.searchState,\n\t\t\t\t\t...searchState\n\t\t\t\t},\n\t\t\t\tactionStates: {\n\t\t\t\t\t...actionStates\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n\n// const updateSearchState = (updateState = ()=>{}, state = {}, options = {}) => {\n// \tupdateState({\n// \t\t...state,\n// \t\tsearchState: {\n// \t\t\t...state.searchState,\n// \t\t\t...options\n// \t\t}\n// \t});\n// };\n\n//TODO search should be effect, not action.\n","import get from 'lodash/get';\nimport { Fragment } from '@servicenow/ui-renderer-snabbdom'; //eslint-disable-line no-unused-vars\nimport { t } from 'sn-translate';\nimport makeUIActionRestEffect from './makeUIActionRestEffect';\nimport { setFormFields, showTabMessage } from '../../util/agentAssistUtils';\nimport '@servicenow/now-alert';\nimport { RESET_MODAL_STATE } from './uiActionCommonUtils';\nimport { isEmptyObj } from '../../util/agentAssistUtils';\nimport { AA_UPDATE_REL_DOC } from '../actions';\n\nexport const REST_ACTION_ID = 'REST_ACTION';\nconst AA_REST_ACTION_MODAL_SUBMITTED =\n\t'AGENT_ASSIST#REST_ACTION_MODAL_SUBMITTED';\nconst AA_REST_ACTION_MODAL_CANCELED = 'AGENT_ASSIST#REST_ACTION_MODAL_CANCELED';\nconst AA_REST_ACTION_PREMODAL_STARTED =\n\t'AGENT_ASSIST#REST_ACTION_PREMODAL_STARTED';\nconst AA_REST_ACTION_PREMODAL_SUCCEEDED =\n\t'AGENT_ASSIST#REST_ACTION_PREMODAL_SUCCEEDED';\nconst AA_REST_ACTION_PREMODAL_FAILED =\n\t'AGENT_ASSIST#REST_ACTION_PREMODAL_FAILED';\nconst AA_REST_ACTION_POSTMODAL_STARTED =\n\t'AGENT_ASSIST#AA_REST_ACTION_POSTMODAL_STARTED';\nconst AA_REST_ACTION_POSTMODAL_SUCCEEDED =\n\t'AGENT_ASSIST#REST_ACTION_POSTMODAL_SUCCEEDED';\nconst AA_REST_ACTION_POSTMODAL_FAILED =\n\t'AGENT_ASSIST#REST_ACTION_POSTMODAL_FAILED';\nconst AA_REST_MODAL_INPUT = 'AGENT_ASSIST#REST_MODAL_INPUT';\nconst AA_REST_ACTION_MODAL_COMPLETED =\n\t'AGENT_ASSIST#REST_ACTION_MODAL_COMPLETED';\nconst DEFAULT_ERROR_MESSAGE = t(\n\t'Something went wrong. This action is not available.'\n);\n\nconst restUtils = {\n\tgetInnerComponent(\n\t\trestModalState = {},\n\t\tcurrentFields = {},\n\t\tuserInputObj = {},\n\t\tdispatch\n\t) {\n\t\t//eslint-disable-line no-unused-vars\n\t\tconst _inputHandler = userInputObj => {\n\t\t\tdispatch(AA_REST_MODAL_INPUT, userInputObj);\n\t\t};\n\t\tconst { modalInfoMsg, modalFields } = restModalState;\n\t\tconst alert = modalInfoMsg ? (\n\t\t\t<now-alert\n\t\t\t\texpanded=\"false\"\n\t\t\t\tmanageExpanded=\"false\"\n\t\t\t\tstatus=\"info\"\n\t\t\t\ticon-name=\"circle-info-outline\"\n\t\t\t\tcontent={modalInfoMsg}\n\t\t\t></now-alert>\n\t\t) : null;\n\n\t\tconst modalBody = modalFields\n\t\t\t? modalFields.map(item => {\n\t\t\t\t\treturn !get(currentFields, item.name, null) ? null : (\n\t\t\t\t\t\t<div className=\"aa-modal--input\" key={item.name}>\n\t\t\t\t\t\t\t<sn-record-input\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\tlabel={item.label}\n\t\t\t\t\t\t\t\tvalue={get(\n\t\t\t\t\t\t\t\t\tuserInputObj,\n\t\t\t\t\t\t\t\t\t`${item.name}.value`,\n\t\t\t\t\t\t\t\t\t`${item.value || ''}`\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tmaxlength=\"4000\"\n\t\t\t\t\t\t\t\tonValueChange={({ value }) =>\n\t\t\t\t\t\t\t\t\t_inputHandler({\n\t\t\t\t\t\t\t\t\t\t[item.name]: {\n\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\tdisplayValue: value\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t  })\n\t\t\t: null;\n\n\t\treturn (\n\t\t\t// eslint-disable-line no-unused-vars\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"aa-modal--body\">\n\t\t\t\t\t{alert}\n\t\t\t\t\t{modalBody}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t},\n\n\tgetFooterActions(userInputObj = '', modalState = {}) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tvariant: 'primary',\n\t\t\t\tlabel: modalState.actionDisplayValue,\n\t\t\t\tclickActionType: AA_REST_ACTION_MODAL_SUBMITTED,\n\t\t\t\tuserInputObj\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'secondary',\n\t\t\t\tlabel: t('Cancel'),\n\t\t\t\tclickActionType: RESET_MODAL_STATE\n\t\t\t}\n\t\t];\n\t},\n\n\tgetHeaderLabel(restModalState = {}) {\n\t\treturn restModalState.modalTitle;\n\t},\n\n\tgetInitialModalState() {\n\t\treturn {\n\t\t\t[REST_ACTION_ID]: {}\n\t\t};\n\t},\n\tactionHandlers: {\n\t\tmodalInternalActions: {\n\t\t\t[AA_REST_MODAL_INPUT]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tuserInputObj: {\n\t\t\t\t\t\t\t...state.userInputObj,\n\t\t\t\t\t\t\t...action.payload\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\n\t\t\t[AA_REST_ACTION_MODAL_SUBMITTED]: coeffects => {\n\t\t\t\tconst {\n\t\t\t\t\taction: {\n\t\t\t\t\t\tpayload: { footerAction: { userInputObj } } = {\n\t\t\t\t\t\t\tfooterAction: { userInputObj: {} }\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tstate: {\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tcurrentTable,\n\t\t\t\t\t\t\tcurrentId,\n\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\tuiActionConfig,\n\t\t\t\t\t\t\t\t\titemData,\n\t\t\t\t\t\t\t\t\tpostModalRestRequired\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} = {\n\t\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\tuiActionConfig: {},\n\t\t\t\t\t\t\t\t\titemData: {},\n\t\t\t\t\t\t\t\t\tpostModalRestRequired: false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdispatch\n\t\t\t\t} = coeffects;\n\n\t\t\t\tconst [table, recordId] = itemData.id.split(':');\n\t\t\t\tdispatch(AA_REST_ACTION_POSTMODAL_STARTED, {\n\t\t\t\t\tuserInputObj,\n\t\t\t\t\tpostModalRestRequired,\n\t\t\t\t\trequestData: {\n\t\t\t\t\t\tresourceTable: table,\n\t\t\t\t\t\tresourceId: recordId,\n\t\t\t\t\t\tcurrentTable,\n\t\t\t\t\t\tcurrentId,\n\t\t\t\t\t\tactionId: uiActionConfig.actionId,\n\t\t\t\t\t\tactionStage: 'post_modal'\n\t\t\t\t\t},\n\t\t\t\t\tactionPath: uiActionConfig.restAPI\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t[AA_REST_ACTION_POSTMODAL_STARTED]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, updateState } = coeffects;\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t...state.properties,\n\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t...state.properties.modalState,\n\t\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\t...state.properties.modalState[\n\t\t\t\t\t\t\t\t\t\tREST_ACTION_ID\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tactionDisplayValue: t('Please wait...')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tinterceptors: [\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: context => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tcoeffects: {\n\t\t\t\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\t\t\t\t\tpostModalRestRequired,\n\t\t\t\t\t\t\t\t\t\t\tuserInputObj\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} = {\n\t\t\t\t\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\t\t\t\t\tpostModalRestRequired: false,\n\t\t\t\t\t\t\t\t\t\t\tuserInputObj: {}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t[REST_ACTION_ID]: { infoMsg }\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} = {\n\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tinfoMsg: ''\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} = context;\n\t\t\t\t\t\t\tlet newEffect = {};\n\t\t\t\t\t\t\tif (postModalRestRequired) {\n\t\t\t\t\t\t\t\tnewEffect = {\n\t\t\t\t\t\t\t\t\t...makeUIActionRestEffect(\n\t\t\t\t\t\t\t\t\t\tAA_REST_ACTION_POSTMODAL_SUCCEEDED,\n\t\t\t\t\t\t\t\t\t\tAA_REST_ACTION_POSTMODAL_FAILED\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\targs: [\n\t\t\t\t\t\t\t\t\t\t'/api/now/cxs_actions/:actionPath',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\t\t\tdataParam: 'requestData',\n\t\t\t\t\t\t\t\t\t\t\tpathParams: ['actionPath'],\n\t\t\t\t\t\t\t\t\t\t\tsuccessActionType: AA_REST_ACTION_POSTMODAL_SUCCEEDED,\n\t\t\t\t\t\t\t\t\t\t\terrorActionType: AA_REST_ACTION_POSTMODAL_FAILED\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tcontext.coeffects\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewEffect = () => {\n\t\t\t\t\t\t\t\t\tdispatch(AA_REST_ACTION_MODAL_COMPLETED, {\n\t\t\t\t\t\t\t\t\t\tsuccessful: true,\n\t\t\t\t\t\t\t\t\t\tinfoMsg,\n\t\t\t\t\t\t\t\t\t\tuserInputObj\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...context,\n\t\t\t\t\t\t\t\teffects: [...context.effects, newEffect]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\n\t\t\t[AA_REST_ACTION_POSTMODAL_SUCCEEDED]: {\n\t\t\t\teffect: () => {},\n\t\t\t\targs: [],\n\t\t\t\tinterceptors: [\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: context => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tcoeffects: {\n\t\t\t\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\t\t\t\t\tresult: {\n\t\t\t\t\t\t\t\t\t\t\t\tsuccessful,\n\t\t\t\t\t\t\t\t\t\t\t\tinfoMsg,\n\t\t\t\t\t\t\t\t\t\t\t\terrMsg,\n\t\t\t\t\t\t\t\t\t\t\t\tupdateCurrentRecord,\n\t\t\t\t\t\t\t\t\t\t\t\tupdateCurrentFields\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} = {\n\t\t\t\t\t\t\t\t\t\t\tresult: {\n\t\t\t\t\t\t\t\t\t\t\t\tsuccessful: false,\n\t\t\t\t\t\t\t\t\t\t\t\tinfoMsg: '',\n\t\t\t\t\t\t\t\t\t\t\t\terrMsg: '',\n\t\t\t\t\t\t\t\t\t\t\t\tupdateCurrentRecord: false,\n\t\t\t\t\t\t\t\t\t\t\t\tupdateCurrentFields: {}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\t\t\t\tuserInputObj,\n\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuiActionConfig\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} = {\n\t\t\t\t\t\t\t\t\t\tuserInputObj: {},\n\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t[REST_ACTION_ID]: {}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} = context;\n\t\t\t\t\t\t\tlet newEffect = {};\n\t\t\t\t\t\t\tif (successful) {\n\t\t\t\t\t\t\t\tnewEffect = () => {\n\t\t\t\t\t\t\t\t\tdispatch(AA_REST_ACTION_MODAL_COMPLETED, {\n\t\t\t\t\t\t\t\t\t\tsuccessful,\n\t\t\t\t\t\t\t\t\t\tupdateCurrentRecord,\n\t\t\t\t\t\t\t\t\t\tupdateCurrentFields,\n\t\t\t\t\t\t\t\t\t\tuserInputObj,\n\t\t\t\t\t\t\t\t\t\tinfoMsg,\n\t\t\t\t\t\t\t\t\t\terrMsg\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewEffect = {\n\t\t\t\t\t\t\t\t\teffect: coeffects => {\n\t\t\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\t\tupdateState\n\t\t\t\t\t\t\t\t\t\t} = coeffects;\n\t\t\t\t\t\t\t\t\t\tupdateState({\n\t\t\t\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\t\t...state.properties,\n\t\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...state.properties\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.modalState,\n\t\t\t\t\t\t\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...state.properties\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.modalState[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tREST_ACTION_ID\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodalInfoMsg:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terrMsg ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDEFAULT_ERROR_MESSAGE,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactionDisplayValue:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuiActionConfig.displayValue\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\targs: [context.coeffects]\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...context,\n\t\t\t\t\t\t\t\teffects: [...context.effects, newEffect]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tstopPropagation: true\n\t\t\t}\n\t\t},\n\n\t\tmodalExternalActions: {\n\t\t\t[AA_REST_ACTION_PREMODAL_STARTED]: {\n\t\t\t\t...makeUIActionRestEffect(\n\t\t\t\t\tAA_REST_ACTION_PREMODAL_SUCCEEDED,\n\t\t\t\t\tAA_REST_ACTION_PREMODAL_FAILED\n\t\t\t\t),\n\t\t\t\tinterceptors: [\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: context => ({\n\t\t\t\t\t\t\t...context,\n\t\t\t\t\t\t\teffects: [\n\t\t\t\t\t\t\t\t...context.effects,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\teffect: coeffects => {\n\t\t\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\t\t\t\t\tupdateState\n\t\t\t\t\t\t\t\t\t\t} = coeffects;\n\t\t\t\t\t\t\t\t\t\tupdateState({\n\t\t\t\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tREST_ACTION_ID\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\t...action.payload.result,\n\t\t\t\t\t\t\t\t\t\t\t\t\titemData:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload.itemData,\n\t\t\t\t\t\t\t\t\t\t\t\t\titemIndex:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.itemIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuiActionConfig:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.uiActionConfig,\n\t\t\t\t\t\t\t\t\t\t\t\t\tactionDisplayValue:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.actionDisplayValue\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\targs: [context.coeffects]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\n\t\t\t[AA_REST_ACTION_PREMODAL_SUCCEEDED]: {\n\t\t\t\teffect: () => {},\n\t\t\t\targs: [],\n\t\t\t\tinterceptors: [\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: context => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tcoeffects: {\n\t\t\t\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\t\t\t\t\tresult: {\n\t\t\t\t\t\t\t\t\t\t\t\tsuccessful,\n\t\t\t\t\t\t\t\t\t\t\t\tuseModal,\n\t\t\t\t\t\t\t\t\t\t\t\tinfoMsg,\n\t\t\t\t\t\t\t\t\t\t\t\terrMsg,\n\t\t\t\t\t\t\t\t\t\t\t\tupdateCurrentRecord,\n\t\t\t\t\t\t\t\t\t\t\t\tupdateCurrentFields\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} = {\n\t\t\t\t\t\t\t\t\t\t\tresult: {\n\t\t\t\t\t\t\t\t\t\t\t\tsuccessful: false,\n\t\t\t\t\t\t\t\t\t\t\t\tuseModal: false,\n\t\t\t\t\t\t\t\t\t\t\t\tinfoMsg: '',\n\t\t\t\t\t\t\t\t\t\t\t\tupdateCurrentRecord: false,\n\t\t\t\t\t\t\t\t\t\t\t\tupdateCurrentFields: {}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tpayload\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tdispatch,\n\t\t\t\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\ttable: currentTable,\n\t\t\t\t\t\t\t\t\t\t\tsysId: currentSysId\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\t\t\t\titemData,\n\t\t\t\t\t\t\t\t\t\t\t\titemIndex,\n\t\t\t\t\t\t\t\t\t\t\t\tuiActionConfig\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} = {\n\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\ttable: '',\n\t\t\t\t\t\t\t\t\t\t\tsysId: ''\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\t\t\t\titemData: {},\n\t\t\t\t\t\t\t\t\t\t\t\titemIndex: {},\n\t\t\t\t\t\t\t\t\t\t\t\tuiActionConfig: {}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcoeffects\n\t\t\t\t\t\t\t} = context;\n\t\t\t\t\t\t\tlet newEffect = {};\n\t\t\t\t\t\t\tif (!successful) {\n\t\t\t\t\t\t\t\tnewEffect = () => {\n\t\t\t\t\t\t\t\t\tshowTabMessage(\n\t\t\t\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\t\t\t\terrMsg || DEFAULT_ERROR_MESSAGE,\n\t\t\t\t\t\t\t\t\t\tcurrentTable,\n\t\t\t\t\t\t\t\t\t\tcurrentSysId,\n\t\t\t\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tdispatch(RESET_MODAL_STATE);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (useModal) {\n\t\t\t\t\t\t\t\t\tnewEffect = {\n\t\t\t\t\t\t\t\t\t\teffect: coeffects => {\n\t\t\t\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\t\t\tupdateState\n\t\t\t\t\t\t\t\t\t\t\t} = coeffects;\n\t\t\t\t\t\t\t\t\t\t\tupdateState({\n\t\t\t\t\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\t\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\tactiveModal: REST_ACTION_ID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...state.modalState[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tREST_ACTION_ID\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...payload.result\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\targs: [coeffects]\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewEffect = () => {\n\t\t\t\t\t\t\t\t\t\tdispatch(AA_UPDATE_REL_DOC, {\n\t\t\t\t\t\t\t\t\t\t\titemData,\n\t\t\t\t\t\t\t\t\t\t\titemIndex,\n\t\t\t\t\t\t\t\t\t\t\tactionValue: uiActionConfig.value,\n\t\t\t\t\t\t\t\t\t\t\tremove: false\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tupdateCurrentRecord &&\n\t\t\t\t\t\t\t\t\t\t\t!isEmptyObj(updateCurrentFields)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tsetFormFields(\n\t\t\t\t\t\t\t\t\t\t\t\t{ ...updateCurrentFields },\n\t\t\t\t\t\t\t\t\t\t\t\ttrue, // save form\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdispatch(RESET_MODAL_STATE);\n\t\t\t\t\t\t\t\t\t\tif (infoMsg) {\n\t\t\t\t\t\t\t\t\t\t\tshowTabMessage(\n\t\t\t\t\t\t\t\t\t\t\t\t'info',\n\t\t\t\t\t\t\t\t\t\t\t\tinfoMsg,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentTable,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentSysId,\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...context,\n\t\t\t\t\t\t\t\teffects: [...context.effects, newEffect]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\n\t\t\t[AA_REST_ACTION_PREMODAL_FAILED]: { stopPropagation: true },\n\n\t\t\t[AA_REST_ACTION_MODAL_CANCELED]: ({ dispatch }) => {\n\t\t\t\tdispatch(RESET_MODAL_STATE);\n\t\t\t},\n\n\t\t\t[AA_REST_ACTION_POSTMODAL_FAILED]: { stopPropagation: true },\n\n\t\t\t[AA_REST_ACTION_MODAL_COMPLETED]: coeffects => {\n\t\t\t\tconst {\n\t\t\t\t\tstate: {\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\titemData,\n\t\t\t\t\t\t\t\titemIndex,\n\t\t\t\t\t\t\t\tuiActionConfig,\n\t\t\t\t\t\t\t\tupdateCurrentRecord: updateCurrentRecordPreModal,\n\t\t\t\t\t\t\t\tupdateCurrentFields: updateCurrentFieldsPreModal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tproperties: { sysId: currentSysId, table: currentTable }\n\t\t\t\t\t} = {\n\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t[REST_ACTION_ID]: {\n\t\t\t\t\t\t\t\titemData: {},\n\t\t\t\t\t\t\t\titemIndex: {},\n\t\t\t\t\t\t\t\tuiActionConfig: {},\n\t\t\t\t\t\t\t\tupdateCurrentRecordPreModal: false,\n\t\t\t\t\t\t\t\tupdateCurrentFieldsPreModal: {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tproperties: { sysId: '', table: '' }\n\t\t\t\t\t},\n\t\t\t\t\taction: {\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tsuccessful,\n\t\t\t\t\t\t\tupdateCurrentRecord: updateCurrentRecordPostModal,\n\t\t\t\t\t\t\tupdateCurrentFields: updateCurrentFieldsPostModal,\n\t\t\t\t\t\t\tuserInputObj,\n\t\t\t\t\t\t\tinfoMsg,\n\t\t\t\t\t\t\terrMsg\n\t\t\t\t\t\t}\n\t\t\t\t\t} = {\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tsuccessful: false,\n\t\t\t\t\t\t\tupdateCurrentRecordPostModal: false,\n\t\t\t\t\t\t\tupdateCurrentFieldsPostModal: {},\n\t\t\t\t\t\t\tuserInputObj: {},\n\t\t\t\t\t\t\tinfoMsg: '',\n\t\t\t\t\t\t\terrMsg: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdispatch\n\t\t\t\t} = coeffects;\n\n\t\t\t\tif (successful) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tupdateCurrentRecordPreModal ||\n\t\t\t\t\t\tupdateCurrentRecordPostModal ||\n\t\t\t\t\t\t!isEmptyObj(userInputObj)\n\t\t\t\t\t) {\n\t\t\t\t\t\tsetFormFields(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...updateCurrentFieldsPreModal,\n\t\t\t\t\t\t\t\t...updateCurrentFieldsPostModal,\n\t\t\t\t\t\t\t\t...userInputObj\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttrue, // save form\n\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tdispatch(AA_UPDATE_REL_DOC, {\n\t\t\t\t\t\titemData,\n\t\t\t\t\t\titemIndex,\n\t\t\t\t\t\tactionValue: uiActionConfig.value,\n\t\t\t\t\t\tremove: false\n\t\t\t\t\t});\n\t\t\t\t\tif (infoMsg) {\n\t\t\t\t\t\tshowTabMessage(\n\t\t\t\t\t\t\t'info',\n\t\t\t\t\t\t\tinfoMsg,\n\t\t\t\t\t\t\tcurrentTable,\n\t\t\t\t\t\t\tcurrentSysId,\n\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tdispatch(RESET_MODAL_STATE);\n\t\t\t\t} else {\n\t\t\t\t\tshowTabMessage(\n\t\t\t\t\t\t'info',\n\t\t\t\t\t\terrMsg || DEFAULT_ERROR_MESSAGE,\n\t\t\t\t\t\tcurrentTable,\n\t\t\t\t\t\tcurrentSysId,\n\t\t\t\t\t\tdispatch\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tstartRestAction: (\n\t\t{ action, data, itemIndex, currentId, currentTable },\n\t\tdispatch\n\t) => {\n\t\tconst [table, recordId] = data.id.split(':');\n\t\tif (!table || !recordId) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch(AA_REST_ACTION_PREMODAL_STARTED, {\n\t\t\titemData: data,\n\t\t\tuiActionConfig: action,\n\t\t\titemIndex,\n\t\t\trequestData: {\n\t\t\t\tresourceTable: table,\n\t\t\t\tresourceId: recordId,\n\t\t\t\tcurrentId,\n\t\t\t\tcurrentTable,\n\t\t\t\tactionId: action.actionId,\n\t\t\t\tactionStage: 'pre_modal'\n\t\t\t},\n\t\t\tactionPath: action.restAPI,\n\t\t\tactionDisplayValue: action.displayValue || t('Submit')\n\t\t});\n\t}\n};\n\nexport default restUtils;\n","import get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport '@servicenow/now-alert';\nimport { Fragment } from '@servicenow/ui-renderer-snabbdom'; //eslint-disable-line no-unused-vars\nimport { createGraphQLEffect } from '@servicenow/ui-effect-graphql';\nimport { t } from 'sn-translate';\nimport { parseId, showTabMessage, LOG } from '../../util/agentAssistUtils';\nimport { RESET_MODAL_STATE } from './uiActionCommonUtils';\n\nexport const FLAG_ACTION_ID = 'flag'; //to match the action_id in cxs_ui_action\nexport const FLAG_ACTION_PATH = 'flag'; //to match rest resource name\nexport const AA_FLAG_ACT_MODAL_SUBMIT = 'AGENT_ASSIST#FLAG_ACT_MODAL#SUBMIT';\nexport const AA_FLAG_MODAL_USER_INPUT =\n\t'AGENT_ASSIST#FLAG_ACT_MODAL#USER_INPUT';\nexport const AA_FLAG_ACTION = 'AGENT_ASSIST#FLAG_ACTION';\nexport const AA_INSERT_KB_ARTICLE_REQUEST =\n\t'AGENT_ASSIST#INSERT_KB_ARTICLE_REQUEST';\nexport const AA_INSERT_KB_ARTICLE_REQUEST_STARTED =\n\t'AGENT_ASSIST#INSERT_KB_ARTICLE_REQUEST_STARTED';\nexport const AA_INSERT_KB_ARTICLE_SUCCEEDED =\n\t'AGENT_ASSIST#INSERT_KB_ARTICLE_SUCCEEDED';\nexport const AA_INSERT_KB_ARTICLE_FAILED =\n\t'AGENT_ASSIST#INSERT_KB_ARTICLE_FAILED';\n\nconst SAVE_DISPLAY = t('Save');\nconst CANCEL_DISPLAY = t('Cancel');\nconst FLAG_ARTICLE_DISPLAY = t('Flag Article');\nconst FLAG_FIELD = 'comment';\n\nconst insertKBFeedbackQuery = `mutation ($comment: String, $article: String, $reason: String){\n\tGlideRecord_Mutation{\n\t\tinsert_kb_feedback(comments: $comment, article: $article, flagged: \"true\", reason: $reason) {\n\t\t\tcomments{\n\t\t\t\tvalue\n\t\t\t}\n\t\t\tarticle{\n\t\t\t\tvalue\n\t\t\t}\n\t\t\tflagged{\n\t\t\t\tvalue\n\t\t\t}\n\t\t\treason{\n\t\t\t\tvalue\n\t\t\t}\n\t\t}\n\t}\n}`;\n\nconst insertKBFeedbackEffect = createGraphQLEffect(insertKBFeedbackQuery, {\n\tvariableList: ['comment', 'article', 'reason'],\n\tstartActionType: AA_INSERT_KB_ARTICLE_REQUEST_STARTED,\n\tsuccessActionType: AA_INSERT_KB_ARTICLE_SUCCEEDED,\n\terrorActionType: AA_INSERT_KB_ARTICLE_FAILED\n});\n\nconst insertKBFeedbackSucceededEffect = coeffects => {\n\tconst { dispatch, state } = coeffects;\n\tconst {\n\t\tproperties: { table, sysId }\n\t} = state;\n\t//add info message\n\tshowTabMessage(\n\t\t'info',\n\t\tt('Article has been flagged'),\n\t\ttable,\n\t\tsysId,\n\t\tdispatch\n\t);\n\t//reset modalState\n\tdispatch(RESET_MODAL_STATE);\n};\n\nconst insertKBFeedbackFailedEffect = ({ state, updateState }) => {\n\tconst {\n\t\tproperties: { table, sysId }\n\t} = state;\n\tLOG.error(\n\t\t'Failed to flag the article - table = ' + table + ' , sysId = ' + sysId\n\t);\n\tupdateState({\n\t\tmodalState: {\n\t\t\t...state.modalState,\n\t\t\t[FLAG_ACTION_ID]: { errorMessage: t('Failed to flag the article') }\n\t\t}\n\t});\n};\n\n//TODO multi export vs single export\nconst flagUtils = {\n\tgetInnerComponent(\n\t\tflagModalState = {},\n\t\tcurrentFields = {}, //eslint-disable-line no-unused-vars\n\t\tuserInputObj = {},\n\t\tdispatch\n\t) {\n\t\t//eslint-disable-line no-unused-vars\n\t\tconst _inputHandler = userInputObj => {\n\t\t\tdispatch(AA_FLAG_MODAL_USER_INPUT, userInputObj);\n\t\t};\n\n\t\tconst userInputValue = get(userInputObj, `${FLAG_FIELD}.value`, '');\n\t\tconst errorMessage = get(flagModalState, 'errorMessage', '');\n\t\tlet errorMessageAlert = [];\n\t\tif (!isEmpty(errorMessage)) {\n\t\t\terrorMessageAlert.push(\n\t\t\t\t<div>\n\t\t\t\t\t<now-alert\n\t\t\t\t\t\tcontent={errorMessage}\n\t\t\t\t\t\tstatus=\"critical\"\n\t\t\t\t\t\ticon-name=\"circle-close-outline\"\n\t\t\t\t\t></now-alert>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{errorMessageAlert}\n\t\t\t\t<div className=\"sn-aa-action-confirm-modal--body\">\n\t\t\t\t\t<sn-record-input\n\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\tmaxlength=\"4000\"\n\t\t\t\t\t\trequired={true}\n\t\t\t\t\t\tname=\"flag-comments\"\n\t\t\t\t\t\tlabel={t('Please provide a comment:')}\n\t\t\t\t\t\tdisplay-value={t('Comments')}\n\t\t\t\t\t\tonValueChange={(\n\t\t\t\t\t\t\t{ value, displayValue } //eslint-disable-line no-unused-vars\n\t\t\t\t\t\t) =>\n\t\t\t\t\t\t\t_inputHandler({\n\t\t\t\t\t\t\t\t[get(\n\t\t\t\t\t\t\t\t\tflagModalState,\n\t\t\t\t\t\t\t\t\t'modalFieldObj.name',\n\t\t\t\t\t\t\t\t\tFLAG_FIELD\n\t\t\t\t\t\t\t\t)]: {\n\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue={userInputValue}\n\t\t\t\t\t\tautofocus={true}\n\t\t\t\t\t\tinvalid={!userInputValue ? true : false}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t},\n\n\tgetFooterActions(userInputObj = {}) {\n\t\tconst userInputValue = get(userInputObj, `${FLAG_FIELD}.value`, '');\n\t\treturn [\n\t\t\t{\n\t\t\t\tvariant: 'primary',\n\t\t\t\tlabel: SAVE_DISPLAY,\n\t\t\t\tclickActionType: AA_FLAG_ACT_MODAL_SUBMIT,\n\t\t\t\tuserInputObj,\n\t\t\t\tdisabled: !userInputValue ? true : false\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'secondary',\n\t\t\t\tlabel: CANCEL_DISPLAY,\n\t\t\t\tclickActionType: RESET_MODAL_STATE\n\t\t\t}\n\t\t];\n\t},\n\n\tgetHeaderLabel() {\n\t\treturn FLAG_ARTICLE_DISPLAY;\n\t},\n\n\tgetInitialModalState() {\n\t\treturn {\n\t\t\t[FLAG_ACTION_ID]: {}\n\t\t};\n\t},\n\tactionHandlers: {\n\t\tmodalInternalActions: {\n\t\t\t[AA_FLAG_MODAL_USER_INPUT]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tuserInputObj: action.payload\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tstopPropagation: true\n\t\t\t}\n\t\t},\n\t\tmodalExternalActions: {\n\t\t\t[AA_FLAG_ACTION]: coeffects => {\n\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\tupdateState({\n\t\t\t\t\t...state,\n\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t...state.modalState,\n\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\tactiveModal: FLAG_ACTION_ID,\n\t\t\t\t\t\t[FLAG_ACTION_ID]: {\n\t\t\t\t\t\t\tactionConfirmModalProps: {\n\t\t\t\t\t\t\t\t...action.payload.actionConfirmModalProps\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t[AA_FLAG_ACT_MODAL_SUBMIT]: {\n\t\t\t\teffect: coeffects => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t[FLAG_ACTION_ID]: { actionConfirmModalProps }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// properties: {\n\t\t\t\t\t\t\t// \ttable: currentTable,\n\t\t\t\t\t\t\t// \tsysId: currentSysId\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t} = {\n\t\t\t\t\t\t\tmodalState: {\n\t\t\t\t\t\t\t\t[FLAG_ACTION_ID]: {\n\t\t\t\t\t\t\t\t\tactionConfirmModalProps: {}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\ttable: '',\n\t\t\t\t\t\t\t\tsysId: ''\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\t\tfooterAction: { userInputObj }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} = {\n\t\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\t\tfooterAction: { userInputObj: null }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdispatch\n\t\t\t\t\t} = coeffects;\n\n\t\t\t\t\tconst flagComment = get(\n\t\t\t\t\t\tuserInputObj,\n\t\t\t\t\t\t`${FLAG_FIELD}.value`,\n\t\t\t\t\t\t''\n\t\t\t\t\t);\n\t\t\t\t\tif (flagComment.length > 0) {\n\t\t\t\t\t\tconst article = parseId(\n\t\t\t\t\t\t\tactionConfirmModalProps.data.id\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (article.sys_id) {\n\t\t\t\t\t\t\tlet reason = '';\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tcoeffects.state.sysProperties\n\t\t\t\t\t\t\t\t\t.createTaskOnFlag == true\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treason = 'Flagged';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdispatch(AA_INSERT_KB_ARTICLE_REQUEST, {\n\t\t\t\t\t\t\t\tcomment: flagComment,\n\t\t\t\t\t\t\t\tarticle: article.sys_id,\n\t\t\t\t\t\t\t\treason: reason\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\t\t\t[AA_INSERT_KB_ARTICLE_REQUEST]: {\n\t\t\t\t...insertKBFeedbackEffect,\n\t\t\t\tstopPropagation: true\n\t\t\t},\n\t\t\t[AA_INSERT_KB_ARTICLE_SUCCEEDED]: insertKBFeedbackSucceededEffect,\n\t\t\t[AA_INSERT_KB_ARTICLE_FAILED]: insertKBFeedbackFailedEffect\n\t\t}\n\t}\n};\n\nexport default flagUtils;\n","export { default } from './sn-aa-action-modal';\nexport { updateRelDocUtils } from './viewUtils/updateRelDocUtils';\nexport * from './actions';\n","export { default } from './action-header';\nexport * from './actions';","export { default } from './now-agent-assist';\nexport * from './actions';\n\n\n","module.exports = __TECTONIC__$servicenow_now_alert;","export const searchVariableList = [\n\t'query',\n\t'tableConfig',\n\t'context',\n\t'searchAs',\n\t'includeRecommendation',\n\t'recommendationOnly',\n\t'includePinnedArticles',\n\t'resources',\n\t'limit',\n\t'offset',\n\t'maxLimit',\n\t'formSysID',\n\t'user',\n\t'uiType',\n\t'formTable',\n\t'sourceField',\n\t'logSearch',\n\t'originalQuery',\n\t'isNewRecord',\n\t'session',\n\t'form'\n];\n\nexport const searchVariables = `$query: String!,\n    $tableConfig: String!,\n    $context: String!,\n    $searchAs: String,\n    $includeRecommendation: Boolean,\n    $recommendationOnly: Boolean,\n    $includePinnedArticles: Boolean,\n    $resources: [String],\n    $limit: Int,\n    $offset: Int,\n    $maxLimit: Int,\n    $formSysID: String,\n    $user: String,\n    $uiType: String,\n    $formTable: String,\n    $sourceField: String,\n    $logSearch: Boolean,\n    $originalQuery: String,\n    $isNewRecord: Boolean,\n    $session: String,\n    $form: String`;\n\nexport const searchQuery = `GlideContextualSearch_Query (\n    query: $query,\n    tableConfig: $tableConfig,\n    context: $context,\n    searchAs: $searchAs,\n    maxLimit: $maxLimit,\n    includeRecommendation: $includeRecommendation,\n    recommendationOnly: $recommendationOnly,\n    includePinnedArticles: $includePinnedArticles,\n    pagination:{limit: $limit, offset: $offset},\n    formSysID: $formSysID,\n    user: $user,\n    resources: $resources,\n    uiType: $uiType,\n    formTable: $formTable,\n    sourceField: $sourceField,\n    logSearch: $logSearch,\n    originalQuery: $originalQuery,\n    isNewRecord: $isNewRecord,\n    session: $session,\n    form: $form\n) {\n    request {\n        query {\n            freetext\n        }\n        meta {\n            window {\n                start\n                end\n            }\n        }\n        context\n        id\n    }\n    results {\n        id,\n        title,\n        link,\n        linkTarget,\n        snippet,\n        relatedLinks {\n            link\n            title\n            spLink\n        }\n        ... on GlideContextualSearch_CatalogItemType {\n            image {\n                link\n                thumbnail {\n                    link\n                }\n            }\n        }\n        meta {\n            score\n            source\n            interleaved\n            card_icon\n            card_label\n            card_title\n            additional_fields\n            card_snippet\n            card_show_footer\n            detail_component_name\n            detail_title\n            detail_link\n            detail_additional_fields\n            detail_show_work_note\n            ... on GlideContextualSearch_CatalogItemMetaType {\n                description\n            }\n            ... on GlideContextualSearch_KnowledgeArticleMetaType {\n                author\n                link\n                number\n                published\n                modified_display\n                viewCount\n            }\n            ... on GlideContextualSearch_PinnedArticleMetaType {\n                pinned\n                author\n                link\n                number\n                published\n                modified_display\n                viewCount\n            }\n            ... on GlideContextualSearch_SocialQAMetaType {\n                author\n                published\n                modified_display\n                viewCount\n                answerCount\n                votes\n            }\n\n            ... on GlideContextualSearch_CommunityBlogMetaType {\n                forum\n                views\n                upvotes\n                helpful\n                likes\n                rating\n                modified_display\n                full_view_url\n                comments\n            }\n\n            ... on GlideContextualSearch_CommunityQuestionMetaType {\n                forum\n                views\n                upvotes\n                helpful\n                likes\n                rating\n                modified_display\n                full_view_url\n                comments\n            }\n\n            ... on GlideContextualSearch_CommunityAnswerMetaType {\n                forum\n                views\n                upvotes\n                helpful\n                likes\n                rating\n                modified_display\n                full_view_url\n                comments\n            }\n\n            ... on GlideContextualSearch_GlideResourceSearchMetaType {\n                table_name\n                resource_details\n                description\n            }\n\n            ... on GlideContextualSearch_ScriptResourceSearchMetaType {\n                confidence\n                resource_details\n                table_name\n                recommendation_type\n                recommendation_title\n                recommendation_message\n                recommendation_action\n                recommendation_result\n                recommendation_common_field\n            }\n        }\n    }\n    meta {\n        has_more_results\n        returned_results\n        recorded_actions {\n          relevance\n          search_term\n          relevant_doc_table\n          relevant_doc\n        }\n    }\n}`;\nconst SearchGraphQLQuery = `query(\n${searchVariables}\n) {\n    ${searchQuery}\n}`;\n\nexport default SearchGraphQLQuery;\n","module.exports = __TECTONIC__$servicenow_now_toggle;","export { default } from './sn-aa-search-as';\nexport * from './actions';\n\n","export { default } from './sn-aa-search-filter';\nexport * from './actions';\n","import { actionTypes } from '@servicenow/ui-core';\n\nexport const { COMPONENT_BOOTSTRAPPED, COMPONENT_PROPERTY_CHANGED } = actionTypes;\nexport const AA_GET_ACTIONS_BY_CONDITION = 'AGENT_ASSIST#GET_ACTIONS_BY_CONDITION';\nexport const AA_GET_ACTIONS_BY_CONDITION_SUCCEEDED = 'AGENT_ASSIST#GET_ACTIONS_BY_CONDITION_SUCCEEDED';\nexport const AA_UPDATE_ACTION_HEADER_STATE = 'AGENT_ASSIST#UPDATE_ACTION_HEADER_STATE';\nexport const AA_ACTION_CLICKED = 'AGENT_ASSIST#ACTION_CLICKED';","export const AA_FOOTER_PREV_CLICKED = 'AGENT_ASSIST#FOOTER_PREV_CLICKED';\nexport const AA_FOOTER_NEXT_CLICKED = 'AGENT_ASSIST#FOOTER_NEXT_CLICKED';\n","module.exports = __TECTONIC__$servicenow_now_empty_state;","module.exports = __TECTONIC__sn_component_timeago;","module.exports = __TECTONIC__lodash_4_17_4[\"escape\"];","module.exports = __TECTONIC__$servicenow_now_record_common;","module.exports = __TECTONIC__lodash_4_17_4[\"cloneDeep\"];","import { createGraphQLEffect } from '@servicenow/ui-effect-graphql';\nimport { default as postActionRefreshGraphqlQuery } from './postActionRefreshGraphqlQuery';\nimport { searchVariableList } from './searchGraphqlQuery';\nimport get from 'lodash/get';\nimport {\n\treplaceBadSpaces,\n\thandleSysUiActionEvent\n} from '../../util/agentAssistUtils';\nimport { VISIBLE_ACTIONS } from '../../consts';\nimport { extractRecommendationResult } from '../../util/agentAssistUtils';\nimport {\n\tAA_UPDATE_ACTION_STATE,\n\tAA_POST_ACTION_REFRESH,\n\tAA_POST_ACTION_REFRESH_SUCCEEDED,\n\tAA_UI_ACTION_CLICKED\n} from '../actions';\n\nexport const actionStateUtils = {\n\tactions: {\n\t\t[AA_UPDATE_ACTION_STATE]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_POST_ACTION_REFRESH]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_POST_ACTION_REFRESH_SUCCEEDED]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_UI_ACTION_CLICKED]: {\n\t\t\tprivate: true\n\t\t}\n\t},\n\n\tactionHandlers: {\n\t\t[AA_UPDATE_ACTION_STATE]: coeffects => {\n\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\tconst {\n\t\t\t\tpayload: { actionStates }\n\t\t\t} = action;\n\t\t\tupdateState({\n\t\t\t\t...state,\n\t\t\t\tactionStates: {\n\t\t\t\t\t...state.actionStates,\n\t\t\t\t\t...actionStates\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[AA_POST_ACTION_REFRESH]: createGraphQLEffect(\n\t\t\tpostActionRefreshGraphqlQuery,\n\t\t\t{\n\t\t\t\tvariableList: ['actionStateCondition', ...searchVariableList],\n\t\t\t\tsuccessActionType: AA_POST_ACTION_REFRESH_SUCCEEDED\n\t\t\t}\n\t\t),\n\t\t[AA_POST_ACTION_REFRESH_SUCCEEDED]: coeffects => {\n\t\t\tconst { dispatch, state, action, updateState } = coeffects;\n\t\t\tconst recommendationResult = extractRecommendationResult(\n\t\t\t\tget(\n\t\t\t\t\taction,\n\t\t\t\t\t'payload.data.GlideContextualSearch_Query.results',\n\t\t\t\t\t[]\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tupdateState({\n\t\t\t\tpath: 'recommendation.item',\n\t\t\t\tvalue: recommendationResult,\n\t\t\t\toperation: 'set'\n\t\t\t});\n\t\t\t//Check if new rec matches the existing, if not, update the existing\n\t\t\tconst nextActionsData =\n\t\t\t\tget(\n\t\t\t\t\taction.payload,\n\t\t\t\t\t'data.GlideRecord_Query.actions._results',\n\t\t\t\t\t[]\n\t\t\t\t) || [];\n\t\t\tconst oldActionStates = state.actionStates;\n\t\t\tconst actionStates = actionStateUtils.updateActionState(\n\t\t\t\tnextActionsData,\n\t\t\t\toldActionStates\n\t\t\t);\n\t\t\tdispatch(AA_UPDATE_ACTION_STATE, { actionStates: actionStates });\n\t\t},\n\t\t[AA_UI_ACTION_CLICKED]: coeffects => {\n\t\t\tconst { dispatch, action } = coeffects;\n\t\t\tconst actionSysId = action.payload.actionSysId;\n\t\t\tif (actionSysId) {\n\t\t\t\thandleSysUiActionEvent(actionSysId, dispatch);\n\t\t\t}\n\t\t}\n\t},\n\n\tupdateActionState: function(nextActionsData, actionStates, searchResults) {\n\t\tlet newActionState = {};\n\t\t// Triggered by search results changes\n\t\tif (searchResults) {\n\t\t\tsearchResults.forEach(result => {\n\t\t\t\tnewActionState[result.id] = {\n\t\t\t\t\tvisibleActions: new Map()\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\t// Triggered by relevant doc changes\n\t\telse {\n\t\t\tfor (const itemID in actionStates) {\n\t\t\t\tnewActionState[itemID] = {\n\t\t\t\t\tvisibleActions: new Map()\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (!nextActionsData) {\n\t\t\treturn newActionState;\n\t\t}\n\n\t\tnextActionsData.forEach(action => {\n\t\t\tconst itemTableName = action.relevant_doc_table\n\t\t\t\t? action.relevant_doc_table.value || action.relevant_doc_table\n\t\t\t\t: '';\n\t\t\tconst itemSysId = action.relevant_doc\n\t\t\t\t? action.relevant_doc.value || action.relevant_doc\n\t\t\t\t: '';\n\t\t\tconst actionValue = action.relevance\n\t\t\t\t? action.relevance.value || action.relevance\n\t\t\t\t: '';\n\t\t\tconst itemID = itemTableName + ':' + itemSysId;\n\n\t\t\t//TODO: get actionLabel according to configuration later,\n\t\t\t//   note invisible actions might not have label\n\t\t\tconst actionLabel = actionValue;\n\t\t\tconst actionValueCleanSpaces = replaceBadSpaces(actionValue);\n\n\t\t\t//TODO action_value is customer configurable.\n\t\t\t//TODO get rid of VISIBLE_ACTIONS and use action badge value instead\n\t\t\tif (\n\t\t\t\tnewActionState[itemID] &&\n\t\t\t\tVISIBLE_ACTIONS.has(actionValueCleanSpaces) &&\n\t\t\t\t!newActionState[itemID].visibleActions[actionValueCleanSpaces]\n\t\t\t) {\n\t\t\t\tconst actionProperties = {\n\t\t\t\t\tdisplayValue: actionLabel,\n\t\t\t\t\trelevance: action.relevance.value\n\t\t\t\t};\n\t\t\t\tnewActionState[itemID].visibleActions.set(\n\t\t\t\t\tactionValue,\n\t\t\t\t\tactionProperties\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\treturn newActionState;\n\t}\n};\n","export { default } from './sn-aa-search-box';\nexport * from './actions';\n\n","export const AA_SEARCH_BOX_CONTENT_CHANGED = 'AGENT_ASSIST#SEARCH_BOX_CONTENT_CHANGED';","import { replaceBadSpaces } from '../../util/agentAssistUtils';\nimport { createHttpEffect } from '@servicenow/ui-effect-http';\nimport get from 'lodash/get';\nimport { AA_POST_ACTION_REFRESH } from '../../now-agent-assist';\nimport { VISIBLE_ACTIONS } from '../../consts';\nimport { buildBaseSearchRequestPayload } from '../../now-agent-assist/actionHandlers/searchActionHandlers';\n\nimport {\n\tAA_POST_REL_DOC,\n\tAA_POST_REL_DOC_SUCCEEDED,\n\tAA_UPDATE_REL_DOC,\n\tAA_POST_REL_DOC_AH\n} from '../actions';\n\nexport const updateRelDocUtils = {\n\tactions: {\n\t\t[AA_UPDATE_REL_DOC]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_POST_REL_DOC]: {\n\t\t\tprivate: true\n\t\t}\n\t},\n\tactionHandlers: {\n\t\t[AA_UPDATE_REL_DOC]: coeffects => {\n\t\t\tconst { action, state, dispatch } = coeffects;\n\t\t\tconst {\n\t\t\t\titemData,\n\t\t\t\titemIndex,\n\t\t\t\tactionValue,\n\t\t\t\tremove,\n\t\t\t\tactionId\n\t\t\t} = action.payload;\n\t\t\tconst {\n\t\t\t\tproperties: { table: currentTable, sysId: currentSysId },\n\t\t\t\tsearchState: { sourceField, formSearchTerm }\n\t\t\t} = state;\n\t\t\tconst sourceDoc = currentTable + ':' + currentSysId;\n\t\t\tconst sourceDocUrl = currentTable + '.do?sys_id=' + currentSysId;\n\t\t\tconst cleanActionValue = replaceBadSpaces(actionValue);\n\t\t\t//TODO cleanActionValue is action_value which is customer configurable.\n\t\t\tif (remove && !VISIBLE_ACTIONS.has(cleanActionValue)) {return;}\n\n\t\t\tconst requestData = {\n\t\t\t\tindex: itemIndex,\n\t\t\t\toriginal_search_terms:\n\t\t\t\t\tsourceField === 'additional_search'\n\t\t\t\t\t\t? formSearchTerm\n\t\t\t\t\t\t: 'NULL',\n\t\t\t\trelevant_doc: itemData.id,\n\t\t\t\trelevant_doc_url: itemData.link,\n\t\t\t\trelevance: cleanActionValue,\n\t\t\t\trelevant: !remove,\n\t\t\t\tscore: itemData.meta.score ? itemData.meta.score : 0,\n\t\t\t\tsource_doc: sourceDoc,\n\t\t\t\tsource_doc_url: sourceDocUrl,\n\t\t\t\tsearch_resource_config:\n\t\t\t\t\titemData.meta.source === 'scriptresource' &&\n\t\t\t\t\titemData.meta.resource_details\n\t\t\t\t\t\t? itemData.meta.resource_details.split(':')[0]\n\t\t\t\t\t\t: ''\n\t\t\t};\n\n\t\t\trequestData.session = currentSysId;\n\t\t\trequestData.displayed_on = 'workspace:' + currentTable;\n\t\t\t//TODO not able to read data from legacy data source.\n\t\t\trequestData.search_request = get(\n\t\t\t\tstate,\n\t\t\t\t'searchState.searchRequest',\n\t\t\t\tnull\n\t\t\t);\n\n\t\t\tif (state.properties.isNewRecord) {\n\t\t\t\trequestData.source_doc = '';\n\t\t\t\trequestData.source_doc_url = '';\n\t\t\t}\n\t\t\tif (\n\t\t\t\t(actionId === 'attach' && remove) ||\n\t\t\t\tactionId === 'this_helped'\n\t\t\t) {\n\t\t\t\tdispatch(AA_POST_REL_DOC_AH, { requestData });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdispatch(AA_POST_REL_DOC, { requestData });\n\t\t},\n\t\t[AA_POST_REL_DOC_AH]: createHttpEffect('/api/now/cxs/action_handler', {\n\t\t\tmethod: 'POST',\n\t\t\tdataParam: 'requestData',\n\t\t\tsuccessActionType: AA_POST_REL_DOC_SUCCEEDED\n\t\t}),\n\t\t[AA_POST_REL_DOC]: createHttpEffect('/api/now/cxs/feedback', {\n\t\t\tmethod: 'POST',\n\t\t\tdataParam: 'requestData',\n\t\t\tsuccessActionType: AA_POST_REL_DOC_SUCCEEDED\n\t\t}),\n\t\t[AA_POST_REL_DOC_SUCCEEDED]: coeffects => {\n\t\t\tconst { state, dispatch } = coeffects;\n\t\t\t//TODO write pure function to get search results from state\n\t\t\tlet fullSearchResults = Array.from(state.searchState.searchResults);\n\t\t\tif (state.recommendation.item)\n\t\t\t\t{fullSearchResults.unshift(state.recommendation.item);}\n\n\t\t\tif (!fullSearchResults) {return;}\n\n\t\t\tlet itemsCondition = '';\n\t\t\tfullSearchResults.map(x => {\n\t\t\t\titemsCondition += x.id.split(':')[1] + ',';\n\t\t\t});\n\t\t\t// cachebusting\n\t\t\tconst now = new Date();\n\t\t\tconst nowInMillis = now.getTime();\n\t\t\tconst hexString = nowInMillis.toString(16);\n\t\t\tconst instanceId = get(state.properties, 'sysId', '') || '';\n\n\t\t\titemsCondition = itemsCondition + hexString;\n\t\t\tconst condition = `cxs_relevant_doc.sys_user=javascript:gs.getUserID()^cxs_relevant_doc.displayed_onSTARTSWITHworkspace^ORrelevance=This helped^NQrelevance=attach^EQ^cxs_relevant_doc.source_doc=${instanceId}^relevant_docIN${itemsCondition}`;\n\n\t\t\tconst payload = {\n\t\t\t\tactionStateCondition: condition,\n\t\t\t\t...buildBaseSearchRequestPayload(state, {\n\t\t\t\t\trecommendationOnly: true,\n\t\t\t\t\tincludeRecommendation: true\n\t\t\t\t})\n\t\t\t};\n\n\t\t\tif (itemsCondition) {dispatch(AA_POST_ACTION_REFRESH, payload);}\n\t\t}\n\t}\n};\n","export const AA_PROPOSE_RECOMMENDATION = 'AGENT_ASSIST#PROPOSE_RECOMMENDATION';","export const AA_CLOSE_RECOMMENDATION = 'AGENT_ASSIST#CLOSE_RECOMMENDATION';","module.exports = __TECTONIC__lodash_4_17_4[\"pick\"];","module.exports = __TECTONIC__lodash_4_17_4[\"isObject\"];","import get from 'lodash/get';\nimport {\n\tRECOMMENDATION_HEADER_ICON,\n\tDEFAULT_RECOMMENDATION_HEADER_TITLE\n} from '../../../consts';\nimport { AA_CLOSE_RECOMMENDATION } from './actions';\nimport { t } from 'sn-translate';\nimport '../sn-aa-result-list-item';\nimport '../sn-aa-action-footer';\n\nexport const RECOMMENDATION_DEFAULT_ID = 'recommendation_default_id';\n\n// TODO : AA_CLOSE_RECOMMENDATION needs to be handled in snComponentWorkspaceAgentAssist\nconst recommendationHeader = (data, dispatch) => {\n\treturn (\n\t\t<h3 className=\"aa-recommendation-header\" id={data.id}>\n\t\t\t<div key={data.id} className=\"aa-recommendation-header-content\">\n\t\t\t\t<now-icon icon={RECOMMENDATION_HEADER_ICON} size=\"md\" />\n\t\t\t\t<span\n\t\t\t\t\tkey={data.id + '_div'}\n\t\t\t\t\tclassName=\"aa-recommendation-header-title\"\n\t\t\t\t>\n\t\t\t\t\t{data.meta.recommendation_title ||\n\t\t\t\t\t\tDEFAULT_RECOMMENDATION_HEADER_TITLE}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"aa-recommendation-header-content -static\">\n\t\t\t\t<now-button\n\t\t\t\t\ticonName=\"close-outline\"\n\t\t\t\t\tsize=\"md\"\n\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\tbare={true}\n\t\t\t\t\ton-click={() => dispatch(AA_CLOSE_RECOMMENDATION)}\n\t\t\t\t\tconfig-aria={{ 'aria-label': t('Close recommendation') }}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</h3>\n\t);\n};\n\nfunction isDetection(data) {\n\treturn get(data, 'meta.recommendation_type', '') === 'detection';\n}\n\nconst recommendationBody = (\n\tdata,\n\titemIndex,\n\tformRecordInfo,\n\tactions,\n\tactionStates,\n\tisNewRecord,\n\tsource,\n\tformTimeStamp\n) => {\n\treturn isDetection(data) ? (\n\t\t<sn-aa-result-list-item\n\t\t\tkey={data.id}\n\t\t\tdata={data}\n\t\t\tsource={source}\n\t\t\tform-record-info={formRecordInfo}\n\t\t\titem-index={itemIndex}\n\t\t\taction-states={actionStates}\n\t\t\tis-new-record={isNewRecord}\n\t\t\tactions={actions.headerActions}\n\t\t\tformTimeStamp={formTimeStamp}\n\t\t/>\n\t) : (\n\t\t<article\n\t\t\tclassName={'aa-recommendation-body'}\n\t\t\ton-click={e => {\n\t\t\t\te.stopPropagation();\n\t\t\t}}\n\t\t\ttabIndex=\"0\"\n\t\t\trole=\"link\"\n\t\t>\n\t\t\t{get(data, 'meta.recommendation_message', '')}\n\t\t</article>\n\t);\n};\n\nconst recommendationFooter = (\n\tdata,\n\tactions,\n\tactionStates,\n\titemIndex,\n\tformRecordInfo\n) => {\n\tconst primaryAction = actions.footerActions[0];\n\treturn (\n\t\t<sn-aa-action-footer\n\t\t\tkey={data.id}\n\t\t\tdata={data}\n\t\t\titem-index={itemIndex}\n\t\t\tform-record-info={formRecordInfo}\n\t\t\taction={primaryAction}\n\t\t\tvisible-actions={actionStates.visibleActions}\n\t\t\tis-detection={isDetection(data)}\n\t\t/>\n\t);\n};\n\nexport const view = (state, dispatch) => {\n\tconst {\n\t\tdata,\n\t\titemIndex,\n\t\tformRecordInfo,\n\t\tactions,\n\t\tactionStates,\n\t\tisNewRecord,\n\t\tsource,\n\t\tformTimeStamp\n\t} = state.properties;\n\n\treturn (\n\t\t<div className=\"aa-recommendation\">\n\t\t\t{recommendationHeader(data, dispatch)}\n\t\t\t{recommendationBody(\n\t\t\t\tdata,\n\t\t\t\titemIndex,\n\t\t\t\tformRecordInfo,\n\t\t\t\tactions,\n\t\t\t\tactionStates,\n\t\t\t\tisNewRecord,\n\t\t\t\tsource,\n\t\t\t\tformTimeStamp\n\t\t\t)}\n\t\t\t{recommendationFooter(\n\t\t\t\tdata,\n\t\t\t\tactions,\n\t\t\t\tactionStates,\n\t\t\t\titemIndex,\n\t\t\t\tformRecordInfo\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","export { default } from './sn-aa-result-list-item';","export const AA_RESULT_ONCLICK = 'AGENT_ASSIST#RESULT_ONCLICK';\nexport const AA_RESULT_ONKEYPRESS = 'AGENT_ASSIST#RESULT_ONKEYPRESS';","module.exports = __TECTONIC__lodash_4_17_4[\"isNil\"];","export { default } from './sn-aa-results-footer';","export const AA_LOAD_CATALOG_DETAIL_REQUEST = 'AGENT_ASSIST#LOAD_CATALOG_DETAIL_REQUEST';\nexport const AA_LOAD_CATALOG_DETAIL_STARTED = 'AGENT_ASSIST#LOAD_CATALOG_DETAIL_STARTED';\nexport const AA_LOAD_CATALOG_DETAIL_SUCCEEDED = 'AGENT_ASSIST#LOAD_CATALOG_DETAIL_SUCCEEDED';\nexport const AA_LOAD_CATALOG_DETAIL_FAILED = 'AGENT_ASSIST#LOAD_CATALOG_DETAIL_FAILED';\n\n\n","export const AA_GET_LATEST_WORKNOTE = 'AGENT_ASSIST#GET_LATEST_WORKNOTE';\nexport const AA_GET_LATEST_WORKNOTE_SUCCESS = 'AGENT_ASSIST#GET_LATEST_WORKNOTE_SUCCESS';\nexport const AA_GET_LATEST_WORKNOTE_ERROR = 'AGENT_ASSIST#GET_LATEST_WORKNOTE_ERROR';\nexport const AA_RECORD_SET_STATE = 'AGENT_ASSIST#RECORD_SET_STATE';","import get from 'lodash/get';\n\nexport const createPreSourceBehavior = (componentTagName, {name:dsName = 'undefined', transform = d => d}) => {\n\tconst storeSeed = get(window, `ux_globals.presource['${componentTagName}:${dsName}']`, {});\n\tlet initialState = storeSeed;\n\ttry {initialState = (typeof transform === 'function') ? transform(storeSeed) : storeSeed;}catch(e) {console.error(e);initialState = storeSeed;}\n\treturn {\n\t\tname: dsName, // this.props.behaviors[dsName], available onConnect\n\t\tinitialState,\n\t\tgetPreSource(state, defVal = {}) { return get(state, `behaviors['${dsName}']`, defVal); }\n\t};\n};\n\nexport const getBehaviorProp = (state, name, defVal = {}) => !name ? undefined : get(state, `behaviors['${name}']`, defVal);\n","export { default as nowAgentAssist } from './now-agent-assist';\nexport { default as snAgentAssistUib } from './sn-agent-assist-uib';\n","import { createCustomElement } from '@servicenow/ui-core';\nimport { getInitialModalState } from '../sn-aa-action-modal/viewUtils/uiActionCommonUtils';\nimport { AA_BOOTSTRAPPED } from './actions';\nimport { SEARCHER, DEFAULT_CONFIG, DEFAULT_RESOURCES_DISPLAY } from '../consts';\nimport { actions, actionHandlers } from './actionHandlers';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport styles from './styles.scss';\nimport view from './view';\nimport { timeAgoBehaviors } from './behaviors';\nimport { getProperty } from 'sn-uxpage-presource';\nimport { ENABLE_ACTIONABLE_FEEDBACK_ON_FLAG } from '../consts';\nimport focusBehavior from '@servicenow/behavior-focus';\n\nexport default createCustomElement('now-agent-assist', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\n\tbehaviors: [...timeAgoBehaviors, focusBehavior],\n\n\tinitialState: {\n\t\t//configs: read once, use after. Designed to be readonly after retrieved from server.\n\t\tconfigs: {\n\t\t\tloading: true,\n\t\t\terror: null,\n\t\t\tactive: false,\n\t\t\tlimit: DEFAULT_CONFIG.limit,\n\t\t\tcontext: '',\n\t\t\tmaxLimit: DEFAULT_CONFIG.maxLimit,\n\t\t\tsearchFields: null,\n\t\t\tshowSearcherFirst: false,\n\t\t\t//TODO KL sanitize and unify following three\n\t\t\tsearcherResources: {},\n\t\t\tsearcherResourceNames: [],\n\t\t\tsearcherResActions: {},\n\t\t\tsearchAs: {},\n\t\t\tdefaultResource: SEARCHER,\n\t\t\t//TODO KL sanitize and unify following three\n\t\t\tadditionalResources: {},\n\t\t\tadditionalResNames: [],\n\t\t\tadditionalResActions: {},\n\t\t\tsearcherLabel: DEFAULT_RESOURCES_DISPLAY\n\t\t},\n\n\t\t//searchState Dynamic data, reflect user behavior,  governing current state of search: query source, selected resource, search as toggle, ,pagination, loading, empty, data...\n\t\tsearchState: {\n\t\t\tisInitialSearch: true, // True if we are doing the initial search.\n\t\t\tisSearching: false,\n\t\t\tsearchResults: [],\n\t\t\toffset: 0,\n\t\t\treturnedResults: 0,\n\t\t\thasMoreResults: false,\n\t\t\tformSearchField: null, //TODO use empty string\n\t\t\tformSearchTerm: '',\n\t\t\tsearchBoxText: '',\n\t\t\tcurrentSearchTerm: null, //Current active search term used for results. use !currentSearchTerm to determine emptySearch\n\t\t\tsourceField: null, //one of form fields or 'additional_search',\n\t\t\tamountOfPinnedArticles: 0,\n\t\t\terror: null\n\t\t},\n\t\tresourceSelectorState: {\n\t\t\tactive: false,\n\t\t\tselectedResource: null,\n\t\t\tresources: []\n\t\t},\n\t\tsearchAsState: {\n\t\t\tisSearcherSelected: false,\n\t\t\tuser: {}, //updated on initial search, and on every form update, this should not be dependent on showToggle. As long searchAs config has value it should be set.\n\t\t\tselected: false\n\t\t},\n\t\tmodalState: getInitialModalState(),\n\t\tactionConfirmModalProps: {\n\t\t\t//TODO Flag action combine with existing modals\n\t\t\tshow: false,\n\t\t\tdata: null,\n\t\t\tremove: false,\n\t\t\taction: ''\n\t\t},\n\n\t\trecommendation: {\n\t\t\titem: null,\n\t\t\tshow: true\n\t\t},\n\n\t\tactionStates: null,\n\n\t\tinstanceId: '',\n\n\t\t//TODO: should use 'Context' to make instanceId\n\t\t// attribute 'global' in Agent Assist component tree\n\t\t// let uniqueId = '';\n\t\t// try {\n\t\t// \tuniqueId = props.componentId.split('-').pop();\n\t\t// \tif (!uniqueId || uniqueId.length !== 32)\n\t\t// \t\tLOG.warn('instance_id may not be unique for Agent Assist component.');\n\t\t// } catch (e) {\n\t\t// \tLOG.error('Parsing unique id error: \\n' + e);\n\t\t// }\n\t\t// this.instanceId = 'aa[' + uniqueId + ']';\n\t\tdetailViewState: {\n\t\t\tprevPageLoading: false,\n\t\t\tnextPageLoading: false,\n\t\t\tshowDetail: false,\n\t\t\tselectedItem: null,\n\t\t\tselectedIndex: null\n\t\t},\n\t\tformTimeStamp: Date.now(),\n\t\tpageProps: {\n\t\t\tshowNext: false,\n\t\t\tshowPrev: false\n\t\t},\n\t\t//A deep copy of form fields\n\t\tcurrentFields: '',\n\t\tsysProperties: {\n\t\t\tcreateTaskOnFlag: getProperty(\n\t\t\t\tENABLE_ACTIONABLE_FEEDBACK_ON_FLAG,\n\t\t\t\tfalse\n\t\t\t)\n\t\t}\n\t},\n\tproperties: {\n\t\ttable: { default: '' },\n\t\tsysId: { default: '' },\n\t\tfields: { default: {} },\n\t\tcxsTableConfig: { default: '' },\n\t\tisNewRecord: { default: false },\n\t\tisUib: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tactions: actions,\n\tactionHandlers: actionHandlers,\n\tstyles: styles,\n\tonBootstrap(host, dispatch) {\n\t\tdispatch(AA_BOOTSTRAPPED, { host });\n\t}\n});\n","module.exports = __TECTONIC__lodash_4_17_4[\"unescape\"];","// Copied over from sn-component-form\nconst LOG_STATUS_KEY = '__SEISMIC_LOG_LEVEL';\n\nexport const LOG_LEVEL_ALL = 0;\nexport const LOG_LEVEL_DEBUG = 1;\nexport const LOG_LEVEL_LOG = 2;\nexport const LOG_LEVEL_INFO = 2;\nexport const LOG_LEVEL_WARN = 3;\nexport const LOG_LEVEL_ERROR = 4;\n\n// set default logging level\nif (typeof window[LOG_STATUS_KEY] === 'undefined') {\n\twindow[LOG_STATUS_KEY] = LOG_LEVEL_ERROR;\n}\n\nexport function enable(logLevel = LOG_LEVEL_ALL) {\n\tswitch (logLevel) {\n\t\tdefault:\n\t\t\tlogLevel = LOG_LEVEL_ERROR;\n\t\tcase LOG_LEVEL_ALL:\n\t\tcase LOG_LEVEL_DEBUG:\n\t\tcase LOG_LEVEL_LOG:\n\t\tcase LOG_LEVEL_INFO:\n\t\tcase LOG_LEVEL_WARN:\n\t\tcase LOG_LEVEL_ERROR:\n\t\t\twindow[LOG_STATUS_KEY] = logLevel;\n\t\t\tbreak;\n\t}\n}\n\nexport function disable() {\n\twindow[LOG_STATUS_KEY] = LOG_LEVEL_ERROR;\n}\n\n/**\n * Simple logging utilty to include context\n * @usage const LOG = createLog('ComponentName');\n *\n * @param name\n * @return {{log, debug, warn, error}}\n */\nexport function createLog(name) {\n\tfunction _log(type, level, args) {\n\t\tif (level < window[LOG_STATUS_KEY]) {\n\t\t\treturn;\n\t\t}\n\t\targs = Array.prototype.splice.call(args, 0);\n\t\targs.unshift(`(${name})`);\n\t\tconsole[type].apply(console, args);//eslint-disable-line no-console\n\t}\n\n\treturn {\n\t\tdebug: function() {\n\t\t\t_log('debug', LOG_LEVEL_DEBUG, arguments);\n\t\t},\n\t\tlog: function() {\n\t\t\t_log('log', LOG_LEVEL_LOG, arguments);\n\t\t},\n\t\tinfo: function() {\n\t\t\t_log('info', LOG_LEVEL_INFO, arguments);\n\t\t},\n\t\twarn: function() {\n\t\t\t_log('warn', LOG_LEVEL_WARN, arguments);\n\t\t},\n\t\terror: function() {\n\t\t\t_log('error', LOG_LEVEL_ERROR, arguments);\n\t\t}\n\t};\n}\n","import { searchUtils } from './actionHandlers/searchActionHandlers';\nimport { actionStateUtils} from './actionHandlers/actionStateActionHandlers';\nimport { actionUtils } from './actionHandlers/actionActionHandlers';\nimport { searchControlsContainerUtils } from './actionHandlers/searchControlsContainerActionHandlers';\nimport { detailsContianerHandlers } from './actionHandlers/detailsContainerActionHandlers';\nimport attachUtils from '../sn-aa-action-modal/viewUtils/attachUtils';\nimport linkUtils from '../sn-aa-action-modal/viewUtils/linkUtils';\nimport restUtils from '../sn-aa-action-modal/viewUtils/restUtils';\nimport flagUtils from '../sn-aa-action-modal/viewUtils/flagUtils';\nimport copyResolUtils from '../sn-aa-action-modal/viewUtils/copyResolUtils';\nimport { updateRelDocUtils } from '../sn-aa-action-modal/viewUtils/updateRelDocUtils';\nimport { modalActionHandlers } from '../sn-aa-action-modal/viewUtils/uiActionCommonUtils';\nimport { configUtils } from './actionHandlers/configActionHandlers';\nimport { toggleViewActionHandlers } from './actionHandlers/toggleViewActionHandlers';\nimport { resultsContainerHandlers } from './actionHandlers/resultsContainerHandlers'\n\nexport const actions =  {\n\t...configUtils.actions,\n\t...searchUtils.actions,\n\t...actionStateUtils.actions,\n\t...updateRelDocUtils.actions\n};\n\nexport const actionHandlers = {\n\t...configUtils.actionHandlers,\n\t...searchUtils.actionHandlers,\n\t...actionUtils.actionHandlers,\n\t...actionStateUtils.actionHandlers,\n\t...searchControlsContainerUtils.actionHandlers,\n\t...attachUtils.actionHandlers.modalExternalActions,\n\t...copyResolUtils.actionHandlers.modalExternalActions,\n\t...linkUtils.actionHandlers.modalExternalActions,\n\t...restUtils.actionHandlers.modalExternalActions,\n\t...flagUtils.actionHandlers.modalExternalActions,\n\t...updateRelDocUtils.actionHandlers,\n\t...modalActionHandlers,\n\t...detailsContianerHandlers,\n\t...toggleViewActionHandlers,\n\t...resultsContainerHandlers\n};","import { searchVariables, searchQuery } from './searchGraphqlQuery';\nconst actionStateQuery = `\nGlideRecord_Query {\n\tactions: cxs_rel_doc_detail(queryConditions: $actionStateCondition) {\n\t\t_results {\n\t\t\trelevance {\n\t\t\t\tvalue\n\t\t\t}\n\t\t\tsearch_term {\n\t\t\t\tvalue\n\t\t\t}\n\t\t\trelevant_doc_table {\n\t\t\t\tvalue\n\t\t\t}\n\t\t\trelevant_doc {\n\t\t\t\tvalue\n\t\t\t}\n\t\t}\n\t}\n}`;\n\nconst actionStateVaribles = `$actionStateCondition: String!`;\nconst postActionRefreshGraphqlQuery = `query(\n\t${actionStateVaribles},\n\t${searchVariables}\n ) {\n\t${actionStateQuery}\n\t${searchQuery}\n}`;\n\nexport default postActionRefreshGraphqlQuery;\n","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport view from './view';\nimport styles from './styles.scss';\n\ncreateCustomElement('sn-aa-search-box', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties: {\n\t\tformSearchTerm: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t},\n\t\tsearchBoxText: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t},\n\t\tisLoading: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tstyles: styles\n});","import { t } from 'sn-translate';\nimport '@servicenow/now-toggle';\nimport { AA_SEARCH_BOX_CONTENT_CHANGED } from './actions';\n\nconst handleValueChange = (e, dispatch, formSearchTerm) => {\n\tif (!e.target.value)\n\t\t// TODO: Ideally we don't need null check here but a seismic issue\n\t\t// makes formSearchTerm 'undefined' when it's passed down as ''.\n\t\te.target.placeholder = formSearchTerm ? formSearchTerm : '';\n\tdispatch(AA_SEARCH_BOX_CONTENT_CHANGED, { searchBoxValue: e.target.value, sourceField: 'additional_search' });\n};\n\nconst view = (state, dispatch) => {\n\tconst {\n\t\tproperties: { formSearchTerm, searchBoxText, isLoading },\n\t} = state;\n\treturn (\n\t\t<div className=\"aa-control\">\n\t\t\t<div className=\"aa-control-field\">\n\t\t\t\t<div className=\"aa-control-icon\">\n\t\t\t\t\t<now-icon icon=\"magnifying-glass-fill\" size=\"md\" />\n\t\t\t\t</div>\n\t\t\t\t<input name=\"search-box\"\n\t\t\t\t\tclassName=\"aa-input\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\taria-label={t('Search')}\n\t\t\t\t\tvalue={searchBoxText}\n\t\t\t\t\tplaceholder={formSearchTerm}\n\t\t\t\t\tmaxlength=\"185\"\n\t\t\t\t\ton-keyup={e => {\n\t\t\t\t\t\tif (e.key === 'Enter' || !e.target.value) {\n\t\t\t\t\t\t\t// this.search(e.target.value, 'additional_search');\n\t\t\t\t\t\t\t// e.target.placeholder = formSearchTerm;\n\t\t\t\t\t\t\thandleValueChange(e, dispatch, formSearchTerm);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\ton-blur={e => { handleValueChange(e, dispatch, formSearchTerm); }}\n\t\t\t\t\ton-focus={e => e.target.placeholder = ''}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default view;\n","\n        var result = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}.aa-control{border:0;flex-direction:column;padding:0;width:100%}.aa-control,.aa-control-icon{display:flex;position:relative}.aa-control-icon{align-items:center;flex:0 0 auto;justify-content:center;margin:0 .25rem}.aa-control-field{display:flex;font-size:1rem;color:RGB(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)));position:relative}.aa-control-field:after{background-color:RGB(var(--now-color_divider--secondary,var(--now-color--neutral-5,172,180,181)));bottom:0;content:\\\"\\\";height:1px;left:0;position:absolute;right:0}.aa-control-field.is-hover,.aa-control-field:hover{background-color:RGB(var(--now-color_background--tertiary,var(--now-color--neutral-2,228,230,231)))}.aa-control-field.is-hover:after,.aa-control-field:hover:after{height:2px}.sn-control.is-focus .aa-control-field,.sn-control:focus .aa-control-field{background-color:RGB(var(--now-color--primary-0,221,237,233))}.sn-control.is-focus .aa-control-field:after,.sn-control:focus .aa-control-field:after{background:RGB(var(--now-color--primary-1,30,133,109));height:2px}.sn-control.is-disabled .aa-control-field,.sn-control.is-readonly .aa-control-field{opacity:.5}.sn-control.is-disabled .aa-control-field.is-hover,.sn-control.is-disabled .aa-control-field:hover,.sn-control.is-focus .sn-control.is-disabled .aa-control-field,.sn-control.is-focus .sn-control.is-readonly .aa-control-field,.sn-control.is-readonly .aa-control-field.is-hover,.sn-control.is-readonly .aa-control-field:hover,.sn-control:focus .sn-control.is-disabled .aa-control-field,.sn-control:focus .sn-control.is-readonly .aa-control-field{background:transparent}.sn-control.is-disabled .aa-control-field.is-hover:after,.sn-control.is-disabled .aa-control-field:hover:after,.sn-control.is-focus .sn-control.is-disabled .aa-control-field:after,.sn-control.is-focus .sn-control.is-readonly .aa-control-field:after,.sn-control.is-readonly .aa-control-field.is-hover:after,.sn-control.is-readonly .aa-control-field:hover:after,.sn-control:focus .sn-control.is-disabled .aa-control-field:after,.sn-control:focus .sn-control.is-readonly .aa-control-field:after{height:1px}.aa-input{background:transparent;border:0;color:inherit;cursor:text;display:inline-flex;flex:1 1 auto;font-size:inherit;font-family:inherit;height:2rem;margin:0;min-width:1px;padding:0 .25rem;position:relative;width:100%}.aa-input:focus{outline:none}.aa-input::-ms-clear{display:none}.aa-input:-moz-ui-invalid{box-shadow:none}.aa-input.is-disabled,.is-disabled .aa-input{cursor:not-allowed}::placeholder{color:RGB(var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)));opacity:1}\", \"\"]);\n\n// exports\n","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport view from './view';\nimport styles from './styles.scss';\n\ncreateCustomElement('sn-aa-search-as', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties: {\n\t\tconfig: {\n\t\t\treflect: true,\n\t\t\tdefault: null\n\t\t},\n\t\tisSearcherSelected: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t},\n\t\tselected: {\n\t\t\treflect: true,\n\t\t\tdefault:false\n\t\t},\n\t\tuser: {\n\t\t\treflect: true,\n\t\t\tdefault: null\n\t\t},\n\t\tagentAssistInstanceId: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t}, \n\t\tisLoading: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tstyles\n});\n","import { t } from 'sn-translate';\nimport '@servicenow/now-toggle';\n\nconst view = state => {\n\tconst {\n\t\tproperties: {\n\t\t\tagentAssistInstanceId,\n\t\t\tisLoading,\n\t\t\tisSearcherSelected,\n\t\t\tuser,\n\t\t\tconfig,\n\t\t\tselected\n\t\t}\n\t} = state;\n\tconst tagIDSuffix = '-searchas-user-list-label';\n\n\tif (\n\t\t!isSearcherSelected ||\n\t\t!user ||\n\t\t!user.value ||\n\t\t!(config && config.active)\n\t)\n\t\t{return null;}\n\tconst headerText = t('Search as {0}', config.fieldLabel || user.label);\n\n\treturn (\n\t\t<div className=\"aa-search-as\" id={agentAssistInstanceId + tagIDSuffix}>\n\t\t\t<div className=\"aa-search-as-content\">\n\t\t\t\t<span>{headerText}</span>\n\t\t\t</div>\n\t\t\t<div className=\"aa-search-as-content\">\n\t\t\t\t<now-toggle size=\"sm\" disabled={isLoading} checked={selected} />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default view;\n","\n        var result = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-search-as){flex:0 0 auto}.aa-search-as,:host(sn-aa-search-as){display:flex;position:relative;width:100%}.aa-search-as{color:RGB(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)));font-size:1rem;margin-top:.75rem}.aa-search-as-content{align-items:center;display:flex;flex:0 1 auto;margin-right:.5rem;overflow:hidden;position:relative}.aa-search-as-content:last-of-type{flex:0 0 auto;margin-right:0}.aa-search-as-content:only-of-type{flex:1 1 auto;margin-right:0}.aa-search-as-content>span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}\", \"\"]);\n\n// exports\n","export const AA_SEARCH_AS_CHANGE_SEARCH = 'AGENT_ASSIST#SEARCH_AS_CHANGE_SEARCH';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport view from './view';\nimport styles from './styles.scss';\n\ncreateCustomElement('sn-aa-search-filter', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties: {\n\t\tfilter: {\n\t\t\treflect: true,\n\t\t\tdefault: null\n\t\t},\n\t\tisLoading: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t},\n\t\tresourceSelectorState: {\n\t\t\treflect: true,\n\t\t\tdefault: {}\n\t\t}\n\t},\n\tstyles: styles\n});\n","import get from 'lodash/get';\nimport { t } from 'sn-translate';\nimport '@servicenow/now-dropdown';\nimport { SEARCHER, DEFAULT_RESOURCES_DISPLAY } from '../../consts';\n\nconst getDropdownItems = (filter) => {\n\tconst searcherLabel = get(filter, 'searcherLabel', DEFAULT_RESOURCES_DISPLAY);\n\tconst searcherResourceNames = get(filter, 'searcherResourceNames', []) || [];\n\tconst additionalResNames = get(filter, 'additionalResNames', []) || [];\n\tconst searcherGroup = { id: SEARCHER, label: searcherLabel };\n\tconst searcherRes = searcherResourceNames.map((src) =>\n\t\t({ id: src.value, label: src.displayValue })\n\t);\n\tconst additionalRes = additionalResNames.map((src) =>\n\t\t({ id: src.value, label: src.displayValue })\n\t);\n\tif (searcherRes.length + additionalRes.length <= 1)\n\t\treturn null;\n\n\tconst searcherResWithGroup = (searcherRes.length === 0) ? [] : [searcherGroup, ...searcherRes];\n\tconst showSearcherFirst = get(filter, 'showSearcherFirst', false);\n\treturn showSearcherFirst ?\n\t\t[...searcherResWithGroup, ...additionalRes] :\n\t\t[...additionalRes, ...searcherResWithGroup];\n};\n\nconst view = (state) => {\n\tconst {\n\t\tproperties: { filter, isLoading, resourceSelectorState: {selectedResource} }\n\t} = state;\n\tlet selectedList = [];\n\tselectedList.push(selectedResource);\n\tconst dropdownItems = getDropdownItems(filter);\n\tif (dropdownItems === null)\n\t\treturn null;\n\treturn (\n\t\t<now-dropdown\n\t\t\tdisabled={isLoading}\n\t\t\ticon=\"sliders-outline\"\n\t\t\tsize=\"md\"\n\t\t\thide-caret hide-label\n\t\t\tselect=\"single\"\n\t\t\tvariant=\"tertiary\"\n\t\t\titems={dropdownItems}\n\t\t\ttooltip-content={t(\"Select a search resource\")}\n\t\t\tconfig-aria={{'aria-label': t('Select a search resource')}}\n\t\t\tselected-items={selectedList} />\n\t);\n};\n\nexport default view;","module.exports = __TECTONIC__$servicenow_now_dropdown;","\n        var result = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}\", \"\"]);\n\n// exports\n","export const AA_RESOURCE_CHANGE_SEARCH = 'AGENT_ASSIST#RESOURCE_CHANGE_SEARCH';","import get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport { t } from 'sn-translate';\nimport {\n\tLOG,\n\tparseId,\n\tisAdditionalResource,\n\tisRecommendation,\n\tbaseLinkFromRootDir,\n\tgetAttachFieldObj,\n\tcopyToClipboard,\n\tshowTabMessage\n} from '../../util/agentAssistUtils';\nimport { PREVIEW_RECORD } from '../../consts';\nimport attachUtils from '../../sn-aa-action-modal/viewUtils/attachUtils';\nimport linkUtils from '../../sn-aa-action-modal/viewUtils/linkUtils';\nimport restUtils from '../../sn-aa-action-modal/viewUtils/restUtils';\nimport { handleCopyResolution } from '../../sn-aa-action-modal/viewUtils/copyResolUtils';\nimport { AA_FLAG_ACTION } from '../../sn-aa-action-modal/viewUtils/flagUtils';\nimport { AA_UPDATE_REL_DOC } from '../../sn-aa-action-modal';\nimport { AA_PROPOSE_RECOMMENDATION } from '../../searchResultsContainer/resultListItem/sn-aa-action-footer/actions';\nimport { AA_CLOSE_RECOMMENDATION } from '../../searchResultsContainer/resultListItem/sn-aa-recommendation-record/actions';\nimport { AA_ACTION_CLICKED } from '../../sn-aa-action-header';\nimport { AA_UI_ACTION_CLICKED } from '../actions';\nimport { actionTypes } from '@servicenow/ui-core';\n\nexport const { COMPONENT_PROPERTY_CHANGED } = actionTypes;\n\nfunction actionClickedEffect(coeffects) {\n\tconst { dispatch, state } = coeffects;\n\tconst { action, selected, item, itemIndex } = coeffects.action.payload;\n\tconst {\n\t\tproperties: {\n\t\t\ttable: currentTable,\n\t\t\tsysId: currentId,\n\t\t\tfields: currentFields\n\t\t}\n\t} = state;\n\tconst { actionId, value: actionValue } = action;\n\tconst { table: resourceTable, sys_id: resourceId } = parseId(item.id);\n\n\t// TODO: Remove for catalog\n\tif (\n\t\tactionId === 'order' ||\n\t\tactionId === 'request' ||\n\t\tactionId === 'submit'\n\t) {\n\t\tlet payload = {\n\t\t\ttable: resourceTable,\n\t\t\tsys_id: resourceId,\n\t\t\tparams: {\n\t\t\t\tsysparm_parent_table: currentTable,\n\t\t\t\tsysparm_parent_sys_id: currentId\n\t\t\t}\n\t\t};\n\n\t\t//TODO: move this to java\n\t\tconst catalogItemLink = get(item, 'relatedLinks[0].link', '');\n\t\tconst catalogItemSPLink = get(item, 'relatedLinks[0].spLink', '');\n\t\tif (\n\t\t\tcatalogItemLink.includes('servicecatalog_cat_item_guide_view') ||\n\t\t\tcatalogItemLink.includes('sysparm_guide') ||\n\t\t\tcatalogItemSPLink.includes('sc_cat_item_guide')\n\t\t) {\n\t\t\tpayload.table = 'sc_cat_item_guide';\n\t\t}\n\n\t\tdispatch(PREVIEW_RECORD, payload);\n\t}\n\n\tif (actionId === 'full_view') {\n\t\tdispatch(AA_UPDATE_REL_DOC, {\n\t\t\titemData: item,\n\t\t\titemIndex,\n\t\t\tactionValue,\n\t\t\tremove: selected\n\t\t});\n\t\tconst source = get(item, 'meta.source', '');\n\t\tif (\n\t\t\tisRecommendation(item) ||\n\t\t\tisAdditionalResource(item) ||\n\t\t\tsource === 'knowledge' ||\n\t\t\tsource === 'pinned'\n\t\t) {\n\t\t\tconst payload = {\n\t\t\t\ttable: resourceTable,\n\t\t\t\tsys_id: resourceId,\n\t\t\t\tparams: {\n\t\t\t\t\tsysparm_parent_table: currentTable,\n\t\t\t\t\tsysparm_parent_sys_id: currentId\n\t\t\t\t}\n\t\t\t};\n\t\t\tdispatch(PREVIEW_RECORD, payload);\n\t\t} else {\n\t\t\t// others full_view\n\t\t\tconst linkToOpen = baseLinkFromRootDir(\n\t\t\t\titem.meta.full_view_url || item.link || item.meta.link\n\t\t\t);\n\t\t\tif (linkToOpen) {\n\t\t\t\twindow.open(linkToOpen, '_blank');\n\t\t\t} else {\n\t\t\t\tLOG.error('Invalid knowledge link', linkToOpen);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (actionId === 'flag' && !selected) {\n\t\tconst actionConfirmModalProps = {\n\t\t\tshow: true,\n\t\t\tdata: item,\n\t\t\tremove: selected,\n\t\t\taction: actionValue\n\t\t};\n\t\t// this.setState({actionConfirmModalProps: actionConfirmModalProps});\n\t\tdispatch(AA_FLAG_ACTION, {\n\t\t\tactionConfirmModalProps: actionConfirmModalProps\n\t\t});\n\t\treturn;\n\t}\n\n\tif (actionId === 'rest:copy_note_template') {\n\t\tcopyToClipboard(item.meta.card_snippet).then(() => {\n\t\t\tshowTabMessage(\n\t\t\t\t'info',\n\t\t\t\tt('Copied to clipboard!'),\n\t\t\t\tcurrentTable,\n\t\t\t\tcurrentId,\n\t\t\t\tdispatch\n\t\t\t);\n\t\t});\n\t}\n\n\tif (actionId.includes(':')) {\n\t\tconst [actionType] = actionId.split(':');\n\t\tif (actionType === 'link' || actionType === 'link_to') {\n\t\t\tlinkUtils.link({ action, data: item, itemIndex }, dispatch);\n\t\t\treturn;\n\t\t}\n\n\t\tif (actionType === 'copy_resolution') {\n\t\t\thandleCopyResolution({ action, data: item, itemIndex }, dispatch);\n\t\t\treturn;\n\t\t}\n\n\t\tif (actionType === 'rest') {\n\t\t\trestUtils.startRestAction(\n\t\t\t\t{ action, data: item, itemIndex, currentId, currentTable },\n\t\t\t\tdispatch\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (actionId === 'attach' && !selected) {\n\t\tconst attachmentType = action.kbAttachment;\n\t\tconst attachFieldObj = getAttachFieldObj(\n\t\t\taction,\n\t\t\tcurrentFields,\n\t\t\tcurrentTable\n\t\t);\n\n\t\tif (attachFieldObj) {\n\t\t\tif (isEmpty(attachFieldObj)) {\n\t\t\t\t//Logs the attach action without doing anything else\n\t\t\t\tdispatch(AA_UPDATE_REL_DOC, {\n\t\t\t\t\titemData: item,\n\t\t\t\t\titemIndex,\n\t\t\t\t\tactionValue,\n\t\t\t\t\tactionId,\n\t\t\t\t\tremove: selected\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tattachUtils.fetchAttachment(\n\t\t\t\t\t{\n\t\t\t\t\t\taction,\n\t\t\t\t\t\tdata: item,\n\t\t\t\t\t\titemIndex,\n\t\t\t\t\t\tattachmentType,\n\t\t\t\t\t\tattachFieldObj\n\t\t\t\t\t},\n\t\t\t\t\tdispatch\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tshowTabMessage(\n\t\t\t\t'warning',\n\t\t\t\tt('Attach note field not found'),\n\t\t\t\tcurrentTable,\n\t\t\t\tcurrentId,\n\t\t\t\tdispatch\n\t\t\t);\n\t\t}\n\n\t\treturn;\n\t}\n\t//This handles all branches that are not returned: unattach, full_view, helpful, copy_note_template.\n\tdispatch(AA_UPDATE_REL_DOC, {\n\t\titemData: item,\n\t\titemIndex,\n\t\tactionValue,\n\t\tactionId,\n\t\tremove: selected\n\t});\n}\n\nfunction formTimeStampChangedEffect(coeffects) {\n\tconst { state, updateState } = coeffects;\n\tupdateState({\n\t\t...state,\n\t\tformTimeStamp: Date.now()\n\t});\n}\n\nfunction proposeRecommendationEffect(coeffects) {\n\tconst { action, dispatch } = coeffects;\n\tconst actionSysId = action.payload.proposeUIActionSysId;\n\tif (actionSysId) {\n\t\tdispatch(AA_UI_ACTION_CLICKED, { actionSysId });\n\t}\n}\n\nfunction closeRecommendationEffect(coeffects) {\n\tconst { state, updateState } = coeffects;\n\tupdateState({\n\t\t...state,\n\t\trecommendation: {\n\t\t\t...state.recommendation,\n\t\t\tshow: false\n\t\t}\n\t});\n}\n\nconst makeActionClickedHandler = () => ({\n\teffect: actionClickedEffect,\n\tstopPropagation: true\n});\n\nconst formTimeStampChangedHandler = () => ({\n\teffect: formTimeStampChangedEffect,\n\tstopPropagation: true\n});\n\nconst proposeRecommendationHandler = () => ({\n\teffect: proposeRecommendationEffect,\n\tstopPropagation: true\n});\n\nconst closeRecommendationHandler = () => ({\n\teffect: closeRecommendationEffect,\n\tstopPropagation: true\n});\n\nexport const actionUtils = {\n\tactionHandlers: {\n\t\t[AA_ACTION_CLICKED]: makeActionClickedHandler(),\n\t\t[AA_PROPOSE_RECOMMENDATION]: proposeRecommendationHandler(),\n\t\t[AA_CLOSE_RECOMMENDATION]: closeRecommendationHandler(),\n\t\t[COMPONENT_PROPERTY_CHANGED]: formTimeStampChangedHandler()\n\t}\n};\n","import {createCustomElement} from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport style from './styles.scss';\nimport view from './view';\nimport {actionHandlers} from './actionHandlers';\n\ncreateCustomElement('sn-aa-action-modal', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\n\tproperties: {\n\t\tactionId: { default: '' },\n\t\tshow: { default:true },\n\t\tmodalState: { default: {} },\n\t\tcurrentFields: { default: {} },\n\t\tcurrentTable: { default: '' },\n\t\tcurrentId: { default: '' }\n\t},\n\n\tinitialState: {\n\t\tuserInputObj: {},\n\t},\n\tactionHandlers,\n\tstyles: style\n});\n","\n        var result = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/src/index.js??ref--6-2!../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}.aa-card{border:RGB(var(--now-color_divider--tertiary,var(--now-color--neutral-3,209,214,214))) 1px solid;border-radius:.125rem;padding:1rem;margin-bottom:.5rem}.aa-card--title{color:RGB(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)));font-size:1rem;font-weight:600;margin-bottom:.5rem}.aa-card--body{color:RGB(var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)));font-size:.75rem}.aa-modal--input,.sn-aa-action-confirm-modal--body{padding-top:1rem}\", \"\"]);\n\n// exports\n","import '@servicenow/now-modal';\nimport '@devsnc/sn-form-controls';\nimport attachUtils, { ATTACH_ACTION_ID } from './viewUtils/attachUtils';\nimport linkUtils, { LINK_TO, LINK } from './viewUtils/linkUtils';\nimport copyResolUtils, { COPYRES_ACTION_ID } from './viewUtils/copyResolUtils';\nimport restUtils, { REST_ACTION_ID } from './viewUtils/restUtils';\nimport flagUtils, { FLAG_ACTION_ID } from './viewUtils/flagUtils';\n\nfunction getModalUtils(actionId = '') {\n\tswitch(actionId) {\n\tcase ATTACH_ACTION_ID: return attachUtils;\n\tcase LINK:\n\tcase LINK_TO: return linkUtils;\n\tcase COPYRES_ACTION_ID: return copyResolUtils;\n\tcase REST_ACTION_ID: return restUtils;\n\tcase FLAG_ACTION_ID: return flagUtils;\n\t}\n}\n\nconst view = (state, dispatch) => {\n    \n\tconst { properties: { actionId, modalState, show , currentFields }, userInputObj} = state;\n\tif(!actionId || !modalState || !modalState.hasOwnProperty(actionId) || !show)\n\t\treturn null;\n\tconst modalUtils = getModalUtils(actionId);\n\treturn (\n\t\t<now-modal\n\t\t\topened={show}\n\t\t\tsize='lg'\n\t\t\theader-label={modalUtils.getHeaderLabel(modalState[actionId])}\n\t\t\tfooter-actions={modalUtils.getFooterActions(userInputObj, modalState[actionId])}>\n\t\t\t{modalUtils.getInnerComponent(modalState[actionId], currentFields, userInputObj, dispatch)}\n\t\t</now-modal>\n\t);\n};\n\nexport default view;","module.exports = __TECTONIC__$servicenow_now_modal;","module.exports = __TECTONIC__$devsnc_sn_form_controls;","import attachUtils from './viewUtils/attachUtils';\nimport linkUtils from './viewUtils/linkUtils';\nimport copyResolUtils from './viewUtils/copyResolUtils';\nimport restUtils from './viewUtils/restUtils';\nimport flagUtils from './viewUtils/flagUtils';\n\nexport const actionHandlers = {\n\t...attachUtils.actionHandlers.modalInternalActions,\n\t...copyResolUtils.actionHandlers.modalInternalActions,\n\t...linkUtils.actionHandlers.modalInternalActions,\n\t...restUtils.actionHandlers.modalInternalActions,\n\t...flagUtils.actionHandlers.modalInternalActions\n};","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport view from './view';\nimport styles from './styles.scss';\nimport { actionHandlers } from './actionHandlers';\nimport { LIST_VIEW } from '../consts';\n\nexport default createCustomElement('sn-aa-action-header', {\n\trenderer: {\n\t\ttype: snabbdom\n\t},\n\tview,\n\tstyles,\n\tproperties: {\n\t\tview: {default: LIST_VIEW},\n\t\tformRecordInfo: {default: {}},\n\t\titem: {default: {}},\n\t\titemIndex: {default: 0},\n\t\tactions: {default: []},\n\t\tvisibleActions: {default: new Map()},\n\t\tisNewRecord: {default: false},\n\t\tisRecommendation: {default: false},\n\t\tformTimeStamp: {default : Date.now()}\n\t},\n\tinitialState: {\n\t\tdropdownOpened: false,\n\t\tactionsFiltered: false,\n\t\tfilteredActions: new Set()\n\t},\n\tactionHandlers: {\n\t\t...actionHandlers\n\t}\n});","// eslint-disable-next-line no-unused-vars\nimport { Fragment } from '@servicenow/ui-renderer-snabbdom';\nimport { DETAIL_VIEW_VISIBLE_ACTION_LIMIT } from '../consts';\nimport {\n\t// isAdditionalResource,\n\tisListView\n\t// parseId\n} from '../util/agentAssistUtils';\nimport { t } from 'sn-translate';\nimport { AA_ACTION_CLICKED } from './actions';\n\nconst view = (state, dispatch) => {\n\tconst { actions } = state.properties;\n\tif (!actions || actions.length === 0) {return null;}\n\n\tlet mainActions = actions;\n\tlet otherActions = actions;\n\n\tif (isListView(state.properties.view)) {\n\t\tif (state.actionsFiltered)\n\t\t\t{otherActions = actions.filter(action =>\n\t\t\t\tstate.filteredActions.has(action.actionId)\n\t\t\t);}\n\t} else {\n\t\tif (state.properties.isRecommendation) {\n\t\t\tmainActions = [actions[0]];\n\t\t\totherActions = actions.slice(1);\n\t\t} else {\n\t\t\tif (!state.actionsFiltered) {return null;}\n\n\t\t\tlet filteredActions = actions.filter(action =>\n\t\t\t\tstate.filteredActions.has(action.actionId)\n\t\t\t);\n\t\t\tmainActions = filteredActions.slice(\n\t\t\t\t0,\n\t\t\t\tDETAIL_VIEW_VISIBLE_ACTION_LIMIT\n\t\t\t);\n\t\t\totherActions = filteredActions.slice(\n\t\t\t\tDETAIL_VIEW_VISIBLE_ACTION_LIMIT\n\t\t\t);\n\t\t}\n\t}\n\treturn (\n\t\t<div className=\"aa-action-header\">\n\t\t\t<div className=\"aa-action-header-content\">\n\t\t\t\t{standaloneActions(state, mainActions, dispatch)}\n\t\t\t</div>\n\t\t\t<div className=\"aa-action-header-content\">\n\t\t\t\t{dropdownMenu(state, otherActions)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nfunction isSelected(visibleActions, action) {\n\treturn visibleActions.has(action.value);\n}\n\nfunction getAction(state, action, selected, key, dispatch) {\n\tvar displayText = isListView(state.properties.view)\n\t\t? action.badge\n\t\t: action.displayValue;\n\tconst badgeIcon = 'check-circle-outline';\n\n\tif (isListView(state.properties.view) || state.properties.disabled)\n\t\t{return (\n\t\t\t<div\n\t\t\t\tkey={key}\n\t\t\t\tclassName=\"aa-action-header-badge\"\n\t\t\t\taria-describedby={action.actionId}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"aa-action-header-text\"\n\t\t\t\t\tid={action.actionId}\n\t\t\t\t\ttitle={displayText}\n\t\t\t\t>\n\t\t\t\t\t{selected ? <now-icon icon={badgeIcon} /> : null}\n\t\t\t\t\t<span>{displayText}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);}\n\n\t// Actions in preview page\n\tconst hasReverse = !!action.reverseDisplayValue;\n\tconst shouldReverse = selected && hasReverse;\n\tdisplayText = shouldReverse\n\t\t? action.reverseDisplayValue\n\t\t: action.displayValue;\n\n\treturn (\n\t\t<button\n\t\t\ttype=\"button\"\n\t\t\tkey={key}\n\t\t\tclassName=\"aa-action-header-btn\"\n\t\t\ton-click={() =>\n\t\t\t\tdispatch(AA_ACTION_CLICKED, {\n\t\t\t\t\taction,\n\t\t\t\t\tselected,\n\t\t\t\t\titem: state.properties.item,\n\t\t\t\t\titemIndex: state.properties.itemIndex\n\t\t\t\t})\n\t\t\t}\n\t\t\taria-label={displayText}\n\t\t>\n\t\t\t{displayText}\n\t\t</button>\n\t);\n}\n\nfunction standaloneActions(state, actions, dispatch) {\n\tlet tags = null;\n\n\tif (isListView(state.properties.view))\n\t\t{actions = actions.filter(action =>\n\t\t\tisSelected(state.properties.visibleActions, action)\n\t\t);}\n\n\ttags = actions.map((action, i) =>\n\t\tgetAction(\n\t\t\tstate,\n\t\t\taction,\n\t\t\tisSelected(state.properties.visibleActions, action),\n\t\t\t'sa-action-text-' + i,\n\t\t\tdispatch\n\t\t)\n\t);\n\n\tif (!tags) {return null;}\n\n\treturn <Fragment>{tags}</Fragment>;\n}\n\nfunction dropdownMenu(state, actions) {\n\tconst dropdownItems = actions.map(action => {\n\t\tconst selected = isSelected(state.properties.visibleActions, action);\n\t\tconst hasReverse = !!action.reverseDisplayValue;\n\t\tconst shouldReverse = selected && hasReverse;\n\t\treturn {\n\t\t\tid: action.actionId,\n\t\t\tlabel: shouldReverse\n\t\t\t\t? action.reverseDisplayValue\n\t\t\t\t: action.displayValue,\n\t\t\taction: action,\n\t\t\tselected: selected\n\t\t};\n\t});\n\tconst iconSize = isListView(state.properties.view) ? 'sm' : 'md';\n\tif (dropdownItems.length === 0) {return null;}\n\treturn (\n\t\t<now-dropdown\n\t\t\ticon=\"ellipsis-v-outline\"\n\t\t\tsize={iconSize}\n\t\t\thide-caret\n\t\t\tbare\n\t\t\tselect=\"none\"\n\t\t\tvariant=\"secondary\"\n\t\t\titems={dropdownItems}\n\t\t\topened={state.dropdownOpened}\n\t\t\tconfig-aria={{ 'aria-label': t('actions on this record') }}\n\t\t\tmanageOpened={true}\n\t\t/>\n\t);\n}\n\nexport default view;\n","\n        var result = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/src/index.js??ref--6-2!../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}.aa-action-header{display:flex;position:relative;min-height:100%;overflow:hidden}.aa-action-header-content{align-items:center;color:RGB(var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)));display:inline-flex;flex:1 1 auto;font-size:.75rem;justify-content:flex-end;padding-right:.5rem;position:relative;overflow:hidden}.aa-action-header-content:last-of-type{padding-right:0;flex:0 0 auto}.aa-action-header-badge,.aa-action-header-text{display:inline-flex;font-weight:400;position:relative;width:100%}.aa-action-header-badge>now-icon,.aa-action-header-text>now-icon{margin-right:.25rem}.aa-action-header-badge>span,.aa-action-header-text>span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.aa-action-header-badge{padding-right:.5rem}.aa-action-header-badge:last-of-type{padding-right:0}.aa-action-header-btn{align-items:center;background:transparent;border:none;color:RGB(var(--now-color--secondary-2,1,89,107));cursor:pointer;display:inline-flex;font-size:.75rem;margin-left:.5rem;padding:0;text-decoration:none;overflow:hidden}.aa-action-header-btn::-moz-focus-inner{border-style:none}.aa-action-header-btn:focus{box-shadow:inset 0 0 0 2px RGB(var(--now-color_focus-ring,var(--now-color--secondary-1,1,119,142))),inset 0 0 0 3px RGB(var(--now-color_focus-ring_shadow,var(--now-color--neutral-0,255,255,255))),0 1px .125rem 0 RGBA(var(--now-color--neutral-21,0,0,0),.25);outline:none}.aa-action-header-btn:active,.aa-action-header-btn:hover{color:RGB(var(--now-color--secondary-3,1,60,71));text-decoration:underline}\", \"\"]);\n\n// exports\n","import { createHttpEffect } from '@servicenow/ui-effect-http';\nimport {\n\tparseId,\n\tisListView\n\t// isAdditionalResource\n} from '../util/agentAssistUtils';\nimport {\n\tCOMPONENT_BOOTSTRAPPED,\n\tCOMPONENT_PROPERTY_CHANGED,\n\tAA_GET_ACTIONS_BY_CONDITION,\n\tAA_GET_ACTIONS_BY_CONDITION_SUCCEEDED,\n\tAA_UPDATE_ACTION_HEADER_STATE,\n\tAA_ACTION_CLICKED\n} from './actions';\n\nfunction getActionsByCondition(coeffects) {\n\tconst {\n\t\tstate: {\n\t\t\tproperties: { item, formRecordInfo, actions }\n\t\t},\n\t\tdispatch\n\t} = coeffects;\n\n\tconst { table: resourceTable, sys_id: resourceId } = parseId(item.id);\n\tdispatch(AA_GET_ACTIONS_BY_CONDITION, {\n\t\trequestData: {\n\t\t\t...formRecordInfo,\n\t\t\tresourceTable: resourceTable,\n\t\t\tresourceId: resourceId,\n\t\t\tallActions: actions\n\t\t}\n\t});\n\treturn true;\n}\n\nfunction dropdownItemClickEffect(coeffects) {\n\tconst { state, dispatch } = coeffects;\n\tconst {\n\t\titem: { action, selected }\n\t} = coeffects.action.payload;\n\tdispatch(AA_ACTION_CLICKED, {\n\t\taction,\n\t\tselected,\n\t\titem: state.properties.item,\n\t\titemIndex: state.properties.itemIndex\n\t});\n}\n\nfunction dropdownBtnClickEffect(coeffects) {\n\tconst { state, dispatch } = coeffects;\n\tif (\n\t\t!isListView(state.properties.view) ||\n\t\tstate.actionsFiltered ||\n\t\tstate.dropdownOpened ||\n\t\t!getActionsByCondition(coeffects)\n\t) {\n\t\tdispatch(AA_UPDATE_ACTION_HEADER_STATE, {\n\t\t\tdropdownOpened: !state.dropdownOpened\n\t\t});\n\t}\n}\n\nfunction getActionsByConditionSucceededEffect(coeffects) {\n\tconst { action, state, dispatch } = coeffects;\n\tconst newActions = new Set(action.payload.result.actions);\n\tdispatch(AA_UPDATE_ACTION_HEADER_STATE, {\n\t\tactionsFiltered: true,\n\t\tfilteredActions: newActions,\n\t\tdropdownOpened: isListView(state.properties.view)\n\t});\n}\n\nfunction actionClickedHandlerEffect(coeffects) {\n\tconst { state, updateState } = coeffects;\n\tif (isListView(state.properties.view)) {\n\t\tupdateState({\n\t\t\tactionsFiltered: false\n\t\t});\n\t}\n}\n\nfunction detailViewBootstrappedEffect(coeffects) {\n\tconst { state } = coeffects;\n\tif (!isListView(state.properties.view)) {\n\t\tgetActionsByCondition(coeffects);\n\t}\n}\n\n// DEF0104879: This function will be triggered after formTimeStamp props get changed.\n// If current view is list view, then we should reset \"actionsFiltered\" to be false when form fields (formTimeStamp) just get updated.\n// If current view is detail view, then we directly call \"AA_GET_ACTIONS_BY_CONDITION\" rest api to get latest UI actions after form fields (formTimeStamp) get updated.\nfunction cardAndDetailViewPropsChangedEffect(coeffects) {\n\tconst {\n\t\tstate,\n\t\taction: {\n\t\t\tpayload: { name, previousValue, value }\n\t\t}\n\t} = coeffects;\n\tif (\n\t\t!isListView(state.properties.view) &&\n\t\t((name === 'item' && previousValue.id !== value.id) ||\n\t\t\t(name === 'formTimeStamp' && previousValue != value))\n\t) {\n\t\tgetActionsByCondition(coeffects);\n\t}\n\tif (\n\t\tisListView(state.properties.view) &&\n\t\t(name === 'formTimeStamp' && previousValue != value)\n\t) {\n\t\tactionClickedHandlerEffect(coeffects);\n\t}\n}\n\nconst makeDropdownItemClickHandler = () => ({\n\teffect: dropdownItemClickEffect,\n\tstopPropagation: true\n});\n\nconst makeDropdownBtnClickHandler = () => ({\n\teffect: dropdownBtnClickEffect,\n\tstopPropagation: true\n});\n\nconst makeGetActionsByConditionHandler = () => ({\n\t...createHttpEffect('/api/now/cxs/get_actions_by_condition', {\n\t\tmethod: 'POST',\n\t\tdataParam: 'requestData',\n\t\tsuccessActionType: AA_GET_ACTIONS_BY_CONDITION_SUCCEEDED\n\t}),\n\tstopPropagation: false\n});\n\nconst makeGetActionsByConditionSucceededHandler = () => ({\n\teffect: getActionsByConditionSucceededEffect,\n\tstopPropagation: true\n});\n\nconst makeUpdateActionContainerStateHandler = () => ({\n\teffect: coeffects => {\n\t\tconst { state, action, updateState } = coeffects;\n\t\tupdateState({\n\t\t\t...state,\n\t\t\t...action.payload\n\t\t});\n\t},\n\tstopPropagation: true\n});\n\nconst makeActionClickedHandler = () => ({\n\teffect: actionClickedHandlerEffect,\n\tstopPropagation: false\n});\n\nconst makeDetailViewBootstrappedHandler = () => ({\n\teffect: detailViewBootstrappedEffect,\n\tstopPropagation: true\n});\n\nconst makeCardViewAndDetailViewPropsChangedHandler = () => ({\n\teffect: cardAndDetailViewPropsChangedEffect,\n\tstopPropagation: true\n});\n\nexport const actionHandlers = {\n\t'NOW_DROPDOWN#ITEM_CLICKED': makeDropdownItemClickHandler(),\n\t'NOW_DROPDOWN#OPENED_SET': makeDropdownBtnClickHandler(),\n\t[AA_GET_ACTIONS_BY_CONDITION]: makeGetActionsByConditionHandler(),\n\t[AA_GET_ACTIONS_BY_CONDITION_SUCCEEDED]: makeGetActionsByConditionSucceededHandler(),\n\t[AA_UPDATE_ACTION_HEADER_STATE]: makeUpdateActionContainerStateHandler(),\n\t[AA_ACTION_CLICKED]: makeActionClickedHandler(),\n\t[COMPONENT_BOOTSTRAPPED]: makeDetailViewBootstrappedHandler(),\n\t[COMPONENT_PROPERTY_CHANGED]: makeCardViewAndDetailViewPropsChangedHandler()\n};\n","import { AA_SEARCH_AS_CHANGE_SEARCH } from '../../searchControlsContainer/sn-aa-search-as';\nimport { AA_RESOURCE_CHANGE_SEARCH } from '../../searchControlsContainer/sn-aa-search-filter';\n\nexport const searchControlsContainerUtils = {\n\tactionHandlers: {\n\t\t['NOW_TOGGLE#CHECKED_SET']: {\n\t\t\teffect: coeffects => {\n\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\tconst {\n\t\t\t\t\tpayload: { value }\n\t\t\t\t} = action;\n\t\t\t\tupdateState({\n\t\t\t\t\t...state,\n\t\t\t\t\tsearchAsState: {\n\t\t\t\t\t\t...state.searchAsState,\n\t\t\t\t\t\tselected: value\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tstopPropagation: true,\n\t\t\tinterceptors: [\n\t\t\t\t{\n\t\t\t\t\tafter: context => ({\n\t\t\t\t\t\t...context,\n\t\t\t\t\t\teffects: [\n\t\t\t\t\t\t\t...context.effects,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\teffect: dispatch => {\n\t\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\t\tpayload: { value: selected }\n\t\t\t\t\t\t\t\t\t} = context.coeffects.action;\n\t\t\t\t\t\t\t\t\tdispatch(AA_SEARCH_AS_CHANGE_SEARCH, {\n\t\t\t\t\t\t\t\t\t\tsearchAsUser: selected\n\t\t\t\t\t\t\t\t\t\t\t? context.coeffects.state\n\t\t\t\t\t\t\t\t\t\t\t\t\t.searchAsState.user.value\n\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\targs: [context.coeffects.dispatch]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\t['NOW_DROPDOWN#SELECTED_ITEMS_SET']: {\n\t\t\teffect: coeffects => {\n\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\tconst {\n\t\t\t\t\tpayload: { value }\n\t\t\t\t} = action;\n\t\t\t\tupdateState({\n\t\t\t\t\t...state,\n\t\t\t\t\tresourceSelectorState: {\n\t\t\t\t\t\t...state.resourceSelectorState,\n\t\t\t\t\t\tselectedResource: value[0]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tstopPropagation: true,\n\t\t\tinterceptors: [\n\t\t\t\t{\n\t\t\t\t\tafter: context => ({\n\t\t\t\t\t\t...context,\n\t\t\t\t\t\teffects: [\n\t\t\t\t\t\t\t...context.effects,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\teffect: dispatch => {\n\t\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\t\tpayload: { value }\n\t\t\t\t\t\t\t\t\t} = context.coeffects.action;\n\t\t\t\t\t\t\t\t\tdispatch(AA_RESOURCE_CHANGE_SEARCH, {\n\t\t\t\t\t\t\t\t\t\tresourceSysId: value[0]\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\targs: [context.coeffects.dispatch]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t}\n};\n","import {\n\tAA_CONTAINER_SHOW_PREV,\n\tAA_CONTAINER_SHOW_NEXT\n} from '../../sn-aa-details-container/actions';\nimport { AA_UPDATE_REL_DOC } from '../../sn-aa-action-modal';\nimport { AA_PAGE_CHANGE_SEARCH } from './searchActionHandlers';\n// import { baseLinkFromRootDir } from '../../util/agentAssistUtils';\n\nconst showPrevItemEffect = ({ state, action, dispatch, updateState }) => {\n\tconst { selectedIndex, offset } = action.payload;\n\tconst newIndex = selectedIndex - 1;\n\tconst virtualIndex = newIndex - offset;\n\tif (virtualIndex >= 0) {\n\t\tconst resultItems = state.searchState.searchResults;\n\t\tconst resultItem = (virtualIndex < 0 || virtualIndex >= resultItems.length) ? null : resultItems[virtualIndex];\n\t\t// const linkToOpen = baseLinkFromRootDir(resultItem.link);\n\t\t// if (resultItem && resultItem.linkTarget === '_blank' && linkToOpen) {\n\t\t//     window.open(linkToOpen, '_blank');\n\t\t// } else {\n\t\tupdateState({\n\t\t\tdetailViewState: {\n\t\t\t\tshowDetail: true,\n\t\t\t\tselectedItem: resultItem,\n\t\t\t\tselectedIndex: newIndex\n\t\t\t}\n\t\t});\n\t\t// }\n\t\tdispatch(AA_UPDATE_REL_DOC, { itemData: resultItem, itemIndex: newIndex, actionValue: 'Preview', remove: false });\n\t} else if (virtualIndex < 0 && offset > 0) {    //related to pagination... #TODO#\n\t\tupdateState({\n\t\t\tdetailViewState: {\n\t\t\t\tshowDetail: true,\n\t\t\t\tprevPageLoading: true\n\t\t\t}\n\t\t});\n\t\tdispatch(AA_PAGE_CHANGE_SEARCH, {direction: -1});\n\t}\n};\n\nconst showNextItemEffect = ({ state, action, dispatch, updateState }) => {\n\tconst { selectedIndex, offset } = action.payload;\n\tconst newIndex = selectedIndex + 1;\n\tconst virtualIndex = newIndex - offset;\n\tconst resultCount = state.searchState.returnedResults;\n\tconst hasMoreResults = state.searchState.hasMoreResults;\n\tif (virtualIndex < resultCount) {\n\t\tconst resultItems = state.searchState.searchResults;\n\t\tconst resultItem = (virtualIndex < 0 || virtualIndex >= resultItems.length) ? null : resultItems[virtualIndex];\n\t\t// const linkToOpen = baseLinkFromRootDir(resultItem.link);\n\t\t// if (resultItem && resultItem.linkTarget === '_blank' && linkToOpen) {\n\t\t//     window.open(linkToOpen, '_blank');\n\t\t// } else {\n\t\tupdateState({\n\t\t\tdetailViewState: {\n\t\t\t\tshowDetail: true,\n\t\t\t\tselectedItem: resultItem,\n\t\t\t\tselectedIndex: newIndex\n\t\t\t}\n\t\t});\n\t\t// }\n\t\tdispatch(AA_UPDATE_REL_DOC, { itemData: resultItem, itemIndex: newIndex, actionValue: 'Preview', remove: false });\n\t} else if (virtualIndex >= resultCount && hasMoreResults) {\n\t\tupdateState({\n\t\t\tdetailViewState: {\n\t\t\t\tshowDetail: true,\n\t\t\t\tnextPageLoading: true\n\t\t\t}\n\t\t});\n\t\tdispatch(AA_PAGE_CHANGE_SEARCH, {direction: 1});\n\t}\n};\n\nexport const detailsContianerHandlers = {\n\t[AA_CONTAINER_SHOW_PREV]: {\n\t\teffect: showPrevItemEffect,\n\t\tstopPropagation: true\n\t},\n\t[AA_CONTAINER_SHOW_NEXT]: {\n\t\teffect: showNextItemEffect,\n\t\tstopPropagation: true\n\t}\n};\n","import get from 'lodash/get';\nimport pick from 'lodash/pick';\nimport isEmpty from 'lodash/isEmpty';\nimport isObject from 'lodash/isObject';\nimport cloneDeep from 'lodash/cloneDeep';\nimport ConfigGraphQLQuery from './configGraphqlQuery';\nimport { createGraphQLEffect } from '@servicenow/ui-effect-graphql';\nimport {\n\tSEARCHER,\n\tDEFAULT_CONFIG,\n\tDEFAULT_RESOURCES_DISPLAY,\n\tAGENT_ASSIST\n} from '../../consts';\nimport { LOG, showTabMessage } from '../../util/agentAssistUtils';\nimport { t } from 'sn-translate';\n\nimport {\n\tAA_BOOTSTRAPPED,\n\tAA_REQUEST_CONFIG,\n\tAA_CONFIG_REQUEST_START,\n\tAA_CONFIG_REQUEST_SUCCESS,\n\tAA_CONFIG_REQUEST_FAILED,\n\tAA_CONFIG_IN_STATE\n} from '../actions';\n\nconst getSearcherResourceNames = resources => {\n\t// Retrieves search resource names from props for rendering in the filter\n\tif (!resources) {\n\t\treturn [];\n\t}\n\n\treturn Object.keys(resources).map(src => ({\n\t\tvalue: src,\n\t\tdisplayValue: resources[src].displayValue || resources[src].name || src\n\t}));\n};\n\nconst sortActions = resourceActions => {\n\tfor (const source in resourceActions) {\n\t\tif (resourceActions[source].items) {\n\t\t\t//Sort the actions in each category by order\n\t\t\tresourceActions[source].items.sort((actionA, actionB) => {\n\t\t\t\tif (actionA.order && actionB.order) {\n\t\t\t\t\tif (actionA.order < actionB.order) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t} else if (actionA.order > actionB.order) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\treturn resourceActions;\n};\n\nconst retrieveActions = (cxsResources, isAdditionalResource) => {\n\tlet result = {};\n\tcxsResources.forEach(resource => {\n\t\tconst path = isAdditionalResource ? 'cxs_search_res_config.' : '';\n\t\tconst key = get(resource, path + 'sys_id', null);\n\t\tconst name = get(resource, path + 'name', key);\n\t\tconst displayValue = get(resource, path + 'label', name);\n\t\tlet items = get(resource, path + 'cxs_ui_action_config', []);\n\t\tif (typeof items === 'object' && items.length > 0) {\n\t\t\titems = items\n\t\t\t\t.filter(item => get(item, 'cxs_ui_action', false)) //To handle when cxs_ui_action is empty, e.g. \"Link Major Incident\" on Similarity result\n\t\t\t\t// .filter(item => filterActionsByShowOnNew(item, this.props.isNewRecord))\n\t\t\t\t.map(item => {\n\t\t\t\t\t//TODO rename 'name' to 'value'\n\t\t\t\t\treturn {\n\t\t\t\t\t\tactionId: get(item, 'cxs_ui_action.action_id', ''),\n\t\t\t\t\t\trestAPI: get(item, 'rest_api', ''),\n\t\t\t\t\t\tcurrentTable: get(item, 'current_table', ''),\n\t\t\t\t\t\tcurrentActionCondition: get(\n\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t'current_action_condition',\n\t\t\t\t\t\t\t''\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttable: get(item, 'table', ''),\n\t\t\t\t\t\tactionCondition: get(item, 'action_condition', ''),\n\t\t\t\t\t\tvalue: get(item, 'action_value', ''),\n\t\t\t\t\t\torder: get(item, 'order', 0),\n\t\t\t\t\t\tbadge: get(item, 'badge_label', ''),\n\t\t\t\t\t\tdisplayValue: get(item, 'action_label', ''),\n\t\t\t\t\t\treverseDisplayValue: get(item, 'action_undo_label', ''),\n\t\t\t\t\t\tshowOnNew: get(item, 'show_on_new', 'false') === 'true',\n\t\t\t\t\t\tkbAttachment: get(\n\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t'attachment_type',\n\t\t\t\t\t\t\t'embed_link'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tattachNoteField: get(\n\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t'attach_note_field',\n\t\t\t\t\t\t\t'work_notes'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tuseAttachNoteField: get(\n\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t'use_custom_field_for_attach',\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t),\n\t\t\t\t\t\tsysId: get(item, 'sys_id', '')\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t}\n\t\tresult[key] = {};\n\t\tresult[key].items = items;\n\t\tresult[key].displayValue = displayValue;\n\t\tresult[key].name = name;\n\t});\n\treturn sortActions(result);\n};\n\nconst buildResourceSelectorConfig = cxsTableConfig => {\n\tconst searcherResources = get(\n\t\tcxsTableConfig,\n\t\t'cxs_search_res_config',\n\t\tnull\n\t);\n\tconst searcherResActions = retrieveActions(searcherResources, false);\n\tconst additionalResources = get(\n\t\tcxsTableConfig,\n\t\t'cxs_res_context_config',\n\t\tnull\n\t);\n\tconst additionalResActions = retrieveActions(additionalResources, true);\n\n\tlet defaultResource = SEARCHER;\n\tconst additionalResNames = additionalResources.map((x, idx) => {\n\t\tconst resourceSysId = get(\n\t\t\tadditionalResources[idx],\n\t\t\t'cxs_search_res_config.sys_id',\n\t\t\tnull\n\t\t);\n\t\tconst name = get(\n\t\t\tadditionalResources[idx],\n\t\t\t'cxs_search_res_config.name',\n\t\t\tresourceSysId\n\t\t);\n\t\tconst resourceLabel = get(\n\t\t\tadditionalResources[idx],\n\t\t\t'cxs_search_res_config.label',\n\t\t\tname\n\t\t);\n\t\t// const resourceType = get(additionalResources[idx], '_query.addSearchResConfig.cxs_search_res_config._results[0].resource_type', null);\n\n\t\t// Set default search, default_search > searcher > first by order.\n\t\tif (get(additionalResources[idx], 'default_search', false)) {\n\t\t\tdefaultResource = resourceSysId;\n\t\t}\n\n\t\tif (\n\t\t\tdefaultResource === SEARCHER &&\n\t\t\t(!searcherResources || searcherResources.length === 0)\n\t\t) {\n\t\t\tdefaultResource = resourceSysId;\n\t\t}\n\n\t\treturn {\n\t\t\tvalue: resourceSysId,\n\t\t\tdisplayValue: resourceLabel\n\t\t};\n\t});\n\n\treturn {\n\t\tshowSearcherFirst: get(cxsTableConfig, 'show_searcher_first', false),\n\t\tsearcherResources,\n\t\tsearcherResourceNames: getSearcherResourceNames(searcherResActions),\n\t\tsearcherResActions,\n\t\tdefaultResource,\n\t\tadditionalResources,\n\t\tadditionalResNames, //Array of {value, displayValue}used for resource selector\n\t\tadditionalResActions, //{resource sysid: {displayValue, items: [array of actions]}}\n\t\tsearcherLabel:\n\t\t\tget(\n\t\t\t\tcxsTableConfig,\n\t\t\t\t'cxs_context_config.searcher_text',\n\t\t\t\tDEFAULT_RESOURCES_DISPLAY\n\t\t\t) || DEFAULT_RESOURCES_DISPLAY\n\t};\n};\n\nconst buildSearchAsConfig = cxsTableConfig => {\n\tconst searchAsConfigActive = get(cxsTableConfig, 'search_as_active', false);\n\tconst searchAsConfigField = get(cxsTableConfig, 'search_as_field', null);\n\t//TODO_CONFIG searchAsField display value not available\n\tconst searchAsConfigFieldDisplay = get(\n\t\tcxsTableConfig,\n\t\t'search_as_field.displayValue',\n\t\tnull\n\t);\n\tlet searchAsConfig = {\n\t\tactive: searchAsConfigActive,\n\t\t// disabled: this.filter.defaultResource !== SEARCHER,//need config\n\t\tfield: searchAsConfigField,\n\t\tfieldLabel: searchAsConfigFieldDisplay\n\t};\n\n\treturn {\n\t\t...searchAsConfig\n\t};\n};\n\nconst initializeTableConfig = cxsTableConfig => {\n\tconst configs = {\n\t\t// When Configuration is active, then we set \"loading\" to true to show \"Loading Search Results...\" before we do the search\n\t\t// When Configuration is inactive, then \"loading\" will be set to false to show \"Invalid configuration\".\n\t\tloading: cxsTableConfig.active,\n\t\terror: null,\n\t\tactive: cxsTableConfig.active,\n\t\tlimit: Number(\n\t\t\tget(cxsTableConfig, 'results_per_page', DEFAULT_CONFIG.limit)\n\t\t),\n\t\tcontext: cxsTableConfig.cxs_context_config_id,\n\t\tmaxLimit: Number(get(cxsTableConfig, 'limit', DEFAULT_CONFIG.maxLimit)),\n\t\tsearchFields: cxsTableConfig.cxs_table_field_config,\n\t\tallowResultPreviewButtons: get(\n\t\t\tcxsTableConfig,\n\t\t\t'allow_result_preview_buttons',\n\t\t\ttrue\n\t\t),\n\t\t//Resource selector related\n\t\t...buildResourceSelectorConfig(cxsTableConfig),\n\t\tsearchAs: buildSearchAsConfig(cxsTableConfig),\n\t\tresultsHeaderTextDisplay: get(\n\t\t\tcxsTableConfig,\n\t\t\t'results_header_text',\n\t\t\tAGENT_ASSIST.displayValue\n\t\t),\n\t\tallowEmptySearchTerm: get(\n\t\t\tcxsTableConfig,\n\t\t\t'allow_empty_search_term',\n\t\t\tfalse\n\t\t)\n\t};\n\treturn configs;\n\t// Cache config object\n\t// ComponentWorkspaceAgentAssist.sharedConfigMap[this.props.properties.cxsTableConfig] = this.config;\n};\n\nconst buildAndValidateConfigs = data => {\n\tconst cxsTableConfig = get(\n\t\tdata,\n\t\t'GlideContextualSearchMetadata_Query',\n\t\tnull\n\t);\n\tif (!data || !cxsTableConfig || isEmpty(cxsTableConfig)) {\n\t\tLOG.warn('No Table Configuration Found. ');\n\t\treturn {\n\t\t\terror: {\n\t\t\t\tmessage: 'No Table Configuration Found. ',\n\t\t\t\tdata: data\n\t\t\t}\n\t\t};\n\t}\n\treturn initializeTableConfig(cxsTableConfig);\n};\n\nconst initializeSearchAsState = (state, configs) => {\n\tconst { searchAs, defaultResource } = configs;\n\tconst fields = get(state, 'properties.fields', {});\n\tlet user = {};\n\tif (fields && searchAs && searchAs.field in fields) {\n\t\tuser = pick(fields[searchAs.field], ['value', 'displayValue', 'label']);\n\t}\n\n\treturn {\n\t\t...state.searchAsState,\n\t\tuser,\n\t\tisSearcherSelected: defaultResource === SEARCHER\n\t\t//On initial search, since single searcher resource cannot be defaulted, only checking searcher grouping here.\n\t};\n};\n\nconst getInitialSearchFieldState = (configs, state) => {\n\tconst { fields } = state.properties;\n\tif (\n\t\t!(configs && configs.active) ||\n\t\tisEmpty(state) ||\n\t\tisEmpty(fields) ||\n\t\t!isObject(fields) ||\n\t\t!(configs.searchFields && configs.searchFields.length > 0)\n\t) {\n\t\treturn {\n\t\t\tsearchBoxText: '',\n\t\t\tcurrentSearchTerm: '',\n\t\t\tformSearchField: null,\n\t\t\tformSearchTerm: '',\n\t\t\tsourceField: null\n\t\t};\n\t}\n\n\tlet initialSearchField = null;\n\t//There are fields configured\n\tconst availableSearchFields = configs.searchFields.filter(f => {\n\t\treturn f.field && f.field in fields;\n\t});\n\tif (availableSearchFields.length > 0) {\n\t\t//Configured fields are available on form\n\t\tconst defaultFields = availableSearchFields.filter(\n\t\t\tf => f.default_config\n\t\t);\n\t\t//ideally there should be just one default field\n\t\tif (defaultFields.length > 0) {\n\t\t\tinitialSearchField = defaultFields[0].field;\n\t\t} else {\n\t\t\tinitialSearchField = availableSearchFields[0].field;\n\t\t}\n\t} else {\n\t\t//configured fields are not available on form, give warning message\n\t\tconst searchFieldsStr =\n\t\t\tconfigs.searchFields.length > 1\n\t\t\t\t? configs.searchFields.reduce((a, b) => a.name + ', ' + b.name)\n\t\t\t\t: configs.searchFields[0].name;\n\n\t\tif (searchFieldsStr) {\n\t\t\tshowTabMessage(\n\t\t\t\t'warning',\n\t\t\t\tt(\n\t\t\t\t\t'Agent Assist: The following fields are configured but cannot be found on the form:\\n{0}',\n\t\t\t\t\tsearchFieldsStr\n\t\t\t\t),\n\t\t\t\tstate.properties.table,\n\t\t\t\tstate.properties.sysId,\n\t\t\t\tstate.dispatch\n\t\t\t);\n\t\t}\n\t}\n\n\tif (initialSearchField && initialSearchField in fields) {\n\t\treturn {\n\t\t\tsearchBoxText: '',\n\t\t\tcurrentSearchTerm: fields[initialSearchField].value,\n\t\t\tformSearchField: initialSearchField,\n\t\t\tformSearchTerm: fields[initialSearchField].value,\n\t\t\tsourceField: initialSearchField\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\tsearchBoxText: '',\n\t\t\tcurrentSearchTerm: '',\n\t\t\tformSearchField: null,\n\t\t\tformSearchTerm: '',\n\t\t\tsourceField: null\n\t\t};\n\t}\n};\n\nexport const configUtils = {\n\tactions: {\n\t\t[AA_BOOTSTRAPPED]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[AA_REQUEST_CONFIG]: {\n\t\t\tprivate: true\n\t\t}\n\t},\n\tactionHandlers: {\n\t\t[AA_BOOTSTRAPPED]: coeffects => {\n\t\t\tconst {\n\t\t\t\tstate: {\n\t\t\t\t\tproperties: { cxsTableConfig: cxsTableConfigSysId }\n\t\t\t\t},\n\t\t\t\tdispatch\n\t\t\t} = coeffects;\n\n\t\t\tif (!cxsTableConfigSysId) {\n\t\t\t\tLOG.error('Invalid Table Configuration ID. ');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatch(AA_REQUEST_CONFIG, {\n\t\t\t\tcxsTableConfigSysId\n\t\t\t});\n\t\t},\n\t\t[AA_REQUEST_CONFIG]: createGraphQLEffect(ConfigGraphQLQuery, {\n\t\t\tvariableList: ['cxsTableConfigSysId'],\n\t\t\tstartActionType: AA_CONFIG_REQUEST_START,\n\t\t\tsuccessActionType: AA_CONFIG_REQUEST_SUCCESS,\n\t\t\terrorActionType: AA_CONFIG_REQUEST_FAILED\n\t\t}),\n\t\t[AA_CONFIG_REQUEST_START]: ({ state, updateState }) => {\n\t\t\tupdateState({\n\t\t\t\t...state,\n\t\t\t\tconfigs: {\n\t\t\t\t\t...state.configs,\n\t\t\t\t\tloading: true\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[AA_CONFIG_REQUEST_SUCCESS]: {\n\t\t\teffect: coeffects => {\n\t\t\t\tconst { state, action, updateState } = coeffects;\n\t\t\t\tconst {\n\t\t\t\t\tpayload: { data }\n\t\t\t\t} = action;\n\t\t\t\tconst configs = buildAndValidateConfigs(data);\n\t\t\t\tconst seachAsIsConfigured = get(\n\t\t\t\t\tconfigs,\n\t\t\t\t\t'searchAs.active',\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tconst searchAsState = seachAsIsConfigured\n\t\t\t\t\t? initializeSearchAsState(state, configs)\n\t\t\t\t\t: {};\n\t\t\t\tupdateState({\n\t\t\t\t\t...state,\n\t\t\t\t\tcurrentFields: cloneDeep(state.properties.fields),\n\t\t\t\t\tconfigs,\n\t\t\t\t\tsearchAsState,\n\t\t\t\t\tresourceSelectorState: {\n\t\t\t\t\t\t...state.resourceSelectorState,\n\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\tselectedResource: configs.defaultResource,\n\t\t\t\t\t\tresources:\n\t\t\t\t\t\t\tconfigs.defaultResource === SEARCHER\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [configs.defaultResource]\n\t\t\t\t\t},\n\t\t\t\t\tsearchState: {\n\t\t\t\t\t\t...state.searchState,\n\t\t\t\t\t\t...getInitialSearchFieldState(configs, state)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//resources.cxs_config.data.GlideRecord_Query.cxs_table_config.cxsTableConfigArr[0].results_header_text.value\n\t\t\tinterceptors: [\n\t\t\t\t{\n\t\t\t\t\tafter: context => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...context,\n\t\t\t\t\t\t\teffects: [\n\t\t\t\t\t\t\t\t...context.effects,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\teffect: ({ dispatch }) => {\n\t\t\t\t\t\t\t\t\t\tdispatch(AA_CONFIG_IN_STATE);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\targs: [context.coeffects]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t[AA_CONFIG_REQUEST_FAILED]: coeffects => {\n\t\t\tconst { state, action, updateState } = coeffects;\n\n\t\t\t// Example of an error action.payload\n\t\t\t// {\n\t\t\t// \tlocations: [{line: 3, column: 13}],\n\t\t\t// \tmessage: 'Syntax Error: Cannot parse the unexpected character \"\\u2014\".',\n\t\t\t// \textensions: undefined,\n\t\t\t// \tnodes: undefined,\n\t\t\t// \toriginalError: undefined,\n\t\t\t// \tpath: undefined,\n\t\t\t// \tpositions: [135],\n\t\t\t// \tsource:{body:'', locationOffset: {}, name: 'GraphQL request'},\n\t\t\t// \tstack: \"GraphQLError: Syntax Error: Cannot parse the unexpect\"\n\t\t\t// }\n\t\t\tLOG.error(action.payload.stack);\n\t\t\tupdateState({\n\t\t\t\t...state,\n\t\t\t\tconfigs: {\n\t\t\t\t\t...state.configs,\n\t\t\t\t\terror: action.payload\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n","export default `query nowAgentAssist($cxsTableConfigSysId: String!) {\n\tGlideContextualSearchMetadata_Query (tableConfig: $cxsTableConfigSysId) {\n\t\tactive\n\t\tlimit\n\t\tresults_per_page\n\t\tsearch_as_active\n\t\tsearch_as_field\n\t\tshow_searcher_first\n\t\tresults_header_text\n\t\tallow_empty_search_term\n\t\tallow_result_preview_buttons\n\t\tcxs_context_config_id\n\t\tcxs_context_config {\n\t\t\tsys_id\n\t\t\tsearcher_text\n\t\t}\n\t\tcxs_table_field_config {\n\t\t\tfield\n\t\t\tdefault_config\n\t\t\torder\n\t\t\tname\n\t\t}\n\t\tcxs_search_res_config {\n\t\t\tname\n\t\t\tlabel\n\t\t\tsearch_resource_id\n\t\t\tsys_id\n\t\t\tresource_type\n\t\t\trecommendation\n\t\t\tcxs_ui_action_config {\n\t\t\t\taction_label\n\t\t\t\tsys_id\n\t\t\t\taction_value\n\t\t\t\torder\n\t\t\t\tbadge_label\n\t\t\t\taction_undo_label\n\t\t\t\tshow_on_new\n\t\t\t\tattachment_type\n\t\t\t\tattach_note_field\n\t\t\t\trest_api\n\t\t\t\tcurrent_table\n\t\t\t\tcurrent_action_condition\n\t\t\t\ttable\n\t\t\t\taction_condition\n\t\t\t\tuse_custom_field_for_attach\n\t\t\t\tcxs_ui_action {\n\t\t\t\t\taction_id\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcxs_res_context_config {\n\t\t\tname\n\t\t\torder\n\t\t\tdefault_search\n\t\t\tcxs_search_res_config {\n\t\t\t\tname\n\t\t\t\tlabel\n\t\t\t\tsearch_resource_id\n\t\t\t\tsys_id\n\t\t\t\tresource_type\n\t\t\t\trecommendation\n\t\t\t\tcxs_ui_action_config {\n\t\t\t\t\taction_label\n\t\t\t\t\tsys_id\n\t\t\t\t\taction_value\n\t\t\t\t\torder\n\t\t\t\t\tbadge_label\n\t\t\t\t\taction_undo_label\n\t\t\t\t\tshow_on_new\n\t\t\t\t\tattachment_type\n\t\t\t\t\tattach_note_field\n\t\t\t\t\trest_api\n\t\t\t\t\tcurrent_table\n\t\t\t\t\tcurrent_action_condition\n\t\t\t\t\ttable\n\t\t\t\t\taction_condition\n\t\t\t\t\tuse_custom_field_for_attach\n\t\t\t\t\tcxs_ui_action {\n\t\t\t\t\t\taction_id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}`;\n","import {\n\tAA_TOGGLE_DETAIL_VIEW,\n\tAA_LIST_ITEM_REFOCUS\n} from '../../sn-aa-details-container/actions';\nimport {\n\tbaseLinkFromRootDir,\n\tselectResultItemByIndex\n} from '../../util/agentAssistUtils';\nimport { AA_UPDATE_REL_DOC } from '../../sn-aa-action-modal';\n\nconst resultItem = (index, recommendation, searchState) => {\n\tif (index < 0) {\n\t\treturn recommendation.item;\n\t} // Recommendation record\n\n\tvar virtualIndex = index;\n\tif (searchState.offset) {\n\t\tvirtualIndex = virtualIndex - searchState.offset;\n\t}\n\n\tif (virtualIndex < 0 || virtualIndex >= searchState.returnedResults) {\n\t\treturn null;\n\t}\n\n\treturn searchState.searchResults[virtualIndex];\n};\n\nconst toggleViewEffect = ({ state, action, dispatch, updateState }) => {\n\tconst index = action.payload.itemIndex;\n\tif (action.payload.showDetail === true) {\n\t\tconst item = resultItem(index, state.recommendation, state.searchState);\n\t\tconst linkToOpen = baseLinkFromRootDir(item.link);\n\t\tif (item && item.linkTarget === '_blank' && linkToOpen) {\n\t\t\twindow.open(linkToOpen, '_blank');\n\t\t} else {\n\t\t\tupdateState({\n\t\t\t\tdetailViewState: {\n\t\t\t\t\tshowDetail: true,\n\t\t\t\t\tselectedItem: item,\n\t\t\t\t\tselectedIndex: index\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tdispatch(AA_UPDATE_REL_DOC, {\n\t\t\titemData: item,\n\t\t\titemIndex: index,\n\t\t\tactionValue: 'Preview',\n\t\t\tremove: false\n\t\t});\n\t} else {\n\t\tupdateState({\n\t\t\t...state,\n\t\t\tdetailViewState: {\n\t\t\t\t...state.detailViewState,\n\t\t\t\tshowDetail: false,\n\t\t\t\tselectedItem: null,\n\t\t\t\tselectedIndex: index\n\t\t\t}\n\t\t});\n\t\tsetTimeout(() => {\n\t\t\tdispatch(AA_LIST_ITEM_REFOCUS, { index });\n\t\t}, 300);\n\t}\n};\n\nexport const toggleViewActionHandlers = {\n\t[AA_TOGGLE_DETAIL_VIEW]: toggleViewEffect,\n\t[AA_LIST_ITEM_REFOCUS]: ({ host, action: { payload } }) => {\n\t\tconst { index } = payload;\n\t\tconst article = selectResultItemByIndex(host, index) || host;\n\t\tarticle.focus();\n\t}\n};\n","import {\n\tAA_FOOTER_PREV_CLICKED,\n\tAA_FOOTER_NEXT_CLICKED\n} from '../../searchResultsContainer/sn-aa-results-footer/actions';\n\nimport {\n\tAA_PAGE_CHANGE_SEARCH\n} from '../actions';\n\nconst showFooterPrevClicked = ({ dispatch }) => {\n\tdispatch(AA_PAGE_CHANGE_SEARCH, { direction : -1});\n};\n\nconst showFooterNextClicked = ({ dispatch }) => {\n\tdispatch(AA_PAGE_CHANGE_SEARCH, { direction : 1});\n};\n\nexport const resultsContainerHandlers = {\n\t[AA_FOOTER_PREV_CLICKED]: showFooterPrevClicked,\n\t[AA_FOOTER_NEXT_CLICKED]: showFooterNextClicked\n}; ","\n        var result = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/src/index.js??ref--6-2!../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(now-agent-assist){display:flex;height:100%}.aa-panel{height:100%;overflow-x:hidden;overflow-y:auto;width:100%}.aa-panel,.aa-panel-body-container{display:flex;flex:1 1 auto;flex-direction:column;position:relative}.aa-panel-body-container{min-height:12rem;overflow:hidden;padding:0}.aa-empty-state{align-items:center;display:flex;flex-direction:column;justify-content:center;margin-bottom:1rem;margin-top:4vh;position:relative}\", \"\"]);\n\n// exports\n","import get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport pick from 'lodash/pick';\nimport isObject from 'lodash/isObject';\nimport '../searchResultsContainer/sn-aa-no-results';\nimport '../sn-aa-headerbar';\nimport '../searchResultsContainer/sn-aa-results-container';\nimport '../searchResultsContainer/sn-aa-results-footer';\nimport '../searchControlsContainer/sn-aa-search-controls-container';\nimport '../sn-aa-details-container';\nimport { t } from 'sn-translate';\nimport '../sn-aa-action-modal';\n//eslint-disable-next-line no-unused-vars\nimport { Fragment } from '@servicenow/ui-renderer-snabbdom';\nimport '@servicenow/now-empty-state';\n\nimport {\n\tAA_FORM_SEARCH_FIELD_CHANGED,\n\tAA_FORM_SEARCH_AS_FIELD_CHANGED\n} from './actionHandlers/searchActionHandlers';\nimport {\n\tisEmptySearchTermAllowed,\n\tisRecommendation,\n\tisUibClassDecorator\n} from '../util/agentAssistUtils';\n\nconst getListViewContent = (\n\tformRecordInfo,\n\tactionProps,\n\tpageProps,\n\tstate,\n\terror\n) => {\n\tconst {\n\t\tsearchState,\n\t\trecommendation,\n\t\tconfigs,\n\t\tbehaviors,\n\t\tinstanceId,\n\t\tformTimeStamp,\n\t\tproperties: { isUib }\n\t} = state;\n\tconst searchResourceResults = searchState.searchResults;\n\tconst showNoResults =\n\t\t(state.searchState.sourceField !== 'additional_search' &&\n\t\t\t!state.searchState.currentSearchTerm &&\n\t\t\t!isEmptySearchTermAllowed(state)) ||\n\t\t((!searchResourceResults || searchResourceResults.length === 0) &&\n\t\t\t(!recommendation.show || !recommendation.item));\n\tconst noResources =\n\t\t(!configs.searcherResourceNames ||\n\t\t\tconfigs.searcherResourceNames.length === 0) &&\n\t\t(!configs.additionalResNames ||\n\t\t\tconfigs.additionalResNames.length === 0);\n\n\tif (!isEmpty(error)) {\n\t\treturn (\n\t\t\t<div className=\"aa-panel-body-container\">\n\t\t\t\t<section className=\"aa-empty-state\" aria-live=\"polite\">\n\t\t\t\t\t<article hidden>\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'An error occured from Agent Assist, please try again'\n\t\t\t\t\t\t)}\n\t\t\t\t\t</article>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (searchState.isSearching || configs.loading) {\n\t\t// DEF0120472: When it's the initial search and there is no search term available, then we don't show aria-live in DOM.\n\t\treturn (\n\t\t\t<div className=\"aa-panel-body-container\">\n\t\t\t\t{state.searchState.isInitialSearch &&\n\t\t\t\t!state.searchState.currentSearchTerm ? (\n\t\t\t\t\t<section className=\"aa-empty-state\">\n\t\t\t\t\t\t<now-empty-state\n\t\t\t\t\t\t\ttype=\"loading\"\n\t\t\t\t\t\t\theaderText={t('Loading')}\n\t\t\t\t\t\t\tbodyText={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</section>\n\t\t\t\t) : (\n\t\t\t\t\t<section className=\"aa-empty-state\" aria-live=\"polite\">\n\t\t\t\t\t\t<now-empty-state\n\t\t\t\t\t\t\ttype=\"loading\"\n\t\t\t\t\t\t\theaderText={t('Loading')}\n\t\t\t\t\t\t\tbodyText={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</section>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (showNoResults) {\n\t\t// DEF0120472: When it's the initial search and there is no search term available, then we don't show aria-live in DOM.\n\t\treturn (\n\t\t\t<div className=\"aa-panel-body-container\">\n\t\t\t\t{state.searchState.isInitialSearch &&\n\t\t\t\t!state.searchState.currentSearchTerm ? (\n\t\t\t\t\t<section className=\"aa-empty-state\">\n\t\t\t\t\t\t<sn-aa-no-results\n\t\t\t\t\t\t\tno-resources={noResources}\n\t\t\t\t\t\t\tcxs-table-config-active={configs.active}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</section>\n\t\t\t\t) : (\n\t\t\t\t\t<section className=\"aa-empty-state\">\n\t\t\t\t\t\t<sn-aa-no-results\n\t\t\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t\t\tno-resources={noResources}\n\t\t\t\t\t\t\tcxs-table-config-active={configs.active}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</section>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// FIXME : This should never be the case but it is now.\n\tif (searchState.offset === undefined) {\n\t\tsearchState.offset = 0;\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<sn-aa-results-container\n\t\t\t\tkey=\"search-results-container\"\n\t\t\t\tbehaviors={behaviors}\n\t\t\t\tagentAssistInstanceId={instanceId}\n\t\t\t\tform-record-info={formRecordInfo}\n\t\t\t\tdata={searchResourceResults}\n\t\t\t\t{...actionProps}\n\t\t\t\toffset={searchState.offset}\n\t\t\t\trecommendation={recommendation}\n\t\t\t\tformTimeStamp={formTimeStamp}\n\t\t\t\tis-uib={isUib}\n\t\t\t/>\n\t\t\t{!pageProps.showPrev && !pageProps.showNext ? null : (\n\t\t\t\t<sn-aa-results-footer\n\t\t\t\t\tkey=\"search-results-footer\"\n\t\t\t\t\t{...pageProps}\n\t\t\t\t\tis-uib={isUib}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n};\n\nconst view = (state, dispatch) => {\n\tconst {\n\t\tproperties: { table, sysId, isNewRecord, fields, isUib },\n\t\tconfigs,\n\t\tinstanceId,\n\t\tsearchState,\n\t\tsearchAsState,\n\t\tresourceSelectorState,\n\t\tactionStates,\n\t\tcomponentId,\n\t\tmodalState,\n\t\tcurrentFields,\n\t\tdetailViewState: { selectedIndex, selectedItem, showDetail },\n\t\tformTimeStamp\n\t} = state;\n\n\tconst configuredSearchFields = configs.searchFields;\n\n\t// Dispatch page change search if the value of one of the configured search fields changes on the form.\n\tif (\n\t\t!isEmpty(configuredSearchFields) &&\n\t\t!isEmpty(currentFields) &&\n\t\t!isEmpty(fields) &&\n\t\tisObject(fields)\n\t) {\n\t\tvar foundChangedField = false;\n\t\tconfiguredSearchFields.forEach(f => {\n\t\t\tif (!(f.field in fields) || foundChangedField) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst oldValue = currentFields[f.field].displayValue;\n\t\t\tconst newValue = fields[f.field].displayValue;\n\t\t\tif (oldValue !== newValue) {\n\t\t\t\tfoundChangedField = true;\n\t\t\t\tdispatch(AA_FORM_SEARCH_FIELD_CHANGED, {\n\t\t\t\t\tformSearchField: f.field,\n\t\t\t\t\tformSearchTerm: newValue,\n\t\t\t\t\tnewFields: fields\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tconst formRecordInfo = {\n\t\tcurrentTable: table,\n\t\tcurrentId: sysId,\n\t\tcurrentFields: fields\n\t};\n\tconst formAction = isNewRecord ? 'insert' : 'update';\n\t// const returnedResults = this.getResultCount(this.props);\n\tconst returnedResults = searchState.returnedResults;\n\t// const hasMoreResults = this.getHasMoreResults(this.props);\n\tconst hasMoreResults = searchState.hasMoreResults;\n\t// pagination and carousel\n\t// offset: this is the index of the first result in current page without connsidering pinned articles.\n\tconst offset = searchState.offset;\n\tconst maxLimit = configs.maxLimit;\n\n\t// Get the amount of pinned articles for current page so that we can remove it from returnedResults when calculating pageProps\n\tconst amountOfPinnedArticles = searchState.amountOfPinnedArticles;\n\n\t// We should exclude the amount of pinned articles from total number of results returned for current page when calculating page index.\n\tconst pageProps = {\n\t\tshowPrev: offset > 0,\n\t\tshowNext:\n\t\t\thasMoreResults &&\n\t\t\toffset + returnedResults - amountOfPinnedArticles < maxLimit\n\t};\n\n\t/*\n\t\tThe corner case is that: 'selectedIndex' will consider pinned articles at first page only (because pinned articles are only shown in first page), however, both 'offset' and 'maxLimit' are not considering pinned articles.\n\t  \t'returnedResults' includes pinned articles for first page as well.\n\t  \tSo we need to remove the amount of pinned articles from 'selectedIndex' for the first page when comparing with 'maxLimit'.\n\t*/\n\tconst selectedIndexIgnorePinned = selectedIndex - amountOfPinnedArticles;\n\tconst carouselProps = {\n\t\tallowResultPreviewButtons: configs.allowResultPreviewButtons,\n\t\tshowPrev: selectedIndex > 0,\n\t\tshowNext:\n\t\t\tselectedIndex !== -1 &&\n\t\t\t(hasMoreResults || selectedIndex < offset + returnedResults - 1) &&\n\t\t\tselectedIndexIgnorePinned < maxLimit - 1\n\t};\n\n\tconst agentAssistName = get(configs, 'resultsHeaderTextDisplay', '');\n\n\t// If search as get configured, then we should take care of searchAsState\n\tconst configSearchAs = get(configs, 'searchAs', {});\n\tif (!isEmpty(configSearchAs) && configSearchAs.active) {\n\t\t// If search as reference field get changed, we need to update searchAsState\n\t\tconst searchAsFieldValue = configSearchAs.field;\n\t\tconst searchAsUserSysId = get(searchAsState, 'user.value', '');\n\t\tconst newSearchAsUserValue = get(\n\t\t\tfields,\n\t\t\t`${searchAsFieldValue}.value`,\n\t\t\t''\n\t\t);\n\t\tconst newSearchAsUserDisplayalue = get(\n\t\t\tfields,\n\t\t\t`${searchAsFieldValue}.displayValue`,\n\t\t\t''\n\t\t);\n\t\tif (newSearchAsUserValue !== searchAsUserSysId) {\n\t\t\tdispatch(AA_FORM_SEARCH_AS_FIELD_CHANGED, {\n\t\t\t\tnewUserDisplayValue: newSearchAsUserDisplayalue,\n\t\t\t\tnewUserSysId: newSearchAsUserValue\n\t\t\t});\n\t\t}\n\t}\n\n\tconst searchAsProps = {\n\t\tconfig: configs.searchAs,\n\t\t...searchAsState\n\t};\n\tconst filter = pick(configs, [\n\t\t'additionalResNames',\n\t\t'defaultSource',\n\t\t'searcherLabel',\n\t\t'searcherResourceNames',\n\t\t'showSearcherFirst'\n\t]);\n\tconst searchControlsContainerTag = (\n\t\t<sn-aa-search-controls-container\n\t\t\tagentAssistInstanceId={instanceId}\n\t\t\tisLoading={searchState.isSearching || configs.loading}\n\t\t\tfilter={filter}\n\t\t\tsearchAs={searchAsProps}\n\t\t\taction={formAction}\n\t\t\tsysId={sysId}\n\t\t\ttableName={table}\n\t\t\t{...pageProps}\n\t\t\t{...searchState}\n\t\t\tresourceSelectorState={resourceSelectorState}\n\t\t\tis-uib={isUib}\n\t\t/>\n\t);\n\tconst actions = {\n\t\t...configs.searcherResActions,\n\t\t...configs.additionalResActions\n\t};\n\n\tconst actionProps = {\n\t\tactions: actions,\n\t\tactionStates: actionStates,\n\t\tisNewRecord: isNewRecord || false\n\t};\n\tconst innerContent = !showDetail ? (\n\t\t<Fragment>\n\t\t\t<sn-aa-headerbar header-text={agentAssistName} is-uib={isUib} />\n\t\t\t<div className=\"aa-panel-body-container\">\n\t\t\t\t{searchControlsContainerTag}\n\t\t\t\t{getListViewContent(\n\t\t\t\t\tformRecordInfo,\n\t\t\t\t\tactionProps,\n\t\t\t\t\tpageProps,\n\t\t\t\t\tstate,\n\t\t\t\t\tconfigs.error || searchState.error || null\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</Fragment>\n\t) : (\n\t\t<sn-aa-details-container\n\t\t\tparentId={componentId}\n\t\t\tform-record-info={formRecordInfo}\n\t\t\titem={selectedItem}\n\t\t\titemIndex={selectedIndex}\n\t\t\toffset={offset}\n\t\t\t{...actionProps}\n\t\t\t{...carouselProps}\n\t\t\tform-time-stamp={formTimeStamp}\n\t\t\tisRecommendation={isRecommendation(selectedItem)}\n\t\t\tis-uib={isUib}\n\t\t/>\n\t);\n\treturn (\n\t\t<Fragment>\n\t\t\t<div className={isUibClassDecorator(isUib, 'aa-panel')}>\n\t\t\t\t{innerContent}\n\t\t\t</div>\n\t\t\t{!get(modalState, 'active', false) ? null : (\n\t\t\t\t<sn-aa-action-modal\n\t\t\t\t\tshow={get(modalState, 'active', false)}\n\t\t\t\t\tactionId={get(modalState, 'activeModal', '')}\n\t\t\t\t\tmodalState={modalState}\n\t\t\t\t\t{...formRecordInfo}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n};\n\nexport default view;\n","export { default } from './sn-aa-no-results';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport { view } from './view';\nimport styles from './styles.scss';\n\ncreateCustomElement('sn-aa-no-results', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties: {\n\t\tnoResources: { default: '' },\n\t\tcxsTableConfigActive: { default: false }\n\t},\n\tstyles: styles\n});\n","import { t } from 'sn-translate';\nimport '@servicenow/now-empty-state';\n\nexport const view = state => {\n\tconst {\n\t\tproperties: { noResources, cxsTableConfigActive }\n\t} = state;\n\tlet emptyStateHeaderText = '';\n\tlet emptyStateBodyText = '';\n\tlet iconType = '';\n\tif (!cxsTableConfigActive) {\n\t\ticonType = 'permission-error';\n\t\temptyStateHeaderText = t('Invalid configuration');\n\t\temptyStateBodyText = t('Table configuration is inactive.');\n\t} else {\n\t\tif (noResources) {\n\t\t\ticonType = 'no-resources';\n\t\t\temptyStateHeaderText = t('No Resource Found');\n\t\t\temptyStateBodyText = t(\n\t\t\t\t'Please configure search resource for this context.'\n\t\t\t);\n\t\t} else {\n\t\t\ticonType = 'empty';\n\t\t\temptyStateHeaderText = t('No Matches Found');\n\t\t\temptyStateBodyText = t(\n\t\t\t\t'Try modifying your search text or filter to find what youre looking for.'\n\t\t\t);\n\t\t}\n\t}\n\n\treturn (\n\t\t<now-empty-state\n\t\t\ttype={iconType}\n\t\t\theaderText={emptyStateHeaderText}\n\t\t\tbodyText={emptyStateBodyText}\n\t\t/>\n\t);\n};\n","\n        var result = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}\", \"\"]);\n\n// exports\n","export { default } from './sn-aa-headerbar';\n\n\n","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport view from './view';\nimport styles from './styles.scss';\n\ncreateCustomElement('sn-aa-headerbar', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties: {\n\t\tisUib: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t},\n\t\theaderText: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t}\n\t},\n\tstyles: styles\n});\n","const view = state => {\n\tconst {\n\t\tproperties: { headerText, isUib }\n\t} = state;\n\n\tconst containerClass = 'aa-panel-header' + (isUib ? ' is-uib' : '');\n\treturn (\n\t\t<div className={containerClass}>\n\t\t\t<h2 className=\"aa-panel-header-title\">{headerText}</h2>\n\t\t</div>\n\t);\n};\n\nexport default view;\n","\n        var result = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/src/index.js??ref--6-2!../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-headerbar){display:flex;flex:0 0 auto;flex-direction:column;position:relative}.aa-panel-header{padding:1.5rem 1.5rem 0;position:relative}.aa-panel-header-title{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:inline-block;color:RGB(var(--now-color_text--secondary,var(--now-color--neutral-12,66,80,81)));font-size:1.5rem;font-weight:400;margin:0 0 1rem;position:relative;width:100%}\", \"\"]);\n\n// exports\n","export { default } from './sn-aa-results-container';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\n\nimport styles from './styles.scss';\nimport { view } from './view';\n\ncreateCustomElement('sn-aa-results-container', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties: {\n\t\tkey: { default: '' },\n\t\tbehaviors: { default: '' },\n\t\tagentAssistInstanceId: { default: '' },\n\t\tformRecordInfo: { default: '' },\n\t\tdata: { default: '' },\n\t\tactions: { default: '' },\n\t\tactionStates: { default: '' },\n\t\tisNewRecord: { default: '' },\n\t\toffset: { default: '' },\n\t\trecommendation: { default: '' },\n\t\tformTimeStamp: { default: Date.now() },\n\t\tisUib: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tstyles\n});\n","\n        var result = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-results-container),:host(sn-aa-results-container)>div{display:flex;flex:1 1 auto;overflow:hidden;position:relative;width:100%}:host(sn-aa-results-container)>div{outline:none}\", \"\"]);\n\n// exports\n","import '../sn-aa-results-list';\n\nexport const view = state => {\n\tconst {\n\t\tbehaviors,\n\t\tformRecordInfo,\n\t\tdata,\n\t\toffset,\n\t\tactions,\n\t\tactionStates,\n\t\tisNewRecord,\n\t\trecommendation,\n\t\tformTimeStamp,\n\t\tisUib\n\t} = state.properties;\n\n\treturn (\n\t\t<div tabIndex=\"-1\">\n\t\t\t<sn-aa-results-list\n\t\t\t\tbehaviors={behaviors}\n\t\t\t\tform-record-info={formRecordInfo}\n\t\t\t\tdata={data}\n\t\t\t\toffset={offset}\n\t\t\t\tactions={actions}\n\t\t\t\taction-states={actionStates}\n\t\t\t\tis-new-record={isNewRecord}\n\t\t\t\trecommendation={recommendation}\n\t\t\t\tformTimeStamp={formTimeStamp}\n\t\t\t\tis-uib={isUib}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","export { default } from './sn-aa-results-list';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\n\nimport styles from './styles.scss';\nimport { view } from './view';\n\ncreateCustomElement('sn-aa-results-list', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties: {\n\t\tdata: { default: '' },\n\t\tbehaviors: { default: '' },\n\t\tsource: { default: '' },\n\t\tformRecordInfo: { default: '' },\n\t\tisNewRecord: { default: '' },\n\t\tactions: { default: '' },\n\t\toffset: { default: '' },\n\t\tactionStates: { default: '' },\n\t\trecommendation: { default: '' },\n\t\tformTimeStamp: { default: Date.now() },\n\t\tisUib: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tstyles\n});\n","\n        var result = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-results-list){outline:none;overflow:auto;position:relative;width:100%}.aa-card-list{display:flex;flex-wrap:wrap;flex:1 1 auto;list-style:none;margin:0;padding:0 1rem 1.5rem 1.5rem;position:relative;width:100%}.aa-card-list .aa-filler,.aa-card-list sn-aa-recommendation-record,.aa-card-list sn-aa-result-list-item{display:block;flex:1 0 16rem;min-width:16rem;max-width:100%;padding-right:.5rem;position:relative;width:100%}.aa-card-list .aa-filler:before,.aa-card-list sn-aa-recommendation-record:before,.aa-card-list sn-aa-result-list-item:before{content:\\\"\\\";height:0;visibility:hidden;width:760px}.aa-card-list sn-aa-recommendation-record,.aa-card-list sn-aa-result-list-item{padding-bottom:.5rem}.aa-card-list sn-aa-recommendation-record{flex:1 1 100%;min-width:100%}.aa-card-list .aa-filler{height:1px;margin-top:-1px;overflow:hidden;pointer-events:none}\", \"\"]);\n\n// exports\n","// eslint-disable-next-line no-unused-vars\nimport { Fragment } from '@servicenow/ui-renderer-snabbdom';\nimport '../resultListItem/sn-aa-recommendation-record';\nimport '../resultListItem/sn-aa-result-list-item';\nimport { RECOMMENDATION_DEFAULT_ID } from '../resultListItem/sn-aa-recommendation-record/view';\nimport {\n\tgenerateUniqueKey,\n\tgetItemActionsMap,\n\tisUibClassDecorator\n} from '../../util/agentAssistUtils';\n\nconst recommendationItem = (\n\trecommendation,\n\tactionStates,\n\tformRecordInfo,\n\tformTimeStamp,\n\tisUib\n) => {\n\tif (!recommendation || !recommendation.show || !recommendation.item)\n\t\t{return null;}\n\tconst recommendationObj = recommendation.item;\n\tconst itemActionStates = actionStates[recommendationObj.id];\n\tconst { source } = recommendationObj.meta;\n\tconst actions = getItemActionsMap(recommendationObj);\n\n\treturn (\n\t\t<sn-aa-recommendation-record\n\t\t\tkey={\n\t\t\t\trecommendationObj.id != RECOMMENDATION_DEFAULT_ID\n\t\t\t\t\t? 'recommendation:' + recommendationObj.id\n\t\t\t\t\t: generateUniqueKey('recommendation:')\n\t\t\t}\n\t\t\tform-record-info={formRecordInfo}\n\t\t\tdata={recommendationObj}\n\t\t\tsource={source}\n\t\t\titem-index={-1}\n\t\t\tactions={actions}\n\t\t\taction-states={itemActionStates}\n\t\t\tis-new-record={false}\n\t\t\trecommendation={recommendation}\n\t\t\tformTimeStamp={formTimeStamp}\n\t\t\tis-uib={isUib}\n\t\t/>\n\t);\n};\n\nconst searchResultList = (\n\tdata,\n\tbehaviors,\n\tformRecordInfo,\n\toffset,\n\tactionStates,\n\tactions,\n\tisNewRecord,\n\tformTimeStamp,\n\tisUib\n) => {\n\t// Results/data is undefined when we're showing just the recommendation result\n\tif (data) {\n\t\tconst fullList = data.map((item, idx) => {\n\t\t\tidx = idx + offset;\n\t\t\tconst itemActionStates = actionStates[item.id];\n\t\t\tconst { source } = item.meta;\n\t\t\tconst itemActions = getItemActionsMap(item, actions).headerActions;\n\n\t\t\treturn (\n\t\t\t\t<sn-aa-result-list-item\n\t\t\t\t\tbehaviors={behaviors}\n\t\t\t\t\tkey={item.id}\n\t\t\t\t\tdata={item}\n\t\t\t\t\tsource={source}\n\t\t\t\t\tform-record-info={formRecordInfo}\n\t\t\t\t\titem-index={idx}\n\t\t\t\t\tactions={itemActions}\n\t\t\t\t\taction-states={itemActionStates}\n\t\t\t\t\tis-new-record={isNewRecord}\n\t\t\t\t\tformTimeStamp={formTimeStamp}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\n\t\tconst fillGrid = () => {\n\t\t\tconst totalItems = data.length;\n\t\t\tif (totalItems === 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst baseGrid = 12;\n\t\t\tconst maxGrid = 6;\n\t\t\tconst idealGridSize = Math.ceil(totalItems / baseGrid) * baseGrid;\n\n\t\t\treturn Array((idealGridSize % totalItems) + maxGrid).fill(\n\t\t\t\t<div className=\"aa-filler\">.</div>\n\t\t\t);\n\t\t};\n\n\t\treturn (\n\t\t\t<section\n\t\t\t\tclassName={isUibClassDecorator(isUib, 'aa-card-list')}\n\t\t\t\taria-live=\"polite\"\n\t\t\t>\n\t\t\t\t{fullList}\n\t\t\t\t{fillGrid()}\n\t\t\t</section>\n\t\t);\n\t}\n};\n\nexport const view = state => {\n\tconst {\n\t\tdata,\n\t\tbehaviors,\n\t\tformRecordInfo,\n\t\tisNewRecord,\n\t\tactions,\n\t\toffset,\n\t\tactionStates,\n\t\trecommendation,\n\t\tformTimeStamp,\n\t\tisUib\n\t} = state.properties;\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{recommendationItem(\n\t\t\t\trecommendation,\n\t\t\t\tactionStates,\n\t\t\t\tformRecordInfo,\n\t\t\t\tformTimeStamp,\n\t\t\t\tisUib\n\t\t\t)}\n\t\t\t{searchResultList(\n\t\t\t\tdata,\n\t\t\t\tbehaviors,\n\t\t\t\tformRecordInfo,\n\t\t\t\toffset,\n\t\t\t\tactionStates,\n\t\t\t\tactions,\n\t\t\t\tisNewRecord,\n\t\t\t\tformTimeStamp,\n\t\t\t\tisUib\n\t\t\t)}\n\t\t</Fragment>\n\t);\n};\n","export { default } from './sn-aa-recommendation-record';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport styles from './styles.scss';\nimport { view } from './view';\n\ncreateCustomElement('sn-aa-recommendation-record', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties: {\n\t\tdata: { default: '' },\n\t\titemIndex: { default: '' },\n\t\tformRecordInfo: { default: '' },\n\t\tactions: { default: '' },\n\t\tactionStates: { default: '' },\n\t\tisNewRecord: { default: '' },\n\t\tsource: { default: '' },\n\t\tformTimeStamp: { default: Date.now() },\n\t\tisUib: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tstyles\n});\n","\n        var result = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host{width:100%}.aa-recommendation{background:RGBA(var(--now-color_alert--info-0,195,221,240),.5);display:block;flex:0 0 auto;margin-bottom:1rem;padding:1rem 1.5rem;width:100%}.aa-recommendation-header{display:flex;margin:0;position:relative;width:100%}.aa-recommendation-header-content{align-items:center;color:RGB(var(--now-color_text--secondary,var(--now-color--neutral-12,66,80,81)));display:flex;flex:1 1 auto;font-size:1rem;overflow:hidden;padding-right:1rem;position:relative}.aa-recommendation-header-content:last-of-type{padding-right:0}.aa-recommendation-header-content.-static{flex:0 0 auto}.aa-recommendation-header-content>now-icon{display:flex;justify-content:center;margin-right:.5rem}.aa-recommendation-header-title{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block;font-weight:400;position:relative}.aa-recommendation-body{color:RGB(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)));font-size:1rem;margin-bottom:.25rem;margin-top:1rem;position:relative;width:100%}.aa-recommendation sn-aa-action-footer{margin-top:.5rem;width:100%}\", \"\"]);\n\n// exports\n","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\n\nimport styles from './styles.scss';\nimport {view} from './view';\nimport {AA_RESULT_ONCLICK, AA_RESULT_ONKEYPRESS} from './actions';\nimport { AA_TOGGLE_DETAIL_VIEW } from '../../../sn-aa-details-container/actions';\n\ncreateCustomElement('sn-aa-result-list-item',{\n\trenderer : {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties : {\n\t\tdata : {default : ''},\n\t\tsource : {default : ''},\n\t\tactions : {default : ''},\n\t\tactionStates : {default : ''},\n\t\tbehaviors : {default : ''},\n\t\tisNewRecord : {default : ''},\n\t\titemIndex : {default : ''},\n\t\tformRecordInfo : {default : ''},\n\t\tformTimeStamp : {default : Date.now()}\n\t},\n\tinitialState : {\n\t\tshowItem : true\n\t},\n\tstyles,\n\tactionHandlers : {\n\t\t[AA_RESULT_ONCLICK] : {\n\t\t\teffect({action, dispatch}) {\n\t\t\t\tdispatch(AA_TOGGLE_DETAIL_VIEW, {showDetail : action.payload.showDetail, itemIndex : action.payload.itemIndex});\n\t\t\t\taction.stopPropagation();\n\t\t\t}\n\t\t},\n\t\t[AA_RESULT_ONKEYPRESS] : {\n\t\t\teffect({action, dispatch}) {\n\t\t\t\tif(action.payload.event.key === ' ' || action.payload.event.key === 'Enter')\n\t\t\t\t\tdispatch(AA_TOGGLE_DETAIL_VIEW, {showDetail : action.payload.showDetail, itemIndex : action.payload.itemIndex});\n\t\t\t\taction.stopPropagation();\n\t\t\t}\n\t\t}\n\t}\n});","\n        var result = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-result-list-item){display:block;position:relative}.aa-card{border-radius:.125rem;border:1px solid;border-color:RGB(var(--now-color_border--tertiary,var(--now-color--neutral-3,209,214,214)));cursor:pointer;display:flex;flex:0 0 auto;flex-direction:column;height:100%;padding:1rem;position:relative;text-decoration:none;width:100%}.aa-card::-moz-focus-inner{border-style:none}.aa-card:focus{box-shadow:inset 0 0 0 2px RGB(var(--now-color_focus-ring,var(--now-color--secondary-1,1,119,142))),inset 0 0 0 3px RGB(var(--now-color_focus-ring_shadow,var(--now-color--neutral-0,255,255,255))),0 1px .125rem 0 RGBA(var(--now-color--neutral-21,0,0,0),.25);outline:none}.aa-card.is-hover,.aa-card:hover{background:RGBA(var(--now-color_selection--primary-0,221,237,233),.5)}.aa-card sn-aa-article-body,.aa-card sn-aa-article-footer,.aa-card sn-aa-article-header{display:flex;flex:0 0 auto;flex-wrap:wrap;width:100%}\", \"\"]);\n\n// exports\n","import get from 'lodash/get';\n\nimport { AA_RESULT_ONCLICK, AA_RESULT_ONKEYPRESS } from './actions';\nimport {processMetaAdditionalFields} from '../../../util/agentAssistUtils';\nimport {CARD_VIEW_META_FIELD_LIMIT} from '../../../consts';\n\nimport '../sn-aa-article-header';\nimport '../sn-aa-article-body';\nimport '../sn-aa-article-footer';\n\nconst cardHeader = (data, source, actions, isNewRecord, actionStates, itemIndex, formRecordInfo, formTimeStamp) => {\n\treturn (\n\t\t<sn-aa-article-header\n\t\t\tparent-key={data.id}\n\t\t\tkey={data.id + '_header'}\n\t\t\tsource={source}\n\t\t\tform-record-info={formRecordInfo}\n\t\t\tactions={actions}\n\t\t\tdata={data}\n\t\t\tis-new-record={isNewRecord}\n\t\t\taction-states={actionStates}\n\t\t\titem-index={itemIndex}\n\t\t\tis-recommendation={false}\n\t\t\tformTimeStamp={formTimeStamp}\n\t\t/>\n\t);\n};\n\nconst cardBody = (data, isCommunity, bodyAdditionalFields) => {\n\treturn (\n\t\t<sn-aa-article-body\n\t\t\tkey={data.id + '_body'}\n\t\t\tis-community={isCommunity}\n\t\t\tdata={data}\n\t\t\tbody-additional-fields={bodyAdditionalFields}\n\t\t/>\n\t);\n};\n\nconst cardFooter = (data, isCommunity, source, behaviors, footerAdditionalFields) => {\n\tconst showFooter = get(data, 'meta.card_show_footer', false);\n\tif (!isCommunity && !showFooter)\n\t\treturn null;\n\n\treturn (\n\t\t<sn-aa-article-footer\n\t\t\tkey={data.id + '_footer'}\n\t\t\tbehaviors = {behaviors}\n\t\t\tsource-id={data.id}\n\t\t\tsource={source}\n\t\t\tmeta={data.meta}\n\t\t\tfooter-additional-fields={footerAdditionalFields}\n\t\t/>\n\t);\n};\n\nconst cardOnclick = (event, dispatch, itemIndex, actionName) => {\n\t// This is to determine whether the click event comes from action dropdown menu button or not\n\t// If so, we don't open detail view\n\tif (event.composedPath().some(elem => {\n\t\treturn elem.tagName === 'DIV' && elem.classList.contains('aa-action-header');\n\t}))\n\t\treturn;\n\n\tdispatch(actionName, {event : event, showDetail : true, itemIndex : itemIndex});\n};\n\nexport const view = (state, dispatch) => {\n\tconst {showItem} = state;\n\tconst {data, source, actions, behaviors, \n\t\tisNewRecord, actionStates, itemIndex, \n\t\t// bodyAdditionalFields, footerAdditionalFields, \n\t\tformRecordInfo, formTimeStamp} = state.properties;\n\tconst isCommunity = source === 'community_blog' || source === 'community_question' || source === 'community_answer';\n\tif (!showItem)\n\t\treturn null;\n\n\tconst additionalFieldsObj = processMetaAdditionalFields(data.meta.additional_fields, CARD_VIEW_META_FIELD_LIMIT);\n\treturn (\n\t\t<article className=\"aa-card\"\n\t\t\ton-keypress = {(e) => cardOnclick(e, dispatch, itemIndex, AA_RESULT_ONKEYPRESS)}\n\t\t\ton-click = {(e) => cardOnclick(e, dispatch, itemIndex, AA_RESULT_ONCLICK)}\n\t\t\ttabIndex=\"0\"\n\t\t\trole=\"link\">\n\t\t\t{ cardHeader(data,source, actions,isNewRecord, actionStates, itemIndex, formRecordInfo, formTimeStamp) }\n\t\t\t{ cardBody(data, isCommunity, additionalFieldsObj.bodyAdditionalFields) }\n\t\t\t{ cardFooter(data, isCommunity, source, behaviors, additionalFieldsObj.footerAdditionalFields) }\n\t\t</article>\n\t);\n};\n","export { default } from './sn-aa-article-header';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport styles from './styles.scss';\n\nimport {view} from './view.js';\n\ncreateCustomElement('sn-aa-article-header',{\n\trenderer : {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties : {\n\t\tparentKey : {default : ''},\n\t\tformRecordInfo: {default : ''},\n\t\tactionStates : {default : ''},\n\t\tdata : {default : ''},\n\t\tsource : {default : ''},\n\t\tactions : {default : ''},\n\t\tisNewRecord : {default : ''},\n\t\titemIndex : {default : ''},\n\t\tisRecommendation : {default : ''},\n\t\tformTimeStamp : {default : Date.now()}\n\t},\n\tstyles\n});","\n        var result = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-article-header){height:auto;margin:0 0 .5rem;position:relative;width:100%}.aa-action{overflow:hidden}.aa-card-header{display:flex;margin:0;position:relative;width:100%}.aa-card-header-content{align-items:center;color:RGB(var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)));display:flex;flex:1 1 auto;font-size:.75rem;overflow:visible;padding-right:.5rem;position:relative}.aa-card-header-content:last-of-type{flex:0 1 auto;overflow:hidden;padding-right:0}.aa-card-header-content>now-icon{display:flex;justify-content:center;margin-right:.25rem}.aa-card-header-title{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block;font-weight:400;position:relative}\", \"\"]);\n\n// exports\n","//eslint-disable-next-line no-unused-vars\nimport { Fragment } from '@servicenow/ui-renderer-snabbdom';\nimport isNil from 'lodash/isNil';\nimport isEmpty from 'lodash/isEmpty';\nimport { t } from 'sn-translate';\nimport { LIST_VIEW } from '../../../consts';\nimport '../../../sn-aa-action-header';\n\nconst COMMUNITY_CONFIG = {\n\tcommunity_blog: { edsIcon: 'quote-left-outline', title: t('Blog') },\n\tcommunity_question: {\n\t\tedsIcon: 'question-circle-outline',\n\t\ttitle: t('Discussion')\n\t},\n\tcommunity_answer: {\n\t\tedsIcon: 'question-circle-outline',\n\t\ttitle: t('Discussion')\n\t}\n};\n\nconst DEFAULT_CARD_ICON = 'document-outline';\n\nconst headerIcon = (isRecommendation, source, data) => {\n\tlet cardIcon = isRecommendation\n\t\t? 'circle-info-outline'\n\t\t: !isNil(data.meta.card_icon)\n\t\t? data.meta.card_icon\n\t\t: DEFAULT_CARD_ICON;\n\tif (source in COMMUNITY_CONFIG) {\n\t\tcardIcon = COMMUNITY_CONFIG[source].edsIcon;\n\t}\n\n\tif (isEmpty(cardIcon)) {\n\t\tcardIcon = DEFAULT_CARD_ICON;\n\t}\n\n\treturn <now-icon icon={cardIcon} size=\"md\" />;\n};\n\nconst getCardLabel = (data, source) => {\n\tlet cardLabel = '';\n\tif (source in COMMUNITY_CONFIG) {\n\t\tcardLabel = COMMUNITY_CONFIG[source].title;\n\t} else {\n\t\tcardLabel = !isNil(data.meta.card_label)\n\t\t\t? data.meta.card_label\n\t\t\t: !isNil(data.meta.table_name)\n\t\t\t? data.meta.table_name\n\t\t\t: t('Record');\n\t}\n\n\treturn cardLabel;\n};\n\nconst headerTitle = (data, parentKey, source) => {\n\tconst cardLabel = getCardLabel(data, source);\n\n\treturn (\n\t\t<span key={parentKey + '_div'} className=\"aa-card-header-title\">\n\t\t\t{cardLabel}\n\t\t</span>\n\t);\n};\n\nconst header = (isRecommendation, source, parentKey, data) => {\n\tif (!source) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{headerIcon(isRecommendation, source, data)}\n\t\t\t{headerTitle(data, parentKey, source)}\n\t\t</Fragment>\n\t);\n};\n\nexport const view = state => {\n\tconst {\n\t\tisRecommendation,\n\t\tparentKey,\n\t\tformRecordInfo,\n\t\tsource,\n\t\tdata,\n\t\titemIndex,\n\t\tisNewRecord,\n\t\tactions,\n\t\tactionStates,\n\t\tformTimeStamp\n\t} = state.properties;\n\n\tconst cardLabel = getCardLabel(data, source);\n\n\treturn (\n\t\t<h3\n\t\t\taria-label={cardLabel + ' ' + data.title}\n\t\t\tclassName={\n\t\t\t\t'aa-card-header ' +\n\t\t\t\t(isRecommendation ? 'is-recommendation' : '')\n\t\t\t}\n\t\t\tid={parentKey}\n\t\t>\n\t\t\t<div key={parentKey} className=\"aa-card-header-content\">\n\t\t\t\t{header(isRecommendation, source, parentKey, data)}\n\t\t\t</div>\n\t\t\t<div className=\"aa-card-header-content\">\n\t\t\t\t<sn-aa-action-header\n\t\t\t\t\tclassName=\"aa-action\"\n\t\t\t\t\tview={LIST_VIEW}\n\t\t\t\t\tformRecordInfo={formRecordInfo}\n\t\t\t\t\titem={data}\n\t\t\t\t\titemIndex={itemIndex}\n\t\t\t\t\tsource={source}\n\t\t\t\t\tactions={actions}\n\t\t\t\t\t{...actionStates}\n\t\t\t\t\tisNewRecord={isNewRecord}\n\t\t\t\t\tisRecommendation={isRecommendation}\n\t\t\t\t\tformTimeStamp={formTimeStamp}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</h3>\n\t);\n};\n","export { default } from './sn-aa-article-body';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport styles from './styles.scss';\nimport {view} from './view.js';\n\ncreateCustomElement('sn-aa-article-body',{\n\trenderer : {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties : {\n\t\tdata : {default : ''},\n\t\tisCommunity : {default : ''},\n\t\tbodyAdditionalFields : {default : ''}\n\t},\n\tstyles\n});","\n        var result = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-article-body){height:auto}.aa-card-body,.aa-card-body-title,:host(sn-aa-article-body){position:relative;width:100%}.aa-card-body-title{color:RGB(var(--now-color_text--secondary,var(--now-color--neutral-12,66,80,81)));font-size:1rem;margin-bottom:.5rem;font-weight:600}.aa-card-body-title:last-child{margin-bottom:0}.aa-card-body-title>span{white-space:nowrap;display:block}.aa-card-body-snippet,.aa-card-body-title>span{overflow:hidden;text-overflow:ellipsis;position:relative}.aa-card-body-snippet{color:RGB(var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)));font-size:.75rem;margin-bottom:.75rem;width:100%;height:2.5em}.aa-card-body-snippet:last-child{margin-bottom:0}.aa-card-body-meta-row{display:flex;flex-wrap:wrap;padding:.125rem 0;position:relative;width:100%;margin-bottom:.5rem}.aa-card-body-meta-row:last-child{margin-bottom:0}.aa-card-body-meta-row now-label-value-stacked{width:100%}\", \"\"]);\n\n// exports\n","// eslint-disable-next-line no-unused-vars\nimport { Fragment } from '@servicenow/ui-renderer-snabbdom';\nimport { sanitizeHTMLSnippet } from '../../../util/agentAssistUtils';\nimport { CARD_VIEW_META_FIELD_LIMIT_PER_LINE } from '../../../consts.js';\n\nconst titleRow = (isCommunity, data) => {\n\tconst title = isCommunity ? data.title : data.meta.card_title;\n\tif (!title) {return null;}\n\treturn (\n\t\t<div className=\"aa-card-body-title\">\n\t\t\t<span title={title}>{title}</span>\n\t\t</div>\n\t);\n};\n\nconst snippetRow = data => {\n\tconst snippet = data.meta.card_snippet;\n\tif (!snippet) {return null;}\n\n\treturn (\n\t\t<div className=\"aa-card-body-snippet\">\n\t\t\t<span>{sanitizeHTMLSnippet(snippet)}</span>\n\t\t</div>\n\t);\n};\n\nconst metaRows = (isCommunity, bodyAdditionalFields) => {\n\tif (\n\t\tisCommunity ||\n\t\t!bodyAdditionalFields ||\n\t\tbodyAdditionalFields.length === 0\n\t)\n\t\t{return null;}\n\n\tlet additionalFieldsArray = bodyAdditionalFields.map(field => ({\n\t\tlabel: field.fieldLabel,\n\t\tvalue: { type: 'string', value: field.fieldDisplayValue }\n\t}));\n\n\tlet metaFieldsNestedArray = [];\n\tfor (\n\t\tlet i = 0;\n\t\ti < additionalFieldsArray.length;\n\t\ti += CARD_VIEW_META_FIELD_LIMIT_PER_LINE\n\t) {\n\t\tlet items = [];\n\t\tfor (let j = 0; j < CARD_VIEW_META_FIELD_LIMIT_PER_LINE; j++) {\n\t\t\tif (i + j < additionalFieldsArray.length)\n\t\t\t\t{items.push(additionalFieldsArray[i + j]);}\n\t\t\telse if (i > 0)\n\t\t\t\t{items.push({\n\t\t\t\t\tlabel: '',\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tvalue: ''\n\t\t\t\t\t}\n\t\t\t\t});}\n\t\t}\n\t\tmetaFieldsNestedArray.push(items);\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{metaFieldsNestedArray.map((items, idx) => (\n\t\t\t\t<div className=\"aa-card-body-meta-row\" key={idx}>\n\t\t\t\t\t<now-label-value-stacked\n\t\t\t\t\t\titems={items}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\ttruncated\n\t\t\t\t\t\talign=\"horizontal-equal\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</Fragment>\n\t);\n};\n\nexport const view = state => {\n\tlet { isCommunity, data, bodyAdditionalFields } = state.properties;\n\treturn (\n\t\t<Fragment>\n\t\t\t{titleRow(isCommunity, data)}\n\t\t\t{snippetRow(data)}\n\t\t\t{metaRows(isCommunity, bodyAdditionalFields)}\n\t\t</Fragment>\n\t);\n};\n","export { default } from './sn-aa-article-footer';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport styles from './styles.scss';\n\nimport {view} from './view.js';\n\ncreateCustomElement('sn-aa-article-footer',{\n\trenderer : {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties : {\n\t\tparentKey : {default : ''},\n\t\tbehaviors : {default : ''},\n\t\tsourceId : {default : ''},\n\t\tsource : {default : ''},\n\t\tmeta : {default : ''},\n\t\tfooterAdditionalFields : {default : ''}\n\t},\n\tstyles\n});","\n        var result = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-article-footer){height:auto;margin:.75rem 0 0;position:relative;width:100%}.aa-card-footer{align-items:center;display:flex;color:RGB(var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)));flex-wrap:wrap;font-size:.75rem;overflow:hidden;position:relative}.aa-card-footer:empty{display:none}.aa-card-footer>span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;align-items:center;display:flex;margin-right:.125rem;position:relative}.aa-card-footer>span:last-of-type{margin-right:0}.aa-card-footer>span>now-icon{margin-right:.125rem}.aa-card-footer>span sn-aa-time-ago{margin:0 .125rem}\", \"\"]);\n\n// exports\n","import '../sn-aa-time-ago';\nimport { t } from 'sn-translate';\n\nconst dateField = ( fieldArr, fieldName ) => {\n\tif (fieldArr && fieldArr.length > 0 && fieldName) {\n\t\tconst filteredArr = fieldArr.filter(field => field && field.fieldName === fieldName);\n\t\treturn filteredArr && filteredArr.length > 0 && filteredArr[0];\n\t}\n\treturn null;\n};\n\nfunction getFooterItems(source, meta, footerAdditionalFields){\n\tif (source === 'community_blog')\n\t\treturn [\n\t\t\t{\n\t\t\t\t'label' : t('Updated'),\n\t\t\t\t'value' : meta.modified_display,\n\t\t\t\t'type' : 'timeago',\n\t\t\t\t'isUTC' : false\n\t\t\t},\n\t\t\t{\n\t\t\t\t'label' : Number(meta.views) === 1 ? t('view_lowercase'): t('views'),\n\t\t\t\t'value' : meta.views,\n\t\t\t\t'type' : 'number'\n\t\t\t},\n\t\t\t{\n\t\t\t\t'label' : t('Helpful'),\n\t\t\t\t'value' : meta.helpful,\n\t\t\t\t'icon' : 'thumbs-up',\n\t\t\t\t'type' : 'icon-text'\n\t\t\t},\n\t\t\t{\n\t\t\t\t'label' : Number(meta.comments) === 1 ? t('comment_lowercase'): t('comments_lowercase'),\n\t\t\t\t'value' : meta.comments,\n\t\t\t\t'type' : 'number'\n\t\t\t}\n\t\t];\n\n\tif (source === 'community_question' || source === 'community_answer')\n\t\treturn [\n\t\t\t{\n\t\t\t\t'label' : t('Updated'),\n\t\t\t\t'value' : meta.modified_display,\n\t\t\t\t'type' : 'timeago',\n\t\t\t\t'isUTC' : false\n\t\t\t},\n\t\t\t{\n\t\t\t\t'label' : Number(meta.views) === 1 ? t('view_lowercase'): t('views'),\n\t\t\t\t'value' : meta.views,\n\t\t\t\t'type' : 'number'\n\t\t\t},\n\t\t\t{\n\t\t\t\t'label' : t('Helpful'),\n\t\t\t\t'value' : meta.helpful,\n\t\t\t\t'icon' : 'thumbs-up',\n\t\t\t\t'type' : 'icon-text'\n\t\t\t},\n\t\t\t{\n\t\t\t\t'label' : Number(meta.comments) === 1 ? t('comment_lowercase'): t('comments_lowercase'),\n\t\t\t\t'value' : meta.comments,\n\t\t\t\t'type' : 'number'\n\t\t\t}\n\t\t];\n\n\tif (source === 'knowledge' || source === 'pinned') {\n\t\tlet footerItems = [\n\t\t\t{\n\t\t\t\t'label' : t('Updated'),\n\t\t\t\t'value' : meta.modified_display,\n\t\t\t\t'type' : 'timeago',\n\t\t\t\t'isUTC' : false\n\t\t\t}\n\t\t];\n\t\tif (source === 'pinned') {\n\t\t\tlet pinnedItems = [\n\t\t\t\t{\n\t\t\t\t\t'label' : t('Pinned Article'),\n\t\t\t\t\t'value' : '',\n\t\t\t\t\t'type' : 'icon-text'\n\t\t\t\t}\n\t\t\t];\n\t\t\tfooterItems = pinnedItems.concat(footerItems);\n\t\t} else {\n\t\t\tlet notPinnedItems = [\n\t\t\t\t{\n\t\t\t\t\t'label' : Number(meta.viewCount) === 1 ? t('view_lowercase'): t('views'),\n\t\t\t\t\t'value' : meta.viewCount,\n\t\t\t\t\t'type' : 'number'\n\t\t\t\t}\n\t\t\t];\n\t\t\tfooterItems = footerItems.concat(notPinnedItems);\n\t\t}\n\t\treturn footerItems;\n\t}\n\n\tif (source === 'social') {\n\t\treturn [\n\t\t\t{\n\t\t\t\t'label' : t('Last Activity'),\n\t\t\t\t'value' : meta.modified_display,\n\t\t\t\t'type' : 'timeago',\n\t\t\t\t'isUTC' : false\n\t\t\t},\n\t\t\t{\n\t\t\t\t'label' : Number(meta.viewCount) === 1 ? t('view_lowercase'): t('views'),\n\t\t\t\t'value' : meta.viewCount,\n\t\t\t\t'type' : 'number'\n\t\t\t},\n\t\t\t{\n\t\t\t\t'label' : Number(meta.votes) === 1 ? t('vote'): t('votes'),\n\t\t\t\t'value' : meta.votes,\n\t\t\t\t'type' : 'number'\n\t\t\t},\n\t\t\t{\n\t\t\t\t'label' : Number(meta.answerCount) === 1 ? t('answer_lowercase'): t('answers'),\n\t\t\t\t'value' : meta.answerCount,\n\t\t\t\t'type' : 'number'\n\t\t\t}\n\t\t];\n\t}\n\n\tif (!footerAdditionalFields || footerAdditionalFields == 0)\n\t\treturn [];\n\n\tlet createdOnFields = dateField(footerAdditionalFields, 'sys_created_on');\n\tlet updatedOnFields = dateField(footerAdditionalFields, 'sys_updated_on');\n\n\tif (!createdOnFields && !updatedOnFields)\n\t\treturn [];\n\n\tlet footerField;\n\tif (!createdOnFields)\n\t\tfooterField = updatedOnFields;\n\telse if (!updatedOnFields)\n\t\tfooterField = createdOnFields;\n\telse if (createdOnFields.fieldDisplayValue === updatedOnFields.fieldDisplayValue)\n\t\tfooterField = createdOnFields;\n\telse\n\t\tfooterField = updatedOnFields;\n\treturn [\n\t\t{\n\t\t\t'label' : footerField.fieldLabel,\n\t\t\t'value' : footerField.fieldDisplayValue,\n\t\t\t'type' : 'datetime',\n\t\t\t'isUTC' : false\n\t\t}\n\t];\n}\n\nexport const view = (state) => {\n\tlet {behaviors, meta, source, sourceId, footerAdditionalFields} = state.properties;\n\tlet items = getFooterItems(source, meta, footerAdditionalFields);\n\tlet i = 0;\n\treturn (\n\t\t<div className=\"aa-card-footer\">\n\t\t\t{\n\t\t\t\titems && items.map((item) => {\n\t\t\t\t\ti++;\n\t\t\t\t\tlet seperator = '  ';\n\t\t\t\t\t// DEF0090138: We want a more human-readable, relative time is more valuable for these timestamps in agent assist. With relative time, a quick glance will let someone know if a record is actively being worked on.\n\t\t\t\t\t// Text at bottom of card should display human/nice time (e.g. \"Created 10 days ago\" or \"Updated 10 days ago\") as seen on Knowledge Article cards.\n\t\t\t\t\t// Outage, Problem, Incident, and Change card timestamps should be aligned with the one of knowledge articles.\n\t\t\t\t\tif (item.type === 'timeago' || item.type === 'datetime')\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<span key={sourceId + '_' + i}>{item.label} <sn-aa-time-ago behaviors={behaviors} time_stamp={item.value} system_time={item.isUTC} /> {i < items.length ? seperator : ''}</span>\n\t\t\t\t\t\t);\n\t\t\t\t\telse if (item.type === 'number')\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<span key={sourceId + '_' + i}>{item.value+ ' ' + item.label}{i < items.length ? seperator : ''}</span>\n\t\t\t\t\t\t);\n\t\t\t\t\telse if (item.type === 'icon-text')\n\t\t\t\t\t\treturn <span key={sourceId + '_' + i}><now-icon icon={item.icon ? item.icon : 'thumbtack-outline'} size='sm'/> {item.label}{(item.value || item.value === 0) ? ' (' + item.value + ')' : ''}{i < items.length ? seperator : ''}</span>;\n\t\t\t\t\telse\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<span key={sourceId + '_' + i}>{item.label + ': ' + item.value}{i < items.length ? seperator : ''}</span>\n\t\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t);\n};\n","export { default } from './sn-aa-time-ago';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport { SnTimeAgo } from 'sn-component-timeago';\nimport styles from './styles.scss';\n\nimport { view } from './view.js';\n\ncreateCustomElement('sn-aa-time-ago', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview,\n\t\ttransformState(state) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttime: state.properties.lastUpdated.getTickTime().time\n\t\t\t};\n\t\t}\n\t},\n\tproperties: {\n\t\ttimeStamp: { default: '' },\n\t\tsystemTime: { default: '' },\n\t\tbehaviors: { default: '' },\n\t\tlastUpdated: {\n\t\t\tcomputed(state) {\n\t\t\t\tconst {\n\t\t\t\t\ttimeStamp,\n\t\t\t\t\tlastUpdated,\n\t\t\t\t\tsystemTime\n\t\t\t\t\t// behaviors\n\t\t\t\t} = state.properties;\n\t\t\t\tif (lastUpdated) {\n\t\t\t\t\tlastUpdated.remove();\n\t\t\t\t}\n\n\t\t\t\tconst options = {\n\t\t\t\t\ttimeAgo: true,\n\t\t\t\t\tdateBoth: false,\n\t\t\t\t\tsystemTime: systemTime,\n\t\t\t\t\tdateOnly: false\n\t\t\t\t};\n\t\t\t\treturn new SnTimeAgo(state.properties, timeStamp, options);\n\t\t\t}\n\t\t}\n\t},\n\tstyles: styles\n});\n","\n        var result = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}\", \"\"]);\n\n// exports\n","import { SnTimeAgo } from 'sn-component-timeago';//eslint-disable-line no-unused-vars\n\nconst update = (lastUpdated) => {\n\treturn () => {\n\t\tlastUpdated.remove();\n\t};\n};\n\nexport const view = (state) => {\n\tconst {\n\t\tproperties: {lastUpdated},\n\t\ttime\n\t} = state;\n\tlastUpdated.setUpdateFn(update(lastUpdated));\n\treturn (\n\t\t<time>\n\t\t\t{time}\n\t\t</time>\n\t);\n    \n};","export { default } from './sn-aa-action-footer';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport styles from './styles.scss';\n\nimport {view} from './view.js';\n\ncreateCustomElement('sn-aa-action-footer',{\n\trenderer : {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties : {\n\t\tdata : {default : ''},\n\t\titemIndex : {default : ''},\n\t\taction : {default : ''},\n\t\tvisibleActions : {default : ''},\n\t\tisDetection  : {default : ''}\n\t},\n\tstyles\n});","\n        var result = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}\", \"\"]);\n\n// exports\n","import get from 'lodash/get';\n\nimport { AA_PROPOSE_RECOMMENDATION } from './actions';\nimport { AA_ACTION_CLICKED } from '../../../sn-aa-action-header';\n\nexport const view = (state, dispatch) => {\n\tconst {\n\t\tdata,\n\t\titemIndex,\n\t\taction,\n\t\t// visibleActions,\n\t\tisDetection\n\t\t// formRecordInfo\n\t} = state.properties;\n\n\tconst actionLabel = get(action, 'displayValue', '');\n\tif(!actionLabel)\n\t\treturn null;\n\n\tconst actionId = get(action, 'actionId', '');\n\tlet proposeUIActionSysId = null;\n\tif ( !isDetection && (!actionId || actionId.indexOf(':') == -1) )\n\t\treturn null;\n\telse\n\t\tproposeUIActionSysId = actionId.split(':')[1];\n\n\tlet onClickHandler = null;\n\tif(!isDetection && actionId.startsWith('propose:'))\n\t\tonClickHandler = () => {\n\t\t\tdispatch(AA_PROPOSE_RECOMMENDATION, {proposeUIActionSysId});\n\t\t};\n\telse\n\t\tonClickHandler = () => {\n\t\t\tdispatch(AA_ACTION_CLICKED, {\n\t\t\t\titem: data,\n\t\t\t\titemIndex,\n\t\t\t\tselected: false,\n\t\t\t\taction\n\t\t\t});\n\t\t};\n\n\treturn <now-button label={actionLabel} size=\"md\" variant=\"secondary\" bare={true}  on-click={onClickHandler} />;\n};\n","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\n\nimport styles from './styles.scss';\nimport { view } from './view';\n\ncreateCustomElement('sn-aa-results-footer', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties: {\n\t\tshowNext: { default: false },\n\t\tshowPrev: { default: false },\n\t\tchildren: { default: '' },\n\t\tisUib: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tstyles\n});\n","\n        var result = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}.aa-footer,:host(sn-aa-results-footer){display:flex;flex:0 0 auto;position:relative;width:100%}.aa-footer{border-top:1px solid transparent;border-color:RGB(var(--now-color_border--tertiary,var(--now-color--neutral-3,209,214,214)));padding:.25rem 0;z-index:1}.aa-footer-pagination-container{display:flex;padding:0 1.5rem;flex:1 1 auto;justify-content:flex-end;position:relative}\", \"\"]);\n\n// exports\n","import { t } from 'sn-translate';\nimport { AA_FOOTER_NEXT_CLICKED, AA_FOOTER_PREV_CLICKED } from './actions';\nimport { isUibClassDecorator } from '../../util/agentAssistUtils';\n\nexport const view = (state, dispatch) => {\n\tconst { showNext, showPrev, children, isUib } = state.properties;\n\n\treturn (\n\t\t<footer className=\"aa-footer\">\n\t\t\t<div\n\t\t\t\tclassName={isUibClassDecorator(\n\t\t\t\t\tisUib,\n\t\t\t\t\t'aa-footer-pagination-container'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<now-button\n\t\t\t\t\tbare\n\t\t\t\t\tdisabled={!showPrev ? true : false}\n\t\t\t\t\ticon=\"arrow-left-outline\"\n\t\t\t\t\tsize=\"md\"\n\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\ttooltip-content={t('Previous Page')}\n\t\t\t\t\tconfig-aria={{ 'aria-label': t('Previous Page') }}\n\t\t\t\t\ton-click={e => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tif (showPrev) {\n\t\t\t\t\t\t\tdispatch(AA_FOOTER_PREV_CLICKED, {});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t{children}\n\t\t\t\t<now-button\n\t\t\t\t\tbare\n\t\t\t\t\tdisabled={!showNext ? true : false}\n\t\t\t\t\ticon=\"arrow-right-outline\"\n\t\t\t\t\tsize=\"md\"\n\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\ttooltip-content={t('Next Page')}\n\t\t\t\t\tconfig-aria={{ 'aria-label': t('Previous Page') }}\n\t\t\t\t\ton-click={e => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tif (showNext) {\n\t\t\t\t\t\t\tdispatch(AA_FOOTER_NEXT_CLICKED, {});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</footer>\n\t);\n};\n","export { default } from './sn-aa-search-controls-container';\n","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport view from './view';\nimport styles from './styles.scss';\n\ncreateCustomElement('sn-aa-search-controls-container', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties: {\n\t\tformSearchTerm: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t},\n\t\tsearchBoxText: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t},\n\t\taction: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t},\n\t\tsysId: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t},\n\t\ttableName: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t},\n\t\tagentAssistInstanceId: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t},\n\t\tfilter: {\n\t\t\treflect: true,\n\t\t\tdefault: null\n\t\t},\n\t\tsearchAs: {\n\t\t\treflect: true,\n\t\t\tdefault: null\n\t\t},\n\t\tisLoading: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t},\n\t\toffset: {\n\t\t\treflect: true,\n\t\t\tdefault: 0\n\t\t},\n\t\tshowNext: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t},\n\t\tshowPrev: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t},\n\t\tresourceSelectorState: {\n\t\t\treflect: true,\n\t\t\tdefault: {}\n\t\t},\n\t\tisUib: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tstyles: styles\n});\n","import '@servicenow/now-toggle';\nimport '../sn-aa-search-box';\nimport '../sn-aa-search-as';\nimport '../sn-aa-search-filter';\nimport { isUibClassDecorator } from '../../util/agentAssistUtils';\n\nconst view = state => {\n\tconst {\n\t\tproperties: {\n\t\t\tformSearchTerm,\n\t\t\tsearchBoxText,\n\t\t\tisLoading,\n\t\t\tfilter,\n\t\t\tagentAssistInstanceId,\n\t\t\tsearchAs,\n\t\t\tresourceSelectorState,\n\t\t\tisUib\n\t\t}\n\t} = state;\n\treturn (\n\t\t<div className={isUibClassDecorator(isUib, 'aa-panel-search')}>\n\t\t\t<div className=\"aa-panel-search-row\">\n\t\t\t\t<div className=\"aa-panel-search-content\">\n\t\t\t\t\t<sn-aa-search-box\n\t\t\t\t\t\tformSearchTerm={formSearchTerm}\n\t\t\t\t\t\tsearchBoxText={searchBoxText}\n\t\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"aa-panel-search-content\">\n\t\t\t\t\t<sn-aa-search-filter\n\t\t\t\t\t\tfilter={filter}\n\t\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t\t\tresourceSelectorState={resourceSelectorState}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"aa-panel-search-row\">\n\t\t\t\t<sn-aa-search-as\n\t\t\t\t\tagentAssistInstanceId={agentAssistInstanceId}\n\t\t\t\t\t{...searchAs}\n\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default view;\n","\n        var result = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-search-controls-container){display:flex;flex:0 0 auto;position:relative;width:100%}.aa-panel-search{flex-wrap:wrap;margin-bottom:1rem;padding:0 1.5rem 0}.aa-panel-search,.aa-panel-search-row{display:flex;position:relative;width:100%}.aa-panel-search-content{flex:1 1 auto;margin-right:1rem;position:relative}.aa-panel-search-content:last-of-type{flex:0 0 auto;margin-right:0}.aa-panel-search-content:only-of-type{flex:1 1 auto;margin-right:0}\", \"\"]);\n\n// exports\n","export {default} from './sn-aa-details-container';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport view from './view';\nimport { actionHandlers } from './actionHandlers';\nimport styles from './styles.scss';\n\ncreateCustomElement('sn-aa-details-container', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tinitialState: {\n\t\tdetailsContainerRef: ''\n\t},\n\tproperties: {\n\t\tparentId: { default: '' },\n\t\tformRecordInfo: { default: '' },\n\t\titem: { default: '' },\n\t\titemIndex: { default: '' },\n\t\toffset: { default: '' },\n\t\tactionStates: { default: '' },\n\t\tformTimeStamp: { default: Date.now() },\n\t\tisRecommendation: { default: false },\n\t\tisAdditionalResource: { default: false },\n\t\tactions: { default: '' },\n\t\tisNewRecord: { default: false },\n\t\tallowResultPreviewButtons: { default: true },\n\t\tnextItem: { default: '' },\n\t\tprevItem: { default: '' },\n\t\tshowPrev: { default: false },\n\t\tshowNext: { default: false },\n\t\tisUib: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tactionHandlers,\n\tstyles: styles\n});\n","import isEmpty from 'lodash/isEmpty';\nimport {\n\tgetItemActionsMap,\n\tisUibClassDecorator\n} from '../util/agentAssistUtils';\nimport { DETAIL_VIEW } from '../consts';\nimport '../sn-aa-catalog-detail';\nimport '../sn-aa-response-template-detail';\nimport { t } from 'sn-translate';\nimport { AA_TOGGLE_DETAIL_VIEW } from './actions';\nimport '@servicenow/now-button';\nimport '../sn-aa-component-record-detail';\nimport '../sn-aa-action-header';\nimport 'sn-component-workspace-knowledge';\nimport { LOG } from '../util/agentAssistUtils';\nimport '../searchResultsContainer/sn-aa-results-footer';\n// eslint-disable-next-line no-unused-vars\nimport { Fragment } from '@servicenow/ui-renderer-snabbdom';\n\nfunction getItem(source, state) {\n\tconst [table, sysId] = state.properties.item.id.split(':');\n\tconst DetailComponentName =\n\t\tstate.properties.item.meta.detail_component_name;\n\tconst isUib = state.properties.isUib ? true : false;\n\n\tif (source === 'community_answer') {\n\t\treturn (\n\t\t\t<sn-community-qa-detail\n\t\t\t\tcomponent-id={\n\t\t\t\t\tstate.properties.parentId + '_' + state.properties.item.id\n\t\t\t\t}\n\t\t\t\tid={state.properties.item.id}\n\t\t\t\tsys-id={sysId}\n\t\t\t\ttable={table}\n\t\t\t\tframeless={true}\n\t\t\t\tis-uib={isUib}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (source === 'community_question') {\n\t\treturn (\n\t\t\t<sn-community-qa-detail\n\t\t\t\tcomponent-id={\n\t\t\t\t\tstate.properties.parentId + '_' + state.properties.item.id\n\t\t\t\t}\n\t\t\t\tid={state.properties.item.id}\n\t\t\t\tsys-id={sysId}\n\t\t\t\ttable={table}\n\t\t\t\tframeless={true}\n\t\t\t\tis-uib={isUib}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (source === 'community_blog') {\n\t\treturn (\n\t\t\t<sn-community-blog-detail\n\t\t\t\tcomponent-id={\n\t\t\t\t\tstate.properties.parentId + '_' + state.properties.item.id\n\t\t\t\t}\n\t\t\t\tid={state.properties.item.id}\n\t\t\t\tsys-id={sysId}\n\t\t\t\ttable={table}\n\t\t\t\tframeless={true}\n\t\t\t\tis-uib={isUib}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (!isEmpty(DetailComponentName)) {\n\t\tconst pinned = source === 'pinned';\n\t\treturn (\n\t\t\t<DetailComponentName\n\t\t\t\tcomponent-id={\n\t\t\t\t\tstate.properties.parentId + '_' + state.properties.item.id\n\t\t\t\t}\n\t\t\t\tid={state.properties.item.id}\n\t\t\t\tsys-id={sysId}\n\t\t\t\ttable={table}\n\t\t\t\tfields={state.properties.formRecordInfo.currentFields}\n\t\t\t\titem={state.properties.item}\n\t\t\t\tpinned={pinned}\n\t\t\t\tframeless={true}\n\t\t\t\tis-uib={isUib}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<sn-aa-record-detail\n\t\t\titem={state.properties.item}\n\t\t\tcomponent-id={\n\t\t\t\tstate.properties.parentId + '_' + state.properties.item.id\n\t\t\t}\n\t\t\tis-uib={isUib}\n\t\t/>\n\t);\n}\n\nconst view = (state, dispatch) => {\n\tconst { showNext, showPrev, item, isUib } = state.properties;\n\tif (!item) {\n\t\tLOG.warn('sn-aa-detail-container: item is undefined');\n\t\treturn null;\n\t}\n\tconst source = item.meta.source;\n\tconst actions = getItemActionsMap(item, state.properties.actions)\n\t\t.headerActions;\n\tconst actionStates = state.properties.actionStates[item.id];\n\tif (!actionStates) {\n\t\tLOG.warn('sn-aa-detail-container: actionStates is undefined');\n\t\treturn null;\n\t}\n\tconst hideCarouselBtns =\n\t\tstate.properties.isRecommendation ||\n\t\t!state.properties.allowResultPreviewButtons;\n\tconst footerNavBar =\n\t\thideCarouselBtns || (!showPrev && !showNext) ? null : (\n\t\t\t<sn-aa-results-footer\n\t\t\t\tkey=\"search-details-footer\"\n\t\t\t\t{...state.properties}\n\t\t\t/>\n\t\t);\n\treturn (\n\t\t<Fragment>\n\t\t\t<div\n\t\t\t\tclassName=\"aa-details-container\"\n\t\t\t\tref={el => (state.detailsContainerRef = el)}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={isUibClassDecorator(isUib, 'aa-details-header')}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"aa-details-header-content\">\n\t\t\t\t\t\t<now-button\n\t\t\t\t\t\t\ttype=\"Tertiary\"\n\t\t\t\t\t\t\ticon-set=\"solid\"\n\t\t\t\t\t\t\ticon-name=\"chevron-left-outline\"\n\t\t\t\t\t\t\tbare\n\t\t\t\t\t\t\tsize=\"md\"\n\t\t\t\t\t\t\ton-click={() =>\n\t\t\t\t\t\t\t\tdispatch(AA_TOGGLE_DETAIL_VIEW, {\n\t\t\t\t\t\t\t\t\tshowDetail: false,\n\t\t\t\t\t\t\t\t\titemIndex: state.properties.itemIndex\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taria-label={t('Back')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"aa-details-header-content\">\n\t\t\t\t\t\t<sn-aa-action-header\n\t\t\t\t\t\t\tview={DETAIL_VIEW}\n\t\t\t\t\t\t\tform-record-info={state.properties.formRecordInfo}\n\t\t\t\t\t\t\titem={state.properties.item}\n\t\t\t\t\t\t\titem-index={state.properties.itemIndex}\n\t\t\t\t\t\t\tsource={source}\n\t\t\t\t\t\t\tactions={actions}\n\t\t\t\t\t\t\tvisible-actions={actionStates.visibleActions}\n\t\t\t\t\t\t\tis-new-record={state.properties.isNewRecord}\n\t\t\t\t\t\t\tform-time-stamp={state.properties.formTimeStamp}\n\t\t\t\t\t\t\tis-recommendation={\n\t\t\t\t\t\t\t\tstate.properties.isRecommendation\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"aa-details-body\"\n\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t>\n\t\t\t\t\t{getItem(state.properties.item.meta.source, state)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{footerNavBar}\n\t\t</Fragment>\n\t);\n};\n\nexport default view;\n","export { default } from './sn-aa-catalog-detail';","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport styles from './styles.scss';\nimport view from './view';\nimport actionHandlers from './actionHandlers';\n\ncreateCustomElement('sn-aa-catalog-detail', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tproperties: {\n\t\tsysId: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t},\n\t\ttable: {\n\t\t\treflect: true,\n\t\t\tdefault: ''\n\t\t},\n\t\tisUib: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tinitialState: {\n\t\tisLoading: false,\n\t\tcurrentSysId: ''\n\t},\n\tactionHandlers,\n\tstyles: styles\n});\n","\n        var result = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/src/index.js??ref--6-2!../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-catalog-detail){display:block;height:100%;overflow-x:hidden;overflow-y:auto;position:relative}.aa-card{flex:0 0 auto;flex-direction:column;padding:0 1.5rem 1.5rem}.aa-card,.aa-card-title{display:flex;position:relative;width:100%}.aa-card-title{align-items:center;color:RGB(var(--now-color_text--secondary,var(--now-color--neutral-12,66,80,81)));flex:0 0 auto;font-size:1rem;font-weight:600;margin-bottom:.25rem;overflow:hidden}.aa-card-title>span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}.aa-card-title+.aa-card-body{margin-top:.25rem}.aa-card-meta-data{align-items:center;color:RGB(var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)));display:flex;flex:0 0 auto;font-size:.75rem;margin-bottom:.75rem;overflow:hidden;position:relative;width:100%}.aa-card-meta-data>span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}.aa-card-body{border-top:1px solid transparent;border-color:RGB(var(--now-color_divider--tertiary,var(--now-color--neutral-3,209,214,214)));color:RGB(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)));flex:1 1 auto;font-size:1rem;outline:none;position:relative;width:100%}.aa-card img{height:auto;margin:.75rem 0;max-width:100%}\", \"\"]);\n\n// exports\n","import isNil from 'lodash/isNil';\n\nimport { createElement } from '@servicenow/ui-renderer-snabbdom';\nimport {\n\tbaseLinkFromRootDir,\n\tisUibClassDecorator\n} from '../util/agentAssistUtils';\nimport { AA_LOAD_CATALOG_DETAIL_REQUEST } from './actions';\nimport { t } from 'sn-translate';\n\nconst view = (state, dispatch) => {\n\tconst {\n\t\tproperties: { sysId, table, isUib },\n\t\tcatalogItem,\n\t\tisLoading,\n\t\tcurrentSysId\n\t} = state;\n\n\tif (sysId !== currentSysId && !isLoading) {\n\t\tif (table === 'sc_cat_item') {\n\t\t\tdispatch(AA_LOAD_CATALOG_DETAIL_REQUEST, { sys_id: sysId });\n\t\t}\n\t}\n\n\tif (isLoading || isNil(catalogItem)) {return null;}\n\n\treturn (\n\t\t<div className={isUibClassDecorator(isUib, 'aa-card')}>\n\t\t\t<div className=\"aa-card-title\">\n\t\t\t\t<span>{catalogItem.name.displayValue}</span>\n\t\t\t</div>\n\t\t\t{catalogItem.ignore_price.value ||\n\t\t\t!catalogItem.price.value ? null : (\n\t\t\t\t<div className=\"aa-card-meta-data\">\n\t\t\t\t\t<span>{catalogItem.price.displayValue}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className=\"aa-card-body\">\n\t\t\t\t{!catalogItem.description.value ? null : (\n\t\t\t\t\t<div aria-hidden=\"true\">{t('Item Description')}</div>\n\t\t\t\t)}\n\t\t\t\t{!catalogItem.picture.displayValue ? null : (\n\t\t\t\t\t<div className=\"aa-card-picture\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={baseLinkFromRootDir(\n\t\t\t\t\t\t\t\tcatalogItem.picture.displayValue\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{createElement('div', {\n\t\t\t\t\tprops: { innerHTML: catalogItem.description.displayValue }\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default view;\n\n","import get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport { createGraphQLEffect } from '@servicenow/ui-effect-graphql';\nimport {\n\tAA_LOAD_CATALOG_DETAIL_REQUEST,\n\tAA_LOAD_CATALOG_DETAIL_STARTED,\n\tAA_LOAD_CATALOG_DETAIL_SUCCEEDED,\n\tAA_LOAD_CATALOG_DETAIL_FAILED\n} from './actions';\n\nconst catalogQuery = `query ($sys_id: String!) {\n\tGlideRecord_Query {\n\t\t  sc_cat_item(sys_id: $sys_id) {\n\t\t\t  _results {\n\t\t\t\t  sys_id {\n\t\t\t\t\t  value\n\t\t\t\t  }\n\t\t\t\t  name {\n\t\t\t\t\t  value\n\t\t\t\t\t  displayValue\n\t\t\t\t  }\n\t\t\t\t  short_description {\n\t\t\t\t\t  displayValue\n\t\t\t\t  }\n\t\t\t\t  description {\n\t\t\t\t\t  displayValue\n\t\t\t\t  }\n\t\t\t\t  price {\n\t\t\t\t\t  value\n\t\t\t\t\t  displayValue\n\t\t\t\t  }\n\t\t\t\t  ignore_price {\n\t\t\t\t\t  value\n\t\t\t\t\t  displayValue\n\t\t\t\t  }\n\t\t\t\t  picture {\n\t\t\t\t\t  displayValue\n\t\t\t\t  }\n\t\t\t  }\n\t\t  }\n\t  }\n  }`;\n\nconst fetchCatalogDetailEffect = createGraphQLEffect(catalogQuery, {\n\tvariableList: ['sys_id'],\n\tstartActionType: AA_LOAD_CATALOG_DETAIL_STARTED,\n\tsuccessActionType: AA_LOAD_CATALOG_DETAIL_SUCCEEDED,\n\terrorActionType: AA_LOAD_CATALOG_DETAIL_FAILED\n});\n\nconst fetchCatalogDetailStartedEffect = coeffects => {\n\tconst { state, updateState } = coeffects;\n\tupdateState({\n\t\t...state,\n\t\tisLoading: true\n\t});\n};\n\nconst fetchCatalogDetailSucceededEffect = coeffects => {\n\tconst { state, action, updateState } = coeffects;\n\tconst results = get(\n\t\taction,\n\t\t'payload.data.GlideRecord_Query.sc_cat_item._results',\n\t\t[]\n\t);\n\tconst item = isEmpty(results) ? null : results[0];\n\n\tupdateState({\n\t\t...state,\n\t\tcatalogItem: item,\n\t\tisLoading: false,\n\t\tcurrentSysId: item.sys_id.value\n\t});\n};\n\nexport default {\n\t[AA_LOAD_CATALOG_DETAIL_REQUEST]: {\n\t\t...fetchCatalogDetailEffect,\n\t\tstopPropagation: true\n\t},\n\t[AA_LOAD_CATALOG_DETAIL_STARTED]: {\n\t\teffect: fetchCatalogDetailStartedEffect,\n\t\tstopPropagation: true\n\t},\n\t[AA_LOAD_CATALOG_DETAIL_SUCCEEDED]: {\n\t\teffect: fetchCatalogDetailSucceededEffect,\n\t\tstopPropagation: true\n\t}\n\t// [AA_LOAD_CATALOG_DETAIL_FAILED]: {\n\t// \t...logErrorEffect,\n\t// \tstopPropagation: true\n\t// }\n};\n","export {default} from './sn-aa-response-template-detail';\n","import {createCustomElement} from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport view from './view';\nimport styles from './styles.scss';\n\nexport default createCustomElement('sn-aa-response-template-detail', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\n\tproperties: {\n\t\titem: {default: {}}\n\t},\n\n\tstyles: styles\n});\n","import { createElement } from '@servicenow/ui-renderer-snabbdom';\n\nfunction getTitle(item) {\n\treturn (\n\t\t<div className=\"aa-card-title\">\n\t\t\t<span>{item.meta.card_title}</span>\n\t\t</div>\n\t);\n}\n\n// Placeholder until form data is available.\nfunction getFormData() {\n\treturn <div className=\"aa-card-meta-data\"></div>;\n}\n\nfunction getBody(item) {\n\treturn (\n\t\t<div className=\"aa-card-body\">\n\t\t\t{createElement('div',{ props: { innerHTML: item.meta.card_snippet }})}\n\t\t</div>\n\t);\n}\n\nconst view = state => {\n\tconst { item } = state.properties;\n\n\treturn (\n\t\t<div className=\"aa-card\">\n\t\t\t{getTitle(item)}\n\t\t\t{getFormData(item)}\n\t\t\t{getBody(item)}\n\t\t</div>\n\t);\n};\n\nexport default view;\n","\n        var result = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/src/index.js??ref--6-2!../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-response-template-detail){display:block;height:100%;overflow-x:hidden;overflow-y:auto;position:relative}.aa-card{flex:0 0 auto;flex-direction:column;padding:0 1.5rem 1.5rem}.aa-card,.aa-card-title{display:flex;position:relative;width:100%}.aa-card-title{align-items:center;color:RGB(var(--now-color_text--secondary,var(--now-color--neutral-12,66,80,81)));flex:0 0 auto;font-size:1rem;font-weight:600;margin-bottom:.25rem;overflow:hidden}.aa-card-title>span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}.aa-card-meta-data{align-items:center;color:RGB(var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)));display:flex;flex:0 0 auto;font-size:.75rem;margin-bottom:.75rem;overflow:hidden;position:relative;width:100%}.aa-card-body{border-top:1px solid transparent;border-color:RGB(var(--now-color_divider--tertiary,var(--now-color--neutral-3,209,214,214)));color:RGB(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)));flex:1 1 auto;font-size:1rem;outline:none;position:relative;width:100%}.aa-card-body now-label-value-stacked{margin-top:.75rem}\", \"\"]);\n\n// exports\n","module.exports = __TECTONIC__$servicenow_now_button;","export {default} from './sn-aa-component-record-detail';","import { createCustomElement } from '@servicenow/ui-core';\nimport { actionHandlers } from './actionHandler';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport view from './view';\nimport styles from './styles.scss';\nimport { AA_GET_LATEST_WORKNOTE } from './actions';\n\nexport default createCustomElement('sn-aa-record-detail', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\n\tlegacyHandleAllActions: true,\n\n\tproperties: {\n\t\titem: { default: {} },\n\t\tisUib: {\n\t\t\treflect: true,\n\t\t\tdefault: false\n\t\t}\n\t},\n\n\tinitialState: {\n\t\tworkNote: '',\n\t\tshowLatestWorkNote: ''\n\t},\n\tactionHandlers,\n\tonConnect(host, dispatch) {\n\t\tdispatch(AA_GET_LATEST_WORKNOTE, {\n\t\t\trecord_id: host.item.id.split(':')[1],\n\t\t\ttable_name: host.item.id.split(':')[0]\n\t\t});\n\t},\n\tstyles: styles\n});\n","import {\n\tAA_GET_LATEST_WORKNOTE,\n\tAA_GET_LATEST_WORKNOTE_SUCCESS,\n\tAA_GET_LATEST_WORKNOTE_ERROR,\n\tAA_RECORD_SET_STATE\n} from './actions';\nimport { createHttpEffect } from '@servicenow/ui-effect-http';\n\nconst makeGetLatestWorknoteHandler = (successAction, errorAction) => {\n\treturn createHttpEffect(\n\t\t'api/now/cxs/get_latest_worknote/:table_name/:record_id',\n\t\t{\n\t\t\tmethod: 'GET',\n\t\t\tpathParams: ['table_name', 'record_id'],\n\t\t\tsuccessActionType: successAction,\n\t\t\terrorActionType: errorAction\n\t\t}\n\t);\n};\n\nconst getLatestWorknoteSucceed = coeffects => {\n\tconst { state, action, updateState } = coeffects;\n\tupdateState({\n\t\t...state,\n\t\tworkNote: action.payload.result.worknote\n\t});\n};\n\nconst getLatestWorknoteError = coeffects => {\n\tconst { state, updateState } = coeffects;\n\tupdateState({\n\t\t...state\n\t});\n};\n\nconst setRecordDetailState = coeffects => {\n\tconst { state, action, updateState } = coeffects;\n\tupdateState({\n\t\t...state,\n\t\tshowLatestWorkNote: action.payload.showLatestWorkNote\n\t});\n};\n\nexport const actionHandlers = {\n\t[AA_GET_LATEST_WORKNOTE]: {\n\t\t...makeGetLatestWorknoteHandler(\n\t\t\tAA_GET_LATEST_WORKNOTE_SUCCESS,\n\t\t\tAA_GET_LATEST_WORKNOTE_ERROR\n\t\t),\n\t\tstopPropagation: true\n\t},\n\t[AA_GET_LATEST_WORKNOTE_SUCCESS]: {\n\t\teffect: getLatestWorknoteSucceed,\n\t\tstopPropagation: true\n\t},\n\t[AA_GET_LATEST_WORKNOTE_ERROR]: {\n\t\teffect: getLatestWorknoteError,\n\t\tstopPropagation: true\n\t},\n\t[AA_RECORD_SET_STATE]: {\n\t\teffect: setRecordDetailState,\n\t\tstopPropagation: true\n\t}\n};\n","import { t } from 'sn-translate';\nimport '@servicenow/now-label-value';\nimport {\n\tprocessMetaAdditionalFields,\n\tisUibClassDecorator\n} from '../util/agentAssistUtils';\nimport { DETAIL_VIEW_META_FIELD_LIMIT } from '../consts';\nimport { createElement } from '@servicenow/ui-renderer-snabbdom';\n// import {\n// \tAA_RECORD_SET_STATE\n// } from './actions';\n\nfunction getItem(state) {\n\treturn state.properties.item;\n}\n\nfunction getTitle(item) {\n\treturn (\n\t\t<div className=\"aa-card-title\" role=\"heading\">\n\t\t\t<span>{item.meta.detail_title}</span>\n\t\t</div>\n\t);\n}\n\nfunction getLink(item, dispatch) {\n\tconst [table, sysId] = item.id.split(':');\n\t//TODO: add parent table and sys_id\n\tconst previewObj = {\n\t\ttable: table,\n\t\tsys_id: sysId\n\t};\n\n\treturn (\n\t\t<div className=\"aa-card-meta-data\">\n\t\t\t<now-button\n\t\t\t\tbare\n\t\t\t\tlabel={item.meta.detail_link}\n\t\t\t\tsize=\"sm\"\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\ton-click={() => {\n\t\t\t\t\tdispatch('PREVIEW_RECORD', previewObj);\n\t\t\t\t}}\n\t\t\t></now-button>\n\t\t</div>\n\t);\n}\n\nfunction getBody(item) {\n\treturn <div className=\"aa-card-body\">{getAdditionalFields(item)}</div>;\n}\n\nfunction getAdditionalFields(item) {\n\tconst additionFieldsObj = processMetaAdditionalFields(\n\t\titem.meta.detail_additional_fields,\n\t\tDETAIL_VIEW_META_FIELD_LIMIT\n\t);\n\tlet additionalFieldsArray = [];\n\tadditionFieldsObj.bodyAdditionalFields.map(field => {\n\t\tadditionalFieldsArray.push({\n\t\t\tlabel: field.fieldLabel,\n\t\t\tvalue: { type: 'string', value: field.fieldDisplayValue }\n\t\t});\n\t\treturn null;\n\t});\n\treturn <now-label-value-stacked items={additionalFieldsArray} size=\"md\" />;\n}\n\nfunction getLatestWorkNote(state) {\n\tconst item = getItem(state);\n\tif (!item.meta.detail_show_work_note || !state.workNote) {return null;}\n\n\treturn (\n\t\t<div className=\"aa-card-work-note\">\n\t\t\t<div className=\"aa-card-work-note-label\">\n\t\t\t\t{t('Latest Worknote')}\n\t\t\t</div>\n\t\t\t{createElement('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tinnerHTML: state.workNote,\n\t\t\t\t\tclassName: 'aa-card-work-note-value'\n\t\t\t\t}\n\t\t\t})}\n\t\t</div>\n\t);\n}\n\nconst view = (state, dispatch) => {\n\tconst item = getItem(state);\n\n\treturn (\n\t\t<div className={isUibClassDecorator(state.properties.isUib, 'aa-card')}>\n\t\t\t{getTitle(item)}\n\t\t\t{getLink(item, dispatch)}\n\t\t\t{getBody(item)}\n\t\t\t{getLatestWorkNote(state)}\n\t\t</div>\n\t);\n};\nexport default view;\n","module.exports = __TECTONIC__$servicenow_now_label_value;","\n        var result = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/src/index.js??ref--6-2!../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-aa-record-detail){display:block;height:100%;overflow-x:hidden;overflow-y:auto;position:relative}.aa-card{flex:0 0 auto;flex-direction:column;padding:0 1.5rem 1.5rem}.aa-card,.aa-card-title{display:flex;position:relative;width:100%}.aa-card-title{align-items:center;color:RGB(var(--now-color_text--secondary,var(--now-color--neutral-12,66,80,81)));flex:0 0 auto;font-size:1rem;font-weight:600;margin-bottom:.25rem;overflow:hidden}.aa-card-title>span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}.aa-card-title+.aa-card-body{margin-top:.25rem}.aa-card-meta-data{align-items:center;color:RGB(var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)));display:flex;flex:0 0 auto;font-size:.75rem;margin-bottom:.75rem;overflow:hidden;position:relative;width:100%}.aa-card-body{border-top:1px solid transparent;border-color:RGB(var(--now-color_divider--tertiary,var(--now-color--neutral-3,209,214,214)));color:RGB(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)));flex:1 1 auto;font-size:1rem;outline:none;position:relative;width:100%}.aa-card-body now-label-value-stacked{margin-top:.75rem}.aa-card-work-note{background:RGBA(var(--now-color_alert--warning-0,242,237,179),.5);display:flex;flex-wrap:wrap;margin-left:-1.5rem;margin-top:1.5rem;padding:.75rem 1.5rem;width:calc(100% + 3rem)}.aa-card-work-note-label{color:RGB(var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)));font-size:.75rem;margin-bottom:.25rem;position:relative;width:100%}.aa-card-work-note-value{color:RGB(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)));font-size:1rem;overflow:hidden;position:relative;text-overflow:ellipsis;width:100%}\", \"\"]);\n\n// exports\n","module.exports = __TECTONIC__sn_component_workspace_knowledge;","import {\n\tAA_CONTAINER_SET_STATE,\n\tAA_CONTAINER_SHOW_PREV,\n\tAA_CONTAINER_SHOW_NEXT\n} from './actions';\nimport { actionTypes } from '@servicenow/ui-core';\nimport {\n\tAA_FOOTER_PREV_CLICKED,\n\tAA_FOOTER_NEXT_CLICKED\n} from '../searchResultsContainer/sn-aa-results-footer/actions';\nimport { autoFocus } from '../util/agentAssistUtils';\n\nconst { COMPONENT_DOM_READY } = actionTypes;\n\nconst setStateEffect = coeffects => {\n\tconst { state, action, updateState } = coeffects;\n\tupdateState({\n\t\t...state,\n\t\t...action.payload\n\t});\n};\nconst showFooterPrevClicked = ({ state, dispatch }) => {\n\tdispatch(AA_CONTAINER_SHOW_PREV, {\n\t\tselectedIndex: state.properties.itemIndex,\n\t\toffset: state.properties.offset\n\t});\n};\n\nconst showFooterNextClicked = ({ state, dispatch }) => {\n\tdispatch(AA_CONTAINER_SHOW_NEXT, {\n\t\tselectedIndex: state.properties.itemIndex,\n\t\toffset: state.properties.offset\n\t});\n};\n\nexport const actionHandlers = {\n\t[COMPONENT_DOM_READY]: ({ host }) => {\n\t\tautoFocus(host, '.aa-details-header-content>now-button');\n\t},\n\t[AA_CONTAINER_SET_STATE]: {\n\t\teffect: setStateEffect,\n\t\tstopPropagation: true\n\t},\n\t[AA_FOOTER_PREV_CLICKED]: {\n\t\teffect: showFooterPrevClicked,\n\t\tstopPropagation: true\n\t},\n\t[AA_FOOTER_NEXT_CLICKED]: {\n\t\teffect: showFooterNextClicked,\n\t\tstopPropagation: true\n\t}\n};\n","\n        var result = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/src/index.js??ref--6-2!../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}.aa-details-container,:host(sn-aa-details-container){display:flex;flex:1 1 auto;flex-direction:column;min-height:5rem;overflow:hidden;position:relative}.aa-details-header{display:flex;flex:0 0 auto;padding:1.5rem 1.5rem 1rem;position:relative;width:100%}.aa-details-header-content{flex:1 1 auto;position:relative;overflow:hidden}.aa-details-header-content:first-of-type{flex:0 0 auto;margin-right:1rem}.aa-details-body{flex:1 1 auto;height:100%;outline:none;padding:0;position:relative;width:100%;overflow-y:auto}.aa-details-body sn-community-blog-detail,.aa-details-body sn-community-qa-detail,.aa-details-body sn-knowledge-detail,.aa-details-body sn-knowledge-socialqa-detail{height:100%;overflow-x:hidden;overflow-y:auto}\", \"\"]);\n\n// exports\n","import {SnTimeAgo} from 'sn-component-timeago';\n\nexport const timeAgoBehaviors = SnTimeAgo.getBehaviors();","export {default as getPageSettings} from './getPageSettings';\nexport {default as getProperty} from './getProperty';\nexport {getPageProp, getPageProperties} from './getPageProp';\nexport {createPreSourceBehavior, getBehaviorProp} from './createPreSourceBehavior';\nexport {preUserData, preUserRoles, preUserPrefs, preWsConfigSysId} from './user.behaviors';","import get from 'lodash/get';\n\nconst getPageSettings = key => get(window, `ux_globals.pageSettings.${key}`, null);\n\nexport default getPageSettings;\n","import get from 'lodash/get';\n\nconst getProperty = (propertyName, defaultValue = null) => get(window, `ux_globals.sysprops['${propertyName}']`, defaultValue);\n\nexport default getProperty;\n","import get from 'lodash/get';\n\nexport const getPageProp = (propertyName, defaultValue = null) => get(window, `ux_globals.pageProperties['${propertyName}']`, defaultValue);\nexport const getPageProperties = () => get(window, `ux_globals.pageProperties`, null);\n","import get from \"lodash/get\";\nimport {\n\tcreatePreSourceBehavior,\n\tgetBehaviorProp\n} from \"./createPreSourceBehavior\";\n\nconst USER_DATA_KEY = \"wsUserData\";\nconst USER_ROLES_KEY = \"agentRoles\";\nconst USER_PREF_KEY = \"wsUserDataPreferences\";\nconst WS_CONFIG_SYS_ID_KEY = \"wsConfigSysId\";\n\nexport const preUserData = createPreSourceBehavior(\"sn-workspace-header\", {\n\tname: USER_DATA_KEY,\n\ttransform: data => get(data, \"data.GlideDomain_Query.user\", {})\n});\n\nexport const preUserRoles = createPreSourceBehavior(\"sn-workspace-content\", {\n\tname: USER_ROLES_KEY,\n\ttransform: result => get(result, \"data.GlideDomain_Query.user.roles\", [])\n});\n\nexport const preWsConfigSysId = createPreSourceBehavior(\"sn-workspace-header\", {\n\tname: WS_CONFIG_SYS_ID_KEY,\n\ttransform: data =>\n\t\tget(\n\t\t\tdata,\n\t\t\t[\n\t\t\t\t\"data\",\n\t\t\t\t\"GlideRecord_Query\",\n\t\t\t\t\"sys_aw_master_config\",\n\t\t\t\t\"_results\",\n\t\t\t\t0,\n\t\t\t\t\"sys_id\",\n\t\t\t\t\"value\"\n\t\t\t],\n\t\t\t\"\"\n\t\t)\n});\n\nexport const preUserPrefs = (function(userData) {\n\treturn {\n\t\tname: USER_PREF_KEY,\n\t\tinitialState: userData.initialState.preferences || [],\n\t\tgetPreSource(state, defVal = []) {\n\t\t\treturn get(state, `behaviors['${USER_PREF_KEY}']`, defVal);\n\t\t}\n\t};\n})(preUserData);\n","module.exports = __TECTONIC__$servicenow_behavior_focus_19_4_4;","export { default } from './sn-agent-assist-uib';\n","import { createCustomElement } from '@servicenow/ui-core';\nimport { actionMappers } from './actionMappers';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport view from './view';\nimport styles from './styles.scss';\n\n/**\n * Automatically searches for relevant resources when an agent is working on a record in a workspace.\n *\n * ```jsx\n * <sn-agent-assist-uib\n * \ttable={form.table}\n * \tsys-id={form.sysId}\n * \tfields={form.fields}\n * \tis-new-record={form.isNewRecord}\n * \tcxs-table-config={cxsTableConfig}\n * />\n * ```\n *\n * @seismicElement sn-agent-assist-uib\n * @summary Provides a list of search results that are relevant to a record.  \n */\nexport default createCustomElement('sn-agent-assist-uib', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tinitialState: {},\n\tproperties: {\n\t\t/**\n\t\t * The table name of the record that agent assist appears on.\n\t\t * @type {string}\n\t\t */\n\t\ttable: { default: '' },\n\t\t/**\n\t\t * The Sys ID of the record that agent assist appears on.\n\t\t * @type {string}\n\t\t */\n\t\tsysId: { default: '' },\n\t\t/**\n\t\t * An object that defines the fields of the record that agent assist appears on.\n\t\t * @type {object}\n\t\t */\n\t\tfields: { default: {} },\n\t\t/**\n\t\t * When true, the record is new.\n\t\t * @type {boolean}\n\t\t */\n\t\tisNewRecord: { default: false },\n\t\t/**\n\t\t * The Sys ID of contextual search table configuration.\n\t\t * @type {string}\n\t\t */\n\t\tcxsTableConfig: { default: '' }\n\t},\n\tactionHandlers: actionMappers,\n\tstyles\n});\n","import { externalActionMap, GFORM_INTERNAL_BATCH_ACTIONS } from '../consts';\nimport isArray from 'lodash/isArray';\n\nlet actionMappers = {};\n\nObject.keys(externalActionMap).forEach(e => {\n\tactionMappers[e] = {\n\t\teffect: ({ action, dispatch }) => {\n\t\t\tdispatch(externalActionMap[e], action.payload);\n\t\t},\n\t\tstopPropagation: true\n\t};\n});\n\nactionMappers[GFORM_INTERNAL_BATCH_ACTIONS] = {\n\teffect: ({\n\t\taction: {\n\t\t\tpayload: { actions }\n\t\t},\n\t\tdispatch\n\t}) => {\n\t\tif (isArray(actions)) {\n\t\t\tactions.forEach(e => {\n\t\t\t\tdispatch(externalActionMap[e.name], e.payload);\n\t\t\t});\n\t\t}\n\t},\n\tstopPropagation: true\n};\n\nexport { actionMappers };\n","module.exports = __TECTONIC__lodash_4_17_4[\"isArray\"];","import '../now-agent-assist';\nimport { t } from 'sn-translate';\nimport '@servicenow/now-empty-state';\n\nconst view = state => {\n\tconst { properties } = state;\n\tif (!properties.cxsTableConfig) {\n\t\t// Covers \"\", null and undefined\n\t\treturn (\n\t\t\t<now-empty-state\n\t\t\t\ttype=\"not-configured\"\n\t\t\t\theaderText={t('No Table Configuration')}\n\t\t\t\tbodyText={t('Please specify the Table Configuration')}\n\t\t\t/>\n\t\t);\n\t}\n\treturn <now-agent-assist {...properties} is-uib={true}></now-agent-assist>;\n};\n\nexport default view;\n","\n        var result = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/src/index.js??ref--6-2!../../node_modules/@tectonic/component-archetype-dev/node_modules/sass-loader/dist/cjs.js??ref--6-3!./styles.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}:host(sn-agent-assist-uib){display:block;width:100%;height:100%}\", \"\"]);\n\n// exports\n"],"sourceRoot":""}