{"version":3,"sources":["webpack://__TECTONIC__$servicenow_now_appointment_calendar/webpack/bootstrap","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/constants.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__$servicenow_ui_renderer_snabbdom\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/util/index.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__moment_timezone_0_5_5\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__sn_translate\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__$servicenow_now_button\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/index.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__$servicenow_ui_core\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/util/devUtil.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/body-views/view-manager.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/util/dateTimeUtil.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__lodash_4_17_15\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/header-view.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/body-views/index.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./node_modules/css-loader/lib/css-base.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/index.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/now-appointment-calendar.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__$servicenow_behavior_rtl_19_0_7\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/properties.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/util/formatterUtil.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/util/viewUtil.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/util/eventsUtil.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/view.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__$servicenow_now_heading\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__$servicenow_now_modal\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/action-handlers.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__$servicenow_ui_effect_update_state\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/body-views/column/index.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/body-views/column/column.scss?5744","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/body-views/column/column.scss","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/body-views/column/column-view.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/body-views/column/column-view-header.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/body-views/column/column-view-grid.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/body-views/column/column-view-footer.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/body-views/column/column-action-handlers.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/body-views/column/util.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/event-handlers.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/style.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/now-appointment-calendar.scss?3b70","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/now-appointment-calendar/now-appointment-calendar.scss","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__$servicenow_now_record_mini_calendar\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/sn-demo-now-appointment-calendar/index.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/sn-demo-now-appointment-calendar/demo-calendar.js","webpack://__TECTONIC__$servicenow_now_appointment_calendar/external \"__TECTONIC__$servicenow_now_dropdown\"","webpack://__TECTONIC__$servicenow_now_appointment_calendar/./src/sn-demo-now-appointment-calendar/eventsScript.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","INTERNAL_FORMAT","DATE","TIME","DATE_TIME","DATE_DISPLAY_FORMAT","TIME_DISPLAY_FORMAT","DATE_TIME_DISPLAY_FORMAT","ARIA_DATE_FORMAT","WEEK_DAYS","SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","DIRECTION","LTR","RTL","LEFT","RIGHT","VIEWS","WEEK","DAY","ACTION_PREFIX","ACTIONS","VIEW_UPDATED","CONTEXT_DATE_CHANGED","RANGE_UPDATED","INTERNAL_STATE_SET","EVENT_CLICKED","NOW_DROPDOWN_SELECTED_ITEMS_SET","SCHEDULE_APPOINTMENT","RESCHEDULE_APPOINTMENT","SCHEDULE_APPOINTMENT_FROM_MODEL","RESCHEDULE_APPOINTMENT_FROM_MODEL","NOW_MODAL_OPENED_SET","MODAL_CLOSED","EVENT_TYPES","AVAILABLE","UNAVAILABLE","SELECTED","KEYS","TAB","ENTER","UP","DOWN","ESC","EVENTS","MOUSE_CLICKED","KEY_DOWN","INTERNAL_DATE_TIME_REGEX","__TECTONIC__$servicenow_ui_renderer_snabbdom","__TECTONIC__moment_timezone_0_5_5","__TECTONIC__sn_translate","__TECTONIC__$servicenow_now_button","Constants","__TECTONIC__$servicenow_ui_core","isDebugMode","debug","assertDefined","v","_","isUndefined","Log","error","console","trace","measure","f","args","t1","performance","now","ret","apply","this","t2","info","messages","SNC","isDebug","window","registerViewRenderer","viewName","viewLabel","actionHandlers","styles","viewRenderer","renderer","fixedParams","defaultParams","ViewRenderers","ViewActionHandlers","forEach","ViewStyles","indexOf","push","setLocale","str2Moment","dateStr","tz","moment","anyToMoment","dateValue","props","timezone","toMoment","Date","clone","trim","test","Number","isInteger","utc","isTodayInView","startMoment","endMoment","todayDate","isBetween","evalTemplate","tmpl","state","properties","Function","momentObject","locale","__TECTONIC__lodash_4_17_15","CURRENT_SCHEDULED_SLOT","SELECT_NEXT_AVAILABLE","dispatch","todayMoment","showInModal","view","selectedEvents","getSelectedEvents","events","appTitle","appTitleCls","currentAppointmentCls","currentAppointmentLabel","currentAppointmentText","length","scheduledEvent","scheduledEventStart","start","scheduledEventEnd","end","isSame","format","timeFormat","dateDisplayFormat","dateTimeDisplayFormat","nextAvailableCls","nextAvailableLabel","nextAvailableText","keys","nextAvailableEvent","wrapperCls","toLowerCase","className","join","label","level","variant","size","config-aria","on-click","event","type","selectedEvent","contextDate","useSourceMap","list","toString","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","cssWithMappingToString","mediaQuery","alreadyImportedModules","id","createCustomElement","snabbdom","appointmentCalendarProps","appointmentCalendarView","eventHandlers","behaviors","rtlBehavior","dispatches","__TECTONIC__$servicenow_behavior_rtl_19_0_7","DefaultAriaConfig","ariaTitle","ariaBodyTitle","AppointmentCalendarProperties","default","reflect","schema","unstableParse","configAria","firstDayOfWeek","dateFormat","initialState","datePickerOpened","transformState","jsonParse","j","defaultJson","parse","e","jsonParseArray","parseEvents","filter","isValid","sort","e1","e2","getViewRenderer","params","viewManager","getViewSettings","getViewProvider","getEventsInDisplayRange","isAfter","isBefore","componentInitialized","renderBody","measuredRenderHeader","renderHeader","measuredRenderBody","scheduleActionDisabled","footerActionsList","scheduleFooterAction","disabled","clickActionType","createRef","slot","opened","header-label","footer-actions","aria-label","role","tabindex","__TECTONIC__$servicenow_now_heading","__TECTONIC__$servicenow_now_modal","AllActionHandlers","proxyViewCaller","onlyForView","coeffect","populateAllActionHandlers","action","handlers","ah","effect","runActionHandlers","actionName","context","coeffects","h","effects","HeaderActionHandlers","BodyActionHandlers","populateAllBodyActionHandlers","ActionHandlers","handleContextDateChange","contextMoment","newValue","oldValue","focusEvent","setTimeout","fromMoment","fromMS","valueOf","toMS","handleEventsChange","updateDateFormat","toUpperCase","ariaDateFormat","union","values","actionTypes","COMPONENT_BOOTSTRAPPED","COMPONENT_PROPERTY_CHANGED","a","interceptors","createUpdateStateEffect","payload","updateState","previousEvent","undefined","host","from","to","previousValue","actions","private","__TECTONIC__$servicenow_ui_effect_update_state","Styles","style","renderColumnView","numberOfDays","showHeader","numberOfEventsInEachRow","eventMargin","renderDayView","result","viewSettings","todayCol","getTodayColumn","eventsBucket","getEventsInView","renderGrid","renderColumnFooter","datePickerDate","language","reversed","dir","autofocus","onValueChange","getDayViewMiniCalendar","getDayFooterText","getSelectedAppointmentHtml","renderDayFooter","index","date","startOf","diff","headerMessage","year","month","isDisabled","TODAY","datePickerNavBtn","tooltip-content","icon-name","padding","bare","updateCurrentDate","on-keydown","keyEvent","which","stopPropagation","currentTarget","querySelector","focus","handleKeyDown","icon-end","ref","mouseEvent","toggleDatePicker","onOk","momentDate","subtract","add","headerColumns","cols","localeDate","getHeaderColumn","getHeaderColumns","columns","getColumn","getColumns","scrollbarWidth","display","hook-insert","vNode","nodeEl","elm","width","offsetWidth","clientWidth","NO_SLOTS_AVAILABLE","isToday","columnDateKey","columnEvents","rowUI","rows","numberOfRows","Math","ceil","slice","rowEvents","margin","cls","tabIndex","eventAriaLabel","updateSelectedEvent","on-focus","updateFocusEvent","preventDefault","gotoNextFocusEvent","getEvent","getRowEvents","getRow","getColumnEvents","getColumnHeader","eventObj","focusedEl","target","closest","filterEventsOnDate","dateMoment","eventObjList","ev","nextFocusEvent","allEventList","firstEvent","lastEvent","eventDateMoment","selectedEventIdx","eventList","findIndex","el","focusEventIdx","idx","shiftKey","getNextAvailableFocusEvent","getFooterTextHtml","getFooterBtnsHtml","SCHEDULE","RESCHEDULE","eventDuration","duration","humanize","eventDurationArr","split","unit","footerText","parseInt","charAt","isNaN","getFooterText","selectedSlotText","scheduleBtnClicked","calendarEl","selectedEl","btnDisabled","btnLabel","btnClass","on-keypress","startDay","calculateDateRange","startMS","endMS","endOf","day","EventHandlers","clickedInsideMiniCalendar","composedPath","path","getAttribute","classNames","closeDatePicker","__TECTONIC__$servicenow_now_record_mini_calendar","DemoAppointmentCalendarConfig","getEvents","getNextAvailableEvent","show","TIMEZONE","log","dropdown","footerAction","setDir","setView","document","height","fontFamily","items","panel-fit-props","placeholder","select","selected-items","manage-selected-items","append-to-payload","current-mode","date-format","time-format","first-day-of-week","context-date","next-available-event","app-title","show-in-modal","__TECTONIC__$servicenow_now_dropdown","generateEvents","today","minus1Date","minus2Date","minus4Date","plus1Date","plus2Date","plus4Date","plus10Date"],"mappings":"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","file":"now-appointment-calendar.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","export const INTERNAL_FORMAT = {\n\tDATE: 'YYYY-MM-DD',\n\tTIME: 'HH:mm:ss',\n\tDATE_TIME: 'YYYY-MM-DD HH:mm:ss',\n\tDATE_DISPLAY_FORMAT: 'MMMM DD, YYYY',\n\tTIME_DISPLAY_FORMAT: 'hh:mm A',\n\tDATE_TIME_DISPLAY_FORMAT: 'MMMM DD, YYYY, hh:mm A',\n\tARIA_DATE_FORMAT: 'dddd, MMMM Do YYYY'\n}\n\nexport const WEEK_DAYS = {\n\tSUNDAY: 0,\n\tMONDAY: 1,\n\tTUESDAY: 2,\n\tWEDNESDAY: 3,\n\tTHURSDAY: 4,\n\tFRIDAY: 5,\n\tSATURDAY: 6\n};\n\nexport const DIRECTION = {\n\tLTR: 'ltr',\n\tRTL: 'rtl',\n\tLEFT: 'left',\n\tRIGHT: 'right'\n};\n\nexport const VIEWS = {\n\tWEEK: 'WEEK',\n\tDAY: 'DAY'\n};\n\nconst ACTION_PREFIX = 'NOW_APPOINTMENT_CALENDAR#';\nexport const ACTIONS = {\n\tVIEW_UPDATED: `${ACTION_PREFIX}VIEW_UPDATED`,\n\tCONTEXT_DATE_CHANGED: `${ACTION_PREFIX}CONTEXT_DATE_CHANGED`,\n\tRANGE_UPDATED: `${ACTION_PREFIX}RANGE_UPDATED`,\n\tINTERNAL_STATE_SET:`${ACTION_PREFIX}INTERNAL_STATE_SET`,\n\tEVENT_CLICKED: `${ACTION_PREFIX}EVENT_CLICKED`,\n\tNOW_DROPDOWN_SELECTED_ITEMS_SET: `NOW_DROPDOWN#SELECTED_ITEMS_SET`,\n\tSCHEDULE_APPOINTMENT: `${ACTION_PREFIX}SCHEDULE_APPOINTMENT`,\n\tRESCHEDULE_APPOINTMENT: `${ACTION_PREFIX}RESCHEDULE_APPOINTMENT`,\n\tSCHEDULE_APPOINTMENT_FROM_MODEL: `${ACTION_PREFIX}SCHEDULE_APPOINTMENT_FROM_MODEL`,\n\tRESCHEDULE_APPOINTMENT_FROM_MODEL: `${ACTION_PREFIX}RESCHEDULE_APPOINTMENT_FROM_MODEL`,\n\tNOW_MODAL_OPENED_SET: `NOW_MODAL#OPENED_SET`,\n\tMODAL_CLOSED: `${ACTION_PREFIX}MODAL_CLOSED`\n};\n\nexport const EVENT_TYPES = {\n\tAVAILABLE: 'available',\n\tUNAVAILABLE: 'unavailable',\n\tSELECTED: 'selected'\n};\n\nexport const KEYS = {\n\tTAB: 9,\n\tENTER: 13,\n\tLEFT: 37,\n\tUP: 38,\n\tRIGHT: 39,\n\tDOWN: 40,\n\tESC: 27\n};\n\nexport const EVENTS  = {\n\tMOUSE_CLICKED: 'click',\n\tKEY_DOWN: 'keydown'\n};\n\nexport const INTERNAL_DATE_TIME_REGEX = /^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$/;\n","module.exports = __TECTONIC__$servicenow_ui_renderer_snabbdom;","export * from './dateTimeUtil';\nexport * from './devUtil';\nexport * from './formatterUtil';\nexport * from './viewUtil';\nexport * from './eventsUtil';\n","module.exports = __TECTONIC__moment_timezone_0_5_5;","module.exports = __TECTONIC__sn_translate;","module.exports = __TECTONIC__$servicenow_now_button;","import {ACTIONS, VIEWS, WEEK_DAYS, EVENT_TYPES, INTERNAL_FORMAT} from './constants';\nimport './now-appointment-calendar';\n\nexport const Constants = {\n        ACTIONS, VIEWS, WEEK_DAYS, EVENT_TYPES, INTERNAL_FORMAT\n};\n","module.exports = __TECTONIC__$servicenow_ui_core;","import _ from 'lodash';\n\nexport const Log = {\n\terror(...messages) {\n\t\tconsole.error(...messages); // eslint-disable-line no-console\n\t},\n\n\tinfo(...messages) {\n\t\tconsole.info(...messages); // eslint-disable-line no-console\n\t}\n};\n\nexport function isDebugMode() {\n\tconst {SNC:{isDebug}={}} = window;\n\treturn !!isDebug;\n}\n\nexport function debug() {\n\tif (isDebugMode())\n\t\tdebugger; // eslint-disable-line no-debugger\n}\n\nexport function assertDefined(v) {\n\tif (_.isUndefined(v)) {\n\t\tLog.error('Assertion failed. Value is not defined');\n\t\tif (isDebugMode())\n\t\t\tdebugger; // eslint-disable-line no-debugger\n\t\telse\n\t\t\tconsole.trace(); // eslint-disable-line no-console\n\t}\n}\n\nexport function measure(f) {\n\tif (isDebugMode())\n\t\treturn function measureProxy(...args) {\n\t\t\tconst t1 = performance.now();\n\t\t\tconst ret = f.apply(this, args);\n\t\t\tconst t2 = performance.now();\n\t\t\tLog.info('%cTime taken by \"' + f.name + '\": %c' + (t2-t1) + ' ms', 'color:green; font-style:italics;', 'color:red; font-weight:bold;');\n\t\t\treturn ret;\n\t\t};\n\telse\n\t\treturn f;\n}\n","\nexport const ViewActionHandlers = {};\nexport const ViewRenderers = {};\nexport const ViewStyles = [];\n\nexport function registerViewRenderer(viewName, viewLabel, {\n\tactionHandlers={},\n\tstyles=[],\n\tviewRenderer: {renderer, fixedParams = {}, defaultParams = {}}\n}) {\n\tViewRenderers[viewName] = {\n\t\trenderer: renderer,\n\t\tviewLabel,\n\t\tfixedParams,\n\t\tdefaultParams\n\t};\n\tViewActionHandlers[viewName] = actionHandlers;\n\tstyles.forEach(s => {\n\t\tif (ViewStyles.indexOf(s) < 0)\n\t\t\tViewStyles.push(s);\n\t});\n}\n","import moment from 'moment-timezone';\nimport {INTERNAL_FORMAT, INTERNAL_DATE_TIME_REGEX} from '../constants';\n\nexport function setLocale(momentObject, state) {\n\tmomentObject.locale(state.properties.locale);\n\treturn momentObject;\n}\n\nexport function str2Moment(dateStr, tz) {\n\treturn moment.tz(dateStr, INTERNAL_FORMAT.DATE_TIME, true, tz);\n}\n\nexport function anyToMoment(dateValue, props) {\n\tconst {timezone} = props;\n\tif (!dateValue) {\n\t\treturn toMoment(Date.now(), timezone).clone();\n\t}\n\tif (dateValue instanceof moment) {\n\t\treturn toMoment(dateValue, timezone).clone();\n\t}\n\tif(typeof dateValue === 'string') {\n\t\tdateValue = dateValue.trim();\n\t\tif(INTERNAL_DATE_TIME_REGEX.test(dateValue))\n\t\t\treturn moment.tz(dateValue, INTERNAL_FORMAT.DATE_TIME, true, timezone);\n\t\telse\n\t\t\treturn moment(dateValue).tz(timezone);\n\t}\n\tif(Number.isInteger(dateValue)) {\n\t\treturn moment.utc(dateValue).tz(timezone);\n\t}\n}\n\nexport function toMoment(d, tz) {\n\treturn moment.tz(d, tz);\n}\n\n/* *\n* Check if the start and end dates(moments) cover the current date(moment).\n*/\nexport function isTodayInView(startMoment, endMoment, todayDate) {\n\treturn todayDate.isBetween(startMoment, endMoment, null, '[]');\n}\n\n/**\n * Simplest possible template engine. The template here\n * is a pure JS code.\n * @param {String} tmpl JS code which is run with magic following available variables - props (properties Object), moment (moment JS object),\n * startMoment and endMoment. Start and end moment dates with locale correctly set. 'return' statement is auto added if not already there.\n * @param {*} state state object\n */\nexport function evalTemplate(tmpl, state) {\n\tif (!tmpl)\n\t\treturn '';\n\tif (tmpl.indexOf('return ') < 0)\n\t\ttmpl = `return ${tmpl};`;\n\tconst {properties: props} = state;\n\tlet f = new Function('props', 'moment', 'startMoment', 'endMoment', tmpl + '\\nreturn \\'\\';');\n\treturn f(props, moment, setLocale(moment(state.startMoment), state), setLocale(moment(state.endMoment), state));\n}\n","module.exports = __TECTONIC__lodash_4_17_15;","import '@servicenow/now-heading';\nimport '@servicenow/now-button';\nimport {t} from 'sn-translate';\nimport {ACTIONS, EVENT_TYPES, INTERNAL_FORMAT} from './constants';\nimport {toMoment, getSelectedEvents, str2Moment, setLocale} from './util';\n\nconst SCHEDULE_TITLE = t('Schedule');\nconst RESCHEDULE_TITLE = t('Reschedule');\nconst CURRENT_SCHEDULED_SLOT = t('Current scheduled slot');\nconst SELECT_NEXT_AVAILABLE = t('Select Next Available');\n\nfunction renderHeader(state, dispatch) {\n\tconst {properties: props, startMoment, endMoment, todayMoment} = state;\n\tconst {showInModal, view:viewName} = state.properties;\n\tif(!startMoment ||  !endMoment  || !todayMoment)\n\t\treturn '';\n\n\tconst selectedEvents = getSelectedEvents(state.events);\n\tlet appTitle = '', appTitleCls = 'no-appointment-heading';\n\t// Show application title only when present in the properties\n\tif (props.appTitle) {\n\t\tappTitle = props.appTitle;\n\t\tappTitleCls = 'appointment-heading';\n\t}\n\n\tlet currentAppointmentCls = 'no-current-appointment', currentAppointmentLabel = '', currentAppointmentText = '';\n\tif (selectedEvents.length > 0) {\n\t\tlet scheduledEvent = selectedEvents[0];\n\t\tcurrentAppointmentCls = 'current-appointment';\n\t\tcurrentAppointmentLabel = CURRENT_SCHEDULED_SLOT;\n\t\tconst scheduledEventStart = toMoment(scheduledEvent.start, props.timezone), scheduledEventEnd = toMoment(scheduledEvent.end, props.timezone);\n\t\tif (scheduledEventEnd.isSame(scheduledEventStart, 'date')) {\n\t\t\t// Same day\n\t\t\tcurrentAppointmentText = t('{0} - {1}, {2}. {3}', [\n\t\t\t\t\t\t\t\t\t\tsetLocale(scheduledEventStart.clone(), state).format(props.timeFormat),\n\t\t\t\t\t\t\t\t\t\tsetLocale(scheduledEventEnd.clone(), state).format(props.timeFormat),\n\t\t\t\t\t\t\t\t\t\tsetLocale(scheduledEventStart.clone(), state).format('ddd'),\n\t\t\t\t\t\t\t\t\t\tsetLocale(scheduledEventStart.clone(), state).format(state.dateDisplayFormat)\n\t\t\t\t\t\t\t\t\t]);\n\t\t} else {\n\t\t\tcurrentAppointmentText = t('{0} - {1}', [\n\t\t\t\t\t\t\t\t\t\tsetLocale(scheduledEventStart.clone(), state).format(state.dateTimeDisplayFormat),\n\t\t\t\t\t\t\t\t\t\tsetLocale(scheduledEventEnd.clone(), state).format(state.dateTimeDisplayFormat)\n\t\t\t\t\t\t\t\t\t]);\n\t\t}\n\t}\n\n\tlet nextAvailableCls = 'no-next-available', nextAvailableLabel = '', nextAvailableText = '';\n\tif (Object.keys(props.nextAvailableEvent).length > 0) {\n\t\tnextAvailableCls = 'next-available';\n\t\tnextAvailableLabel = SELECT_NEXT_AVAILABLE;\n\t\tnextAvailableText = setLocale(toMoment(props.nextAvailableEvent.start, props.timezone).clone(), state).format(state.dateTimeDisplayFormat);\n\t}\n\n\tconst wrapperCls = ['header-wrapper'];\n\twrapperCls.push(viewName.toLowerCase() + '-view');\n\tif (showInModal)\n\t\twrapperCls.push('in-modal');\n\tselectedEvents.length > 0 ? wrapperCls.push('reschedule') : wrapperCls.push('schedule');\n\n\treturn <div className={wrapperCls.join(' ')}>\n\t\t{showInModal ? null\n\t\t:\t<div className={appTitleCls}>\n\t\t\t\t<now-heading label={appTitle} level=\"2\" variant=\"header-secondary\"></now-heading>\n\t\t\t</div>\n\t\t}\n\t\t<div className={currentAppointmentCls}>\n\t\t\t<div>{currentAppointmentLabel}: <div className=\"current-appointment-time\">{currentAppointmentText}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div className={nextAvailableCls}>\n\t\t\t<span>{nextAvailableLabel}:<now-button-bare className=\"next-available-link\" label={nextAvailableText} size=\"md\" variant=\"secondary\"\n\t\t\t\tconfig-aria={{'aria-label': t('Select Next Available {0}', [nextAvailableText])}}\n\t\t\t\ton-click={() => {\n\t\t\t\t\tlet event = state.properties.nextAvailableEvent;\n\t\t\t\t\tevent.startMoment = str2Moment(event.start, props.timezone);\n\t\t\t\t\tevent.endMoment = str2Moment(event.end, props.timezone);\n\t\t\t\t\tif (event.type !== EVENT_TYPES.UNAVAILABLE) {\n\t\t\t\t\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {selectedEvent:event});\n\t\t\t\t\t}\n\t\t\t\t\tdispatch('PROPERTIES_SET', { contextDate: event.startMoment})}}>\n\t\t\t\t</now-button-bare>\n\t\t\t</span>\n\t\t</div>\n\t</div>;\n}\n\nexport default renderHeader;\n","import './column';\n\nexport * from './view-manager';\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","import {Constants} from './now-appointment-calendar';\nexport {Constants};\n","import {createCustomElement} from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport rtlBehavior from '@servicenow/behavior-rtl';\nimport appointmentCalendarProps from './properties';\nimport appointmentCalendarView from './view';\nimport actionHandlers from './action-handlers';\nimport eventHandlers from './event-handlers';\nimport styles from './style';\nimport '@servicenow/now-record-mini-calendar';\n\n/* SAMPLE\n\n {\n \tevents: [{\n\t\t start: `2019-08-04 08:00:00`,\n\t\t end: `2019-08-04 10:00:00`,\n\t\t type: 'available'\n\t }]\n */\n\n\n/**\n * A Calendar for scheduling and rescheduling pre-defined appointment slots.\n *\n *\n * ```jsx\n *\t<now-appointment-calendar\n *\t\tdir={props.dir}\n *\t\ttime-format={props.timeFormat}\n *\t\tlocale={props.locale}\n *\t\tfirst-day-of-week={Constants.WEEK_DAYS.SUNDAY}\n *\t\tview={props.view} context-date={props.contextDate}\n *\t\ttimezone={TIMEZONE}\n *\t\tevents={props.events}\n *\t\tnext-available-event={props.nextAvailableEvent}>\n *\t</now-appointment-calendar>\n * ```\n *\n * Slots:\n *\n * - Provide slot content for `left-footer` to replace the timezone text below the calendar.\n * - Provide slot content for `right-footer-btns` to replace the Schedule / Re-Schedule button with your own. This is available only when the property `showInModal` is false.\n *\n * @seismicElement now-appointment-calendar\n * @summary A Calendar for scheduling and rescheduling pre-defined appointment slots.\n */\ncreateCustomElement('now-appointment-calendar', {\n\trenderer: {type: snabbdom},\n\t...appointmentCalendarProps,\n\t...appointmentCalendarView,\n\t...actionHandlers,\n\t...eventHandlers,\n\t...styles,\n\tbehaviors: [rtlBehavior],\n\tdispatches: {\n\t\t/**\n\t\t * Dispatched when the current selected date changes on the calendar. This can be via explicit user selection or via navigation (next, previous, today) etc.\n\t\t *\n\t\t *\n\t\t * Payload:\n\t\t *\n\t\t * - `fromMoment - Moment` - Old selection date, as Moment object\n\t\t * - `fromMS - number` - Old selection date, in UTC milliseconds\n\t\t * - `toMoment - Moment` - New selection date, as Moment object\n\t\t * - `toMS - number` - New selection date, in UTC milliseconds\n\t\t * @type {{fromMoment: Moment, toMoment: Moment, fromMS: number, toMS: number}}\n\t\t */\n\t\t'NOW_APPOINTMENT_CALENDAR#CONTEXT_DATE_CHANGED' : {},\n\t\t/**\n\t\t * Dispatched when the range of dates visible on Calendar changes.\n\t\t *\n\t\t *\n\t\t * Payload:\n\t\t *\n\t\t * - `startMoment - Moment` - Start date seen in view, as Moment object.\n\t\t * - `endMoment - Moment` - End date seen in view, as Moment object.\n\t\t * - `startMS - number` - Start date seen in view, in UTC milliseconds.\n\t\t * - `endMS - number` - End date seen in view, in UTC milliseconds.\n\t\t *\n\t\t * @type {{startMoment: Moment, endMoment: Moment, startMS: number, endMS: number}}\n\t\t */\n\t\t'NOW_APPOINTMENT_CALENDAR#RANGE_UPDATED' : {},\n\t\t/**\n\t\t* Dispatched when an appointment event is clicked\n\t\t*\n\t\t* Payload:\n\t\t*\n\t\t* - `event - Object` - Event object which is clicked.\n\t\t*\n\t\t* @type{{event: Object}}\n\t\t*/\n\t\t'NOW_APPOINTMENT_CALENDAR#EVENT_CLICKED' : {},\n\t\t/**\n\t\t* Dispatched when an appointment event is scheduled\n\t\t*\n\t\t* Payload:\n\t\t*\n\t\t* - `event - Object` - Selected event object.\n\t\t*\n\t\t* @type{{event: Object}}\n\t\t*/\n\t\t'NOW_APPOINTMENT_CALENDAR#SCHEDULE_APPOINTMENT' : {},\n\t\t/**\n\t\t*\n\t\t* Dispatched when an appointment event is rescheduled\n\t\t*\n\t\t* Payload:\n\t\t*\n\t\t* - `previousEvent - Object` - Previous event object which was selected.\n\t\t* - `event - Object` - Selected event object.\n\t\t*\n\t\t* @type{{previousEvent: Object, event: Object}}\n\t\t*/\n\t\t'NOW_APPOINTMENT_CALENDAR#RESCHEDULE_APPOINTMENT': {}\n\t}\n});\n","module.exports = __TECTONIC__$servicenow_behavior_rtl_19_0_7;","import {WEEK_DAYS, VIEWS, DEFAULT_TEMPLATES, INTERNAL_FORMAT} from './constants';\nimport {jsonParse} from  './util';\nimport {t} from 'sn-translate';\n\nconst DefaultAriaConfig = {\n\tariaTitle: t('Appointment Calendar Widget'),\n\tariaBodyTitle: t('Appointment Calendar Widget Main Area'),\n};\n\nconst AppointmentCalendarProperties  = {\n\tappTitle: {\n\t\tdefault: '',\n\t\treflect: true,\n\t\tschema: { type: \"string\" }\n\t},\n\t/**\n\t * @type {Array<{start: string|number, end: string|number, type: string}>}\n\t */\n\tevents: {\n\t\tdefault: [],\n\t\tunstableParse: true,\n\t\t\"schema\": {\n\t\t\t\"type\" : \"array\",\n\t\t\t\"items\" : {\n\t\t\t\t\"type\" : \"object\",\n\t\t\t\t\"properties\" :{\n\t\t\t\t\t\"start\" :{\n\t\t\t\t\t\t\"anyOf\":[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"type\" : \"string\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"type\" : \"number\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t\"end\" : {\n\t\t\t\t\t\t\"anyOf\":[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"type\" : \"string\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"type\" : \"number\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t\"type\" :{\n\t\t\t\t\t\t\"type\" : \"string\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * @type {{start: string|number, end: string|number, type: string}}\n\t */\n\tnextAvailableEvent: {\n\t\tdefault: {},\n\t\t\"schema\": {\n\t\t\t\"type\": \"object\",\n\t\t\t\"properties\" : {\n\t\t\t\t\"start\" :{\n\t\t\t\t\t\"anyOf\":[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"type\" : \"string\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"type\" : \"number\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"end\" : {\n\t\t\t\t\t\"anyOf\":[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"type\" : \"string\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"type\" : \"number\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"type\" :{\n\t\t\t\t\t\"type\" : \"string\"\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\t\tunstableParse: true\n\t},\n\t/**\n\t * @type {string}\n\t */\n\ttimezone: {\n\t\tdefault: 'GMT',\n\t\tschema: {\n\t\t\ttype: 'string'\n\t\t},\n\t\treflect: true\n\t},\n\t/**\n\t * @type {string}\n\t */\n\tlocale: {\n\t\tdefault: 'en',\n\t\tschema: {\n\t\t\ttype: 'string'\n\t\t},\n\t\treflect: true,\n\t},\n\t/**\n\t * @type {string}\n\t */\n\tview: {\n\t\tdefault: VIEWS.WEEK,\n\t\tschema: {\n\t\t\ttype: 'string'\n\t\t},\n\t\treflect: true\n\t},\n\t/**\n\t * @type {string}\n\t */\n\tcontextDate: {\n\t\tschema: {\n\t\t\ttype: 'string'\n\t\t},\n\t\treflect: true\n\t},\n\t/**\n\t * @type {string}\n\t */\n\tconfigAria: {\n\t\tdefault: {},\n\t\t\"schema\": {\n\t\t\t\"type\": \"object\",\n\t\t\t\"properties\" : {\n\t\t\t\t\"ariaTitle\" :{\n\t\t\t\t\t\"type\" : \"string\"\n\t\t\t\t},\n\t\t\t\t\"ariaBodyTitle\" : {\n\t\t\t\t\t\"type\" : \"string\"\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tunstableParse: true\n\t},\n\t/**\n\t * @type {string}\n\t */\n\tfirstDayOfWeek: {// Integer 0-Sunday,1-Monday,....6-Saturday\n\t\tdefault: WEEK_DAYS.SUNDAY,\n\t\tschema: {\n\t\t\ttype: 'number'\n\t\t}\n\t},\n\t/**\n\t * @type {string}\n\t */\n\tdateFormat: {\n\t\tdefault: INTERNAL_FORMAT.DATE,\n\t\tschema: {\n\t\t\ttype: 'string'\n\t\t}\n\t},\n\t/**\n\t * @type {string}\n\t */\n\ttimeFormat: {\n\t\tdefault: INTERNAL_FORMAT.TIME_DISPLAY_FORMAT,\n\t\tschema: {\n\t\t\ttype: 'string'\n\t\t}\n\t},\n\t/**\n\t * @type {boolean}\n\t */\n\tshowInModal: {\n\t\tdefault: false,\n\t\tschema: {\n\t\t\ttype: 'boolean'\n\t\t},\n\t\treflect: true\n\t}\n};\n\nexport default {\n\tproperties: AppointmentCalendarProperties,\n\tinitialState: {\n\t\tdatePickerOpened: false\n\t},\n\ttransformState(state) {\n\t\tconst {properties:props} = state;\n\t\treturn {\n\t\t\t...state,\n\t\t\tproperties: {\n\t\t\t\t...props,\n\t\t\t\tconfigAria: jsonParse(props.configAria, DefaultAriaConfig)\n\t\t\t}\n\t\t};\n\t}\n};\n","import {str2Moment} from './dateTimeUtil';\nimport {Log} from './devUtil';\nimport {INTERNAL_DATE_TIME_REGEX, INTERNAL_FORMAT} from \"../constants\";\nimport moment from \"moment-timezone\";\n\nexport function jsonParse(j, defaultJson) {\n\tif (typeof j === 'string')\n\t\ttry {\n\t\t\tj = JSON.parse(j);\n\t\t} catch(e) {\n\t\t\tLog.error('Failed to parse JSON: ', j, e);\n\t\t\tj = {};\n\t\t}\n\n\tif (!j)\n\t\tj = {};\n\n\treturn defaultJson? {...defaultJson, ...j} : j;\n}\n\nexport function jsonParseArray(j) {\n\tif (typeof j === 'string') {\n\t\tif (j.indexOf('[') === 0)\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(j);\n\t\t\t} catch(e) {\n\t\t\t\tLog.error('Failed to parse JSON: ', j, e);\n\t\t\t}\n\t\telse\n\t\t\tLog.error('Failed to parse JSON. Invalid array JSON: ', j);\n\t} else if (j)\n\t\treturn j;\n\treturn [];\n}\n\nfunction toMoment(dateValue, timezone) {\n\tif(Number.isInteger(dateValue)) {\n\t\treturn moment.utc(dateValue).tz(timezone);\n\t}\n\tif(typeof dateValue === 'string') {\n\t\tdateValue = dateValue.trim();\n\t\tif(INTERNAL_DATE_TIME_REGEX.test(dateValue))\n\t\t\treturn moment.tz(dateValue, INTERNAL_FORMAT.DATE_TIME, true, timezone);\n\t\telse\n\t\t\treturn moment(dateValue).tz(timezone);\n\t}\n\tLog.error('Invalid date');\n}\n\nexport function parseEvents(events, timezone) {\n\n\tconst filteredEvents =  jsonParseArray(events).map(e => {\n\t\treturn {...e, startMoment:toMoment(e.start, timezone), endMoment:toMoment(e.end, timezone)};\n\t}).filter(e => e.startMoment.isValid() && e.endMoment.isValid());\n\n\treturn filteredEvents.sort((e1, e2) => e1.startMoment - e2.startMoment);\n}\n","import {Log, assertDefined, debug} from './devUtil';\nimport * as viewManager from '../body-views/view-manager';\n\nexport function getViewRenderer(state, params = {}) {\n\tconst viewName = state.properties.view;\n\tlet r = viewManager.ViewRenderers[viewName];\n\tif (r) {\n\t\treturn r.renderer.bind(null, {...r.defaultParams, ...params, ...r.fixedParams});\n\t} else {\n\t\tLog.error('Invalid view name provided: ', viewName);\n\t\t// This indicates programming error in this or parent component\n\t\tdebug();\n\t}\n}\n\nexport function getViewSettings(state) {\n\tlet viewName = state.properties.view;\n\tlet r = viewManager.ViewRenderers[viewName];\n\tif (r) {\n\t\treturn {...r.defaultParams, ...r.fixedParams, viewLabel:r.viewLabel};\n\t} else {\n\t\tLog.error('Invalid view name provided: ', viewName);\n\t\t// This indicates programming error in this or parent component\n\t\tdebug();\n\t}\n}\n\nexport function getViewProvider(state) {\n\tlet viewName = state.properties.view;\n\tlet r = viewManager.ViewRenderers[viewName];\n\tif (r) {\n\t\treturn viewName;\n\t} else {\n\t\tLog.error('Invalid view name provided: ', viewName);\n\t\t// This indicates programming error in this or parent component\n\t\tdebug();\n\t}\n}\n","import {EVENT_TYPES} from '../constants';\n\nexport function getEventsInDisplayRange(state) {\n\tif (!state.events || !state.startMoment || !state.endMoment)\n\t\treturn [];\n\n\treturn state.events.filter((e) => {\n\t\treturn !(e.startMoment.isAfter(state.endMoment) || e.endMoment.isBefore(state.startMoment) || e.endMoment.isBefore(e.startMoment));\n\t});\n}\n\nexport function getSelectedEvents(events) {\n\tif (!events)\n\t\treturn [];\n\n\treturn events.filter((e) => {\n\t\treturn e.type === EVENT_TYPES.SELECTED\n\t});\n}\n","import renderHeader from './header-view';\nimport '@servicenow/now-modal';\nimport {createRef} from '@servicenow/ui-renderer-snabbdom';\nimport {t} from 'sn-translate';\nimport {Log, isDebugMode, getViewRenderer, measure, getSelectedEvents} from './util';\nimport {ACTIONS} from './constants';\n\nfunction view(state, dispatch) {\n\tconst {properties:props} = state;\n\tconst selectedEvents = getSelectedEvents(state.events);\n\tconst {showInModal, view:viewName} = props;\n\n\tif (!state.componentInitialized)\n\t\treturn <div></div>;\n\n\tconst renderBody = getViewRenderer(state);\n\tif (!renderBody) {\n\t\tLog.error('Bad view name provided: ', viewName);\n\t\tif (isDebugMode())\n\t\t\tdebugger;\n\t\treturn <div></div>;\n\t}\n\n\tconst measuredRenderHeader = measure(renderHeader);\n\tconst measuredRenderBody = measure(renderBody);\n\t\n\tlet footerActionsList = [];\n\tlet scheduleFooterAction = {}, scheduleActionDisabled;\n\tscheduleFooterAction.label = selectedEvents.length > 0 ? t('Reschedule') : t('Schedule');\n\tscheduleFooterAction.variant = \"primary\";\n\tif (selectedEvents.length > 0) {\n\t\tif (state.selectedEvent && selectedEvents[0].start === state.selectedEvent.start)\n\t\t\tscheduleActionDisabled = true;\n\t} else {\n\t\tscheduleActionDisabled = state.selectedEvent ? false : true;\n\t}\n\tscheduleFooterAction.disabled = scheduleActionDisabled;\n\tscheduleFooterAction.clickActionType = selectedEvents.length > 0 ? ACTIONS.RESCHEDULE_APPOINTMENT_FROM_MODEL : ACTIONS.SCHEDULE_APPOINTMENT_FROM_MODEL;\n\tscheduleFooterAction.event = state.selectedEvent;\n\tfooterActionsList.push(scheduleFooterAction);\n\n\tlet datePickerRef = createRef();\n\treturn (\n\t\t<div>\n\t\t\t{showInModal ? \n\t\t\t\t<div slot>\n\t\t\t\t\t<now-modal\n\t\t\t\t\t\topened={showInModal}\n\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\theader-label={props.appTitle}\n\t\t\t\t\t\tfooter-actions={footerActionsList}>\n\t\t\t\t\t\t<section className=\"sn-appointment-calendar-core\" aria-label={props.configAria.ariaTitle} role=\"application\">\n\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t{measuredRenderHeader(state, dispatch)}\n\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t<section aria-label={props.configAria.ariaBodyTitle}>\n\t\t\t\t\t\t\t\t{measuredRenderBody(state, dispatch)}\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</now-modal>\n\t\t\t\t</div>\n\t\t\t: <section className=\"sn-appointment-calendar-core\" tabindex=\"0\" aria-label={props.configAria.ariaTitle} role=\"application\">\n\t\t\t\t\t<header>\n\t\t\t\t\t\t{measuredRenderHeader(state, dispatch)}\n\t\t\t\t\t</header>\n\t\t\t\t\t<section aria-label={props.configAria.ariaBodyTitle}>\n\t\t\t\t\t\t{measuredRenderBody(state, dispatch)}\n\t\t\t\t\t</section>\n\t\t\t\t</section>\n\t\t\t}\n\t\t</div>\n\t);\n}\n\nexport default {\n\tview\n};\n","module.exports = __TECTONIC__$servicenow_now_heading;","module.exports = __TECTONIC__$servicenow_now_modal;","import _ from 'lodash';\nimport {createUpdateStateEffect} from '@servicenow/ui-effect-update-state';\nimport {actionTypes} from '@servicenow/ui-core';\nimport {ACTIONS, INTERNAL_FORMAT} from './constants';\nimport {ActionHandlers as HeaderActionHandlers} from './header-view';\nimport {ViewActionHandlers as BodyActionHandlers} from './body-views';\nimport {parseEvents, toMoment, Log, getViewProvider, isDebugMode, getSelectedEvents, anyToMoment} from  './util';\n\n/**\n * This module provides the actionHandlers configuration and has little magic\n * up its sleeve. It is responsible to pull action handlers from various sources\n * like the header view and body views. This way action handler codes can co-exist\n * with the views where they are most relevant. For body views specifically it ensures\n * that the action handlers registered by them are only run when the respective\n * view is active.\n */\n\nconst AllActionHandlers = {};\n\nfunction proxyViewCaller(f, onlyForView, ...args) {\n\tconst coeffect = args[args.length - 1];\n\tconst viewProvider = getViewProvider(coeffect.state);\n\tif (viewProvider === onlyForView)\n\t\treturn f.apply(this, args);\n}\n\nfunction populateAllActionHandlers(actionHandlers, onlyForView) {\n\tfor (let action in actionHandlers) {\n\t\tif (action === ACTIONS.INTERNAL_STATE_SET) {\n\t\t\tLog.error(`Cannot register listeners for ${ACTIONS.INTERNAL_STATE_SET} action`);\n\t\t\treturn;\n\t\t}\n\t\tlet handlers = AllActionHandlers[action];\n\t\tif (!handlers) {\n\t\t\thandlers = [];\n\t\t\tAllActionHandlers[action] = handlers;\n\t\t}\n\t\tlet ah = actionHandlers[action];\n\t\tif (onlyForView) {\n\t\t\tif (typeof ah === 'function') {\n\t\t\t\tah = {\n\t\t\t\t\targs: [],\n\t\t\t\t\teffect: proxyViewCaller.bind(null, ah, onlyForView)\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tah = {\n\t\t\t\t\t...ah,\n\t\t\t\t\teffect: proxyViewCaller.bind(null, ah.effect, onlyForView)\n\t\t\t\t};\n\t\t\t}\n\t\t\thandlers.push(ah);\n\t\t} else {\n\t\t\tif (typeof ah === 'function')\n\t\t\t\tah = {\n\t\t\t\t\targs: [],\n\t\t\t\t\teffect: ah\n\t\t\t\t};\n\t\t\thandlers.push(ah);\n\t\t}\n\t}\n}\npopulateAllActionHandlers(HeaderActionHandlers, false);\n\nfunction populateAllBodyActionHandlers() {\n\tfor (let viewName in BodyActionHandlers) {\n\t\tlet actionHandlers = BodyActionHandlers[viewName];\n\t\tif (actionHandlers) {\n\t\t\tpopulateAllActionHandlers(actionHandlers, viewName);\n\t\t}\n\t}\n}\npopulateAllBodyActionHandlers();\n\nfunction runActionHandlers(actionName, context) {\n\tif (isDebugMode())\n\t\tLog.info('Action:', actionName, 'with coeffect:', context.coeffects);\n\tlet handlers = AllActionHandlers[actionName]||[];\n\thandlers = handlers.map(h => {\n\t\treturn {effect:h.effect, args:[...h.args, context.coeffects]};\n\t});\n\treturn {\n\t\t...context,\n\t\teffects: [\n\t\t\t//...context.effects, We do not run the main effect as it is always noop in this case\n\t\t\t...handlers\n\t\t]\n\t};\n}\n\nfunction createActionHandlerRunner(actionName) {\n\treturn {\n\t\teffect: function noop() { /* No op main effect */ },\n\t\targs: [],\n\t\tinterceptors: [runActionHandlers.bind(null, actionName)]\n\t};\n}\n\nconst ActionHandlers = {};\n_.union(Object.values(ACTIONS), [actionTypes.COMPONENT_BOOTSTRAPPED, actionTypes.COMPONENT_PROPERTY_CHANGED])\n\t.forEach(a => { ActionHandlers[a] = createActionHandlerRunner(a); });\n\n/********************** */\n/* Core Action Handlers */\n/********************** */\n\nActionHandlers[ACTIONS.INTERNAL_STATE_SET] = createUpdateStateEffect((state, action) => {\n\tif (!action.payload)\n\t\treturn;\n\treturn {\n\t\t...state,\n\t\t...action.payload\n\t};\n});\n\nActionHandlers[ACTIONS.NOW_MODAL_OPENED_SET] = ({action, dispatch, state}) => {\n\tif (!action.payload.value) {\n\t\tif (state.datePickerOpened)\n\t\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {datePickerOpened: false});\n\t\telse\n\t\t\tdispatch(ACTIONS.MODAL_CLOSED);\n\t} else {\n\t\tdispatch(ACTIONS.MODAL_CLOSED);\n\t}\n};\nActionHandlers[ACTIONS.RESCHEDULE_APPOINTMENT_FROM_MODEL] = function({action, state, dispatch, updateState}) {\n\t/**\n\t * @type {Array}\n\t */\n\tconst selectedEvents = getSelectedEvents(state.events);\n\tconst previousEvent = selectedEvents.length > 0? selectedEvents[0]: undefined;\n\tdispatch(ACTIONS.RESCHEDULE_APPOINTMENT, {previousEvent, event: state.selectedEvent, ...action.payload});\n};\n\nActionHandlers[ACTIONS.SCHEDULE_APPOINTMENT_FROM_MODEL] = function({action, state, dispatch, updateState}) {\n\t/**\n\t * @type {Array}\n\t */\n//\tconst selectedEvents = getSelectedEvents(state.events);\n//\tconst previousEvent = selectedEvents.length > 0? selectedEvents[0]: undefined;\n\tdispatch(ACTIONS.SCHEDULE_APPOINTMENT, {event: state.selectedEvent, ...action.payload});\n}\n/********************** */\n/* Base Action Handlers */\n/********************** */\n\nfunction handleContextDateChange(value, state, dispatch) {\n\tconst {properties:props} = state;\n\tif (value || (!value  && !state.contextMoment)) {\n\t\tlet newValue = anyToMoment(value, props);\n\t\tlet oldValue = state.contextMoment ? state.contextMoment.clone(): state.contextMoment;\n\t\t// If new value is empty but contextMoment is already set then ignore it  to retain old moment.\n\t\t// Clear the focus event when contextDate is changed\n\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {contextMoment: newValue, focusEvent: null});\n\t\t//This is in setTimeout so as to give system a chance to render with new value.\n\t\tsetTimeout(() => dispatch(ACTIONS.CONTEXT_DATE_CHANGED, {fromMoment:oldValue, toMoment:newValue, fromMS: oldValue ? oldValue.valueOf() : oldValue, toMS: newValue.valueOf()}), 1);\n\t}\n}\n\nfunction handleEventsChange(value, state, dispatch) {\n\tconst {properties:props} = state;\n\tconst events = parseEvents(value, props.timezone);\n\tdispatch(ACTIONS.INTERNAL_STATE_SET, {events});\n\n\tconst selectedEvents = getSelectedEvents(events);\n\tif (selectedEvents.length > 0)\n\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {selectedEvent: selectedEvents[0]});\n}\n\nfunction updateDateFormat(state, dispatch) {\n\tconst {properties: props} = state;\n\tconst {dateFormat} = props;\n\tif (dateFormat.indexOf('MM') > dateFormat.toUpperCase().indexOf('DD')) {\n\t\tINTERNAL_FORMAT.ARIA_DATE_FORMAT = 'dddd, Do MMMM YYYY';\n\t\tINTERNAL_FORMAT.DATE_DISPLAY_FORMAT = 'DD MMMM, YYYY';\n\t\tINTERNAL_FORMAT.DATE_TIME_DISPLAY_FORMAT = 'DD MMMM, YYYY, '+ state.properties.timeFormat;\n\t} else {\n\t\tINTERNAL_FORMAT.DATE_TIME_DISPLAY_FORMAT = 'MMMM DD, YYYY, '+ state.properties.timeFormat;\n\t}\n\tdispatch(ACTIONS.INTERNAL_STATE_SET, {ariaDateFormat: INTERNAL_FORMAT.ARIA_DATE_FORMAT, dateDisplayFormat: INTERNAL_FORMAT.DATE_DISPLAY_FORMAT,dateTimeDisplayFormat: INTERNAL_FORMAT.DATE_TIME_DISPLAY_FORMAT});\n}\n\nconst BaseActionHandlers = {\n\t[actionTypes.COMPONENT_BOOTSTRAPPED]: ({state, dispatch, action:{payload:{host}}}) => {\n\t\tLog.info('Bootstrapped', host);\n\n\t\tconst {properties:props} = state;\n\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {componentInitialized:true});\n\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {todayMoment: toMoment(Date.now(), props.timezone)});\n\t\tif (!props.contextDate) {\n\t\t\tconst contextDate = toMoment(Date.now(), props.timezone);\n\t\t\tdispatch('PROPERTIES_SET', {contextDate});\n\t\t}\n\t\t//This is in setTimeout so as to give system a chance to render with new value.\n\t\t//On first render when the components props are initially set, their change listeners are triggered\n\t\t//we explicitly trigger them from here.\n\t\tsetTimeout(() => {\n\t\t\thandleContextDateChange(props.contextDate, state, dispatch);\n\t\t\thandleEventsChange(props.events, state, dispatch);\n\t\t\tdispatch(ACTIONS.VIEW_UPDATED, {from:null, to:props.view});\n\n\t\t\tupdateDateFormat(state, dispatch);\n\t\t}, 1);\n\t},\n\t[actionTypes.COMPONENT_PROPERTY_CHANGED]: ({state, dispatch, action:{payload:{name, previousValue, value}}}) => {\n\t\tif (isDebugMode())\n\t\t\tLog.info('Property changed', name, 'from value', previousValue, 'to value', value);\n\t\tif (name === 'contextDate') {\n\t\t\thandleContextDateChange(value, state, dispatch);\n\t\t} else if (name === 'view') {\n\t\t\tsetTimeout(() => dispatch(ACTIONS.VIEW_UPDATED, {from:previousValue, to:value}), 1);\n\t\t\thandleContextDateChange(state.properties.contextDate, state, dispatch);\n\t\t} else if (name === 'events') {\n\t\t\thandleEventsChange(value, state, dispatch);\n\t\t} else if (name === 'dateFormat' || name === 'timeFormat') {\n\t\t\tupdateDateFormat(state, dispatch);\n\t\t}\n\t}\n};\npopulateAllActionHandlers(BaseActionHandlers, false);\n\nexport default {\n\tactions: {\n\t\t[ACTIONS.INTERNAL_STATE_SET]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[ACTIONS.VIEW_UPDATED]: {\n\t\t\tprivate: true\n\t\t},\n\t\t[ACTIONS.RESCHEDULE_APPOINTMENT_FROM_MODEL]: {\n\t\t\tprivate: true\n\t\t},[ACTIONS.SCHEDULE_APPOINTMENT_FROM_MODEL]: {\n\t\t\tprivate: true\n\t\t}\n\t},\n\tactionHandlers: ActionHandlers\n};\n","module.exports = __TECTONIC__$servicenow_ui_effect_update_state;","import {t} from 'sn-translate';\nimport {registerViewRenderer} from '../view-manager';\nimport {VIEWS} from '../../constants';\nimport style from './column.scss';\nimport {renderColumnView, renderDayView} from './column-view';\nimport actionHandlers from './column-action-handlers';\n\nconst Styles = [style];\n\nregisterViewRenderer(VIEWS.WEEK, t('Week'), {\n\tactionHandlers,\n\tstyles:Styles,\n\tviewRenderer: {\n\t\trenderer:renderColumnView,\n\t\tfixedParams:{numberOfDays:7},\n\t\tdefaultParams:{showHeader: true, numberOfEventsInEachRow: 1, eventMargin: 5}\n\t}\n});\nregisterViewRenderer(VIEWS.DAY, t('Day'), {\n\tactionHandlers,\n\tstyles:Styles,\n\tviewRenderer: {\n\t\trenderer:renderDayView,\n\t\tfixedParams:{numberOfDays:1},\n\t\tdefaultParams:{showHeader: false, numberOfEventsInEachRow: 5, eventMargin: 2}\n\t}\n});\n","\n        var result = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./column.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"*{box-sizing:border-box}.column-day-view-wrapper{padding-top:1rem}.column-day-view-wrapper.in-modal.day-view.reschedule{padding-top:.75rem!important}.column-day-view-wrapper .day-view-container{display:table;font-family:SourceSansPro;height:calc(100% - 1rem);overflow:hidden}.column-day-view-wrapper .day-view-container .column-mini-calendar-text{display:table-cell;vertical-align:top}:host(:not([dir=rtl])) .column-day-view-wrapper .day-view-container .column-mini-calendar-text,:root:not([dir=rtl]) .column-day-view-wrapper .day-view-container .column-mini-calendar-text{padding-right:1.5rem}:host([dir=rtl]) .column-day-view-wrapper .day-view-container .column-mini-calendar-text,:root[dir=rtl] .column-day-view-wrapper .day-view-container .column-mini-calendar-text{padding-left:1.5rem}.column-day-view-wrapper .day-view-container .column-view{display:table-cell}.column-day-view-wrapper .day-view-container .column-view .body-wrapper,.column-day-view-wrapper .day-view-container .column-view .body-wrapper .body-grid{height:297px!important}.column-day-view-wrapper .day-view-container .column-view .body-wrapper .body-grid .column-events-wrapper{min-width:220px}.column-day-view-wrapper .day-view-container .column-view .body-wrapper .body-grid .column-events-wrapper.no-events-wrapper{height:100%!important}.column-day-view-wrapper .day-view-container .column-view .body-wrapper .body-grid .column-events-wrapper .no-events{height:100%;vertical-align:middle;display:flex;align-items:center;justify-content:center;padding:0!important}.column-view-wrapper.in-modal.week-view.reschedule .column-view-body .body-wrapper{height:224px!important}.column-view-wrapper.in-modal.week-view.reschedule .column-view-body .body-wrapper .body-grid{height:169px!important}.column-view-header{padding-top:.5rem;padding-bottom:1rem}.column-view-header .nav-btn:focus::-moz-focus-inner,.column-view-header .next:focus::-moz-focus-inner,.column-view-header .prev:focus::-moz-focus-inner,.column-view-header .today:focus::-moz-focus-inner{border-style:none}.column-view-header .nav-btn:focus:focus,.column-view-header .next:focus:focus,.column-view-header .prev:focus:focus,.column-view-header .today:focus:focus{box-shadow:inset 0 0 0 2px RGB(var(--now-color--focus-ring,var(--now-color--secondary-1,1,119,142))),inset 0 0 0 3px RGB(var(--now-color--focus-ring-shadow,var(--now-color--neutral-0,255,255,255))),0 1px 2px 0 rgba(0,0,0,.3);outline:none}.column-view-header .header-wrapper{position:unset}.column-view-header .header-wrapper .date-picker-container{display:inline-block;position:absolute}.column-view-body{border:1px solid rgb(var(--now-color--neutral-5,172,180,181));margin-bottom:.25rem;padding:1px 0;background-clip:padding-box}.column-view-body .body-wrapper{height:264px;font-family:SourceSansPro;font-weight:500}.column-view-body .body-wrapper .body-header{height:55px;background-color:RGB(var(--now-color--background-secondary,var(--now-color--neutral-1,246,247,247)));border-bottom:1px solid rgb(var(--now-color--neutral-5,172,180,181))}.column-view-body .body-wrapper .body-grid{height:209px;overflow-y:scroll}.column-view-body .body-wrapper .table{display:table;width:100%;height:100%;table-layout:fixed}.column-view-body .body-wrapper .table.header{height:100%}.column-view-body .body-wrapper .table .row{display:table-row}.column-view-body .body-wrapper .table .row .item{display:table-cell;vertical-align:top}:host(:not([dir=rtl])) .column-view-body .body-wrapper .table .row .item,:root:not([dir=rtl]) .column-view-body .body-wrapper .table .row .item{border-right:1px solid rgb(var(--now-color--neutral-5,172,180,181))}:host([dir=rtl]) .column-view-body .body-wrapper .table .row .item,:root[dir=rtl] .column-view-body .body-wrapper .table .row .item{border-left:1px solid rgb(var(--now-color--neutral-5,172,180,181))}:host(:not([dir=rtl])) .column-view-body .body-wrapper .table .row .item:last-child,:root:not([dir=rtl]) .column-view-body .body-wrapper .table .row .item:last-child{border-right:none!important}:host([dir=rtl]) .column-view-body .body-wrapper .table .row .item:last-child,:root[dir=rtl] .column-view-body .body-wrapper .table .row .item:last-child{border-left:none!important}.column-view-body .body-wrapper .table .row .item .column-header{text-align:center;padding:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.column-view-body .body-wrapper .table .row .item .column-header .col-date .day-of-week{color:RGB(var(--now-color--text-secondary,var(--now-color--neutral-12,66,80,81)));padding-bottom:.25rem}.column-view-body .body-wrapper .table .row .item .column-header .col-date .date-number{color:RGB(var(--now-color--text-primary,var(--now-color--neutral-18,22,27,28)))}.column-view-body .body-wrapper .table .row .item.today .column-header .col-date .date-number{border-radius:1.5rem;color:RGB(var(--now-color--background-primary,var(--now-color--neutral-0,255,255,255)));background-color:RGB(var(--now-color--primary-1,30,133,109));display:inline-block;width:1.5rem;height:1.5rem}.column-view-body .body-wrapper .table .row .item .column-events-wrapper{min-height:calc(209px - .75rem)}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .no-events{font-size:.75rem;color:RGB(var(--now-color--neutral-12,66,80,81));text-align:center;padding-top:1rem}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row{margin-top:.5rem}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row:last-child{margin-bottom:.5rem}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event{border:1px solid rgb(var(--now-color--neutral-5,172,180,181));background-color:RGB(var(--now-color--neutral-0,255,255,255));text-align:center;display:inline-block;padding:.25rem 0;color:RGB(var(--now-color--text-primary,var(--now-color--neutral-18,22,27,28)))}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.highlighted{background-color:RGB(var(--now-color--primary-1,30,133,109))!important;border:1px solid rgb(var(--now-color--primary-1,30,133,109));color:RGB(var(--now-color--neutral-0,255,255,255))!important;font-size:1rem}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.highlighted::-moz-focus-inner{border-style:none}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.highlighted:focus{box-shadow:inset 0 0 0 2px RGB(var(--now-color--focus-ring,var(--now-color--secondary-1,1,119,142))),inset 0 0 0 3px RGB(var(--now-color--focus-ring-shadow,var(--now-color--neutral-0,255,255,255))),0 1px 2px 0 rgba(0,0,0,.3);outline:none}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.highlighted:hover{background-color:RGB(var(--now-color--primary-1,30,133,109))!important}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.unavailable{background:RGB(var(--now-color--neutral-1,246,247,247));border:1px solid rgb(var(--now-color--neutral-1,246,247,247));cursor:not-allowed}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.available,.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.selected{cursor:pointer}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.available:hover{background-color:RGB(var(--now-color--primary-0,221,237,233))}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.available:focus,.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.focused{background-color:RGB(var(--now-color--neutral-0,255,255,255));font-size:1rem}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.available:focus::-moz-focus-inner,.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.focused::-moz-focus-inner{border-style:none}.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.available:focus:focus,.column-view-body .body-wrapper .table .row .item .column-events-wrapper .event-row .event.focused:focus{box-shadow:inset 0 0 0 2px RGB(var(--now-color--focus-ring,var(--now-color--secondary-1,1,119,142))),inset 0 0 0 3px RGB(var(--now-color--focus-ring-shadow,var(--now-color--neutral-0,255,255,255))),0 1px 2px 0 rgba(0,0,0,.3);outline:none}.table-wrapper{display:table;table-layout:fixed;width:100%}.table-wrapper .footer-btns{padding-top:2rem}:host(:not([dir=rtl])) .table-wrapper .footer-btns,:root:not([dir=rtl]) .table-wrapper .footer-btns{text-align:right}:host([dir=rtl]) .table-wrapper .footer-btns,:root[dir=rtl] .table-wrapper .footer-btns{text-align:left}.footer-wrapper .selected-appointment{color:RGB(var(--now-color--text-primary,var(--now-color--neutral-18,22,27,28)));padding-top:.5rem}.footer-text{font-size:.75rem;color:RGB(var(--now-color--neutral-12,66,80,81))}\", \"\"]);\n\n// exports\n","import moment from 'moment-timezone';\nimport {renderHeader} from './column-view-header';\nimport {renderGrid} from './column-view-grid';\nimport {renderDayFooter, renderColumnFooter, getDayFooterText, getSelectedAppointmentHtml} from './column-view-footer';\nimport {getEventsInDisplayRange, str2Moment, getSelectedEvents} from '../../util';\nimport {DIRECTION, ACTIONS} from '../../constants';\n\nfunction getEventsInView(state) {\n\tconst events = getEventsInDisplayRange(state);\n\tconst eventsBucket = {};\n\tevents.map((event, index) => {\n\t\tconst date = event.startMoment.format('DDMMYYYY');\n\t\tif (!eventsBucket[date]) {\n\t\t\teventsBucket[date] = {\n\t\t\t\tevents: []\n\t\t\t};\n\t\t}\n\t\tevent.id = `event-${index}`;\n\t\teventsBucket[date].events.push(event);\n\t});\n\treturn eventsBucket;\n}\n\nfunction getTodayColumn(startMoment, endMoment, todayMoment) {\n\tlet todayCol;\n\tif (todayMoment && !startMoment.isAfter(todayMoment) && !endMoment.isBefore(todayMoment))\n\t\ttodayCol = moment(todayMoment).startOf('day').diff(startMoment, 'days');\n\treturn todayCol;\n}\n\nfunction getDayViewMiniCalendar(state, dispatch) {\n\tconst {properties: props} = state;\n\tlet datePickerDate = props.contextDate && str2Moment(props.contextDate, props.timezone).format('YYYY-MM-DD');\n\treturn <now-record-mini-calendar value={datePickerDate}\n\t\t\t\t\t\tfirstDayOfWeek={props.firstDayOfWeek}\n\t\t\t\t\t\tlanguage={props.locale}\n\t\t\t\t\t\treversed={props.dir == DIRECTION.RTL}\n\t\t\t\t\t\tautofocus={true}\n\t\t\t\t\t\tonValueChange={(event, name, value) => {\n\t\t\t\t\t\t\tdatePickerDate = value + ' 00:00:00';\n\t\t\t\t\t\t\tdispatch('PROPERTIES_SET', { contextDate: str2Moment(datePickerDate, props.timezone) })\n\t\t\t\t\t\t}}/>;\n}\n\nexport function renderColumnView(viewSettings, state, dispatch) {\n\tconst {startMoment, endMoment, todayMoment} = state;\n\tconst {showInModal, view:viewName} = state.properties;\n\tconst selectedEvents = getSelectedEvents(state.events);\n\n\tif (!startMoment || !endMoment)\n\t\treturn '';\n\n\tviewSettings.todayCol = getTodayColumn(startMoment, endMoment, todayMoment);\n\n\tconst eventsBucket = getEventsInView(state);\n\n\tconst wrapperCls = ['column-view-wrapper',viewName.toLowerCase() + '-view'];\n\tif (showInModal)\n\t\twrapperCls.push('in-modal');\n\tselectedEvents.length > 0 ? wrapperCls.push('reschedule') : wrapperCls.push('schedule');\n\t\n\treturn (\n\t\t<div className={wrapperCls.join(' ')}>\n\t\t\t{renderHeader(state, dispatch)}\n\t\t\t{renderGrid(viewSettings, eventsBucket, state, dispatch)}\n\t\t\t{renderColumnFooter(state, dispatch)}\n\t\t</div>\n\t\t);\n}\n\nexport function renderDayView(viewSettings, state, dispatch) {\n\tconst {startMoment, endMoment, todayMoment} = state;\n\tconst {showInModal} = state.properties;\n\tconst selectedEvents = getSelectedEvents(state.events);\n\n\tif (!startMoment || !endMoment)\n\t\treturn '';\n\n\tviewSettings.todayCol = getTodayColumn(startMoment, endMoment, todayMoment);\n\n\tconst eventsBucket = getEventsInView(state);\n\n\tconst wrapperCls = ['column-day-view-wrapper','day-view'];\n\tif (showInModal)\n\t\twrapperCls.push('in-modal');\n\tselectedEvents.length > 0 ? wrapperCls.push('reschedule') : wrapperCls.push('schedule');\n\t\n\treturn (\n\t\t<div className={wrapperCls.join(' ')}>\n\t\t\t<div className=\"day-view-container\">\n\t\t\t\t<div className=\"column-mini-calendar-text\">\n\t\t\t\t\t<div className=\"mini-calendar\">\n\t\t\t\t\t\t{getDayViewMiniCalendar(state, dispatch)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"column-view\">\n\t\t\t\t\t{renderGrid(viewSettings, eventsBucket, state, dispatch)}\n\t\t\t\t\t<div className=\"footer-text\">\n\t\t\t\t\t\t{getDayFooterText(state)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"footer-wrapper\">\n\t\t\t\t\t\t{getSelectedAppointmentHtml(state)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"day-view-footer\">\n\t\t\t\t{renderDayFooter(state, dispatch)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import moment from 'moment-timezone';\nimport {DIRECTION, ACTIONS, INTERNAL_FORMAT, KEYS} from '../../constants';\nimport '@servicenow/now-button';\nimport {isTodayInView, getViewSettings, str2Moment} from \"../../util\";\nimport {t} from 'sn-translate';\nimport {createRef} from '@servicenow/ui-renderer-snabbdom';\n\nfunction updateCurrentDate(view, contextDate, action, numberOfDays) {\n\tcontextDate = moment(contextDate);\n\tswitch (action) {\n\t\tcase DIRECTION.LEFT: {\n\t\t\treturn contextDate.subtract(numberOfDays, 'days');\n\t\t}\n\t\tcase DIRECTION.RIGHT: {\n\t\t\treturn contextDate.add(numberOfDays, 'days');\n\t\t}\n\t}\n}\n\nfunction toggleDatePicker(mouseEvent, dispatch, state) {\n\tconst {datePickerOpened} = state;\n\tdispatch(ACTIONS.INTERNAL_STATE_SET, {datePickerOpened: !datePickerOpened});\n}\n\nfunction handleKeyDown(keyEvent, dispatch, state) {\n\tif (keyEvent.which === KEYS.ESC) {\n\t\tif (state.datePickerOpened) {\n\t\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {datePickerOpened: false});\n\t\t\tkeyEvent.stopPropagation();\n\t\t\tkeyEvent.currentTarget.querySelector('.date-picker-btn').focus();\n\t\t}\n\t}\n}\n\nexport function renderHeader(state, dispatch) {\n\tconst { properties: props, startMoment, endMoment, todayMoment } = state;\n\tconst { view, contextDate } = props;\n\tconst { numberOfDays,viewLabel } = getViewSettings(state);\n\t\n\tlet headerMessage = '';\n\t// Ex: July 14 - 20, 2019\n\tif (props.dateFormat.indexOf('M') < props.dateFormat.toUpperCase().indexOf('D')) {\n\t\tif (startMoment.year() === endMoment.year()) {\n\t\t\tif (startMoment.month() === endMoment.month())\n\t\t\t\theaderMessage = t('{0} - {1}', [startMoment.format('MMMM D'), endMoment.format('D, YYYY')]);\n\t\t\telse\n\t\t\t\theaderMessage = t('{0} - {1}', [startMoment.format('MMMM D'), endMoment.format('MMMM D, YYYY')]);\n\t\t} else {\n\t\t\theaderMessage = t('{0} - {1}', [startMoment.format(state.dateDisplayFormat), endMoment.format(state.dateDisplayFormat)]);\n\t\t}\n\t} else {\n\t\t// Ex: 14 - 20 July, 2019\n\t\tif (startMoment.year() === endMoment.year()) {\n\t\t\tif (startMoment.month() === endMoment.month())\n\t\t\t\theaderMessage = t('{0} - {1}', [startMoment.format('D'), endMoment.format('D MMMM, YYYY')]);\n\t\t\telse\n\t\t\t\theaderMessage = t('{0} - {1}', [startMoment.format('D MMMM'), endMoment.format('D MMMM, YYYY')]);\n\t\t} else {\n\t\t\theaderMessage = t('{0} - {1}', [startMoment.format(state.dateDisplayFormat), endMoment.format(state.dateDisplayFormat)]);\n\t\t}\n\t}\n\n\tconst _isTodayInView = isTodayInView(startMoment, endMoment, todayMoment);\n\tconst isDisabled = _isTodayInView ? true : false;\n\t\n\tconst TODAY = t('Today');\n\n\tlet datePickerDate = contextDate && str2Moment(contextDate, props.timezone).format('YYYY-MM-DD');\n\tlet datePickerRef = createRef();\n\tlet datePickerNavBtn = createRef();\n\t\n\treturn <div className=\"column-view-header\">\n\t\t<div className=\"header-wrapper\">\n\t\t\t<now-button className=\"today\" label={TODAY} tooltip-content={TODAY} size=\"sm\" tooltip-content={TODAY}\n\t\t\t\t\t\tvariant=\"tertiary\" config-aria={{'aria-label': TODAY}}\n\t\t\t\t\t\tdisabled={isDisabled}\n\t\t\t\t\t\ton-click={() => dispatch('PROPERTIES_SET', { contextDate: todayMoment })}>\n\t\t\t</now-button>\n\t\t\t<now-button className=\"prev\" icon-name=\"chevron-start-outline\" style={{padding: '0 8px'}} config-aria={{'aria-label': t('Previous {0}', viewLabel)}}\n\t\t\t\t\t\tvariant=\"tertiary\" size=\"md\" bare tooltip-content={t('Previous {0}', viewLabel)}\n\t\t\t\t\t\tconfig-aria={{'aria-label': t('Previous {0}', viewLabel)}}\n\t\t\t\t\t\ton-click={() => dispatch('PROPERTIES_SET', { contextDate: updateCurrentDate(view, contextDate, DIRECTION.LEFT, numberOfDays) })}>\n\t\t\t</now-button>\n\t\t\t<now-button className=\"next\" icon-name=\"chevron-end-outline\" style={{padding: '0 4px 0 0'}} config-aria={{'aria-label': t('Next {0}', viewLabel)}}\n\t\t\t\t\t\tvariant=\"tertiary\" size=\"md\" bare tooltip-content={t('Next {0}', viewLabel)}\n\t\t\t\t\t\tconfig-aria={{'aria-label': t('Next {0}', viewLabel)}}\n\t\t\t\t\t\ton-click={() => dispatch('PROPERTIES_SET', { contextDate: updateCurrentDate(view, contextDate, DIRECTION.RIGHT, numberOfDays) })}>\n\t\t\t</now-button>\n\n\t\t\t<div className='date-picker-container' on-keydown={(keyEvent) => {handleKeyDown(keyEvent, dispatch, state)}}>\n\t\t\t\t<now-button-bare\n\t\t\t\t\tclassName=\"nav-btn date-picker-btn\"\n\t\t\t\t \tlabel={headerMessage}\n\t\t\t\t \ticon-end=\"caret-down-outline\"\n\t\t\t\t \tvariant=\"secondary\" size=\"md\"\n\t\t\t\t \tconfig-aria={{'aria-label': t('Date Picker')}}\n\t\t\t\t \tref={datePickerNavBtn}\n\t\t\t\t \ttooltip-content={t('Date Picker')}\n\t\t\t\t\ton-click={(mouseEvent) => {toggleDatePicker(mouseEvent, dispatch, state)}}\n\t\t\t \t/>\n\n\t\t\t\t{state.datePickerOpened ? <div className='date-picker-wrapper'>\n\t\t\t\t\t<now-record-mini-calendar\n\t\t\t\t\t\tvalue={datePickerDate}\n\t\t\t\t\t\tfirstDayOfWeek={props.firstDayOfWeek}\n\t\t\t\t\t\tlanguage={props.locale}\n\t\t\t\t\t\treversed={props.dir == DIRECTION.RTL}\n\t\t\t\t\t\tautofocus={true}\n\t\t\t\t\t\tonOk={() => {\n\t\t\t\t\t\t\t\tconst momentDate = str2Moment(datePickerDate, props.timezone);\n\t\t\t\t\t\t\t\tif (momentDate.isValid()) {\n\t\t\t\t\t\t\t\t\tdispatch('PROPERTIES_SET', { contextDate: momentDate });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {datePickerOpened: false});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonValueChange={(event, name, value) => datePickerDate=value + ' 00:00:00'}\n\t\t\t\t\t/>\n\t\t\t\t</div>: ''}\n\n\n\t\t\t</div>\n\t\t</div>\n\t</div>;\n}\n","import moment from 'moment-timezone';\nimport {t} from 'sn-translate';\nimport {setLocale} from '../../util';\nimport {ACTIONS, DIRECTION, KEYS, EVENT_TYPES, VIEWS, INTERNAL_FORMAT} from '../../constants';\nimport {getEventsInDisplayRange} from \"../../util\";\n\nconst NO_SLOTS_AVAILABLE = t('No Slots Available');\n\nfunction getColumn(date, isToday, viewSettings, eventsBucket, state, dispatch) {\n\tconst cls = ['item grid'];\n\tconst columnDateKey = date.format('DDMMYYYY');\n\tconst columnEvents = eventsBucket[columnDateKey] ? eventsBucket[columnDateKey].events : [];\n\tconst wrapperCls = ['column-events-wrapper'];\n\tif (columnEvents.length === 0)\n\t\twrapperCls.push('no-events-wrapper');\n\treturn <div className={cls.join(' ')}>\n\t\t<div className={wrapperCls.join(' ')}>\n\t\t\t{getColumnEvents(date, columnEvents, viewSettings, state, dispatch)}\n\t\t</div>\n\t</div>;\n}\n\nfunction getHeaderColumn(date, isToday, eventsBucket, state, dispatch) {\n\tconst cls = ['item header'];\n\n\tif (isToday) {\n\t\tcls.push('today');\n\t}\n\n\tconst columnDateKey = date.format('DDMMYYYY');\n\tconst columnEvents = eventsBucket[columnDateKey] ? eventsBucket[columnDateKey].events : [];\n\treturn <div className={cls.join(' ')}>\n\t\t{getColumnHeader(date)}\n\t</div>;\n}\n\nfunction getColumnHeader(date) {\n\treturn <div className=\"column-header\">\n\t\t<span className=\"col-date\">\n\t\t\t<span className=\"day-of-week\">{date.format('dddd')}</span>\n\t\t\t<br/>\n\t\t\t<span className=\"date-number\">{date.format('DD')}</span>\n\t\t</span>\n\t</div>;\n}\n\nfunction getColumnEvents(date, events, viewSettings, state, dispatch) {\n\tconst {numberOfEventsInEachRow} = viewSettings;\n\tconst rowUI = [];\n\n\tconst rows = [];\n\tconst numberOfRows = Math.ceil(events.length / numberOfEventsInEachRow);\n\tfor (let i = 0; i < numberOfRows; i++) {\n\t\tconst start = i * numberOfEventsInEachRow;\n\t\trows.push(events.slice(start, start + numberOfEventsInEachRow));\n\t}\n\n\tif (rows.length > 0) {\n\t\trows.forEach((rowEvents) => {\n\t\t\trowUI.push(getRow(rowEvents, viewSettings, state, dispatch));\n\t\t});\n\t\treturn rowUI;\n\t}\n\n\treturn <div className=\"no-events\">\n\t\t{NO_SLOTS_AVAILABLE}\n\t</div>;\n}\n\nfunction getRow(rowEvents = [], viewSettings, state, dispatch) {\n\tif (rowEvents.length > 0) {\n\t\treturn <div className=\"event-row\">\n\t\t\t{getRowEvents(rowEvents, viewSettings, state, dispatch)}\n\t\t</div>;\n\t}\n}\n\nfunction getRowEvents(rowEvents = [], viewSettings, state, dispatch) {\n\tconst events = [];\n\trowEvents.forEach((event) => {\n\t\tevents.push(getEvent(event, viewSettings, state, dispatch));\n\t});\n\treturn events;\n}\n\nfunction updateSelectedEvent(keyEvent, eventObj, dispatch) {\n\tif (eventObj.type === EVENT_TYPES.AVAILABLE) {\n\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {selectedEvent:eventObj});\n\t\tupdateFocusEvent(keyEvent, eventObj, dispatch);\n\t}\n}\n\nfunction updateFocusEvent(keyEvent, eventObj, dispatch) {\n\tif (eventObj) {\n\t\tif (eventObj.type === EVENT_TYPES.AVAILABLE) {\n\t\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {focusEvent:eventObj});\n\t\t\tconst focusedEl = keyEvent.target.closest('.body-grid').querySelector('#' + eventObj.id);\n\t\t\t// Set focus to the element\n\t\t\tif (focusedEl)\n\t\t\t\tfocusedEl.focus();\n\t\t}\n\t} else {\n\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {focusEvent:null});\n\t}\n}\n\nfunction filterEventsOnDate(dateMoment, eventObjList) {\n\tconst availableEventsOnDate = eventObjList.filter((ev) => ev.startMoment.isSame(dateMoment, 'date') && ev.type === EVENT_TYPES.AVAILABLE);\n\treturn availableEventsOnDate;\n}\n\nfunction getNextAvailableFocusEvent(keyEvent, numberOfEventsInEachRow, eventObj, state, dispatch) {\n\tconst {properties: props, focusEvent, startMoment, endMoment} = state;\n\tconst allEventList = getEventsInDisplayRange(state);\n\tif (focusEvent) {\n\t\tif (allEventList.length > 0) {\n\t\t\tconst firstEvent = allEventList[0], lastEvent = allEventList[allEventList.length-1];\n\t\t\tconst keyCode = keyEvent.which;\n\t\t\tlet eventList = [], eventDateMoment, i, selectedEventIdx;\n\n\t\t\tswitch(keyCode) {\n\t\t\t\tcase KEYS.LEFT:\n\t\t\t\t\tif (props.view === VIEWS.WEEK) {\n\t\t\t\t\t\teventDateMoment = focusEvent.startMoment;\n\t\t\t\t\t\t// Ignore left key press on the first column with available events\n\t\t\t\t\t\tif (eventDateMoment.isSame(firstEvent.startMoment, 'date'))\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\teventDateMoment = moment(eventDateMoment).subtract(1, 'days');\n\t\t\t\t\t\t\t// Get AVAILABLE type events on previous date\n\t\t\t\t\t\t\teventList = filterEventsOnDate(eventDateMoment, allEventList);\n\t\t\t\t\t\t} while (eventList.length === 0 && eventDateMoment.isBetween(startMoment, endMoment));\n\t\t\t\t\t\tif (eventList.length > 0)\n\t\t\t\t\t\t\treturn eventList[0]; // return first element\n\n\t\t\t\t\t} else if (props.view === VIEWS.DAY) {\n\t\t\t\t\t\t// Get AVAILABLE type events\n\t\t\t\t\t\teventList = allEventList.filter((e) => {\n\t\t\t\t\t\t\treturn e.type === EVENT_TYPES.AVAILABLE\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Ignore left key press on the first event\n\t\t\t\t\t\tif (eventList.length > 0 && focusEvent.start === eventList[0].start)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tfor (i = 0; i < eventList.length; i++) {\n\t\t\t\t\t\t\tif (eventList[i].start === focusEvent.start) {\n\t\t\t\t\t\t\t\treturn i > 0 ? eventList[i-1] : null;\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// After Schedule/Reschedule, the focus is set to the selected element\n\t\t\t\t\t\t// Hence returning list of selected and available events as focusEvent is part of this list\n\t\t\t\t\t\teventList = allEventList.filter((e) => {\n\t\t\t\t\t\t\treturn e.type !== EVENT_TYPES.UNAVAILABLE\n\t\t\t\t\t\t});\n\t\t\t\t\t\tselectedEventIdx = eventList.findIndex(function(el) {\n\t\t\t\t\t\t\treturn el.type === EVENT_TYPES.SELECTED;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn selectedEventIdx > 0 ? eventList[selectedEventIdx - 1] : null;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase KEYS.RIGHT:\n\t\t\t\t\tif (props.view === VIEWS.WEEK) {\n\t\t\t\t\t\teventDateMoment = focusEvent.startMoment;\n\t\t\t\t\t\t// Ignore right key press on the last column with available events\n\t\t\t\t\t\tif (eventDateMoment.isSame(lastEvent.startMoment, 'date'))\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\teventDateMoment = moment(eventDateMoment).add(1, 'days');\n\t\t\t\t\t\t\t// Get AVAILABLE type events on next date\n\t\t\t\t\t\t\teventList = filterEventsOnDate(eventDateMoment, allEventList);\n\t\t\t\t\t\t} while (eventList.length === 0 && eventDateMoment.isBetween(startMoment, endMoment));\n\t\t\t\t\t\tif (eventList.length > 0)\n\t\t\t\t\t\t\treturn eventList[0]; // return first element\n\n\t\t\t\t\t}  else if (props.view === VIEWS.DAY) {\n\t\t\t\t\t\t// Get AVAILABLE type events\n\t\t\t\t\t\teventList = allEventList.filter((e) => {\n\t\t\t\t\t\t\treturn e.type === EVENT_TYPES.AVAILABLE\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Ignore right key press on the last event\n\t\t\t\t\t\tif (eventList.length > 0 && focusEvent.start === eventList[eventList.length-1].start)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tfor (i = 0; i < eventList.length; i++) {\n\t\t\t\t\t\t\tif (eventList[i].start === focusEvent.start) {\n\t\t\t\t\t\t\t\treturn i < eventList.length ? eventList[i+1] : null;\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// After Schedule/Reschedule, the focus is set to the selected element\n\t\t\t\t\t\t// Hence returning list of selected and available events as focusEvent is part of this list\n\t\t\t\t\t\teventList = allEventList.filter((e) => {\n\t\t\t\t\t\t\treturn e.type !== EVENT_TYPES.UNAVAILABLE\n\t\t\t\t\t\t});\n\t\t\t\t\t\tselectedEventIdx = eventList.findIndex(function(el) {\n\t\t\t\t\t\t\treturn el.type === EVENT_TYPES.SELECTED;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn selectedEventIdx < eventList.length ? eventList[selectedEventIdx + 1] : null;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase KEYS.UP:\n\t\t\t\t\tif (props.view === VIEWS.WEEK) {\n\t\t\t\t\t\t// Get AVAILABLE type events on same date\n\t\t\t\t\t\teventList = filterEventsOnDate(eventObj.startMoment, allEventList);\n\t\t\t\t\t\tfor (i = 0; i < eventList.length; i++) {\n\t\t\t\t\t\t\tif (eventList[i].start === focusEvent.start) {\n\t\t\t\t\t\t\t\treturn i > 0 ? eventList[i-1] : null;\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// After Schedule/Reschedule, the focus is set to the selected element\n\t\t\t\t\t\t// Hence returning list of selected and available events as focusEvent is part of this list\n\t\t\t\t\t\teventList = allEventList.filter((ev) => ev.startMoment.isSame(eventObj.startMoment, 'date')\n\t\t\t\t\t\t\t&& ev.type !== EVENT_TYPES.UNAVAILABLE);\n\t\t\t\t\t\tselectedEventIdx = eventList.findIndex(function(el) {\n\t\t\t\t\t\t\treturn el.type === EVENT_TYPES.SELECTED;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn selectedEventIdx > 0 ? eventList[selectedEventIdx - 1] : null;\n\n\t\t\t\t\t} else if (props.view === VIEWS.DAY) {\n\t\t\t\t\t\teventList = allEventList;\n\t\t\t\t\t\tlet focusEventIdx = -1;\n\t\t\t\t\t\tfor (i = 0; i < eventList.length; i++) {\n\t\t\t\t\t\t\tif (eventList[i].start === focusEvent.start) {\n\t\t\t\t\t\t\t\tfocusEventIdx = i;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (focusEventIdx > -1) {\n\t\t\t\t\t\t\tlet idx = focusEventIdx;\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\tidx = idx - numberOfEventsInEachRow;\n\t\t\t\t\t\t\t} while (idx > -1 && eventList[idx].type === EVENT_TYPES.UNAVAILABLE);\n\t\t\t\t\t\t\tif (idx < eventList.length && idx !== focusEventIdx)\n\t\t\t\t\t\t\t\treturn eventList[idx];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase KEYS.DOWN:\n\t\t\t\t\tif (props.view === VIEWS.WEEK) {\n\t\t\t\t\t\t// Get AVAILABLE type events on same date\n\t\t\t\t\t\teventList = filterEventsOnDate(eventObj.startMoment, allEventList);\n\t\t\t\t\t\tfor (i = 0; i < eventList.length; i++) {\n\t\t\t\t\t\t\tif (eventList[i].start === focusEvent.start) {\n\t\t\t\t\t\t\t\treturn i < eventList.length ? eventList[i+1] : null;\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// After Schedule/Reschedule, the focus is set to the selected element\n\t\t\t\t\t\t// Hence returning list of selected and available events as focusEvent is part of this list\n\t\t\t\t\t\teventList = allEventList.filter((ev) => ev.startMoment.isSame(eventObj.startMoment, 'date')\n\t\t\t\t\t\t\t&& ev.type !== EVENT_TYPES.UNAVAILABLE);\n\t\t\t\t\t\tselectedEventIdx = eventList.findIndex(function(el) {\n\t\t\t\t\t\t\treturn el.type === EVENT_TYPES.SELECTED;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn selectedEventIdx < eventList.length ? eventList[selectedEventIdx + 1] : null;\n\n\t\t\t\t\t} else if (props.view === VIEWS.DAY) {\n\t\t\t\t\t\teventList = allEventList;\n\t\t\t\t\t\tlet focusEventIdx = -1;\n\t\t\t\t\t\tfor (i = 0; i < eventList.length; i++) {\n\t\t\t\t\t\t\tif (eventList[i].start === focusEvent.start) {\n\t\t\t\t\t\t\t\tfocusEventIdx = i;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (focusEventIdx > -1) {\n\t\t\t\t\t\t\tlet idx = focusEventIdx;\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\tidx = idx + numberOfEventsInEachRow;\n\t\t\t\t\t\t\t} while (idx < eventList.length && eventList[idx].type === EVENT_TYPES.UNAVAILABLE);\n\t\t\t\t\t\t\tif (idx < eventList.length && idx !== focusEventIdx)\n\t\t\t\t\t\t\t\treturn eventList[idx];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase KEYS.TAB:\n\t\t\t\t\teventList = allEventList.filter((e) => {\n\t\t\t\t\t\treturn e.type === EVENT_TYPES.AVAILABLE\n\t\t\t\t\t});\n\t\t\t\t\tif (keyEvent.shiftKey) {\n\t\t\t\t\t\t// Shift + Tab\n\t\t\t\t\t\tfor (i = 0; i < eventList.length; i++) {\n\t\t\t\t\t\t\tif (eventList[i].start === focusEvent.start)\n\t\t\t\t\t\t\t\treturn i > 0 ? eventList[i-1] : null;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Tab\n\t\t\t\t\t\tfor (i = 0; i < eventList.length; i++) {\n\t\t\t\t\t\t\tif (eventList[i].start === focusEvent.start)\n\t\t\t\t\t\t\t\treturn (i + 1) < eventList.length ? eventList[i+1] : null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction gotoNextFocusEvent(keyEvent, numberOfEventsInEachRow, eventObj, state, dispatch) {\n\tconst nextFocusEvent = getNextAvailableFocusEvent(keyEvent, numberOfEventsInEachRow, eventObj, state, dispatch);\n\tif (nextFocusEvent) {\n\t\tkeyEvent.preventDefault();\n\t\tupdateFocusEvent(keyEvent, nextFocusEvent, dispatch);\n\t}\n}\n\nfunction getEvent(event, viewSettings, state, dispatch) {\n\tconst {numberOfEventsInEachRow, eventMargin} = viewSettings;\n\tlet width = 100 / numberOfEventsInEachRow;\n\tconst margin = eventMargin || 2;\n\twidth = width - (margin * 2);\n\n\tconst cls = ['event'];\n\tcls.push(event.type);\n\n\tif (state.selectedEvent && state.selectedEvent.start === event.start)\n\t\tcls.push('highlighted');\n\n\tif (state.focusEvent && state.focusEvent.start === event.start)\n\t\tcls.push('focused');\n\t\n\tconst timeFormat = state.properties.timeFormat;\n\tconst tabIndex = event.type !== EVENT_TYPES.AVAILABLE ? \"-1\" : \"0\";\n\n\tconst eventAriaLabel = event.startMoment.format(state.ariaDateFormat + ' ' + timeFormat);\n\treturn <div className={cls.join(' ')} role=\"button\" tabIndex={tabIndex} style={{width: width + '%', margin: '0 ' + margin + '%'}}\n\t\t\t\taria-label={t('{0}', eventAriaLabel)}\n\t\t\t\tid={event.id}\n\t\t\t\ton-click={(e) => {\n\t\t\t\t\tupdateSelectedEvent(e, event, dispatch);\n\t\t\t\t\tdispatch(ACTIONS.EVENT_CLICKED, {event});\n\t\t\t\t}}\n\t\t\t\ton-focus={(e) => {\n\t\t\t\t\t// For the first event in the view range\n\t\t\t\t\tif (!state.focusEvent)\n\t\t\t\t\t\tupdateFocusEvent(e, event, dispatch);\n\t\t\t\t}}\n\t\t\t\ton-keydown={(e) => {\n\t\t\t\t\tif (e.which === KEYS.LEFT || e.which === KEYS.RIGHT || e.which === KEYS.UP || e.which === KEYS.DOWN) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tgotoNextFocusEvent(e, numberOfEventsInEachRow, event, state, dispatch);\n\t\t\t\t\t} else if (e.which === KEYS.TAB) {\n\t\t\t\t\t\tgotoNextFocusEvent(e, numberOfEventsInEachRow, event, state, dispatch);\n\t\t\t\t\t} else if (e.which === KEYS.ENTER) {\n\t\t\t\t\t\tif (state.focusEvent)\n\t\t\t\t\t\t\tupdateSelectedEvent(e, state.focusEvent, dispatch);\n\t\t\t\t\t}\n\t\t\t\t}}>\n\t\t\t\t\t<span className=\"text\">{event.startMoment.format(timeFormat)}</span>\n\t\t\t</div>;\n}\n\nfunction getColumns(viewSettings, eventsBucket, state, dispatch) {\n\tconst {todayCol, numberOfDays} = viewSettings;\n\tconst {startMoment} = state;\n\tconst cols = [];\n\tfor (let c = 0; c < numberOfDays; c++) {\n\t\tconst localeDate = setLocale(moment(startMoment).add(c, 'days'), state);\n\t\tcols.push(getColumn(localeDate, todayCol !== undefined && todayCol === c, viewSettings, eventsBucket, state, dispatch));\n\t}\n\treturn cols;\n}\n\nfunction getHeaderColumns(viewSettings, eventsBucket, state, dispatch) {\n\tconst {startMoment} = state;\n\tconst {showHeader, numberOfDays, todayCol} = viewSettings;\n\tif (!showHeader)\n\t\treturn '';\n\tconst cols = [];\n\tfor (let c = 0; c < numberOfDays; c++) {\n\t\tconst localeDate = setLocale(moment(startMoment).add(c, 'days'), state);\n\t\tcols.push(getHeaderColumn(localeDate, todayCol !== undefined && todayCol === c, eventsBucket, state, dispatch));\n\t}\n\treturn cols;\n}\n\nexport function renderGrid(viewSettings, eventsBucket, state, dispatch) {\n\tconst {showHeader} = viewSettings;\n\tconst headerColumns = getHeaderColumns(viewSettings, eventsBucket, state, dispatch);\n\tconst columns = getColumns(viewSettings, eventsBucket, state, dispatch);\n\tlet style = {};\n\tif (state.properties.dir === DIRECTION.RTL)\n\t\tstyle.padding = `0 0 0 ${state.scrollbarWidth}px`;\n\telse\n\t\tstyle.padding = `0 ${state.scrollbarWidth}px 0 0`;\n\tif (!showHeader) {\n\t\tstyle.display = 'none';\n\t}\n\treturn <div className=\"column-view-body\">\t\n\t\t<div className=\"body-wrapper\">\n\t\t\t<div className=\"body-header\" style={style}>\n\t\t\t\t<div className=\"table\">\n\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t{headerColumns}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"body-grid\" hook-insert={ (vNode) => {\n\t\t\t\tconst nodeEl = /** @type {HTMLDivElement} */(vNode.elm);\n\t\t\t\tconst width = nodeEl.offsetWidth - nodeEl.clientWidth;\n\t\t\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {scrollbarWidth: width});\n\t\t\t}}>\n\t\t\t\t<div className=\"table\">\n\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t{columns}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>;\n}\n","import '@servicenow/now-button';\nimport {t} from 'sn-translate';\nimport moment from 'moment-timezone';\nimport {getSelectedEvents} from '../../util';\nimport {ACTIONS, VIEWS, KEYS, INTERNAL_FORMAT} from '../../constants';\n\nconst SCHEDULE = t('Schedule');\nconst RESCHEDULE = t('Reschedule');\n\nfunction getFooterText(state) {\n    const {properties: props} = state;\n\n    // Assuming uniform time slot for all events, calculate the slot duration for one event\n    const event = state.events[0];\n\tif (event) {\n        let eventDuration = moment.duration(event.endMoment.diff(event.startMoment)).humanize();\n        let eventDurationArr = eventDuration.split(' ');\n        let unit = '', footerText = '';\n        if (parseInt(eventDurationArr[0]) > 1) {\n            unit = eventDurationArr[1] + '';\n            unit = unit.slice(0, -1);\n            eventDurationArr[1] = unit.charAt(0).toUpperCase() + unit.slice(1);\n            eventDuration = eventDurationArr.join(' ');\n            footerText =  t('Time Zone : {0} | {1} time slot', [props.timezone, eventDuration]);\n        } else if (isNaN(parseInt(eventDurationArr[0]))) {\n            // a day or an hour or a minute\n            eventDurationArr[0] = 1;\n            unit = eventDurationArr[1] + '';\n            eventDurationArr[1] = unit.charAt(0).toUpperCase() + unit.slice(1);\n            eventDuration = eventDurationArr.join(' ');\n            footerText =  t('Time Zone : {0} | {1} time slots', [props.timezone, eventDuration]);\n        }\n        return  footerText;\n\t}\n}\n\nfunction getFooterTextHtml(state) {\n    return (\n        <slot name=\"left-footer\">\n            {getFooterText(state)}\n        </slot>\n    );\n}\n\nexport function getSelectedAppointmentHtml(state) {\n    const {properties: props} = state;\n    if (!state.selectedEvent)\n    return (\n        <div className=\"cell selected-appointment\">\n            <span>&nbsp;</span>\n        </div>\n    );\n    const event = state.selectedEvent;\n    const start = event.startMoment, end = event.endMoment;\n\n    let selectedSlotText = '';\n    if (props.view === VIEWS.DAY) {\n        selectedSlotText = t('Selected time: {0} - {1}, {2}. {3}', [\n            start.format(props.timeFormat), \n            end.format(props.timeFormat),\n            start.format('ddd'),\n            start.format(state.dateDisplayFormat)\n        ]);\n    } else {\n        if (event.endMoment.isSame(event.startMoment, 'date')) {\n            // Same day\n            selectedSlotText = t('Selected time: {0} - {1}, {2}. {3}', [\n                start.format(props.timeFormat), \n                end.format(props.timeFormat),\n                start.format('ddd'),\n                start.format(state.dateDisplayFormat)\n            ]);\n        } else {\n            selectedSlotText = t('Selected time: {0} - {1}', [\n                start.format(state.dateTimeDisplayFormat),\n                end.format(state.dateTimeDisplayFormat)\n            ]);\n        }\n    }\n    \n    return (\n        <div className=\"cell selected-appointment\">\n            <span>{selectedSlotText}</span>\n        </div>\n    );\n}\n\nfunction scheduleBtnClicked(event, selectedEvents, state, dispatch) {\n    if (state.selectedEvent) {\n        event.stopPropagation();\n        if (state.selectedEvent && selectedEvents[0])\n            dispatch(ACTIONS.RESCHEDULE_APPOINTMENT, {previousEvent: selectedEvents[0], event: state.selectedEvent});\n        else\n            dispatch(ACTIONS.SCHEDULE_APPOINTMENT, {event: state.selectedEvent});\n\n        // After Schedule/Reschedule, set focus to the selected element\n        // Applies only when the component is not in a modal\n        dispatch(ACTIONS.INTERNAL_STATE_SET, {focusEvent: state.selectedEvent});\n        const calendarEl = event.target.closest('.sn-appointment-calendar-core');\n        if (calendarEl) {\n            const selectedEl = calendarEl.querySelector('.highlighted');\n            if (selectedEl) {\n                selectedEl.focus();\n            }\n        }\n    }\n}\n\nfunction getFooterBtnsHtml(state, dispatch) {\n    const selectedEvents = getSelectedEvents(state.events);\n    const {showInModal} = state.properties;\n    let btnLabel = '', btnDisabled, btnClass = '';\n    if (selectedEvents.length > 0) {\n        // Reschedule scenario\n        btnLabel = RESCHEDULE;\n        btnClass = 'reschedule';\n        if (state.selectedEvent && selectedEvents[0].start === state.selectedEvent.start)\n            btnDisabled = true;\n    } else {\n        // Schedule scenario\n        btnLabel = SCHEDULE;\n        btnClass = 'schedule';\n        btnDisabled = state.selectedEvent ? false : true;\n    }\n    \n    return (\n        <div>\n            {showInModal ? null\n                : <slot name=\"right-footer-btns\">\n                    <now-button disabled={btnDisabled} className={btnClass} label={btnLabel} size=\"md\" variant=\"primary\"\n                        config-aria={{'aria-label': btnLabel}}\n                        on-click={(e) => {\n                            scheduleBtnClicked(e, selectedEvents, state, dispatch);\n                        }} on-keypress={(e) => {\n                            e.which === KEYS.ENTER ? scheduleBtnClicked(e, selectedEvents, state, dispatch) : null;\n                        }}>\n                    </now-button>\n                </slot>\n            }\n        </div>\n    );\n}\n\nexport function renderColumnFooter(state, dispatch) {\n    const {showInModal} = state.properties;\n    return (\n        <footer>\n            <div className=\"footer-wrapper table-wrapper\">\n                <div className=\"cell footer-text\">\t\t\t\t\n                    {getFooterTextHtml(state)}\n                </div>\n                {getSelectedAppointmentHtml(state)}\n                {showInModal ? null\n                    : <div className=\"cell footer-btns\">\n                        {getFooterBtnsHtml(state, dispatch)}\n                    </div>}\n            </div>\n        </footer>\n    );\n}\n\nexport function renderDayFooter(state, dispatch) {\n    const {showInModal} = state.properties;\n    return (\n        <footer>\n            <div className=\"footer-wrapper table-wrapper\">\n                {showInModal ? null\n                    : <div className=\"cell footer-btns\">\n                        {getFooterBtnsHtml(state, dispatch)}\n                    </div>}\n            </div>\n        </footer>\n    );\n}\n\nexport function getDayFooterText(state) {\n    return (\n        <div>\n            {getFooterTextHtml(state)}\n        </div>\n    );\n}\n","import {getViewSettings} from '../../util';\nimport {calculateDateRange} from './util';\nimport {ACTIONS} from '../../constants';\n\nfunction recalculateDateRange({state, dispatch}) {\n\tconst {firstDayOfWeek:startDay} = state.properties;\n\tconst {numberOfDays} = getViewSettings(state);\n\tconst {startMoment, endMoment} = calculateDateRange(state.contextMoment, numberOfDays, startDay);\n\tdispatch(ACTIONS.INTERNAL_STATE_SET, {startMoment, endMoment});\n\tsetTimeout(() => dispatch(ACTIONS.RANGE_UPDATED, {startMoment: startMoment.clone(), endMoment: endMoment.clone(), startMS: startMoment.valueOf(), endMS: endMoment.valueOf()}), 1);\n}\n\nconst ActionHandlers = {\n\t[ACTIONS.CONTEXT_DATE_CHANGED]: recalculateDateRange,\n};\n\nexport default ActionHandlers;\n","import moment from 'moment-timezone';\n\nexport function calculateDateRange(contextMoment, numberOfDays, startDay) {\n\tif (numberOfDays === 1) {\n\t\tlet startMoment = moment(contextMoment).startOf('day');\n\t\tlet endMoment = moment(contextMoment).endOf('day');\n\t\treturn {startMoment, endMoment};\n\t} else {\n\t\tlet startMoment = moment(contextMoment).startOf('day');\n\t\tif (startDay <= contextMoment.day())\n\t\t\tstartMoment.day(startDay);\n\t\telse\n\t\t\tstartMoment.day(startDay - 7);\n\t\tlet endMoment = moment(startMoment).add(numberOfDays - 1, 'days').endOf('day');\n\t\treturn {startMoment, endMoment};\n\t}\n}\n","import {ACTIONS, EVENTS} from './constants';\n\nfunction closeDatePicker(state, dispatch, event) {\n\tlet clickedInsideMiniCalendar = false;\n\tconst clickPath = event.composedPath ? event.composedPath() : event.path;\n\tclickPath.forEach((elm) => {\n\t\tif (elm && elm.getAttribute) {\n\t\t\tlet classNames = elm.getAttribute('class');\n\t\t\tif (classNames) {\n\t\t\t\tclassNames = classNames.split(' ');\n\t\t\t\tif (classNames.indexOf('date-picker-container') !== -1) {\n\t\t\t\t\tclickedInsideMiniCalendar = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tif (!clickedInsideMiniCalendar) {\n\t\tdispatch(ACTIONS.INTERNAL_STATE_SET, {datePickerOpened: false});\n\t}\n}\n\nconst EventHandlers = [\n\t{\n\t\tevents: [EVENTS.MOUSE_CLICKED],\n\t\teffect({state, dispatch, action: {payload: {event}}}) {\n\t\t\tif (state.datePickerOpened) {\n\t\t\t\tcloseDatePicker(state, dispatch, event);\n\t\t\t}\n\t\t}\n\t}\n];\n\nexport default {\n\teventHandlers: EventHandlers\n};\n","import {ViewStyles} from './body-views';\nimport styles from './now-appointment-calendar.scss';\n\nexport default {\n\tstyles: [styles, ...ViewStyles].join(' ')\n};\n","\n        var result = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/src/index.js??ref--6-2!../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./now-appointment-calendar.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"*{box-sizing:border-box}.sn-appointment-calendar-core{font-family:Source Sans Pro,Helvetica Neue,helvetica,arial,sans-serif;display:block}.sn-appointment-calendar-core::-moz-focus-inner{border-style:none}.sn-appointment-calendar-core:focus{box-shadow:inset 0 0 0 2px RGB(var(--now-color--focus-ring,var(--now-color--secondary-1,1,119,142))),inset 0 0 0 3px RGB(var(--now-color--focus-ring-shadow,var(--now-color--neutral-0,255,255,255))),0 1px 2px 0 rgba(0,0,0,.3);outline:none}.sn-appointment-calendar-core header,.sn-appointment-calendar-core section{display:block}.sn-appointment-calendar-core .clearfix:after,.sn-appointment-calendar-core .clearfix:before{content:\\\" \\\";display:table}.sn-appointment-calendar-core .clearfix:after{clear:both}.sn-appointment-calendar-core .header-wrapper.in-modal.day-view.reschedule .current-appointment{padding-bottom:.5rem!important}.sn-appointment-calendar-core .header-wrapper .current-appointment{padding-bottom:1rem;color:RGB(var(--now-color--text-primary,var(--now-color--neutral-18,22,27,28)))}.sn-appointment-calendar-core .header-wrapper .current-appointment .current-appointment-time{display:inline-block;color:RGB(var(--now-color--neutral-18,22,27,28));font-size:1rem;font-weight:600}.sn-appointment-calendar-core .header-wrapper .next-available{color:var(--now-color--text-primary,var(--now-color--neutral-18,22,27,28))}:host(:not([dir=rtl])) .sn-appointment-calendar-core .header-wrapper .next-available .next-available-link,:root:not([dir=rtl]) .sn-appointment-calendar-core .header-wrapper .next-available .next-available-link{padding-left:.25rem}:host([dir=rtl]) .sn-appointment-calendar-core .header-wrapper .next-available .next-available-link,:root[dir=rtl] .sn-appointment-calendar-core .header-wrapper .next-available .next-available-link{padding-right:.25rem}.sn-appointment-calendar-core .header-wrapper .next-available .next-available-link:focus::-moz-focus-inner{border-style:none}.sn-appointment-calendar-core .header-wrapper .next-available .next-available-link:focus:focus{box-shadow:inset 0 0 0 2px RGB(var(--now-color--focus-ring,var(--now-color--secondary-1,1,119,142))),inset 0 0 0 3px RGB(var(--now-color--focus-ring-shadow,var(--now-color--neutral-0,255,255,255))),0 1px 2px 0 rgba(0,0,0,.3);outline:none}.sn-appointment-calendar-core .header-wrapper .no-appointment-heading,.sn-appointment-calendar-core .header-wrapper .no-current-appointment,.sn-appointment-calendar-core .header-wrapper .no-next-available{display:none!important}\", \"\"]);\n\n// exports\n","module.exports = __TECTONIC__$servicenow_now_record_mini_calendar;","import './demo-calendar';\n","import snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport {createCustomElement} from '@servicenow/ui-core';\nimport {Constants} from '../now-appointment-calendar';\nimport moment from 'moment-timezone';\nimport '@servicenow/now-button';\nimport '@servicenow/now-dropdown';\nimport {getEvents, getNextAvailableEvent, TIMEZONE} from \"./eventsScript\";\n\nconst DemoAppointmentCalendarConfig = {\n\trenderer: {type: snabbdom},\n\tproperties: {\n\t\tappTitle: {\n\t\t\tdefault: 'Appointment Calendar'\n\t\t},\n\t\tevents: {\n\t\t\tdefault: getEvents()\n\t\t},\n\t\tnextAvailableEvent: {\n\t\t\tdefault: getNextAvailableEvent()\n\t\t},\n\t\tshow: {\n\t\t\tdefault: 'yes'\n\t\t},\n\t\tcontextDate: {\n\t\t\tdefault: moment(Date.now()).tz(TIMEZONE).toString()\n\t\t},\n\t\ttimezone: {\n\t\t\tdefault: TIMEZONE\n\t\t},\n\t\tlocale: {\n\t\t\tdefault: 'en'\n\t\t},\n\t\tdir: {\n\t\t\tdefault: 'ltr'\n\t\t},\n\t\tdateFormat: {\n\t\t\tdefault: Constants.INTERNAL_FORMAT.DATE\n\t\t},\n\t\ttimeFormat: {\n\t\t\tdefault: Constants.INTERNAL_FORMAT.TIME_DISPLAY_FORMAT\n\t\t},\n\t\tview: {\n\t\t\tdefault: Constants.VIEWS.WEEK\n\t\t},\n\t\tshowInModal: {\n\t\t\tdefault: false\n\t\t}\n\t},\n\tactionHandlers: {\n\t\t[Constants.ACTIONS.RANGE_UPDATED]: ({action}) => {\n\t\t\tlet startMoment = moment(action.payload.startMS);\n\t\t\tlet endMoment = moment(action.payload.endMS);\n\t\t\tconsole.log('Date range updated. We should ideally fetch the events now for range: ', startMoment.format(), endMoment.format()); // eslint-disable-line no-console\n\t\t},\n\t\t[Constants.ACTIONS.EVENT_CLICKED]: ({action}) => {\n\t\t\tlet {event} = action.payload;\n\t\t},\n\t\t[Constants.ACTIONS.NOW_DROPDOWN_SELECTED_ITEMS_SET]: ({state, action, dispatch}) => {\n\t\t\tconst {\n\t\t\t\tpayload: {value}\n\t\t\t} = action;\n\t\t\tif (action.payload.dropdown === 'timeformat') {\n\t\t\t\tdispatch('PROPERTIES_SET', {timeFormat: value[0]});\n\t\t\t}\n\t\t},\n\t\t[Constants.ACTIONS.SCHEDULE_APPOINTMENT]: ({state, action, dispatch}) => {\n\t\t\tconst {events, showInModal} = state.properties;\n\t\t\tlet event;\n\t\t\tif (showInModal) {\n\t\t\t\tevent = action.payload.footerAction.event;\n\t\t\t} else {\n\t\t\t\tevent = action.payload.event;\n\t\t\t}\n\t\t\tif (events) {\n\t\t\t\tfor (let i = 0; i < events.length; i++) {\n\t\t\t\t\tif (events[i].start === event.start) {\n\t\t\t\t\t\tevents[i].type = Constants.EVENT_TYPES.SELECTED;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (events[i].type === Constants.EVENT_TYPES.SELECTED)\n\t\t\t\t\t\t\tevents[i].type = Constants.EVENT_TYPES.AVAILABLE;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdispatch('PROPERTIES_SET', {events: [...events]});\n\t\t\t}\n\t\t\t// Close the modal after Schedule\n\t\t\tif (showInModal) {\n\t\t\t\tdispatch('PROPERTIES_SET', {showInModal: !state.properties.showInModal});\n\t\t\t}\n\t\t},\n\t\t[Constants.ACTIONS.RESCHEDULE_APPOINTMENT]: ({state, action, dispatch}) => {\n\t\t\tconst {events, showInModal} = state.properties;\n\t\t\tlet event;\n\t\t\tif (showInModal) {\n\t\t\t\tevent = action.payload.footerAction.event;\n\t\t\t} else {\n\t\t\t\tevent = action.payload.event;\n\t\t\t}\n\t\t\tif (events) {\n\t\t\t\tfor (let i = 0; i < events.length; i++) {\n\t\t\t\t\tif (events[i].start === event.start) {\n\t\t\t\t\t\tevents[i].type = Constants.EVENT_TYPES.SELECTED;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (events[i].type === Constants.EVENT_TYPES.SELECTED)\n\t\t\t\t\t\t\tevents[i].type = Constants.EVENT_TYPES.AVAILABLE;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdispatch('PROPERTIES_SET', {events: [...events]});\n\t\t\t}\n\t\t\t// Close the modal after Reschedule\n\t\t\tif (showInModal) {\n\t\t\t\tdispatch('PROPERTIES_SET', {showInModal: !state.properties.showInModal});\n\t\t\t}\n\t\t},\n\t\t[Constants.ACTIONS.MODAL_CLOSED]: ({state, action, dispatch}) => {\n\t\t \tdispatch('PROPERTIES_SET', {showInModal: !state.properties.showInModal});\n\t\t}\n\t},\n\tview(state, dispatch) {\n\t\tconst {properties: props} = state;\n\t\tconst {showInModal} = state.properties;\n\t\tfunction setLocale(locale) {\n\t\t\tdispatch('PROPERTIES_SET', {locale});\n\t\t}\n\n\t\tfunction setDir(dir) {\n\t\t\tdispatch('PROPERTIES_SET', {dir, show: 'no'});\n\t\t}\n\n\t\tfunction setView(viewName) {\n\t\t\tdispatch('PROPERTIES_SET', {view: viewName});\n\t\t}\n\n\t\tfunction toggleShowInModal() {\n\t\t\tdispatch('PROPERTIES_SET', {showInModal: !props.showInModal});\n\t\t}\n\n\t\tlet docDir = document.dir || 'ltr';\n\t\tif (docDir !== props.dir) {\n\t\t\tdocument.dir = props.dir;\n\t\t\tconsole.log('Direction of component is different from document, need to re-render it.'); // eslint-disable-line no-console\n\n\t\t\tsetTimeout(() => dispatch('PROPERTIES_SET', {show:'yes'}), 1);\n\t\t\treturn <div></div>;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{showInModal ? null\n\t\t\t\t\t: <div style={{height: '30px', padding: '16px 16px 0 16px', fontFamily: 'var(--now-font-family,\"Source Sans Pro\",\"Helvetica Neue\",helvetica,arial,sans-serif)'}}>\n\t\t\t\t\t\t\t<div style={{display: 'inline-block'}}>\n\t\t\t\t\t\t\t\t<span>Time format: </span>\n\t\t\t\t\t\t\t\t<now-dropdown items='[{ \"id\": \"HH:mm\", \"label\": \"HH:mm\" }, { \"id\": \"hh:mm A\", \"label\": \"hh:mm A\"}]'\n\t\t\t\t\t\t\t\t\tpanel-fit-props='{}' placeholder=\"Time format\" select=\"single\" \n\t\t\t\t\t\t\t\t\tselected-items={[props.timeFormat]}\n\t\t\t\t\t\t\t\t\tmanage-selected-items size=\"sm\" variant=\"secondary\"\n\t\t\t\t\t\t\t\t\tappend-to-payload={{'dropdown' : 'timeformat'}}>\n\t\t\t\t\t\t\t\t</now-dropdown>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div style={{display: 'inline-block', padding: '0 0 0 10px'}}>\n\t\t\t\t\t\t\t\t<span>Direction:  </span>\n\t\t\t\t\t\t\t\t<now-button on-click={() => setDir('ltr')} size=\"sm\" variant={props.dir === 'ltr' ? 'primary' : 'secondary'}>ltr</now-button>\n\t\t\t\t\t\t\t\t<now-button on-click={() => setDir('rtl')} size=\"sm\" variant={props.dir === 'rtl' ? 'primary' : 'secondary'}>rtl</now-button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div style={{display: 'inline-block', padding: '0 0 0 10px'}}>\n\t\t\t\t\t\t\t\t<span>View: </span>\n\t\t\t\t\t\t\t\t<now-button on-click={() => setView(Constants.VIEWS.DAY)} size=\"sm\" variant={props.view === Constants.VIEWS.DAY ? 'primary' : 'secondary'}>Day</now-button>\n\t\t\t\t\t\t\t\t<now-button on-click={() => setView(Constants.VIEWS.WEEK)} size=\"sm\" variant={props.view === Constants.VIEWS.WEEK ? 'primary' : 'secondary'}>Week</now-button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div style={{display: 'inline-block', padding: '0 0 0 10px'}}>\n\t\t\t\t\t\t\t\t<now-button on-click={() => toggleShowInModal()} size=\"sm\" variant=\"primary\">Show in modal</now-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t<div style={{padding: showInModal ? '0px' : '20px'}}>\n\t\t\t\t\t<now-appointment-calendar style={{height: '90vh', width: '100%'}} dir={props.dir} current-mode={props.mode}\n\t\t\t\t\t\t\tdate-format={props.dateFormat}\n\t\t\t\t\t\t\ttime-format={props.timeFormat}\n\t\t\t\t\t\t\tlocale={props.locale}\n\t\t\t\t\t\t\tfirst-day-of-week={Constants.WEEK_DAYS.SUNDAY}\n\t\t\t\t\t\t\tview={props.view} context-date={props.contextDate}\n\t\t\t\t\t\t\ttimezone={TIMEZONE}\n\t\t\t\t\t\t\tevents={props.events}\n\t\t\t\t\t\t\tnext-available-event={props.nextAvailableEvent}\n\t\t\t\t\t\t\tapp-title={props.appTitle}\n\t\t\t\t\t\t\tshow-in-modal={props.showInModal}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t</now-appointment-calendar>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n};\n\ncreateCustomElement('sn-demo-now-appointment-calendar', DemoAppointmentCalendarConfig);\n","module.exports = __TECTONIC__$servicenow_now_dropdown;","import moment from 'moment-timezone';\nimport {Constants} from '../now-appointment-calendar';\nexport const TIMEZONE = 'GMT';\n\nfunction generateEvents() {\n\tconst today = moment.tz(TIMEZONE);\n\tconst todayDate = today.format('YYYY-MM-DD');\n\tconst minus1Date = moment(today).add(-1, 'days').format('YYYY-MM-DD');\n\tconst minus2Date = moment(today).add(-2, 'days').format('YYYY-MM-DD');\n\tconst minus4Date = moment(today).add(-4, 'days').format('YYYY-MM-DD');\n\n\tconst plus1Date = moment(today).add(1, 'days').format('YYYY-MM-DD');\n\tconst plus2Date = moment(today).add(2, 'days').format('YYYY-MM-DD');\n\tconst plus4Date = moment(today).add(4, 'days').format('YYYY-MM-DD');\n\n\tconst plus10Date = moment(today).add(10, 'days').format('YYYY-MM-DD');\n\n\treturn [\n\t\t{start: `${todayDate} 08:00:00`, end: `${todayDate} 10:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${todayDate} 10:00:00`, end: `${todayDate} 12:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${todayDate} 12:00:00`, end: `${todayDate} 14:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${todayDate} 14:00:00`, end: `${todayDate} 16:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${todayDate} 16:00:00`, end: `${todayDate} 18:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${todayDate} 18:00:00`, end: `${todayDate} 20:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${todayDate} 20:00:00`, end: `${todayDate} 22:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\n\t\t{start: `${plus1Date} 08:00:00`, end: `${plus1Date} 10:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${plus1Date} 10:00:00`, end: `${plus1Date} 12:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${plus1Date} 12:00:00`, end: `${plus1Date} 14:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\n\t\t{start: `${plus2Date} 08:00:00`, end: `${plus2Date} 10:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${plus2Date} 10:00:00`, end: `${plus2Date} 12:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${plus2Date} 12:00:00`, end: `${plus2Date} 14:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${plus2Date} 14:00:00`, end: `${plus2Date} 16:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${plus2Date} 16:00:00`, end: `${plus2Date} 18:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${plus2Date} 18:00:00`, end: `${plus2Date} 20:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${plus2Date} 20:00:00`, end: `${plus2Date} 22:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\n\t\t{start: `${plus4Date} 08:00:00`, end: `${plus4Date} 10:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${plus4Date} 10:00:00`, end: `${plus4Date} 12:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${plus4Date} 12:00:00`, end: `${plus4Date} 14:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\n\t\t{start: `${minus1Date} 08:00:00`, end: `${minus1Date} 10:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${minus1Date} 10:00:00`, end: `${minus1Date} 12:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${minus1Date} 12:00:00`, end: `${minus1Date} 14:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\n\t\t{start: `${minus2Date} 08:00:00`, end: `${minus2Date} 10:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${minus2Date} 10:00:00`, end: `${minus2Date} 12:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${minus2Date} 12:00:00`, end: `${minus2Date} 14:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${minus2Date} 14:00:00`, end: `${minus2Date} 16:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${minus2Date} 16:00:00`, end: `${minus2Date} 18:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${minus2Date} 18:00:00`, end: `${minus2Date} 20:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${minus2Date} 20:00:00`, end: `${minus2Date} 22:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\n\t\t{start: `${minus4Date} 08:00:00`, end: `${minus4Date} 10:00:00`, type: Constants.EVENT_TYPES.AVAILABLE},\n\t\t{start: `${minus4Date} 10:00:00`, end: `${minus4Date} 12:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${minus4Date} 12:00:00`, end: `${minus4Date} 14:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\t\t{start: `${minus4Date} 14:00:00`, end: `${minus4Date} 16:00:00`, type: Constants.EVENT_TYPES.UNAVAILABLE},\n\n\t\t{start: `${plus10Date} 08:00:00`, end: `${plus10Date} 10:00:00`, type: Constants.EVENT_TYPES.AVAILABLE}\n\t];\n}\n\n\nexport function getEvents() {\n\treturn generateEvents();\n}\n\nexport function getNextAvailableEvent() {\n\tvar events = generateEvents();\n\treturn events[events.length - 1];\n}\n"],"sourceRoot":""}