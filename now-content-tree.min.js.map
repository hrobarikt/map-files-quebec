{"version":3,"sources":["webpack://__TECTONIC__$servicenow_now_content_tree/webpack/bootstrap","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_ui_renderer_snabbdom\"","webpack://__TECTONIC__$servicenow_now_content_tree/./src/utils/elements.js","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__lodash_4_17_4[\\\"isEqual\\\"]\"","webpack://__TECTONIC__$servicenow_now_content_tree/./src/utils/dom.js","webpack://__TECTONIC__$servicenow_now_content_tree/./src/utils/focus.js","webpack://__TECTONIC__$servicenow_now_content_tree/./src/utils/paths.js","webpack://__TECTONIC__$servicenow_now_content_tree/./src/index.js","webpack://__TECTONIC__$servicenow_now_content_tree/./src/now-content-tree.js","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_library_enhanced_element_19_8_3\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_library_enhanced_utils_19_8_3\"","webpack://__TECTONIC__$servicenow_now_content_tree/./src/_now-content-tree.scss?dfcf","webpack://__TECTONIC__$servicenow_now_content_tree/./src/_now-content-tree.scss","webpack://__TECTONIC__$servicenow_now_content_tree//mnt/jenkins/workspace/motive_design-system_quebec-LAU4EC4LTND4QOM764JRONU2HSYHYZ6QDWUSLZIXTBP7KKZ7BWQQ/target/checkout/node_modules/css-loader/lib/css-base.js","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_now_collapse\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_behavior_focus_19_8_3\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_behavior_dragdrop_19_8_3\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_now_avatar\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_now_button\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_now_highlighted_value\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_now_icon\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_now_badge\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_now_loader\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_now_tooltip\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__lodash_4_17_4[\\\"omit\\\"]\"","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__sn_translate\"","webpack://__TECTONIC__$servicenow_now_content_tree/./src/utils/highlight.js","webpack://__TECTONIC__$servicenow_now_content_tree/./src/schemas/content-tree-schema.js","webpack://__TECTONIC__$servicenow_now_content_tree/external \"__TECTONIC__$servicenow_ui_core\"","webpack://__TECTONIC__$servicenow_now_content_tree/./src/utils/dragdrop.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__TECTONIC__$servicenow_ui_renderer_snabbdom","getTreeRoot","host","shadowRoot","querySelector","getTreeItemActions","el","querySelectorAll","isTreeItem","getAttribute","isTreeItemLoadMore","getFocusedElement","activeElement","getVisibleTreeItems","getSelectedTreeItems","getHostTreeItem","parentElement","getTreeItemTrigger","getTreeItemStatusActions","getPreviousTreeItemAction","focused","actions","index","findIndex","node","getNextTreeItemAction","isTreeItemParent","isTreeItemExpanded","getFirstTreeItemInPath","path","find","nodeType","Node","ELEMENT_NODE","isTreeItemLoadIndicator","__TECTONIC__lodash_4_17_4","getShadowRootHost","parentNode","ShadowRoot","getParentItem","nextEl","DocumentFragment","tagName","changeItemActionsVisibilityIfNeeded","setLastFocusedTreeItem","treeItem","hostToLastFocusedTreeItem","set","getLastFocusedTreeItem","focusInitialTreeItem","lastFocusedItem","focus","selectedItems","length","visibleItems","focusFirstTreeItem","focusTreeItem","focusLastTreeItem","treeItems","isLastSubtreeItemFocused","siblings","children","indexOf","getNextFocusableTreeItem","focusNextTreeItem","nextItem","getPrevFocusableTreeItem","focusPreviousTreeItem","focusPreviousTreeItemAction","element","focusNextTreeItemAction","WeakMap","lastTreeItem","firstChild","classList","contains","forEach","style","visibility","treeRoot","focusedItem","focusedItemIndex","hasPath","hasChildPath","list","slice","removePath","addPath","togglePath","isParent","parentPath","childPath","Array","isArray","reduce","acc","rebasePath","oldRoot","newRoot","map","nextPath","getPathToItem","items","itemId","thisLevelItem","item","id","getPathItem","countItemsInPaths","paths","countItemsInPath","count","child","spliceItemsAtPath","deleteCount","insertItems","below","itemsToSplice","parentIndex","j","itemIndex","splice","filter","nextLevel","nextId","createNowContentTreeDriver","version","require","registry","window","___NOW_DESIGN_SYSTEM_PACKAGES___","COMPONENT_DISCONNECTED","actionTypes","showTooltip","updateState","target","operation","ref","content","label","opened","hideTooltip","getLoadingState","loadingItems","status","error","errorMessage","getRowAriaLabel","highlightedValueProps","hvp","join","disabled","getAriaSelected","select","selected","onFocusItem","e","componentId","lastFocused","composedPath","span","offsetWidth","scrollWidth","schedule","renderTreeItem","showDividers","showActionsOnHover","showPresencePattern","highlightSelectedParent","expandedItems","dispatch","renderChildren","parentExpanded","searchTerm","size","triggerIcon","overflow","childrenAvailable","hasUnloadedChildren","parent","childSelected","expanded","loading","scheduleShowTooltip","scheduleHideTooltip","renderTrigger","className","icon","chevron","caret","hide-padding","bare","title","variant","config-aria","button","tabindex","on-click","type","payload","properties","undefined","renderStatuses","statuses","round","data-test","renderBadgeStatus","presence","show-pattern","renderPresenceStatus","renderIconStatus","renderActions","action","iconName","actionTarget","getActiveElement","clickActionType","domTarget","onClickAction","on-mouseenter","mouseenterActionType","onMouseenterAction","on-mouseleave","mouseleaveActionType","onMouseleaveAction","on-focus","renderHighlightedValues","width","show-icon","renderChildItems","renderLoadIndicatorItem","visible","role","data-visible","class","renderTreeItemLoadIndicator","loadingInactiveWithChildren","renderLoadMoreItem","onClick","loadMoreMessage","retryMessage","retryAriaLabel","renderContent","data-id","renderTreeItemLoadMore","renderCollapseContent","hidden","iconIdentifierName","identifierProps","renderIdentifier","show-presence-pattern","actionable","highlightedLabel","renderLabelText","aria-label","renderLabel","Fragment","aria-expanded","String","data-parent","data-disabled","data-selected","aria-selected","data-testid","on-focusout","parentTagName","createEnhancedElement","default","manageable","schema","itemsSchema","translatable","enum","initialState","hasFocus","dragdropState","focusId","initialFocusId","cursorAbove","currentTooltip","view","state","renderItems","on-focusin","keyedIntoTree","relatedTarget","setTimeout","cancelDrag","manage-opened","target-ref","delay","show","hide","styles","eventHandlers","events","effect","coeffects","shiftKey","event","dragContext","getDragContext","includes","preventDefault","handleKeyboardDrag","isExpanded","click","treeItemAction","actionHandlers","createTooltipActionHandler","meta","unschedule","context","shouldRender","getType","updateDragCursor","targetPath","expandItem","isValidDrop","hideDragCursor","targetBounds","getBoundingClientRect","getLastDragPosition","y","top","height","handleDrop","cleanupDragDrop","behaviors","behavior","focusBehavior","dragdropBehavior","options","dragSources","dropTargets","dragImage","add","dragCount","itemPath","dragData","dragSource","format","data","dispatches","__TECTONIC__$servicenow_library_enhanced_element_19_8_3","__TECTONIC__$servicenow_library_enhanced_utils_19_8_3","result","toString","push","useSourceMap","this","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","cssWithMappingToString","mediaQuery","alreadyImportedModules","__TECTONIC__$servicenow_now_collapse","__TECTONIC__$servicenow_behavior_focus_19_8_3","__TECTONIC__$servicenow_behavior_dragdrop_19_8_3","__TECTONIC__$servicenow_now_avatar","__TECTONIC__$servicenow_now_button","__TECTONIC__$servicenow_now_highlighted_value","__TECTONIC__$servicenow_now_icon","__TECTONIC__$servicenow_now_badge","__TECTONIC__$servicenow_now_loader","__TECTONIC__$servicenow_now_tooltip","__TECTONIC__sn_translate","string","lowerString","toLowerCase","lowerSearchTerm","highlightLength","lastIndex","nextIndex","highlight","$id","$ref","userName","imageSrc","ariaHidden","description","__TECTONIC__$servicenow_ui_core","showDragCursor","targetList","listIndex","from","parentItem","allItems","isValidDropTarget","hasChildren","oldState","newState","targetIndex","prevSibling","prevSiblingList","prevSiblingExpanded","Math","max","kids","isLastSubtreeItem","grandParentItem","parentList","parentNextSibling","min","nextSibling","itemToFocus","newItemPath","moveDragImage","getData","newItems","itemsToMove","itemToMove","toPath","newParent","newExpanded","nextExpPath","nextExp","newSelected","remove","cursor","left","scrollX","bottom","scrollY","curParents","getElementById","targetPathFlat","itemHeight","xPos","yPos"],"mappings":"yDACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,gBClFrDhC,EAAOD,QAAUkC,8C,6BCIV,SAASC,EAAYC,GAC3B,OAAOA,EAAKC,WAAWC,cAAc,mBAiC/B,SAASC,EAAmBC,GAClC,MAAO,IACHA,EACDF,cAAc,0BACdG,iBACA,yIAmDG,SAASC,EAAWF,GAC1B,MAAmC,aAA5BA,EAAGG,aAAa,QAGjB,SAASC,EAAmBJ,GAClC,MAAsC,aAA/BA,EAAGG,aAAa,W,mDAnGRE,kBAAT,SAA2BT,GACjC,OAAOA,EAAKC,WAAWS,e,EAGRX,c,EAIAY,oBAAT,SAA6BX,GACnC,MAAO,IACHD,EAAYC,GAAMK,iBACpB,sG,EAKaO,qBAAT,SAA8BZ,GACpC,MAAO,IACHD,EAAYC,GAAMK,iBACpB,mD,EAKaQ,gBAAT,SAASA,EAAgBT,GAC/B,GAAIE,EAAWF,IAAOI,EAAmBJ,GACxC,OAAOA,EAER,IAAKA,EAAGU,cACP,OAAO,KAER,OAAOD,EAAgBT,EAAGU,gB,EAGXC,mBAAT,SAA4BX,GAClC,OAAOA,EAAGF,cAAc,8B,EAGTC,qB,EASAa,yBAAT,SAAkCZ,GACxC,MAAO,IACHA,EACDF,cAAc,0BACdG,iBAAiB,8C,EAILY,0BAAT,SAAmCb,EAAIc,GAC7C,MAAMC,EAAUhB,EAAmBC,GACnC,GAAIA,IAAOc,EAEV,OAAO,KAER,MAAME,EAAQD,EAAQE,UAAWC,GAASA,IAASJ,GACnD,GAAc,IAAVE,EACH,OAAOhB,EAER,OAAOe,EAAQC,EAAQ,IAAM,M,EAGdG,sBAAT,SAA+BnB,EAAIc,GACzC,MAAMC,EAAUhB,EAAmBC,GACnC,GAAIA,IAAOc,EAEV,OAAOC,EAAQ,GAEhB,MAAMC,EAAQD,EAAQE,UAAWC,GAASA,IAASJ,GACnD,OAAOC,EAAQC,EAAQ,IAAM,M,EAGdI,iBAAT,SAA0BpB,GAChC,MAA0C,SAAnCA,EAAGG,aAAa,gB,EAGRkB,mBAAT,SAA4BrB,GAClC,MAA4C,SAArCA,EAAGG,aAAa,kB,EAGRmB,uBAAT,SAAgCC,GACtC,OAAOA,EAAKC,KACVN,GACAA,EAAKO,WAAaC,KAAKC,cACO,aAA9BT,EAAKf,aAAa,U,EAILD,a,EAIAE,qB,EAIAwB,wBAAT,SAAiC5B,GACvC,OAAOA,EAAGF,cAAc,sC,cCvGzBrC,EAAOD,QAAUqE,0BAAmC,S,gFCApCC,kBAAT,SAASA,EAAkBZ,GACjC,GAAIA,EAAKa,sBAAsBC,WAC9B,OAAOd,EAAKa,WAAWnC,KAExB,GAAIsB,EAAKR,cACR,OAAOoB,EAAkBZ,EAAKR,eAE/B,OAAO,M,EAGQuB,cAAT,SAAuBrC,EAAMsB,GACnC,GAAIA,IAAStB,EAAM,OAAO,KAC1B,IAAIsC,EAAShB,EACb,KAAOgB,GAAUA,IAAWtC,IAE1BsC,EADGA,EAAOxB,cACDwB,EAAOxB,cAEhBwB,EAAOH,YACPG,EAAOH,sBAAsBI,iBAEpBD,EAAOH,WAAWnC,KAElB,KAEa,OAAnBsC,EAAOE,WAIZ,OAAOF,IAAWtC,EAAO,KAAOsC,I,gFCLjBG,sC,EAeAC,uBAAT,SAAgC1C,EAAM2C,GAC5CF,EAAoCzC,EAAM2C,GAC1CC,EAA0BC,IAAI7C,EAAM2C,I,EAGrBG,yB,EAIAC,qBAAT,SAA8B/C,GACpC,MAAMgD,EAAkBF,EAAuB9C,GAC/C,GAAIgD,EAEH,YADAA,EAAgBC,QAGjB,MAAMC,GAAgB,IAAAtC,sBAAqBZ,GAC3C,GAAIkD,EAAcC,OAEjB,YADAD,EAAc,GAAGD,QAGlB,MAAMG,GAAe,IAAAzC,qBAAoBX,GACrCoD,EAAaD,QAChBC,EAAa,GAAGH,S,EAIFI,mBAAT,SAA4BrD,GAElCsD,GADkB,IAAA3C,qBAAoBX,GACd,K,EAGTuD,kBAAT,SAA2BvD,GACjC,MAAMwD,GAAY,IAAA7C,qBAAoBX,GACtCsD,EAAcE,EAAUA,EAAUL,OAAS,K,EAG5BM,yBAAT,SAAkCzD,GACxC,MAAMkB,GAAU,IAAAT,mBAAkBT,GAC5B0D,EAAW,IAAIxC,EAAQiB,WAAWwB,UACxC,OAAOD,EAASE,QAAQ1C,KAAawC,EAASP,OAAS,G,EAExCU,2B,EAsBAC,kBAAT,SAA2B9D,GACjC,MAAM+D,EAAWF,EAAyB7D,GACtC+D,GACHT,EAAcS,I,EAIAC,2B,EAsBAC,sBAAT,SAA+BjE,GACrC,MAAM+D,EAAWC,EAAyBhE,GACtC+D,GACHT,EAAcS,I,EAIAG,4BAAT,SAAqCvB,EAAUzB,GACrD,MAAMiD,GAAU,IAAAlD,2BAA0B0B,EAAUzB,GAChDiD,GACHA,EAAQlB,S,EAIMmB,wBAAT,SAAiCzB,EAAUzB,GACjD,MAAMiD,GAAU,IAAA5C,uBAAsBoB,EAAUzB,GAC5CiD,GACHA,EAAQlB,SAnJV,WAcA,MAAML,EAA4B,IAAIyB,QAEtC,SAASf,EAAcX,KAClB,IAAArC,YAAWqC,KAAa,IAAAnC,oBAAmBmC,KAC9CA,EAASM,QAKJ,SAASR,EAAoCzC,EAAM2C,GACzD,MAAM2B,EAAexB,EAAuB9C,GAC5C,GACCsE,GACAA,EAAaC,WAAWC,UAAUC,SAAS,gBAC1C,EACyB,IAAAzD,0BAAyBsD,GACjCI,QAAStE,GAAQA,EAAGuE,MAAMC,WAAa,IAE1D,GAAIjC,GAAYA,EAAS4B,WAAWC,UAAUC,SAAS,gBAAiB,EACjD,IAAAzD,0BAAyB2B,GACjC+B,QAAStE,GAAQA,EAAGuE,MAAMC,WAAa,YAShD,SAAS9B,EAAuB9C,GACtC,OAAO4C,EAA0BjE,IAAIqB,GAmC/B,SAAS6D,EAAyB7D,GACxC,MAAMkB,GAAU,IAAAT,mBAAkBT,GAC5B6E,GAAW,IAAA9E,aAAYC,GACvBwD,GAAY,IAAA7C,qBAAoBX,GACtC,GAAIkB,IAAY2D,EAEf,OAAOrB,EAAU,GAElB,MAAMsB,GAAc,IAAAjE,iBAAgBK,GAC9B6D,EAAmBvB,EAAUnC,UAAWC,GAASA,IAASwD,GAChE,OAAItB,EAAUL,SAAW4B,EAAmB,EAEpC,MAGJ,IAAA/C,yBAAwBwB,EAAUuB,EAAmB,IAEjDvB,EAAUuB,EAAmB,GAG9BvB,EAAUuB,EAAmB,GAS9B,SAASf,EAAyBhE,GACxC,MAAMkB,GAAU,IAAAT,mBAAkBT,GAC5B6E,GAAW,IAAA9E,aAAYC,GACvBwD,GAAY,IAAA7C,qBAAoBX,GACtC,GAAIkB,IAAY2D,EAEf,OAAO,KAER,MAAMC,GAAc,IAAAjE,iBAAgBK,GAC9B6D,EAAmBvB,EAAUnC,UAAWC,GAASA,IAASwD,GAChE,OAAyB,IAArBC,EAEI,MAEJ,IAAA/C,yBAAwBwB,EAAUuB,EAAmB,IAEjDvB,EAAUuB,EAAmB,GAG9BvB,EAAUuB,EAAmB,K,gFC7HrBC,U,EAGAC,aAAT,SAAsBC,EAAMvD,GAClC,OACCuD,EAAK7D,UACHzB,GACAA,EAAEuD,SAAWxB,EAAKwB,OAAS,IAAK,aAAQvD,EAAEuF,MAAM,EAAGxD,EAAKwB,QAASxB,KAC9D,G,EAGSyD,a,EAGAC,U,EAGAC,WAAT,SAAoBJ,EAAMvD,GAChC,OAAOqD,EAAQE,EAAMvD,GAAQyD,EAAWF,EAAMvD,GAAQ0D,EAAQH,EAAMvD,I,EAErD4D,SAAT,SAAkBC,EAAYC,GACpC,OACCC,MAAMC,QAAQH,IACdE,MAAMC,QAAQF,IACdD,EAAWrC,OAASsC,EAAUtC,QAC9BqC,EAAWI,OAAO,CAACC,EAAKtG,EAAGzB,IAAM+H,GAAOtG,IAAMkG,EAAU3H,IAAI,I,EAG9CgI,WAAT,SAAoBZ,EAAMa,EAASC,GACzC,OAAOd,EAAKe,IAAKC,IAChB,aAAQA,EAASf,MAAM,EAAGY,EAAQ5C,QAAS4C,GACxC,IAAIC,KAAYE,EAASf,MAAMY,EAAQ5C,OAAS,IAChD+C,I,EAGWC,cAAT,SAASA,EAAcC,EAAOC,GACpC,IAAKX,MAAMC,QAAQS,IAA2B,IAAjBA,EAAMjD,OAAc,MAAO,GACxD,MAAMmD,EAAgBF,EAAMxE,KAAM2E,GAASA,EAAKC,KAAOH,GACvD,GAAIC,EAAe,MAAO,CAACA,EAAcE,IACzC,IAAK,MAAMD,KAAQH,EAAO,CACzB,MAAMX,EAAYU,EAAcI,EAAK5C,SAAU0C,GAC/C,GAAIZ,GAAaA,EAAUtC,OAAQ,MAAO,CAACoD,EAAKC,MAAOf,GAExD,MAAO,I,EAEQgB,c,EAkBAC,kBAAT,SAA2BC,EAAOP,GACxC,OAAKO,GAA0B,IAAjBA,EAAMxD,OACbwD,EAAMf,OAAO,CAACC,EAAKlE,IAASkE,EAZpC,SAASe,EAAiBjF,EAAMyE,GAC/B,IAAIG,EAAOE,EAAYL,EAAOzE,GAC1BkF,EAAQ,EACRN,EAAK5C,UACR4C,EAAK5C,SAASe,QAASoC,IACtBD,GAASD,EAAiB,IAAIjF,EAAMmF,EAAMN,IAAKJ,KAGjD,OAAOS,EAIkCD,CAAiBjF,EAAMyE,GAAQ,GAD/B,G,EAG1BW,kBAAT,SACNX,EACAzE,EACAqF,EACAC,EACAC,GAAQ,GAER,IACExB,MAAMC,QAAQhE,KACd+D,MAAMC,QAAQS,IACC,IAAhBzE,EAAKwB,QACY,IAAjBiD,EAAMjD,OAEN,OACD,IAAIgE,EAAgBf,EACpB,IAAK,IAAItI,EAAI,EAAGA,EAAI6D,EAAKwB,OAAS,EAAGrF,IAAK,CACzC,MAAMsJ,EAAcD,EAAc9F,UAAWgG,GAAMA,EAAEb,KAAO7E,EAAK7D,IACjE,GAAIsJ,EAAc,EAAG,OACrBD,EAAgBA,EAAcC,GAAazD,SAE5C,IAAKwD,GAAmC,IAAlBA,EAAqB,OAC3C,IAAIG,EAAYH,EAAc9F,UAC5BvD,GAAMA,EAAE0I,KAAO7E,EAAKA,EAAKwB,OAAS,IAEpC,GAAImE,EAAY,EAAG,OACfJ,GAAOI,IACX,GAAIN,EAAc,EACjB,OAAOG,EAAcI,OAAOD,EAAWN,GAExC,OAAOG,EAAcI,OAAOD,EAAW,KAAML,IAlG9C,I,EAAA,O,oCAEO,SAASjC,EAAQE,EAAMvD,GAC7B,OAAOuD,EAAK7D,UAAWzB,IAAM,aAAQA,EAAG+B,KAAU,EAU5C,SAASyD,EAAWF,EAAMvD,GAChC,OAAOuD,EAAKsC,OAAQ5H,KAAO,aAAQA,EAAG+B,IAEhC,SAAS0D,EAAQH,EAAMvD,GAC7B,MAAO,IAAIuD,EAAMvD,GA8BX,SAAS8E,EAAYL,EAAOzE,GAClC,IAAI8F,EAAYrB,EAChB,OAAOzE,EAAKiE,OAAO,CAACC,EAAK6B,KACxB,MAAM3D,EAAW0D,EAAU7F,KAAM9D,GAAMA,EAAE0I,KAAOkB,GAEhD,OADAD,EAAY1D,EAAWA,EAASJ,SAAW,GACpCI,GACL,Q,yPCpDI4D,8BADR,KASA,MAAM,KAACtJ,EAAD,QAAOuJ,GAAWC,EAAQ,IAC1BC,EAAYC,OAAOC,iCACxBD,OAAOC,kCAAoC,GACvCF,EAASzJ,KACbyJ,EAASzJ,GAAQuJ,I,mOCblB,QACA,Q,IAEA,OACA,MACA,I,IAAA,OACA,Q,OAIA,MACA,MACA,MACA,MACA,MACA,MACA,Y,IAMA,M,IACA,OACA,QACA,OACA,OAWA,OAWA,O,IAOA,OACA,QACA,QACA,Q,mDASA,MAAM,uBAACK,GAA0BC,cAK3BC,EAAc,CAACC,EAAa7B,EAAM8B,KACvCD,EAAY,CACXzG,KAAM,iBACN2G,UAAW,MACXvJ,MAAO,CAACwJ,IAAKF,EAAQG,QAASjC,EAAKkC,MAAOC,QAAQ,MAI9CC,EAAeP,IACpBA,EAAY,CACXzG,KAAM,iBACN2G,UAAW,MACXvJ,MAAO,CAACwJ,IAAK,KAAMC,QAAS,GAAIE,QAAQ,MAwGpCE,EAAkB,CAACC,EAAclH,KACtC,MAAMP,EAAQyH,EAAaxH,UAAWkF,IAAS,aAAQA,EAAK5E,KAAMA,IAClE,IAAe,IAAXP,EACH,MAAO,CAAC0H,OAAQ,YAEjB,MAAM,MAACC,GAAQ,EAAT,aAAgBC,GAAe,IAAAhK,GAAE,mBAAqB6J,EAC3DzH,GAED,MAAO,CAAC0H,OAASC,EAAmB,QAAX,SAAoBC,iBAIxCC,EAAmB1C,IACxB,IAAIkC,EAAQlC,EAAKkC,MACjB,GAAIlC,EAAK2C,sBAAuB,CAI/BT,GAAU,MAHKlC,EAAK2C,sBAClBjD,IAAKkD,GAAQA,EAAIV,OACjBW,KAAK,OAMR,OAHI7C,EAAK8C,WACRZ,GAAU,MAAI,IAAAzJ,GAAE,aAEVyJ,GAGFa,EAAkB,CAACC,EAAQC,IACjB,UAAXD,EACIC,EAAW,OAAS,QACN,WAAXD,GACHC,EAAW,YADZ,EAKFC,EAAc,CAACC,EAAGnD,EAAMoD,EAAavB,KAC1C,MAAMpI,GAAO,IAAAkC,mBAAkBwH,EAAErB,QAE3BuB,GAAc,IAAAlI,wBAAuBgI,EAAEG,iBAC7C,IAAAnH,wBAAuB1C,EAAM4J,GAC7BjB,EAAYP,GAEZ,MAAM0B,EAAOF,EAAY1J,cAAc,gCAClC4J,GAAQA,EAAKC,aAAeD,EAAKE,cACtC,IAAAC,UACCN,EACAxB,EAAY7I,KAAK,KAAM8I,EAAa7B,EAAMqD,EAAYrF,cAIlD2F,EAAiB,EACtB3D,OACA5E,OACA4H,SACAY,eACAC,qBACAC,sBACAC,0BACAC,gBACArH,gBACA2F,eACA2B,WACAC,iBACAC,iBACAC,aACAC,OACAC,cACAC,WACAnB,cACAvB,kBAEA,MAAM,SAACzE,EAAW,GAAZ,kBAAgBoH,EAAoB,GAAKxE,EACzCyE,EAAsBD,EAAoBpH,EAASR,OACnD8H,EAAStH,EAASR,OAAS,GAAK6H,EAChCxB,GAAW,IAAAxE,SAAQ9B,EAAevB,GAClCuJ,GAAgB,IAAAjG,cAAa/B,EAAevB,GAC5CwJ,EAAWF,IAAU,IAAAjG,SAAQuF,EAAe5I,GAC5CyJ,EAAUH,GAAUrC,EAAgBC,EAAclH,GAyIlD0J,EAAuBhD,IAC5BM,EAAYP,IACZ,IAAA6B,UAASN,EAAaxB,EAAY7I,KAAK,KAAM8I,EAAa7B,EAAM8B,KAE3DiD,EAAsB,MAC3B,IAAArB,UAASN,EAAahB,EAAYrJ,KAAK,KAAM8I,KAaxCmD,EAAgBN,GACrB,wCACCO,UAAU,2BACVC,KACCN,EAdqB,CACvBO,QAAS,uBACTC,MAAO,kBACP,aAAc,cAWed,GATL,CACxBa,QAAS,sBACTC,MAAO,mBACP,aAAc,aAM+Cd,GAE5DD,KAAMA,EACNgB,gBAAA,EACAC,MAAA,EACAC,OAAO,IAAA9M,GAAE,mBACT+M,QAAQ,WACRC,cAAa,CAACC,OAAQ,CAAC,cAAe,SACtCC,SAAS,KACTC,WAtKqB,MAEpBhB,GACDH,GACoB,IAApBrH,EAASR,QACU,aAAnBiI,EAAQtC,QAER0B,EAAS,KACD,CACN4B,KAAM,qCACNC,QAAS,CAAC9F,OAAM5E,WAIfwJ,GAA+B,aAAnBC,EAAQtC,QACvB0B,EAAS,KACD,CACN4B,KAAM,qCACNC,QAAS,CAAC9F,OAAM5E,WAKnB6I,EAAS,EAAE8B,iBAAF,CACRF,KAAM,sCACNC,QAAS,CAACtN,OAAO,IAAAuG,YAAWgH,EAAW/B,cAAe5I,QA8ItD0H,SAAU9C,EAAK8C,gBAGhBkD,EA8CKC,EACLjG,EAAKkG,UACLlG,EAAKkG,SAASxG,IAAK6C,IAClB,OAAQA,EAAOsD,MACd,IAAK,QACJ,MAhDuBtD,KAC1B,gCACC0C,UAAU,0BACVU,SAAS,KACTF,cAAa,CAAC,aAAclD,EAAOL,OACnCY,SAAU9C,EAAK8C,SACfuC,gBAAA,EACAhB,KAAK,KACL7L,MAAO+J,EAAO/J,MACd2N,MAAO5D,EAAO4D,MACd5D,OAAQA,EAAOA,OACf6D,YAAU,WAqCDC,CAAkB9D,GAC1B,IAAK,WACJ,MAnC0BA,KAC7B,wCACC0C,UAAU,0BACVU,SAAS,KACTF,cAAa,CAAC,aAAclD,EAAO+D,UACnCxD,SAAU9C,EAAK8C,SACfwD,SAAU/D,EAAO+D,SACjBC,eAAczC,EACduB,gBAAA,EACAhB,KAAMA,EACN+B,YAAU,WAyBDI,CAAqBjE,GAC7B,QACC,MAvBsBA,KACzB,+BACC0C,UAAU,0BACVU,SAAS,KACTF,cAAa,CAAC,aAAclD,EAAOL,OACnCY,SAAU9C,EAAK8C,SACfoC,KAAM3C,EAAO2C,KACbK,MAAOhD,EAAOL,MACdmD,gBAAA,EACAhB,KAAMA,EACN+B,YAAU,WAaDK,CAAiBlE,MAItBmE,EACL1G,EAAKpF,SACLoF,EAAKpF,QAAQ8E,IAAKiH,IACjB,wCACC1B,UAAU,0BACVU,SAAS,KACTF,cAAa,CACZ,aAAckB,EAAOzE,OAEtBoD,MAAA,EACAxC,SAAU9C,EAAK8C,SACfuC,gBAAA,EACAH,KAAMyB,EAAOzB,MAAQyB,EAAOC,SAC5BrB,MAAQoB,GAAUA,EAAOzE,OAAUyE,EAAOzE,MAC1CsD,QAAQ,WACRnB,KAAMA,EACNuB,WAAWzC,GA1JQ,EAACA,EAAGwD,KACzB,IAAK3G,EAAK8C,SAAU,CACnB,MAAM+D,GAAe,IAAAC,oBACrB7C,EAAS0C,EAAOI,iBAAmB,kCAAmC,CACrE/G,OACA2G,SACAK,UAAW7D,EAAErB,OACb+E,mBAmJiBI,CAAc9D,EAAGwD,GAClCO,gBAAgB/D,GA/IQ,EAACA,EAAGwD,KACzB3G,EAAK8C,UACTmB,EACC0C,EAAOQ,sBAAwB,qCAC/B,CACCnH,OACA2G,SACAK,UAAW7D,EAAErB,UAwIQsF,CAAmBjE,EAAGwD,GAC5CU,gBAAgBlE,GAnIQ,EAACA,EAAGwD,KACzB3G,EAAK8C,UACTmB,EACC0C,EAAOW,sBAAwB,qCAC/B,CACCtH,OACA2G,SACAK,UAAW7D,EAAErB,UA4HQyF,CAAmBpE,EAAGwD,GAC5Ca,WAAWrE,GAAMD,EAAYC,EAAGnD,EAAMoD,EAAavB,MAIhD4F,EAA0BzH,EAAK2C,sBAClC3C,EAAK2C,sBAAsBjD,IAAKkD,IAE/B,0BACCxE,MAAO,CACNsJ,MAAO9E,EAAI8E,MAAQ9E,EAAI8E,MAAQ,MAEhCzC,UAAU,8CACV,4CACC7G,MAAO,CACN,YAAawE,EAAI8E,MAAQ9E,EAAI8E,MAAQ,MAEtCzC,UAAU,qCACV1C,OAAQK,EAAIL,OACZL,MAAOU,EAAIV,MACXyF,aAAA,WAKH3B,EAEG4B,EAAmBxK,EAASR,OAC/BsH,EACAlE,EAAK5C,SACLhC,EACA+I,GAAkBS,EAClBV,QAEA8B,EAEG6B,EACc,WAAnBhD,EAAQtC,OArb0B,GAAEqB,eAAckE,cAElD,yBAAInC,SAAS,KAAKoC,KAAK,OAAOC,eAAcF,IAC3C,0BACCG,MAAO,CACN,yBAAyB,EACzB,gBAAiBrE,KAElB,0BAAKqB,UAAU,0BACd,iCAAYA,UAAU,mBAAmBZ,KAAK,QAC9C,2BAAMY,UAAU,yBACf,2BAAMA,UAAU,mCACd,IAAAxM,GAAE,mBA0aLyP,CAA4B,CAC5BtE,eACAkE,QAAS3D,GAAkBS,SAE3BoB,EAEEmC,EACc,aAAnBtD,EAAQtC,QAAyBnF,EAASR,OAAS,EAE9CwL,EACL3D,IACoB,UAAnBI,EAAQtC,QAAsB4F,GA5aF,GAC9B3F,QACAC,eACAmB,eACAkE,UACAO,cAEA,MAAMC,GAAkB,IAAA7P,GAAE,aACpB8P,GAAe,IAAA9P,GAAE,SACjB+P,EAAkB,GAAE/F,MAAiB8F,IACrCE,EAAiBjG,GAQtB,0BAAKyC,UAAU,0BACd,+BACCA,UAAU,+BACVC,KAAK,+BACLb,KAAK,QAEN,2BAAMY,UAAU,yBACf,2BAAMA,UAAU,iCAAiCxC,KAElD,sCACCwC,UAAU,yBACVU,SAAS,KACTH,QAAQ,YACRtD,MAAOqG,EACP9C,cAAa,CAAC,aAAc+C,GAC5BnD,gBAAA,MAtBF,sCACCJ,UAAU,0BACVO,QAAQ,YACRtD,MAAOoG,EACPjD,gBAAA,IAuBF,OACC,yBAAIM,SAAS,KAAKoC,KAAK,OAAOW,UAAQ,WAAWV,eAAcF,IAC9D,0BACCG,MAAO,CAAC,yBAAyB,EAAM,gBAAiBrE,GACxDgC,WAAUyC,GACTI,KAkYAE,CAAuB,CACvBnG,MAA0B,UAAnBqC,EAAQtC,OACfE,aAAcoC,EAAQpC,aACtBmB,eACAkE,QAAS3D,GAAkBS,EAC3ByD,QAjRoB,KAClBrI,EAAK8C,UACTmB,EAAS,KACD,CACN4B,KAAM,qCACNC,QAAS,CAAC9F,OAAM5E,mBA8QhB4K,EAEE4C,EACLhB,GAAoBC,GAA2BO,GAC9C,mCAAcS,QAASjE,EAAUA,SAAUA,IAC1C,yBACCK,UAAU,sBACV8C,KAAK,QACL3B,YAAU,eACTwB,EACAC,EACAO,SAIHpC,EAKI8C,EACL9I,EAAK+I,iBAAmB/I,EAAK+I,gBAAgB7D,KAC1ClF,EAAK+I,gBAAgB7D,KACrBlF,EAAKkF,MAAQlF,EAAK4G,SACtB,IAAIoC,EAEAhJ,EAAK+I,iBAAiD,WAA9B/I,EAAK+I,gBAAgBlD,KAChDmD,GACC,sCACK,aAAKhJ,EAAK+I,gBAAiB,QADhC,CAECE,wBAAuBnF,EACvBmB,UAAU,uBACVZ,KAAK,QAGGyE,IACVE,GACC,+BACCf,MAAO,CACN,yBAAyB,EACzB,eAAe,EACf,gBAAiBjI,EAAKkJ,WACtB,iBAAmC,gBAAjBlJ,EAAKwF,SAExBN,KAAM4D,EACNzE,KAAMA,EACN+B,YAAU,gBAKb,MAAM+C,GAAmB/E,GACtB,aAAoBA,EAAYpE,EAAKkC,OACrClC,EAAKkC,MAEFkH,GAAkBpJ,EAAKkJ,YAC5B,6BACCjB,MAAO,CACN,2BAA2B,EAC3B,iBAAmC,gBAAjBjI,EAAKwF,QACvB,cAAexF,EAAK8C,UAErB6C,SAAS,KACT0D,aAAYrJ,EAAKkC,MACjB0D,WAhSuB,KACnB5F,EAAK8C,UACTmB,EAAS,KACD,CACN4B,KAAM,2CACNC,QAAS,CAAC9F,YA4RZwH,YAAA,EACA1E,SAAU9C,EAAK8C,SACfsD,YAAU,UACV,2BAAMnB,UAAU,yBACf,2BAAMA,UAAU,0BAA0BkE,OAI5C,2BAAMlE,UAAU,yBACf,2BACCgD,MAAO,CACN,0BAA0B,EAC1B,iBAAmC,gBAAjBjI,EAAKwF,SAExB6D,aAAYrJ,EAAKkC,OAChBiH,KAKEG,IACL,mBAAC,EAAAC,SAAD,KACEvE,GACD,0BACCiD,MAAO,CACN,yBAAyB,EACzB,gBAAiBvD,GAElB0B,YAAU,SACT4C,EACAI,KAKJ,OACC,yBACCtQ,IAAKkH,EAAKC,GACVA,GAAID,EAAKC,GACT8H,KAAK,WACLpC,SAAS,KACT6D,gBAAgB9E,EAAqB+E,OAAO7E,QAAnBoB,EACzB0D,cAAahF,EACbsD,eAAc7D,EACdwF,gBAAe3J,EAAK8C,SACpB8G,gBAAe3G,EACfoG,aAAY3G,EAAgB1C,GAC5B6J,gBAAe9G,EAAgBC,EAAQC,GACvC6G,cAAa9J,EAAKC,GAClB8J,cAA0B,aAAbxF,EAA0BQ,EAAsB,KAC7DyC,WAAWrE,GAAMD,EAAYC,EAAGnD,EAAMoD,EAAavB,KACnD,0BACCoG,MAAO,CACN,yBAAyB,EACzB,cAAejI,EAAK8C,SACpB,cAAeG,GAAa0B,GAAiBZ,EAC7C,oBAAqBd,GAAYc,EACjC,gBAAiBH,EACjB,eAAgBC,GAEjBqD,gBAA4B,aAAb3C,EA5SQpB,IAEzB,MAAMI,EAAOJ,EAAErB,OAAOnI,cAAc,gCAC/B4J,GAAQA,EAAKC,aAAeD,EAAKE,aACtCqB,EAAoB3B,EAAErB,SAwSwC,KAC5DuF,gBAA4B,aAAb9C,EAA0BQ,EAAsB,KAC/Da,WAvYuBzC,IACzB,MAAM,QACLlH,EACAL,YAAaK,QAAS+N,IACnB7G,EAAErB,OAELqB,EAAErB,OAAO7D,UAAUC,SAAS,4BAChB,WAAZjC,GACa,aAAZA,GAA4C,WAAlB+N,GACf,sBAAZ/N,GACY,oBAAZA,IAII+D,EAAK8C,UACTmB,EAAS,KACD,CACN4B,KAAM,gCACNC,QAAS,CAAC9F,WAITA,EAAK8C,UAAuB,SAAXE,GAGrBiB,EAAS,EAAE8B,iBACV,IAAIvN,EAOJ,MANe,WAAXwK,IACHxK,GAAQ,IAAAiG,SAAQsH,EAAWpJ,cAAevB,GAAQ,GAAK,CAACA,IAE1C,UAAX4H,IACHxK,GAAQ,IAAAuG,YAAWgH,EAAWpJ,cAAevB,IAEvC,CACNyK,KAAM,sCACNC,QAAS,CAACtN,eAqWT8Q,GACArD,EACAS,EACAe,GAEDmB,KAwIJ,IAAAqB,uBAAsB,mBAAoB,CACzClE,WAAY,CAUXlG,MAAO,CAACqK,QAAS,GAAIC,YAAY,EAAMC,OAAQC,eAW/C1N,cAAe,CACduN,QAAS,GACTC,YAAY,EACZC,OAAQ,CACPvE,KAAM,QACNhG,MAAO,CAACgG,KAAM,QAAShG,MAAO,CAACgG,KAAM,CAAC,SAAU,cAclD7B,cAAe,CACdkG,QAAS,GACTC,YAAY,EACZC,OAAQ,CACPvE,KAAM,QACNhG,MAAO,CAACgG,KAAM,QAAShG,MAAO,CAACgG,KAAM,CAAC,SAAU,cAalDvD,aAAc,CACb4H,QAAS,GACTE,OAAQ,CACPvE,KAAM,QACNhG,MAAO,CACNgG,KAAM,SACNE,WAAY,CACX3K,KAAM,CAACyK,KAAM,QAAShG,MAAO,CAACgG,KAAM,CAAC,SAAU,YAC/CrD,MAAO,CAACqD,KAAM,WACdpD,aAAc,CAACoD,KAAM,SAAUyE,cAAc,OAejDtH,OAAQ,CACPkH,QAAS,SACTE,OAAQ,CACPvE,KAAM,SACN0E,KAAM,CAAC,SAAU,QAAS,UAS5BxG,wBAAyB,CAACmG,SAAS,EAAOE,OAAQ,CAACvE,KAAM,YAYzDtB,SAAU,CACT2F,QAAS,SACTE,OAAQ,CAACvE,KAAM,SAAU0E,KAAM,CAAC,SAAU,WAAY,UAQvDlG,KAAM,CACL6F,QAAS,KACTE,OAAQ,CAACvE,KAAM,SAAU0E,KAAM,CAAC,KAAM,QAOvC3G,aAAc,CAACsG,SAAS,EAAOE,OAAQ,CAACvE,KAAM,YAO9ChC,mBAAoB,CAACqG,SAAS,EAAOE,OAAQ,CAACvE,KAAM,YAOpD/B,oBAAqB,CAACoG,SAAS,EAAOE,OAAQ,CAACvE,KAAM,YAWrDzB,WAAY,CAACgG,OAAQ,CAACvE,KAAM,WAQ5BvB,YAAa,CACZ4F,QAAS,UACTE,OAAQ,CAACvE,KAAM,SAAU0E,KAAM,CAAC,UAAW,QAAS,iBAGtDC,aAAc,CACbC,UAAU,EACVC,cAAe,CAACC,QAAS,KAAMC,eAAgB,KAAMC,aAAa,GAClEC,eAAgB,CAAC9I,IAAK,KAAMC,QAAS,GAAIE,QAAQ,IAElD4I,KA7SY,CAACC,GAAQ/G,WAAUpC,kBAC/B,MAAM,MACLhC,EADK,OAELmD,EAFK,aAGLY,EAHK,mBAILC,EAJK,oBAKLC,EALK,wBAMLC,EANK,cAOLC,EAPK,cAQLrH,EARK,aASL2F,EATK,WAUL8B,EAVK,KAWLC,EAXK,SAYLE,EAZK,YAaLD,GACG0G,EAAMjF,YACJ,SAAC0E,EAAD,YAAWrH,GAAe4H,EAgC1BC,EAAc,CAAChO,EAAW7B,EAAM+I,EAAgBD,IACrDjH,EAAUyC,IAAKM,GACP2D,EAAe,CACrB3D,OACA5E,KAAM,IAAIA,EAAM4E,EAAKC,IACrB+C,SACAY,eACAC,qBACAC,sBACAC,0BACAC,gBACArH,gBACA2F,eACA2B,WACAC,iBACAC,iBACAC,aACAC,OACAE,WACAD,cACAlB,cACAvB,iBAIH,OACC,0BACCoG,MAAO,CACN,oBAAoB,EACpB,YAA0B,SAAb1D,EACb,gBAA8B,aAAbA,EACjB,CAAC,IAAMF,GAAOA,KAEf,yBACCY,UAAU,sBACVmB,YAAU,YACV2B,KAAK,OACLpC,SAAU8E,EAAW,KAAO,IAC5BS,aApEgB/H,IAClB,MAAM1J,GAAO,IAAAkC,mBAAkBwH,EAAErB,QAC3BqJ,EAAgBhI,EAAErB,SAAWrI,EAAKC,WAAWC,cAAc,OACvCwJ,EAAEiI,eACzB,IAAAzP,mBAAkBwH,EAAEiI,eACpB,QAC8C3R,IAE5C0R,IACH,IAAA3O,sBAAqB/C,GAEtBoI,EAAY,CAAC4I,UAAU,MA0DtBV,cAtDiB5G,IACnB,MAAM1J,GAAO,IAAAkC,mBAAkBwH,EAAErB,SACPqB,EAAEiI,eACzB,IAAAzP,mBAAkBwH,EAAEiI,eACpB,QAC8C3R,GAEhD4R,WAAW,MACV,IAAAnP,qCAAoCzC,GACpCoI,EAAY,CAAC4I,UAAU,KACvB,IAAAa,YAAW7R,IACT,KA4CDwR,EAAYpL,EAAO,IAAI,EAAMoL,KAE/B,kCACChL,GAAG,UACHsL,iBAAA,EACApJ,OAAQ6I,EAAMF,eAAe3I,OAC7BqJ,aAAYR,EAAMF,eAAe9I,IACjCC,QAAS+I,EAAMF,eAAe7I,QAC9BwJ,MAAO,CAACC,KAAM,EAAGC,KAAM,MAExB,0BAAK1G,UAAU,8BACd,0BAAKA,UAAU,oCACf,0BAAKA,UAAU,sCA0MlB2G,iBACAC,cAAe,CACd,CACCC,OAAQ,CAAC,WACTC,OAASC,IACR,MAAM,KAACvS,EAAD,OAAOkN,GAAUqF,GACjB,IAAClT,EAAD,SAAMmT,GAAYtF,EAAOb,QAAQoG,MACjCC,GAAc,IAAAC,gBAAe3S,GACnC,GAAK0S,GAAgBF,IAAY,CAAC,IAAK,SAASI,SAASvT,IAgBlD,GAAI,CAAC,YAAa,UAAW,OAAQ,OAAOuT,SAASvT,GAAM,CAGjE,GADA6N,EAAO2F,iBACHH,EAEH,YADA,IAAAI,oBAAmBJ,EAAaH,GAGrB,cAARlT,IACH,IAAAyE,mBAAkB9D,GAEP,YAARX,IACH,IAAA4E,uBAAsBjE,GAEX,SAARX,IACH,IAAAgE,oBAAmBrD,GAER,QAARX,IACH,IAAAkE,mBAAkBvD,QAEb,GAAI,CAAC,aAAc,aAAa4S,SAASvT,GAAM,CAErD6N,EAAO2F,iBACP,MAAM3R,GAAU,IAAAT,mBAAkBT,GAC5B2C,GAAW,IAAA9B,iBAAgBK,GACjC,IAAKyB,EACJ,OAED,GAAIzB,IAAYyB,EAAU,CAEzB,MAAM4C,GAAW,IAAA/D,kBAAiBmB,GAC5BoQ,GAAa,IAAAtR,oBAAmBkB,GAC1B,cAARtD,GAAuBkG,GAAYwN,IACtC,IAAAhS,oBAAmB4B,GAAUqQ,QAElB,eAAR3T,GAAwBkG,IAAawN,GACxC,IAAAhS,oBAAmB4B,GAAUqQ,QAE5BN,GACO,eAARrT,GACEkG,IAAYwN,IAEd,IAAA3O,yBAAwBzB,EAAUzB,GAG/BwR,GAAexR,IAAYyB,IAEnB,cAARtD,IACH,IAAA6E,6BAA4BvB,EAAUzB,GAE3B,eAAR7B,IACH,IAAA+E,yBAAwBzB,EAAUzB,SAG9B,GAAY,QAAR7B,EAAe,CACrBqT,IACH,IAAAb,YAAW7R,GAGZ,MAAMkB,GAAU,IAAAT,mBAAkBT,GAC5B2C,GAAW,IAAA9B,iBAAgBK,GACjC,IAAKyB,EACJ,OAED,IAAK6P,EAAU,CACd,MAAMS,GAAiB,IAAA1R,uBAAsBoB,EAAUzB,GACnD+R,IACH/F,EAAO2F,iBACPI,EAAehQ,SAGjB,GAAIuP,EAAU,CACb,MAAMS,GAAiB,IAAAhS,2BAA0B0B,EAAUzB,GACvD+R,IACH/F,EAAO2F,iBACPI,EAAehQ,eA1F6C,CAE9D,MAAM/B,GAAU,IAAAT,mBAAkBT,GAC5B2C,GAAW,IAAA9B,iBAAgBK,GAC7BA,IAAYyB,IACfuK,EAAO2F,iBACP3R,EAAQhB,cAAc,0BAA0B8S,SAE7C9R,IAAYyB,IAAY,IAAAnC,oBAAmBmC,KAI9CuK,EAAO2F,iBACP3R,EAAQ8R,SACR,IAAA/O,uBAAsBjE,QAmF3BkT,qBACI,IAAAC,4BAA2BxK,GAD/B,CAEC,CAACV,GAAyB,EAAEiF,aAC3B,MAAMvD,EAAcuD,EAAOkG,KAAK5M,IAChC,IAAA6M,YAAW1J,IAEZ,yBAA0B,EAAEuD,SAAQ9E,kBACnC,MAAM,MAACrJ,EAAD,OAAQsJ,GAAU6E,EAAOb,QACzB1C,EAAcuD,EAAOkG,KAAKzR,KAAKuL,EAAOkG,KAAKzR,KAAKwB,OAAS,GAChD,YAAXkF,GAAwBtJ,IAC3B,IAAAsU,YAAW1J,GAGI,YAAXtB,GAAmC,aAAXA,GAA2BtJ,IACvD,IAAAkL,UAASN,EAAa,IAAMhB,EAAYP,KAG1C,yBAA2BmK,IAC1B,MAAM,OAACrF,EAAD,YAAS9E,GAAemK,GACxB,OAAClK,EAAD,QAASiL,GAAWpG,EAAOb,QAEjCjE,EAAY,CACXE,UAAW,MACX3G,KAAM,gBACN5C,MAAO,CACNmS,QAAS7I,EAAO7B,GAChB2K,eAAgB9I,EAAO7B,GACvB4K,aAAa,GAEdmC,cAAc,IAGW,UAAtBD,EAAQE,YACX,IAAAC,kBAAiBH,EAASf,GAAW,IAGvC,yBAA2BA,IAC1B,MAAM,OAACrF,EAAD,WAASZ,EAAT,SAAqB9B,EAArB,KAA+BxK,GAAQuS,GACvC,OAAClK,EAAD,QAASiL,GAAWpG,EAAOb,QACjC,GAAIhE,EAAO7B,IAAmB,IAAb6B,EAAO7B,GAAU,CACjC,MAAMkN,GAAa,IAAAvN,eAAcmG,EAAWlG,MAAOiC,EAAO7B,IACpDD,GAAO,IAAAE,aAAY6F,EAAWlG,MAAOsN,GAG3C,GAA0B,QAAtBJ,EAAQE,UAAqB,CAE/B9N,MAAMC,QAAQY,EAAK5C,aAClB,IAAAqB,SAAQsH,EAAW/B,cAAemJ,MAEnC,IAAAL,YAAW,WACX,IAAApJ,UACC,SACA,IAvjCY,EAAC1D,EAAM5E,EAAM6I,EAAU8B,KACzC,MAAM,SAAC3I,EAAW,GAAZ,kBAAgBoH,EAAoB,GAAKxE,EACzCyE,EAAsBD,EAAoBpH,EAASR,OAEnDiI,GADSzH,EAASR,OAAS,GAAK6H,IACZpC,EAAgB0D,EAAWzD,aAAclH,GAGlEqJ,GACoB,IAApBrH,EAASR,QACU,aAAnBiI,EAAQtC,QAER0B,EAAS,KACD,CACN4B,KAAM,qCACNC,QAAS,CAAC9F,OAAM5E,WAKnB6I,EAAS,EAAE8B,iBAAF,CACRF,KAAM,sCACNC,QAAS,CAACtN,OAAO,IAAAuG,YAAWgH,EAAW/B,cAAe5I,QAkiC3CgS,CAAWpN,EAAMmN,EAAYlJ,EAAU8B,GAzkC1B,SAglClB,IAAAsH,aAAYvL,EAAQiL,EAAShH,KACjC,IAAAuH,gBAAe7T,IAGjB,wBAA0BuS,IACzB,MAAM,OAACrF,EAAD,KAASlN,GAAQuS,GACjB,OAAClK,EAAD,QAASiL,GAAWpG,EAAOb,QACjC,GAAIhE,IAAWrI,EAAM,OACrB,MAAM8T,EAAezL,EAAO0L,wBAEtB3C,EADckC,EAAQU,sBAEfC,EAAIH,EAAaI,IAAMJ,EAAaK,OAAS,GAC1D,IAAAV,kBAAiBH,EAASf,EAAWnB,IAEtC,yBAA0B,MACzB,IAAAiC,YAAW,WAEZ,wBAA0Bd,KAEzB,IAAAc,YAAW,WACX,IAAAe,YAAW7B,GACX,MAAM,KAACvS,EAAD,MAAOuR,EAAP,YAAcnJ,GAAemK,GAElCtB,eAAe,eAACE,IACbI,GACJ,IAAAtH,UACC,UACA,KACC,MAAM1D,EAAOvG,EAAKC,WAAWC,cAAe,IAAGiR,GAC3C5K,GAAMA,EAAKtD,QACfmF,EAAY,CACXE,UAAW,MACX3G,KAAM,gBACN5C,MAAO,CAACmS,QAAS,KAAMC,eAAgB,KAAMC,aAAa,GAC1DmC,cAAc,KAGhB,MAGF,uBAAyBhB,IAAc,IAAA8B,iBAAgB9B,KAExD+B,UAAW,CACV,CACCC,SAAUC,WAEX,CACCD,SAAUE,UACVC,QAAS,CACRC,YAAa,KACbC,YAAa,KACbC,UAAYxM,IAEXA,EAAOpF,QACPoF,EAAO7D,UAAUsQ,IAAI,aAErB,OADazM,EAAOnI,cAAc,8BAGnC6U,UAAW,CAAC1M,EAAQkK,KACnB,MAAM,WAACjG,GAAciG,EACfyC,GAAW,IAAA7O,eAAcmG,EAAWlG,MAAOiC,EAAO7B,IACxD,OAAO,IAAAxB,SAAQsH,EAAWpJ,cAAe8R,GACtC1I,EAAWpJ,cAAcC,OACzB,GAEJ8R,SAAU,CAACC,GAAa5I,iBACvB,MAAM,MAAClG,EAAD,cAAQlD,GAAiBoJ,EACzB0I,GAAW,IAAA7O,eAAcC,EAAO8O,EAAW1O,IACjD,GAAIwO,GAAYA,EAAS7R,OAAQ,CAKhC,MAAO,CACNgS,OAAQ,iCACRC,MALiB,IAAApQ,SAAQ9B,EAAe8R,GACtC9R,EACA,CAAC8R,SAUTK,WAAY,CAOX,2CAA4C,CAC3C1E,OAAQ,CACPvE,KAAM,SACNE,WAAY,CACX/F,KAAM,CAAC6F,KAAM,aAUhB,gCAAiC,CAChCuE,OAAQ,CACPvE,KAAM,SACNE,WAAY,CACX/F,KAAM,CAAC6F,KAAM,aAYhB,qCAAsC,CACrCuE,OAAQ,CACPvE,KAAM,SACNE,WAAY,CACX3K,KAAM,CACLyK,KAAM,QACNhG,MAAO,CACNgG,KAAM,WAGR7F,KAAM,CAAC6F,KAAM,aAgBhB,qCAAsC,CACrCuE,OAAQ,CACPvE,KAAM,SACNE,WAAY,CACX3K,KAAM,CACLyK,KAAM,QACNhG,MAAO,CACNgG,KAAM,WAGR7F,KAAM,CAAC6F,KAAM,aAWhB,kCAAmC,CAClCuE,OAAQ,CACPvE,KAAM,SACNE,WAAY,CACXY,OAAQ,CAACd,KAAM,UACfmB,UAAW,CAACnB,KAAM,UAClB7F,KAAM,CAAC6F,KAAM,UACbgB,aAAc,CAAChB,KAAM,aAWxB,qCAAsC,CACrCuE,OAAQ,CACPvE,KAAM,SACNE,WAAY,CACXY,OAAQ,CAACd,KAAM,UACfmB,UAAW,CAACnB,KAAM,UAClB7F,KAAM,CAAC6F,KAAM,aAWhB,qCAAsC,CACrCuE,OAAQ,CACPvE,KAAM,SACNE,WAAY,CACXY,OAAQ,CAACd,KAAM,UACfmB,UAAW,CAACnB,KAAM,UAClB7F,KAAM,CAAC6F,KAAM,iB,cCr2ClBvO,EAAOD,QAAU0X,yD,cCAjBzX,EAAOD,QAAU2X,uD,gBCCT,IAAIC,EAAS,EAAQ,IAGjB3X,EAAOD,QADW,iBAAX4X,EACUA,EAEAA,EAAOC,Y,iBCN1B5X,EAAOD,QAAU,EAAQ,GAAR,EAA4D,IAK/E8X,KAAK,CAAC7X,EAAOC,EAAI,u4bAAo5b,M,cCA76bD,EAAOD,QAAU,SAAS+X,GACzB,IAAIzQ,EAAO,GAwCX,OArCAA,EAAKuQ,SAAW,WACf,OAAOG,KAAK3P,KAAI,SAAUM,GACzB,IAAIiC,EAsCP,SAAgCjC,EAAMoP,GACrC,IAAInN,EAAUjC,EAAK,IAAM,GACrBsP,EAAatP,EAAK,GACtB,IAAKsP,EACJ,OAAOrN,EAGR,GAAImN,GAAgC,mBAATG,KAAqB,CAC/C,IAAIC,GAYaC,EAZaH,EAiBxB,mEAHMC,KAAKG,SAASC,mBAAmBC,KAAKC,UAAUJ,MAGtC,OAhBlBK,EAAaR,EAAWS,QAAQrQ,KAAI,SAAUsQ,GACjD,MAAO,iBAAmBV,EAAWW,WAAaD,EAAS,SAG5D,MAAO,CAAC/N,GAASiO,OAAOJ,GAAYI,OAAO,CAACV,IAAgB3M,KAAK,MAOnE,IAAmB4M,EAJlB,MAAO,CAACxN,GAASY,KAAK,MAtDNsN,CAAuBnQ,EAAMoP,GAC3C,OAAGpP,EAAK,GACA,UAAYA,EAAK,GAAK,IAAMiC,EAAU,IAEtCA,KAENY,KAAK,KAITlE,EAAKpH,EAAI,SAASE,EAAS2Y,GACJ,iBAAZ3Y,IACTA,EAAU,CAAC,CAAC,KAAMA,EAAS,MAE5B,IADA,IAAI4Y,EAAyB,GACrB9Y,EAAI,EAAGA,EAAI8X,KAAKzS,OAAQrF,IAAK,CACpC,IAAI0I,EAAKoP,KAAK9X,GAAG,GACA,iBAAP0I,IACToQ,EAAuBpQ,IAAM,GAE/B,IAAI1I,EAAI,EAAGA,EAAIE,EAAQmF,OAAQrF,IAAK,CACnC,IAAIyI,EAAOvI,EAAQF,GAKG,iBAAZyI,EAAK,IAAoBqQ,EAAuBrQ,EAAK,MAC3DoQ,IAAepQ,EAAK,GACtBA,EAAK,GAAKoQ,EACDA,IACTpQ,EAAK,GAAK,IAAMA,EAAK,GAAK,UAAYoQ,EAAa,KAEpDzR,EAAKwQ,KAAKnP,MAINrB,I,cC9CRrH,EAAOD,QAAUiZ,sC,cCAjBhZ,EAAOD,QAAUkZ,+C,cCAjBjZ,EAAOD,QAAUmZ,kD,cCAjBlZ,EAAOD,QAAUoZ,oC,cCAjBnZ,EAAOD,QAAUqZ,oC,cCAjBpZ,EAAOD,QAAUsZ,+C,cCAjBrZ,EAAOD,QAAUuZ,kC,cCAjBtZ,EAAOD,QAAUwZ,mC,cCAjBvZ,EAAOD,QAAUyZ,oC,cCAjBxZ,EAAOD,QAAU0Z,qC,cCAjBzZ,EAAOD,QAAUqE,0BAAgC,M,cCAjDpE,EAAOD,QAAU2Z,0B,6FCYF,SAAyB5M,EAAY6M,GACnD,IAAK7M,EACJ,OAAO6M,EAOR,MAAMhC,EAAS,GACTiC,EAAcD,EAAOE,cACrBC,EAAkBhN,EAAW+M,cAC7BE,EAAkBD,EAAgBxU,OAExC,IAAI0U,EAAY,EACZC,EAAY,EAChB,MAA0E,KAAlEA,EAAYL,EAAY7T,QAAQ+T,EAAiBE,KAAoB,CAexEC,EAAYD,GACfrC,EAAOE,KAAK8B,EAAOrS,MAAM0S,EAAWC,IAGrC,MAAMC,GACL,+BAAOP,EAAOrS,MAAM2S,EAAWA,EAAYF,IAE5CpC,EAAOE,KAAKqC,GAEZF,EAAYC,EAAYF,EAGzB,GAAsB,IAAlBpC,EAAOrS,OACV,OAAOqU,EAIJK,IAAcL,EAAOrU,QACxBqS,EAAOE,KAAK8B,EAAOrS,MAAM0S,IAG1B,OAAOrC,G,0FCRmB5E,EAAdA,YAAc,CAC1BoH,IAAK,cACL5L,KAAM,QACNhG,MAAO,CACNgG,KAAM,SACNE,WAAY,CACX9F,GAAI,CAAC4F,KAAM,CAAC,SAAU,WACtB3D,MAAO,CAAC2D,KAAM,SAAUyE,cAAc,GACtClN,SAAU,CAACyI,KAAM,QAAShG,MAAO,CAAC6R,KAAM,uBACxClN,kBAAmB,CAACqB,KAAM,UAC1BkD,gBArBsB,CACxBlD,KAAM,SACNE,WAAY,CACXF,KAAM,CAACA,KAAM,SAAU0E,KAAM,CAAC,OAAQ,WACtCrF,KAAM,CAACW,KAAM,UACb8L,SAAU,CAAC9L,KAAM,UACjB+L,SAAU,CAAC/L,KAAM,UACjBgM,WAAY,CAAChM,KAAM,SAAU0E,KAAM,CAAC,OAAQ,YAe3CrB,WAAY,CAACrD,KAAM,WACnBjL,QAAS,CAACiL,KAAM,QAAShG,MA3CP,CACpBgG,KAAM,SACNE,WAAY,CACXb,KAAM,CAACW,KAAM,UACb3D,MAAO,CAAC2D,KAAM,SAAUyE,cAAc,GACtCvD,gBAAiB,CAAClB,KAAM,UACxBsB,qBAAsB,CAACtB,KAAM,UAC7ByB,qBAAsB,CAACzB,KAAM,aAqC5BK,SAAU,CAACL,KAAM,QAAShG,MArEN,CACtBgG,KAAM,SACNE,WAAY,CACXF,KAAM,CAACA,KAAM,SAAU0E,KAAM,CAAC,QAAS,WAAY,SACnDrF,KAAM,CAACW,KAAM,UACb3D,MAAO,CAAC2D,KAAM,SAAUyE,cAAc,GACtChE,SAAU,CAACT,KAAM,SAAU0E,KAAM,CAAC,YAAa,OAAQ,OAAQ,YAC/DhI,OAAQ,CACPsD,KAAM,SACN0E,KAAM,CACL,WACA,OACA,UACA,WACA,OACA,WACA,QAGF/R,MAAO,CAACqN,KAAM,UACdM,MAAO,CAACN,KAAM,WACdiM,YAAa,CAACjM,KAAM,SAAUyE,cAAc,MAiD3C3H,sBAAuB,CAACkD,KAAM,QAAShG,MAlCX,CAC9BgG,KAAM,SACNE,WAAY,CACX7D,MAAO,CAAC2D,KAAM,SAAUyE,cAAc,GACtC/H,OAAQ,CAACsD,KAAM,UACf6B,MAAO,CAAC7B,KAAM,aA8Bb/C,SAAU,CAAC+C,KAAM,WACjBL,QAAS,CAACK,KAAM,SAAU0E,KAAM,CAAC,oB,cCxEpCjT,EAAOD,QAAU0a,iC,wPCeDzE,iB,EAUAQ,kB,EAKAkE,iB,EAiCA3E,c,EAgCAH,iBAAT,SAA0Bf,EAAaH,EAAWnB,GACxD,MAAM,OAAClE,EAAD,KAASlN,EAAT,WAAesM,EAAf,YAA2BlE,GAAemK,EAE1ClK,EADuC,QAA1BqK,EAAYc,WACH,IAAA/S,mBAAkBT,GAAQkN,EAAOb,QAAQhE,OAC/D2M,GAAW,IAAA7O,eAAcmG,EAAWlG,MAAOiC,EAAO7B,IACxD4B,EAAY,CACXzG,KAAM,wBACN2G,UAAW,MACXvJ,MAAOsJ,EAAO7B,GACd+M,cAAc,IAEfnL,EAAY,CACXzG,KAAM,4BACN2G,UAAW,MACXvJ,MAAOqS,EACPmC,cAAc,IAEXK,EAAYvL,EAAQqK,EAAapG,GACpCiM,EAAe7F,EAAa1S,EAAMqI,EAAQ2M,EAAU5D,GAEpDyC,EAAe7T,I,EAGD8S,mBAAT,SAA4BJ,EAAaH,GAC/C,MAAM,KAACvS,EAAD,OAAOkN,EAAP,MAAeqE,EAAf,WAAsBjF,EAAtB,YAAkClE,GAAemK,GACjD,IAAClT,GAAO6N,EAAOb,QAAQoG,MACvBpK,GAAS,IAAA5H,mBAAkBT,GAC3BwY,EAAanQ,EAAOlG,WACpBsW,EAAY/S,MAAMgT,KAAKF,EAAW7U,UAAUtC,UAChDvD,GAAMA,IAAMuK,GAERsQ,GAAa,IAAAtW,eAAcrC,EAAMqI,GACjCuQ,GAAW,IAAAjY,qBAAoBX,GAC/B6Y,EAAoBjF,EAAYvL,EAAQqK,EAAapG,GACrDwM,GACL,IAAArX,oBAAmB4G,IAAoD,OAAzCA,EAAOnI,cAAc,gBAC9C6Y,EAAWxH,EAAMN,cACjB+H,EAAWA,EAAXA,GAAezH,EAAMN,eAI3B,GAAY,SAAR5R,EACH2Z,EAAS9H,QAAU0H,EAAS,GAAGpS,GAC/BwS,EAAS5H,aAAc,OACjB,GAAY,QAAR/R,EACV2Z,EAAS9H,QAAU0H,EAASA,EAASzV,OAAS,GAAGqD,GACjDwS,EAAS5H,aAAc,OACjB,GAAY,YAAR/R,EAAmB,CAC7B,MAAM4Z,EAAcL,EAASvX,UAAWvD,GAAMA,IAAMuK,GAEpD,IAAKwQ,GAAqBE,EAAS3H,YAElC,GAAIqH,EAAY,EAAG,CAClB,MAAMS,EAAcV,EAAW7U,SAAS8U,EAAY,GAC9CU,EAAkBD,EAAYhZ,cAAc,MAC5CkZ,GAAsB,IAAA3X,oBAAmByX,GAE3CA,GAAeE,GAAuBD,GACzCH,EAAS9H,QACRiI,EAAgBxV,SAASwV,EAAgBxV,SAASR,OAAS,GAAGqD,GAC/DwS,EAAS5H,aAAc,IAGvB4H,EAAS9H,QAAU0H,EAASS,KAAKC,IAAI,EAAGL,EAAc,IAAIzS,GAC1DwS,EAAS5H,aAAc,QAGxB4H,EAAS9H,QAAU0H,EAASS,KAAKC,IAAI,EAAGL,EAAc,IAAIzS,GAC1DwS,EAAS5H,aAAc,OAElB,GAAI0H,IAAgBC,EAAS3H,YAAa,CAChD,MAAMmI,EAAOlR,EAAOnI,cAAc,MAAMyD,SACxCqV,EAAS9H,QAAUqI,EAAKA,EAAKpW,OAAS,GAAGqD,GACzCwS,EAAS5H,aAAc,OAEvB4H,EAAS9H,QAAU6H,EAAS7H,QAC5B8H,EAAS5H,aAAc,OAElB,GAAY,cAAR/R,EAAqB,CAC/B,MAAMma,GAAoB,IAAA/V,0BAAyBzD,GAC7C+D,GAAW,IAAAF,0BAAyB7D,GACpCyZ,EAAkBd,GAAa,IAAAtW,eAAcrC,EAAM2Y,GAAc,KACjEe,EAAaf,EAAaA,EAAWxW,WAAa,KAClDiF,EAAcuR,EACjBjT,MAAMgT,KAAKgB,EAAW/V,UAAUtC,UAAWvD,GAAMA,IAAM6a,GACvD,KACGgB,EAAoBhB,EACvBe,EAAW/V,SACX0V,KAAKO,IAAIxS,EAAc,EAAGsS,EAAW/V,SAASR,OAAS,IAEvD,KAEH,IAAK0V,GAAsBC,GAAeC,EAAS3H,YAClD4H,EAAS9H,QAAUnN,EAAWA,EAASyC,GAAKuS,EAAS7H,QACrD8H,EAAS5H,aAAc,OACjB,GAAKoI,IAAuBT,EAAS3H,aAAgBuH,GAWjDa,GAAqBT,EAAS3H,aACxC4H,EAAS9H,QAAU6H,EAAS7H,QAC5B8H,EAAS5H,aAAc,GAGvBoI,IACCT,EAAS3H,aACVuH,GACAc,IACCE,GAEDX,EAAS9H,QAAUyH,EAAWnS,GAC9BwS,EAAS5H,aAAc,GAEboI,IAAsBT,EAAS3H,aAAeuH,IACxDK,EAAS9H,QAAUyI,EAAkBnT,GACrCwS,EAAS5H,YAAchK,EAAcsS,EAAW/V,SAASR,OAAS,OA3BM,CACxE,MAAM0W,EACLrB,EAAW7U,SACV0V,KAAKO,IAAInB,EAAY,EAAGD,EAAW7U,SAASR,OAAS,IAGnDsV,EAAYD,EAAW7U,SAASR,OAAS,IAC5C6V,EAAS9H,QAAU2I,EAAYrT,GAC/BwS,EAAS5H,aAAc,IAwB1BhJ,EAAY,CACXzG,KAAM,gBACN2G,UAAW,MACXvJ,MAAOia,EACPzF,cAAc,IAIf,MAAMuG,EAAc9Z,EAAKC,WAAWC,cAAe,IAAG8Y,EAAS9H,SAC/D4I,EAAY7W,QAGZ,MAAM8W,GAAc,IAAA5T,eAAcmG,EAAWlG,MAAO4S,EAAS9H,SACxC0C,EAAYkG,EAAapH,EAAapG,GAE1DiM,EACC7F,EACA1S,EACA8Z,EACAC,EACAf,EAAS5H,aAGVyC,EAAe7T,GAEhBga,EAActH,EAAaoH,EAAad,EAAS5H,c,EAGlCgD,WAAT,SAAoB7B,GAC1B,MAAM,OAACrF,EAAD,WAASZ,EAAT,SAAqB9B,EAArB,MAA+B+G,GAASgB,GACxC,OAAClK,EAAD,QAASiL,GAAWpG,EAAOb,SAC3B,cAAC4E,GAAiBM,EAMxB,GAFA8C,EAAgB9B,IAEXqB,EAAYvL,EAAQiL,EAAShH,GAAa,OAG/C,MAAMlG,EAAQkN,EAAQ2G,QAAQ,kCACxBC,EAAW,IAAI5N,EAAWlG,OAC1B+T,EAAc,GACpB/T,EAAM1B,QAASX,IACd,MAAMqW,GAAa,IAAArT,mBAAkBmT,EAAUnW,EAAU,GACrDqW,GAAcA,EAAWjX,OAAS,GACrCgX,EAAYzE,KAAK0E,EAAW,MAG9B,MAAMC,GAAS,IAAAlU,eAAc+T,EAAU7R,EAAO7B,KAC9C,IAAAO,mBACCmT,EACAG,EACA,EACAF,GACClJ,EAAcG,aAEhB5G,EAAS,6BAA8B,CAACnM,KAAM,QAASU,MAAOmb,IAG9D,MAAMI,EAAYD,EAAOlV,MAAM,EAAGkV,EAAOlX,OAAS,GAClD,IAAIoX,EAAc,IAAIjO,EAAW/B,eACjCnE,EAAM1B,QAASqB,IACdwU,GAAc,IAAAzU,YAAWyU,EAAaxU,EAASuU,KAGhD,IAAK,IAAIxc,EAAIyc,EAAYpX,OAAS,EAAGrF,GAAK,EAAGA,IAAK,CACjD,MAAM0c,EAAcD,EAAYzc,GAC1B2c,GAAU,IAAAhU,aAAYyT,EAAUM,GACjCC,GAAYA,EAAQ9W,UAAwC,IAA5B8W,EAAQ9W,SAASR,QACrDoX,EAAYhT,OAAOzJ,EAAG,GAGxB0M,EAAS,sCAAuC,CAACzL,MAAOwb,IAGxD,IAAIG,EAAc,IAAIpO,EAAWpJ,eACjCkD,EAAM1B,QAASqB,IACd2U,GAAc,IAAA5U,YAAW4U,EAAa3U,EAASuU,KAEhD9P,EAAS,sCAAuC,CAACzL,MAAO2b,KA9SzD,WAOA,OAKA,OACA,OAEO,SAAS7G,EAAe7T,GACfA,EAAKC,WAAWC,cAAc,8BACtCyE,MAAMC,WAAa,SACP5E,EAAKC,WAAWI,iBAClC,0CAEUqE,QAAS9E,GACnBA,EAAE4E,UAAUmW,OAAO,wCAGd,SAAStG,EAAgB9B,GAC/B,MAAM,KAACvS,GAAQuS,EACfsB,EAAe7T,GAGT,SAASuY,EACf7F,EACA1S,EACAqI,EACA2M,EACA5D,GAEA,MAAMwJ,EAAS5a,EAAKC,WAAWC,cAAc,8BAC7C,IAAK0a,EAAQ,OACb,MAAM9G,EAAezL,EAAO0L,wBAC5B6G,EAAOjW,MAAMkW,KAAU/G,EAAa+G,KAAO9S,OAAO+S,QAA7B,KACrBF,EAAOjW,MAAMuP,KAAU9C,EAAc0C,EAAaI,IAAMJ,EAAaiH,QACpEhT,OAAOiT,QACP,EAFmB,KAGpBJ,EAAOjW,MAAMsJ,MAAW6F,EAAa7F,MAAf,KACtB2M,EAAOjW,MAAMC,WAAa,UAE1B,MAAMqW,EAAajb,EAAKC,WAAWI,iBAClC,0CAEK4K,EACL+J,EAAS7R,OAAS,EACfnD,EAAKC,WAAWib,eAAelG,EAASA,EAAS7R,OAAS,IAC1D,KACJ8X,EAAWvW,QAAS9E,IACfA,IAAMqL,GAAQrL,EAAE4E,UAAUmW,OAAO,yCAElC1P,GACHA,EAAOzG,UAAUsQ,IAAI,uCAGtBkF,EAActH,EAAarK,EAAQ+I,GAE7B,SAASwC,EAAYvL,EAAQiL,EAAShH,GAC5C,IAAKjE,EAAO7B,IAAoB,KAAd6B,EAAO7B,GAAW,OAAO,EAC3C,MAAMkN,GAAa,IAAAvN,eAAcmG,EAAWlG,MAAOiC,EAAO7B,IACpD2U,EAAiBzH,EAAWtK,KAAK,KACjChD,EAAQkN,EAAQ2G,QAAQ,kCAM9B,OAJ4B7T,EAAMR,OACjC,CAACC,EAAKU,IAASV,GAAOsV,IAAmB5U,EAAK6C,KAAK,MACnD,IAIAkK,EAAQuF,kBAAkBxQ,IAC1B3C,MAAMC,QAAQS,IACdA,EAAMjD,OAAS,GACfiD,EAAMR,OAAO,CAACC,EAAKU,IAASV,KAAQ,IAAAN,UAASgB,EAAMmN,IAAa,GAGlE,SAASsG,EAActH,EAAarK,EAAQ+I,GAE3C,GAA8B,UAA1BsB,EAAYc,UAAuB,OACvC,MAAMM,EAAezL,EAAO0L,wBACtBxN,EAAO8B,EAAOnI,cAAc,6BAC5Bkb,EAAa7U,EAChBA,EAAKwN,wBAAwBI,OAC7BL,EAAaK,OACVkH,EAAOvH,EAAa+G,KAAO,GAC3BS,EAAOlK,EACV0C,EAAaI,IAAM,EACnBJ,EAAaiH,QAAUK,EAAa,GACvC1I,EAAYsH,cAAcqB,EAAMC,K","file":"now-content-tree.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = __TECTONIC__$servicenow_ui_renderer_snabbdom;","export function getFocusedElement(host) {\n\treturn host.shadowRoot.activeElement;\n}\n\nexport function getTreeRoot(host) {\n\treturn host.shadowRoot.querySelector('ul[role=\"tree\"]');\n}\n\nexport function getVisibleTreeItems(host) {\n\treturn [\n\t\t...getTreeRoot(host).querySelectorAll(\n\t\t\t'li[data-visible=\"true\"]:not([data-disabled=\"true\"]), li[data-visible=\"true\"][data-parent=\"true\"]'\n\t\t)\n\t];\n}\n\nexport function getSelectedTreeItems(host) {\n\treturn [\n\t\t...getTreeRoot(host).querySelectorAll(\n\t\t\t'li[data-selected=\"true\"][data-visible=\"true\"]'\n\t\t)\n\t];\n}\n\nexport function getHostTreeItem(el) {\n\tif (isTreeItem(el) || isTreeItemLoadMore(el)) {\n\t\treturn el;\n\t}\n\tif (!el.parentElement) {\n\t\treturn null;\n\t}\n\treturn getHostTreeItem(el.parentElement);\n}\n\nexport function getTreeItemTrigger(el) {\n\treturn el.querySelector('.now-content-tree-trigger');\n}\n\nexport function getTreeItemActions(el) {\n\treturn [\n\t\t...el\n\t\t\t.querySelector('.now-content-tree-node')\n\t\t\t.querySelectorAll(\n\t\t\t\t'now-button-iconic.now-content-tree-status:not([disabled]), now-button-bare:not([disabled]), .now-content-tree-button:not([disabled])'\n\t\t\t)\n\t];\n}\nexport function getTreeItemStatusActions(el) {\n\treturn [\n\t\t...el\n\t\t\t.querySelector('.now-content-tree-node')\n\t\t\t.querySelectorAll('.now-content-tree-status:not([disabled])')\n\t];\n}\n\nexport function getPreviousTreeItemAction(el, focused) {\n\tconst actions = getTreeItemActions(el);\n\tif (el === focused) {\n\t\t// tree item is focused, return null\n\t\treturn null;\n\t}\n\tconst index = actions.findIndex((node) => node === focused);\n\tif (index === 0) {\n\t\treturn el;\n\t}\n\treturn actions[index - 1] || null;\n}\n\nexport function getNextTreeItemAction(el, focused) {\n\tconst actions = getTreeItemActions(el);\n\tif (el === focused) {\n\t\t// tree item is focused, return first item\n\t\treturn actions[0];\n\t}\n\tconst index = actions.findIndex((node) => node === focused);\n\treturn actions[index + 1] || null;\n}\n\nexport function isTreeItemParent(el) {\n\treturn el.getAttribute('data-parent') === 'true';\n}\n\nexport function isTreeItemExpanded(el) {\n\treturn el.getAttribute('aria-expanded') === 'true';\n}\n\nexport function getFirstTreeItemInPath(path) {\n\treturn path.find(\n\t\t(node) =>\n\t\t\tnode.nodeType === Node.ELEMENT_NODE &&\n\t\t\tnode.getAttribute('role') === 'treeitem'\n\t);\n}\n\nexport function isTreeItem(el) {\n\treturn el.getAttribute('role') === 'treeitem';\n}\n\nexport function isTreeItemLoadMore(el) {\n\treturn el.getAttribute('data-id') === 'loadmore';\n}\n\nexport function isTreeItemLoadIndicator(el) {\n\treturn el.querySelector('.now-content-tree-node.is-loader');\n}\n","module.exports = __TECTONIC__lodash_4_17_4[\"isEqual\"];","export function getShadowRootHost(node) {\n\tif (node.parentNode instanceof ShadowRoot) {\n\t\treturn node.parentNode.host;\n\t}\n\tif (node.parentElement) {\n\t\treturn getShadowRootHost(node.parentElement);\n\t}\n\treturn null;\n}\n\nexport function getParentItem(host, node) {\n\tif (node === host) return null;\n\tlet nextEl = node;\n\twhile (nextEl && nextEl !== host) {\n\t\tif (nextEl.parentElement) {\n\t\t\tnextEl = nextEl.parentElement;\n\t\t} else if (\n\t\t\tnextEl.parentNode &&\n\t\t\tnextEl.parentNode instanceof DocumentFragment\n\t\t) {\n\t\t\tnextEl = nextEl.parentNode.host;\n\t\t} else {\n\t\t\tnextEl = null;\n\t\t}\n\t\tif (nextEl.tagName === 'LI') {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn nextEl === host ? null : nextEl;\n}\n","import {\n\tgetFocusedElement,\n\tgetTreeRoot,\n\tgetVisibleTreeItems,\n\tgetSelectedTreeItems,\n\tgetHostTreeItem,\n\tgetPreviousTreeItemAction,\n\tgetNextTreeItemAction,\n\tgetTreeItemStatusActions,\n\tisTreeItem,\n\tisTreeItemLoadMore,\n\tisTreeItemLoadIndicator\n} from './elements';\n\nconst hostToLastFocusedTreeItem = new WeakMap();\n\nfunction focusTreeItem(treeItem) {\n\tif (isTreeItem(treeItem) || isTreeItemLoadMore(treeItem)) {\n\t\ttreeItem.focus();\n\t\treturn;\n\t}\n}\n\nexport function changeItemActionsVisibilityIfNeeded(host, treeItem) {\n\tconst lastTreeItem = getLastFocusedTreeItem(host);\n\tif (\n\t\tlastTreeItem &&\n\t\tlastTreeItem.firstChild.classList.contains('show-actions')\n\t) {\n\t\tconst lastStatusActions = getTreeItemStatusActions(lastTreeItem);\n\t\tlastStatusActions.forEach((el) => (el.style.visibility = ''));\n\t}\n\tif (treeItem && treeItem.firstChild.classList.contains('show-actions')) {\n\t\tconst statusActions = getTreeItemStatusActions(treeItem);\n\t\tstatusActions.forEach((el) => (el.style.visibility = 'visible'));\n\t}\n}\n\nexport function setLastFocusedTreeItem(host, treeItem) {\n\tchangeItemActionsVisibilityIfNeeded(host, treeItem);\n\thostToLastFocusedTreeItem.set(host, treeItem);\n}\n\nexport function getLastFocusedTreeItem(host) {\n\treturn hostToLastFocusedTreeItem.get(host);\n}\n\nexport function focusInitialTreeItem(host) {\n\tconst lastFocusedItem = getLastFocusedTreeItem(host);\n\tif (lastFocusedItem) {\n\t\tlastFocusedItem.focus();\n\t\treturn;\n\t}\n\tconst selectedItems = getSelectedTreeItems(host);\n\tif (selectedItems.length) {\n\t\tselectedItems[0].focus();\n\t\treturn;\n\t}\n\tconst visibleItems = getVisibleTreeItems(host);\n\tif (visibleItems.length) {\n\t\tvisibleItems[0].focus();\n\t}\n}\n\nexport function focusFirstTreeItem(host) {\n\tconst treeItems = getVisibleTreeItems(host);\n\tfocusTreeItem(treeItems[0]);\n}\n\nexport function focusLastTreeItem(host) {\n\tconst treeItems = getVisibleTreeItems(host);\n\tfocusTreeItem(treeItems[treeItems.length - 1]);\n}\n\nexport function isLastSubtreeItemFocused(host) {\n\tconst focused = getFocusedElement(host);\n\tconst siblings = [...focused.parentNode.children];\n\treturn siblings.indexOf(focused) === siblings.length - 1;\n}\nexport function getNextFocusableTreeItem(host) {\n\tconst focused = getFocusedElement(host);\n\tconst treeRoot = getTreeRoot(host);\n\tconst treeItems = getVisibleTreeItems(host);\n\tif (focused === treeRoot) {\n\t\t// root of tree is focused, return first tree item\n\t\treturn treeItems[0];\n\t}\n\tconst focusedItem = getHostTreeItem(focused);\n\tconst focusedItemIndex = treeItems.findIndex((node) => node === focusedItem);\n\tif (treeItems.length === focusedItemIndex + 1) {\n\t\t// last tree item is focused, return nothing\n\t\treturn null;\n\t}\n\n\tif (isTreeItemLoadIndicator(treeItems[focusedItemIndex + 1])) {\n\t\t// loader is focused, skip it\n\t\treturn treeItems[focusedItemIndex + 2];\n\t}\n\t// otherwise, focus next item\n\treturn treeItems[focusedItemIndex + 1];\n}\nexport function focusNextTreeItem(host) {\n\tconst nextItem = getNextFocusableTreeItem(host);\n\tif (nextItem) {\n\t\tfocusTreeItem(nextItem);\n\t}\n}\n\nexport function getPrevFocusableTreeItem(host) {\n\tconst focused = getFocusedElement(host);\n\tconst treeRoot = getTreeRoot(host);\n\tconst treeItems = getVisibleTreeItems(host);\n\tif (focused === treeRoot) {\n\t\t// root of tree is focused, do nothing\n\t\treturn null;\n\t}\n\tconst focusedItem = getHostTreeItem(focused);\n\tconst focusedItemIndex = treeItems.findIndex((node) => node === focusedItem);\n\tif (focusedItemIndex === 0) {\n\t\t// first tree item is focused, do nothing\n\t\treturn null;\n\t}\n\tif (isTreeItemLoadIndicator(treeItems[focusedItemIndex - 1])) {\n\t\t// loader is focused, skip it\n\t\treturn treeItems[focusedItemIndex - 2];\n\t}\n\t// otherwise, focus next item\n\treturn treeItems[focusedItemIndex - 1];\n}\n\nexport function focusPreviousTreeItem(host) {\n\tconst nextItem = getPrevFocusableTreeItem(host);\n\tif (nextItem) {\n\t\tfocusTreeItem(nextItem);\n\t}\n}\n\nexport function focusPreviousTreeItemAction(treeItem, focused) {\n\tconst element = getPreviousTreeItemAction(treeItem, focused);\n\tif (element) {\n\t\telement.focus();\n\t}\n}\n\nexport function focusNextTreeItemAction(treeItem, focused) {\n\tconst element = getNextTreeItemAction(treeItem, focused);\n\tif (element) {\n\t\telement.focus();\n\t}\n}\n","import isEqual from 'lodash/isEqual';\n\nexport function hasPath(list, path) {\n\treturn list.findIndex((p) => isEqual(p, path)) > -1;\n}\nexport function hasChildPath(list, path) {\n\treturn (\n\t\tlist.findIndex(\n\t\t\t(p) =>\n\t\t\t\tp.length === path.length + 1 && isEqual(p.slice(0, path.length), path)\n\t\t) > -1\n\t);\n}\nexport function removePath(list, path) {\n\treturn list.filter((p) => !isEqual(p, path));\n}\nexport function addPath(list, path) {\n\treturn [...list, path];\n}\nexport function togglePath(list, path) {\n\treturn hasPath(list, path) ? removePath(list, path) : addPath(list, path);\n}\nexport function isParent(parentPath, childPath) {\n\treturn (\n\t\tArray.isArray(parentPath) &&\n\t\tArray.isArray(childPath) &&\n\t\tparentPath.length < childPath.length &&\n\t\tparentPath.reduce((acc, n, i) => acc && n === childPath[i], true)\n\t);\n}\nexport function rebasePath(list, oldRoot, newRoot) {\n\treturn list.map((nextPath) =>\n\t\tisEqual(nextPath.slice(0, oldRoot.length), oldRoot)\n\t\t\t? [...newRoot, ...nextPath.slice(oldRoot.length - 1)]\n\t\t\t: nextPath\n\t);\n}\nexport function getPathToItem(items, itemId) {\n\tif (!Array.isArray(items) || items.length === 0) return [];\n\tconst thisLevelItem = items.find((item) => item.id === itemId);\n\tif (thisLevelItem) return [thisLevelItem.id];\n\tfor (const item of items) {\n\t\tconst childPath = getPathToItem(item.children, itemId);\n\t\tif (childPath && childPath.length) return [item.id, ...childPath];\n\t}\n\treturn [];\n}\nexport function getPathItem(items, path) {\n\tlet nextLevel = items;\n\treturn path.reduce((acc, nextId) => {\n\t\tconst nextItem = nextLevel.find((i) => i.id === nextId);\n\t\tnextLevel = nextItem ? nextItem.children : [];\n\t\treturn nextItem;\n\t}, null);\n}\nfunction countItemsInPath(path, items) {\n\tlet item = getPathItem(items, path);\n\tlet count = 1;\n\tif (item.children) {\n\t\titem.children.forEach((child) => {\n\t\t\tcount += countItemsInPath([...path, child.id], items);\n\t\t});\n\t}\n\treturn count;\n}\nexport function countItemsInPaths(paths, items) {\n\tif (!paths || paths.length === 0) return 0;\n\treturn paths.reduce((acc, path) => acc + countItemsInPath(path, items), 0);\n}\nexport function spliceItemsAtPath(\n\titems,\n\tpath,\n\tdeleteCount,\n\tinsertItems,\n\tbelow = false\n) {\n\tif (\n\t\t!Array.isArray(path) ||\n\t\t!Array.isArray(items) ||\n\t\tpath.length === 0 ||\n\t\titems.length === 0\n\t)\n\t\treturn undefined;\n\tlet itemsToSplice = items;\n\tfor (let i = 0; i < path.length - 1; i++) {\n\t\tconst parentIndex = itemsToSplice.findIndex((j) => j.id === path[i]);\n\t\tif (parentIndex < 0) return undefined;\n\t\titemsToSplice = itemsToSplice[parentIndex].children;\n\t}\n\tif (!itemsToSplice || itemsToSplice === 0) return undefined;\n\tlet itemIndex = itemsToSplice.findIndex(\n\t\t(i) => i.id === path[path.length - 1]\n\t);\n\tif (itemIndex < 0) return undefined;\n\tif (below) itemIndex++;\n\tif (deleteCount > 0) {\n\t\treturn itemsToSplice.splice(itemIndex, deleteCount);\n\t}\n\treturn itemsToSplice.splice(itemIndex, 0, ...insertItems);\n}\n","import './now-content-tree';\nexport {createNowContentTreeDriver} from '../drivers';\n\n/*\n * TODO: This is a temporary way of debugging customer problems during the\n * Seismic 18 upgrade process, because tectonic resolution makes it hard to\n * know what version of a component is running. Remove when not needed.\n * Intentionally runs in dev + production environments so we can debug all builds.\n */\nconst {name, version} = require('../package.json');\nconst registry = (window.___NOW_DESIGN_SYSTEM_PACKAGES___ =\n\twindow.___NOW_DESIGN_SYSTEM_PACKAGES___ || {});\nif (!registry[name]) {\n\tregistry[name] = version;\n}\n","import {createEnhancedElement} from '@servicenow/library-enhanced-element';\nimport {getActiveElement} from '@servicenow/library-enhanced-utils';\nimport {Fragment} from '@servicenow/ui-renderer-snabbdom';\nimport styles from './_now-content-tree.scss';\nimport '@servicenow/now-collapse';\nimport focusBehavior from '@servicenow/behavior-focus';\nimport dragdropBehavior, {\n\tgetDragContext,\n\tcancelDrag\n} from '@servicenow/behavior-dragdrop';\nimport '@servicenow/now-avatar';\nimport '@servicenow/now-button';\nimport '@servicenow/now-highlighted-value';\nimport '@servicenow/now-icon';\nimport '@servicenow/now-badge';\nimport '@servicenow/now-loader';\nimport '@servicenow/now-tooltip';\nimport {\n\tschedule,\n\tunschedule,\n\tcreateTooltipActionHandler\n} from '@servicenow/now-tooltip';\nimport isEqual from 'lodash/isEqual';\nimport omit from 'lodash/omit';\nimport {t} from 'sn-translate';\nimport {getShadowRootHost} from './utils/dom';\nimport {\n\tfocusInitialTreeItem,\n\tfocusFirstTreeItem,\n\tfocusLastTreeItem,\n\tfocusNextTreeItem,\n\tfocusPreviousTreeItem,\n\tfocusPreviousTreeItemAction,\n\tfocusNextTreeItemAction,\n\tsetLastFocusedTreeItem,\n\tchangeItemActionsVisibilityIfNeeded\n} from './utils/focus';\nimport {\n\tgetFocusedElement,\n\tgetHostTreeItem,\n\tgetTreeItemTrigger,\n\tisTreeItemExpanded,\n\tisTreeItemParent,\n\tgetFirstTreeItemInPath,\n\tgetNextTreeItemAction,\n\tgetPreviousTreeItemAction,\n\tisTreeItemLoadMore\n} from './utils/elements';\nimport {\n\tgetPathItem,\n\tgetPathToItem,\n\ttogglePath,\n\thasPath,\n\thasChildPath\n} from './utils/paths';\nimport highlightSearchTerm from './utils/highlight';\nimport {itemsSchema} from './schemas/content-tree-schema';\nimport {actionTypes} from '@servicenow/ui-core';\nimport {\n\tcleanupDragDrop,\n\tupdateDragCursor,\n\thideDragCursor,\n\thandleKeyboardDrag,\n\tisValidDrop,\n\thandleDrop\n} from './utils/dragdrop';\n\nconst {COMPONENT_DISCONNECTED} = actionTypes;\n\n// delay when hovering over collapsed item during drag operation before item is expanded (ms)\nconst AUTO_EXPAND_DELAY = 1250;\n\nconst showTooltip = (updateState, item, target) => {\n\tupdateState({\n\t\tpath: 'currentTooltip',\n\t\toperation: 'set',\n\t\tvalue: {ref: target, content: item.label, opened: true}\n\t});\n};\n\nconst hideTooltip = (updateState) => {\n\tupdateState({\n\t\tpath: 'currentTooltip',\n\t\toperation: 'set',\n\t\tvalue: {ref: null, content: '', opened: false}\n\t});\n};\n\nconst expandItem = (item, path, dispatch, properties) => {\n\tconst {children = [], childrenAvailable = 0} = item;\n\tconst hasUnloadedChildren = childrenAvailable > children.length;\n\tconst parent = children.length > 0 || hasUnloadedChildren;\n\tconst loading = parent && getLoadingState(properties.loadingItems, path);\n\n\tif (\n\t\thasUnloadedChildren &&\n\t\tchildren.length === 0 &&\n\t\tloading.status === 'inactive'\n\t) {\n\t\tdispatch(() => {\n\t\t\treturn {\n\t\t\t\ttype: 'NOW_CONTENT_TREE#LOADING_REQUESTED',\n\t\t\t\tpayload: {item, path}\n\t\t\t};\n\t\t});\n\t}\n\t// Parent has some children, open to show them\n\tdispatch(({properties}) => ({\n\t\ttype: 'NOW_CONTENT_TREE#EXPANDED_ITEMS_SET',\n\t\tpayload: {value: togglePath(properties.expandedItems, path)}\n\t}));\n};\n\nconst renderTreeItemLoadIndicator = ({showDividers, visible}) => {\n\treturn (\n\t\t<li tabindex=\"-1\" role=\"none\" data-visible={visible}>\n\t\t\t<div\n\t\t\t\tclass={{\n\t\t\t\t\t'now-content-tree-node': true,\n\t\t\t\t\t'show-dividers': showDividers\n\t\t\t\t}}>\n\t\t\t\t<div className=\"now-content-tree-leaf\">\n\t\t\t\t\t<now-loader className=\"now-m-inline--sm\" size=\"md\" />\n\t\t\t\t\t<span className=\"now-line-height-crop\">\n\t\t\t\t\t\t<span className=\"now-content-tree-label -loader\">\n\t\t\t\t\t\t\t{t('Loading...')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t);\n};\n\nconst renderTreeItemLoadMore = ({\n\terror,\n\terrorMessage,\n\tshowDividers,\n\tvisible,\n\tonClick\n}) => {\n\tconst loadMoreMessage = t('Show More');\n\tconst retryMessage = t('Retry');\n\tconst retryAriaLabel = `${errorMessage}, ${retryMessage}`;\n\tconst renderContent = !error ? (\n\t\t<now-button-bare\n\t\t\tclassName=\"now-m-inline-start--xxl\"\n\t\t\tvariant=\"secondary\"\n\t\t\tlabel={loadMoreMessage}\n\t\t\thide-padding\n\t\t/>\n\t) : (\n\t\t<div className=\"now-content-tree-leaf\">\n\t\t\t<now-icon\n\t\t\t\tclassName=\"now-content-tree-icon -error\"\n\t\t\t\ticon=\"exclamation-triangle-outline\"\n\t\t\t\tsize=\"md\"\n\t\t\t/>\n\t\t\t<span className=\"now-line-height-crop\">\n\t\t\t\t<span className=\"now-content-tree-label -error\">{errorMessage}</span>\n\t\t\t</span>\n\t\t\t<now-button-bare\n\t\t\t\tclassName=\"now-m-inline-start--sm\"\n\t\t\t\ttabindex=\"-1\"\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tlabel={retryMessage}\n\t\t\t\tconfig-aria={{'aria-label': retryAriaLabel}}\n\t\t\t\thide-padding\n\t\t\t/>\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<li tabindex=\"-1\" role=\"none\" data-id=\"loadmore\" data-visible={visible}>\n\t\t\t<div\n\t\t\t\tclass={{'now-content-tree-node': true, 'show-dividers': showDividers}}\n\t\t\t\ton-click={onClick}>\n\t\t\t\t{renderContent}\n\t\t\t</div>\n\t\t</li>\n\t);\n};\n\n/**\n * @param {{path: string[], error: boolean, errorMessage?: string}[]} loadingItems\n * @param {string[]} path\n * @return {{status: (\"inactive\"|\"active\"|\"error\"), errorMessage?: string}} state\n */\nconst getLoadingState = (loadingItems, path) => {\n\tconst index = loadingItems.findIndex((item) => isEqual(item.path, path));\n\tif (index === -1) {\n\t\treturn {status: 'inactive'};\n\t}\n\tconst {error = false, errorMessage = t('Unable to load')} = loadingItems[\n\t\tindex\n\t];\n\treturn {status: !error ? 'active' : 'error', errorMessage};\n};\n\n// Creates custom aria label that reads the highlighted value label if defined\nconst getRowAriaLabel = (item) => {\n\tlet label = item.label;\n\tif (item.highlightedValueProps) {\n\t\tconst labels = item.highlightedValueProps\n\t\t\t.map((hvp) => hvp.label)\n\t\t\t.join(' - ');\n\t\tlabel += ` - ${labels}`;\n\t}\n\tif (item.disabled) {\n\t\tlabel += `, ${t('disabled')}`;\n\t}\n\treturn label;\n};\n\nconst getAriaSelected = (select, selected) => {\n\tif (select === 'multi') {\n\t\treturn selected ? 'true' : 'false';\n\t} else if (select === 'single') {\n\t\treturn selected ? 'true' : undefined;\n\t}\n};\n\nconst onFocusItem = (e, item, componentId, updateState) => {\n\tconst host = getShadowRootHost(e.target);\n\t// store the last focused item\n\tconst lastFocused = getFirstTreeItemInPath(e.composedPath());\n\tsetLastFocusedTreeItem(host, lastFocused);\n\thideTooltip(updateState);\n\t// only show the tooltip if the label is really truncated\n\tconst span = lastFocused.querySelector('span.now-content-tree-label');\n\tif (!span || span.offsetWidth >= span.scrollWidth) return;\n\tschedule(\n\t\tcomponentId,\n\t\tshowTooltip.bind(null, updateState, item, lastFocused.firstChild)\n\t);\n};\n\nconst renderTreeItem = ({\n\titem,\n\tpath,\n\tselect,\n\tshowDividers,\n\tshowActionsOnHover,\n\tshowPresencePattern,\n\thighlightSelectedParent,\n\texpandedItems,\n\tselectedItems,\n\tloadingItems,\n\tdispatch,\n\trenderChildren,\n\tparentExpanded,\n\tsearchTerm,\n\tsize,\n\ttriggerIcon,\n\toverflow,\n\tcomponentId,\n\tupdateState\n}) => {\n\tconst {children = [], childrenAvailable = 0} = item;\n\tconst hasUnloadedChildren = childrenAvailable > children.length;\n\tconst parent = children.length > 0 || hasUnloadedChildren;\n\tconst selected = hasPath(selectedItems, path);\n\tconst childSelected = hasChildPath(selectedItems, path);\n\tconst expanded = parent && hasPath(expandedItems, path);\n\tconst loading = parent && getLoadingState(loadingItems, path);\n\n\tconst onClickTrigger = () => {\n\t\tif (\n\t\t\t!expanded &&\n\t\t\thasUnloadedChildren &&\n\t\t\tchildren.length === 0 &&\n\t\t\tloading.status === 'inactive'\n\t\t) {\n\t\t\tdispatch(() => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'NOW_CONTENT_TREE#LOADING_REQUESTED',\n\t\t\t\t\tpayload: {item, path}\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\tif (expanded && loading.status !== 'inactive') {\n\t\t\tdispatch(() => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'NOW_CONTENT_TREE#LOADING_CANCELLED',\n\t\t\t\t\tpayload: {item, path}\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\t// Parent has some children, open to show them\n\t\tdispatch(({properties}) => ({\n\t\t\ttype: 'NOW_CONTENT_TREE#EXPANDED_ITEMS_SET',\n\t\t\tpayload: {value: togglePath(properties.expandedItems, path)}\n\t\t}));\n\t};\n\n\tconst onClickLoadMore = () => {\n\t\tif (!item.disabled) {\n\t\t\tdispatch(() => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'NOW_CONTENT_TREE#LOADING_REQUESTED',\n\t\t\t\t\tpayload: {item, path}\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onToggleSelected = (e) => {\n\t\tconst {\n\t\t\ttagName,\n\t\t\tparentNode: {tagName: parentTagName}\n\t\t} = e.target;\n\t\tif (\n\t\t\te.target.classList.contains('now-content-tree-status') ||\n\t\t\ttagName === 'BUTTON' ||\n\t\t\t(tagName === 'NOW-ICON' && parentTagName === 'BUTTON') ||\n\t\t\ttagName === 'NOW-BUTTON-ICONIC' ||\n\t\t\ttagName === 'NOW-BUTTON-BARE'\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (!item.disabled) {\n\t\t\tdispatch(() => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'NOW_CONTENT_TREE#ITEM_CLICKED',\n\t\t\t\t\tpayload: {item}\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\tif (item.disabled || select === 'none') {\n\t\t\treturn;\n\t\t}\n\t\tdispatch(({properties}) => {\n\t\t\tlet value;\n\t\t\tif (select === 'single') {\n\t\t\t\tvalue = hasPath(properties.selectedItems, path) ? [] : [path];\n\t\t\t}\n\t\t\tif (select === 'multi') {\n\t\t\t\tvalue = togglePath(properties.selectedItems, path);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttype: 'NOW_CONTENT_TREE#SELECTED_ITEMS_SET',\n\t\t\t\tpayload: {value}\n\t\t\t};\n\t\t});\n\t};\n\n\tconst onClickItemLabel = () => {\n\t\tif (!item.disabled) {\n\t\t\tdispatch(() => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'NOW_CONTENT_TREE#ACTIONABLE_ITEM_CLICKED',\n\t\t\t\t\tpayload: {item}\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onClickAction = (e, action) => {\n\t\tif (!item.disabled) {\n\t\t\tconst actionTarget = getActiveElement();\n\t\t\tdispatch(action.clickActionType || 'NOW_CONTENT_TREE#ACTION_CLICKED', {\n\t\t\t\titem,\n\t\t\t\taction,\n\t\t\t\tdomTarget: e.target,\n\t\t\t\tactionTarget\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onMouseenterAction = (e, action) => {\n\t\tif (!item.disabled) {\n\t\t\tdispatch(\n\t\t\t\taction.mouseenterActionType || 'NOW_CONTENT_TREE#ACTION_MOUSEENTER',\n\t\t\t\t{\n\t\t\t\t\titem,\n\t\t\t\t\taction,\n\t\t\t\t\tdomTarget: e.target\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t};\n\n\tconst onMouseleaveAction = (e, action) => {\n\t\tif (!item.disabled) {\n\t\t\tdispatch(\n\t\t\t\taction.mouseleaveActionType || 'NOW_CONTENT_TREE#ACTION_MOUSELEAVE',\n\t\t\t\t{\n\t\t\t\t\titem,\n\t\t\t\t\taction,\n\t\t\t\t\tdomTarget: e.target\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t};\n\n\tconst onMouseenterItem = (e) => {\n\t\t// see if the text is really overflowing\n\t\tconst span = e.target.querySelector('span.now-content-tree-label');\n\t\tif (!span || span.offsetWidth >= span.scrollWidth) return;\n\t\tscheduleShowTooltip(e.target);\n\t};\n\tconst scheduleShowTooltip = (target) => {\n\t\thideTooltip(updateState);\n\t\tschedule(componentId, showTooltip.bind(null, updateState, item, target));\n\t};\n\tconst scheduleHideTooltip = () => {\n\t\tschedule(componentId, hideTooltip.bind(null, updateState));\n\t};\n\n\tconst triggerExpanded = {\n\t\tchevron: 'chevron-down-outline',\n\t\tcaret: 'caret-down-fill',\n\t\t'plus-minus': 'minus-fill'\n\t};\n\tconst triggerCollapsed = {\n\t\tchevron: 'chevron-end-outline',\n\t\tcaret: 'caret-right-fill',\n\t\t'plus-minus': 'plus-fill'\n\t};\n\tconst renderTrigger = parent ? (\n\t\t<now-button-iconic\n\t\t\tclassName=\"now-content-tree-trigger\"\n\t\t\ticon={\n\t\t\t\texpanded ? triggerExpanded[triggerIcon] : triggerCollapsed[triggerIcon]\n\t\t\t}\n\t\t\tsize={size}\n\t\t\thide-padding\n\t\t\tbare\n\t\t\ttitle={t('Expand/Collapse')}\n\t\t\tvariant=\"tertiary\"\n\t\t\tconfig-aria={{button: {'aria-hidden': 'true'}}}\n\t\t\ttabindex=\"-1\"\n\t\t\ton-click={onClickTrigger}\n\t\t\tdisabled={item.disabled}\n\t\t/>\n\t) : (\n\t\tundefined\n\t);\n\n\tconst renderBadgeStatus = (status) => (\n\t\t<now-badge\n\t\t\tclassName=\"now-content-tree-status\"\n\t\t\ttabindex=\"-1\"\n\t\t\tconfig-aria={{'aria-label': status.label}}\n\t\t\tdisabled={item.disabled}\n\t\t\thide-padding\n\t\t\tsize=\"sm\"\n\t\t\tvalue={status.value}\n\t\t\tround={status.round}\n\t\t\tstatus={status.status}\n\t\t\tdata-test=\"status\"\n\t\t/>\n\t);\n\n\tconst renderPresenceStatus = (status) => (\n\t\t<now-icon-presence\n\t\t\tclassName=\"now-content-tree-status\"\n\t\t\ttabindex=\"-1\"\n\t\t\tconfig-aria={{'aria-label': status.presence}}\n\t\t\tdisabled={item.disabled}\n\t\t\tpresence={status.presence}\n\t\t\tshow-pattern={showPresencePattern}\n\t\t\thide-padding\n\t\t\tsize={size}\n\t\t\tdata-test=\"status\"\n\t\t/>\n\t);\n\n\tconst renderIconStatus = (status) => (\n\t\t<now-icon\n\t\t\tclassName=\"now-content-tree-status\"\n\t\t\ttabindex=\"-1\"\n\t\t\tconfig-aria={{'aria-label': status.label}}\n\t\t\tdisabled={item.disabled}\n\t\t\ticon={status.icon}\n\t\t\ttitle={status.label}\n\t\t\thide-padding\n\t\t\tsize={size}\n\t\t\tdata-test=\"status\"\n\t\t/>\n\t);\n\n\tconst renderStatuses =\n\t\titem.statuses &&\n\t\titem.statuses.map((status) => {\n\t\t\tswitch (status.type) {\n\t\t\t\tcase 'badge':\n\t\t\t\t\treturn renderBadgeStatus(status);\n\t\t\t\tcase 'presence':\n\t\t\t\t\treturn renderPresenceStatus(status);\n\t\t\t\tdefault:\n\t\t\t\t\treturn renderIconStatus(status);\n\t\t\t}\n\t\t});\n\n\tconst renderActions =\n\t\titem.actions &&\n\t\titem.actions.map((action) => (\n\t\t\t<now-button-iconic\n\t\t\t\tclassName=\"now-content-tree-status\"\n\t\t\t\ttabindex=\"-1\"\n\t\t\t\tconfig-aria={{\n\t\t\t\t\t'aria-label': action.label\n\t\t\t\t}}\n\t\t\t\tbare\n\t\t\t\tdisabled={item.disabled}\n\t\t\t\thide-padding\n\t\t\t\ticon={action.icon || action.iconName}\n\t\t\t\ttitle={(action && action.label) || action.label}\n\t\t\t\tvariant=\"tertiary\"\n\t\t\t\tsize={size}\n\t\t\t\ton-click={(e) => onClickAction(e, action)}\n\t\t\t\ton-mouseenter={(e) => onMouseenterAction(e, action)}\n\t\t\t\ton-mouseleave={(e) => onMouseleaveAction(e, action)}\n\t\t\t\ton-focus={(e) => onFocusItem(e, item, componentId, updateState)}\n\t\t\t/>\n\t\t));\n\n\tconst renderHighlightedValues = item.highlightedValueProps\n\t\t? item.highlightedValueProps.map((hvp) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: hvp.width ? hvp.width : null\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"now-content-tree-highlighted-value-parent\">\n\t\t\t\t\t\t<now-highlighted-value\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t'max-width': hvp.width ? hvp.width : null\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"now-content-tree-highlighted-value\"\n\t\t\t\t\t\t\tstatus={hvp.status}\n\t\t\t\t\t\t\tlabel={hvp.label}\n\t\t\t\t\t\t\tshow-icon\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t  })\n\t\t: undefined;\n\n\tconst renderChildItems = children.length\n\t\t? renderChildren(\n\t\t\t\titem.children,\n\t\t\t\tpath,\n\t\t\t\tparentExpanded && expanded,\n\t\t\t\trenderChildren\n\t\t  )\n\t\t: undefined;\n\n\tconst renderLoadIndicatorItem =\n\t\tloading.status === 'active'\n\t\t\t? renderTreeItemLoadIndicator({\n\t\t\t\t\tshowDividers,\n\t\t\t\t\tvisible: parentExpanded && expanded\n\t\t\t  })\n\t\t\t: undefined;\n\n\tconst loadingInactiveWithChildren =\n\t\tloading.status === 'inactive' && children.length > 0;\n\n\tconst renderLoadMoreItem =\n\t\thasUnloadedChildren &&\n\t\t(loading.status === 'error' || loadingInactiveWithChildren)\n\t\t\t? renderTreeItemLoadMore({\n\t\t\t\t\terror: loading.status === 'error',\n\t\t\t\t\terrorMessage: loading.errorMessage,\n\t\t\t\t\tshowDividers,\n\t\t\t\t\tvisible: parentExpanded && expanded,\n\t\t\t\t\tonClick: onClickLoadMore\n\t\t\t  })\n\t\t\t: undefined;\n\n\tconst renderCollapseContent =\n\t\trenderChildItems || renderLoadIndicatorItem || renderLoadMoreItem ? (\n\t\t\t<now-collapse hidden={!expanded} expanded={expanded}>\n\t\t\t\t<ul\n\t\t\t\t\tclassName=\"now-content-tree-ul\"\n\t\t\t\t\trole=\"group\"\n\t\t\t\t\tdata-test=\"parent-node\">\n\t\t\t\t\t{renderChildItems}\n\t\t\t\t\t{renderLoadIndicatorItem}\n\t\t\t\t\t{renderLoadMoreItem}\n\t\t\t\t</ul>\n\t\t\t</now-collapse>\n\t\t) : (\n\t\t\tundefined\n\t\t);\n\n\t// Both `icon` and `iconName` are maintained for simplicity and backwards compatibility,\n\t// but `identifierProps` is more extensible to support avatar and other use cases\n\tconst iconIdentifierName =\n\t\titem.identifierProps && item.identifierProps.icon\n\t\t\t? item.identifierProps.icon\n\t\t\t: item.icon || item.iconName;\n\tlet renderIdentifier;\n\n\tif (item.identifierProps && item.identifierProps.type === 'avatar') {\n\t\trenderIdentifier = (\n\t\t\t<now-avatar\n\t\t\t\t{...omit(item.identifierProps, 'type')}\n\t\t\t\tshow-presence-pattern={showPresencePattern}\n\t\t\t\tclassName=\"now-m-inline-end--sm\"\n\t\t\t\tsize=\"sm\"\n\t\t\t/>\n\t\t);\n\t} else if (iconIdentifierName) {\n\t\trenderIdentifier = (\n\t\t\t<now-icon\n\t\t\t\tclass={{\n\t\t\t\t\t'now-content-tree-icon': true,\n\t\t\t\t\t'-identifier': true,\n\t\t\t\t\t'is-actionable': item.actionable,\n\t\t\t\t\t'is-placeholder': item.variant === 'placeholder'\n\t\t\t\t}}\n\t\t\t\ticon={iconIdentifierName}\n\t\t\t\tsize={size}\n\t\t\t\tdata-test=\"identifier\"\n\t\t\t/>\n\t\t);\n\t}\n\n\tconst highlightedLabel = searchTerm\n\t\t? highlightSearchTerm(searchTerm, item.label)\n\t\t: item.label;\n\n\tconst renderLabelText = item.actionable ? (\n\t\t<button\n\t\t\tclass={{\n\t\t\t\t'now-content-tree-button': true,\n\t\t\t\t'is-placeholder': item.variant === 'placeholder',\n\t\t\t\t'is-disabled': item.disabled\n\t\t\t}}\n\t\t\ttabindex=\"-1\"\n\t\t\taria-label={item.label}\n\t\t\ton-click={onClickItemLabel}\n\t\t\ton-focus\n\t\t\tdisabled={item.disabled}\n\t\t\tdata-test=\"label\">\n\t\t\t<span className=\"now-line-height-crop\">\n\t\t\t\t<span className=\"now-content-tree-label\">{highlightedLabel}</span>\n\t\t\t</span>\n\t\t</button>\n\t) : (\n\t\t<span className=\"now-line-height-crop\">\n\t\t\t<span\n\t\t\t\tclass={{\n\t\t\t\t\t'now-content-tree-label': true,\n\t\t\t\t\t'is-placeholder': item.variant === 'placeholder'\n\t\t\t\t}}\n\t\t\t\taria-label={item.label}>\n\t\t\t\t{highlightedLabel}\n\t\t\t</span>\n\t\t</span>\n\t);\n\n\tconst renderLabel = (\n\t\t<Fragment>\n\t\t\t{renderTrigger}\n\t\t\t<div\n\t\t\t\tclass={{\n\t\t\t\t\t'now-content-tree-leaf': true,\n\t\t\t\t\t'is-leaf-node': !parent\n\t\t\t\t}}\n\t\t\t\tdata-test=\"label\">\n\t\t\t\t{renderIdentifier}\n\t\t\t\t{renderLabelText}\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n\n\treturn (\n\t\t<li\n\t\t\tkey={item.id}\n\t\t\tid={item.id}\n\t\t\trole=\"treeitem\"\n\t\t\ttabindex=\"-1\"\n\t\t\taria-expanded={!parent ? undefined : String(expanded)}\n\t\t\tdata-parent={parent}\n\t\t\tdata-visible={parentExpanded}\n\t\t\tdata-disabled={item.disabled}\n\t\t\tdata-selected={selected}\n\t\t\taria-label={getRowAriaLabel(item)}\n\t\t\taria-selected={getAriaSelected(select, selected)}\n\t\t\tdata-testid={item.id}\n\t\t\ton-focusout={overflow === 'truncate' ? scheduleHideTooltip : null}\n\t\t\ton-focus={(e) => onFocusItem(e, item, componentId, updateState)}>\n\t\t\t<div\n\t\t\t\tclass={{\n\t\t\t\t\t'now-content-tree-node': true,\n\t\t\t\t\t'is-disabled': item.disabled,\n\t\t\t\t\t'is-selected': selected || (childSelected && highlightSelectedParent),\n\t\t\t\t\t'is-selected-child': selected && highlightSelectedParent,\n\t\t\t\t\t'show-dividers': showDividers,\n\t\t\t\t\t'show-actions': showActionsOnHover\n\t\t\t\t}}\n\t\t\t\ton-mouseenter={overflow === 'truncate' ? onMouseenterItem : null}\n\t\t\t\ton-mouseleave={overflow === 'truncate' ? scheduleHideTooltip : null}\n\t\t\t\ton-click={onToggleSelected}>\n\t\t\t\t{renderLabel}\n\t\t\t\t{renderStatuses}\n\t\t\t\t{renderActions}\n\t\t\t\t{renderHighlightedValues}\n\t\t\t</div>\n\t\t\t{renderCollapseContent}\n\t\t</li>\n\t);\n};\n\nconst view = (state, {dispatch, updateState}) => {\n\tconst {\n\t\titems,\n\t\tselect,\n\t\tshowDividers,\n\t\tshowActionsOnHover,\n\t\tshowPresencePattern,\n\t\thighlightSelectedParent,\n\t\texpandedItems,\n\t\tselectedItems,\n\t\tloadingItems,\n\t\tsearchTerm,\n\t\tsize,\n\t\toverflow,\n\t\ttriggerIcon\n\t} = state.properties;\n\tconst {hasFocus, componentId} = state;\n\n\tconst onFocusIn = (e) => {\n\t\tconst host = getShadowRootHost(e.target);\n\t\tconst keyedIntoTree = e.target === host.shadowRoot.querySelector('ul');\n\t\tconst relatedTargetHost = e.relatedTarget\n\t\t\t? getShadowRootHost(e.relatedTarget)\n\t\t\t: null;\n\t\tconst lastFocusNotInTree = relatedTargetHost !== host;\n\t\tif (lastFocusNotInTree) {\n\t\t\tif (keyedIntoTree) {\n\t\t\t\tfocusInitialTreeItem(host);\n\t\t\t}\n\t\t\tupdateState({hasFocus: true});\n\t\t}\n\t};\n\n\tconst onFocusOut = (e) => {\n\t\tconst host = getShadowRootHost(e.target);\n\t\tconst relatedTargetHost = e.relatedTarget\n\t\t\t? getShadowRootHost(e.relatedTarget)\n\t\t\t: null;\n\t\tconst nextFocusNotInTree = relatedTargetHost !== host;\n\t\tif (nextFocusNotInTree) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tchangeItemActionsVisibilityIfNeeded(host);\n\t\t\t\tupdateState({hasFocus: false});\n\t\t\t\tcancelDrag(host);\n\t\t\t}, 0);\n\t\t}\n\t};\n\n\tconst renderItems = (treeItems, path, parentExpanded, renderChildren) =>\n\t\ttreeItems.map((item) => {\n\t\t\treturn renderTreeItem({\n\t\t\t\titem,\n\t\t\t\tpath: [...path, item.id],\n\t\t\t\tselect,\n\t\t\t\tshowDividers,\n\t\t\t\tshowActionsOnHover,\n\t\t\t\tshowPresencePattern,\n\t\t\t\thighlightSelectedParent,\n\t\t\t\texpandedItems,\n\t\t\t\tselectedItems,\n\t\t\t\tloadingItems,\n\t\t\t\tdispatch,\n\t\t\t\trenderChildren,\n\t\t\t\tparentExpanded,\n\t\t\t\tsearchTerm,\n\t\t\t\tsize,\n\t\t\t\toverflow,\n\t\t\t\ttriggerIcon,\n\t\t\t\tcomponentId,\n\t\t\t\tupdateState\n\t\t\t});\n\t\t});\n\n\treturn (\n\t\t<div\n\t\t\tclass={{\n\t\t\t\t'now-content-tree': true,\n\t\t\t\t'will-wrap': overflow === 'wrap',\n\t\t\t\t'will-truncate': overflow === 'truncate',\n\t\t\t\t['-' + size]: size\n\t\t\t}}>\n\t\t\t<ul\n\t\t\t\tclassName=\"now-content-tree-ul\"\n\t\t\t\tdata-test=\"root-node\"\n\t\t\t\trole=\"tree\"\n\t\t\t\ttabindex={hasFocus ? '-1' : '0'}\n\t\t\t\ton-focusin={onFocusIn}\n\t\t\t\ton-focusout={onFocusOut}>\n\t\t\t\t{renderItems(items, [], true, renderItems)}\n\t\t\t</ul>\n\t\t\t<now-tooltip\n\t\t\t\tid=\"tooltip\"\n\t\t\t\tmanage-opened\n\t\t\t\topened={state.currentTooltip.opened}\n\t\t\t\ttarget-ref={state.currentTooltip.ref}\n\t\t\t\tcontent={state.currentTooltip.content}\n\t\t\t\tdelay={{show: 0, hide: 0}}\n\t\t\t/>\n\t\t\t<div className=\"now-content-tree-dragdrop\">\n\t\t\t\t<div className=\"now-content-tree-dragdrop-head\" />\n\t\t\t\t<div className=\"now-content-tree-dragdrop-tail\" />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n/**\n * The content tree is a hierarchical component that represents the relationship between a parent and child nodes.\n * The content tree can be simple or complex, displaying a rich context and\n * actions.\n *\n * ```jsx\n * <now-content-tree\n *    show-dividers\n *    select=\"single\"\n *    expanded-items={[['item1']]}\n *    selected-items={[['item1', 'item2']]}\n *    items={[{id: 'item1', label: 'Item 1', children: [{id: 'item2', label: 'Item 2'}]}]}\n *    />\n * ```\n *\n * @seismicElement now-content-tree\n * @summary A hierarchical component that represents the relationship between parent and child nodes.\n * @uib.label Content tree\n * @uib.icon content-tree\n * @uib.description Collapsible tree of selectable data\n * @uib.category primitives\n * @uib.associatedTypes global.core\n * @uib.properties size, select, overflow, triggerIcon, highlightSelectedParent, showActionsOnHover, showDividers, showPresencePattern, items, expandedItems, selectedItems, loadingItems, searchTerm\n * @uib.actions NOW_CONTENT_TREE#ITEM_CLICKED, NOW_CONTENT_TREE#ACTIONABLE_ITEM_CLICKED, NOW_CONTENT_TREE#ACTION_CLICKED, NOW_CONTENT_TREE#ACTION_MOUSELEAVE, NOW_CONTENT_TREE#ACTION_MOUSEENTER, NOW_CONTENT_TREE#LOADING_REQUESTED, NOW_CONTENT_TREE#LOADING_CANCELLED\n */\ncreateEnhancedElement('now-content-tree', {\n\tproperties: {\n\t\t/**\n\t\t * An array of tree item objects describing each item in the tree. Each item\n\t\t * can have child items nested underneath it.\n\t\t *\n\t\t * @type {ContentTreeItem[]}\n\t\t * @uib.required\n\t\t * @uib.defaultValue [{\"id\": \"p1\", \"label\": \"Tree parent item\", \"children\": [{\"id\": \"c1\", \"label\": \"Tree child item 1\"}, {\"id\": \"c2\", \"label\": \"Tree child item 2\"}, {\"id\": \"c3\", \"label\": \"Tree child item 3\"}]}]\n\t\t * @uib.typeMetadata.emptyStateBehavior EMPTY_ARRAY\n\t\t */\n\t\titems: {default: [], manageable: true, schema: itemsSchema},\n\t\t/**\n\t\t * An array of path arrays to each selected item. Path arrays are a list of\n\t\t * strings or numeric IDs tracing the path from the root of the `items` tree to the\n\t\t * selected item. Each value is the `id` of an item in that path.\n\t\t * Use `manage-selected-items` to override the default behavior and handle\n\t\t * the `NOW_CONTENT_TREE#SELECTED_ITEMS_SET` action manually.\n\t\t * @type {Array.<Array.<(string|number)>>}\n\t\t * @uib.description An array of path arrays to each selected item.\n\t\t * @uib.fieldType json\n\t\t */\n\t\tselectedItems: {\n\t\t\tdefault: [],\n\t\t\tmanageable: true,\n\t\t\tschema: {\n\t\t\t\ttype: 'array',\n\t\t\t\titems: {type: 'array', items: {type: ['string', 'number']}}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * An array of path arrays to each expanded item. Path arrays are a list of\n\t\t * strings or numeric IDs tracing the path from the root of the `items` tree to the\n\t\t * expanded item. Each value is the `id` of an item in that path.\n\t\t * Use `manage-expanded-items` to override the default behavior and handle\n\t\t * the `NOW_CONTENT_TREE#EXPANDED_ITEMS_SET` action manually.\n\t\t * @type {Array.<Array.<(string|number)>>}\n\t\t * @uib.description An array of path arrays to each expanded item\n\t\t * @uib.fieldType json\n\t\t * @uib.defaultValue [[\"p1\"]]\n\t\t */\n\t\texpandedItems: {\n\t\t\tdefault: [],\n\t\t\tmanageable: true,\n\t\t\tschema: {\n\t\t\t\ttype: 'array',\n\t\t\t\titems: {type: 'array', items: {type: ['string', 'number']}}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * A list of items that are actively loading or recently failed to\n\t\t * load children from the server. Similar to other path arrays, except\n\t\t * each path should be wrapped in an object with an optional error flag and\n\t\t * error message. The action `NOW_CONTENT_TREE#LOADING_REQUESTED` is\n\t\t * dispatched when new children are requested. Add the path from that action\n\t\t * payload to the loading list.\n\t\t * @type {{path: Array.<(string|number)>, error: boolean, errorMessage: (string|undefined)}[]}\n\t\t * @uib.description A list of items that are actively being loaded or recently failed to load children from the server.\n\t\t */\n\t\tloadingItems: {\n\t\t\tdefault: [],\n\t\t\tschema: {\n\t\t\t\ttype: 'array',\n\t\t\t\titems: {\n\t\t\t\t\ttype: 'object',\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tpath: {type: 'array', items: {type: ['string', 'number']}},\n\t\t\t\t\t\terror: {type: 'boolean'},\n\t\t\t\t\t\terrorMessage: {type: 'string', translatable: true}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Determines what happens when a user clicks a selectable tree item.\n\t\t * Choose from the following:\n\t\t * - \"single\" (default): Only one item can be selected at a time.\n\t\t * - \"multi\": Multiple items can be selected at the same time.\n\t\t * - \"none\": No items can be selected; use for trees that only display data.\n\t\t * @type {(\"single\"|\"multi\"|\"none\")}\n\t\t * @uib.label Selection\n\t\t * @uib.description Determines what happens when a user clicks a selectable tree item.\n\t\t */\n\t\tselect: {\n\t\t\tdefault: 'single',\n\t\t\tschema: {\n\t\t\t\ttype: 'string',\n\t\t\t\tenum: ['single', 'multi', 'none']\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * When true, the parent of the current selection is highlighted (with a different highlight color) along with the selected item.\n\t\t * @type {boolean}\n\t\t * @uib.label Highlight immediate parent\n\t\t * @uib.description Select to highlight the parent node automatically when the user selects a child node. The child node uses the secondary highlight style.\n\t\t */\n\t\thighlightSelectedParent: {default: false, schema: {type: 'boolean'}},\n\t\t/**\n\t\t * Determines the behavior when items are too wide to fit in the space given\n\t\t * to the tree.\n\t\t * Choose from the following:\n\t\t * - \"scroll\" (default): The entire tree scrolls horizontally in its container.\n\t\t * - \"truncate\": Item text is truncated and clipped. Side scrolling is not enabled.\n\t\t * - \"wrap\": Item text wraps over multiple lines in the space available. Side scrolling is not enabled.\n\t\t * @type {(\"scroll\"|\"truncate\"|\"wrap\")}\n\t\t * @uib.label Overflow\n\t\t * @uib.description Defines the overflow behavior.\n\t\t */\n\t\toverflow: {\n\t\t\tdefault: 'scroll',\n\t\t\tschema: {type: 'string', enum: ['scroll', 'truncate', 'wrap']}\n\t\t},\n\t\t/**\n\t\t * Sets the item label and icon size.\n\t\t * @type {('sm'|'md')}\n\t\t * @uib.label Size\n\t\t * @uib.description Sets the tree size.\n\t\t */\n\t\tsize: {\n\t\t\tdefault: 'md',\n\t\t\tschema: {type: 'string', enum: ['sm', 'md']}\n\t\t},\n\t\t/**\n\t\t * When true, displays a border on the bottom of each tree item.\n\t\t * @type {boolean}\n\t\t * @uib.description Show a divider line on the bottom of each tree item.\n\t\t */\n\t\tshowDividers: {default: false, schema: {type: 'boolean'}},\n\t\t/**\n\t\t * When true, shows actions and statuses on hover or focus.\n\t\t * @type {boolean}\n\t\t * @uib.label Hide icons on default\n\t\t * @uib.description Shows actions and statuses on hover or focus.\n\t\t */\n\t\tshowActionsOnHover: {default: false, schema: {type: 'boolean'}},\n\t\t/**\n\t\t * When true, displays any presence indicators in the content tree with a pattern to make\n\t\t * them distinguishable by a means other than color.\n\t\t * @type {boolean}\n\t\t * @uib.description Displays presence indicators with a pattern to make them distinguishable by a means other than color.\n\t\t */\n\t\tshowPresencePattern: {default: false, schema: {type: 'boolean'}},\n\t\t/**\n\t\t * If provided, all item labels containing this value have the\n\t\t * matching portion highlighted. Matching is case-insensitive and\n\t\t * applies to all occurrences within the item label. This does not\n\t\t * filter the visible items that are rendered: parent components are\n\t\t * responsible or maintaining the list of rendered items.\n\t\t * @type {string}\n\t\t * @uib.label Search Item\n\t\t * @uib.description Item labels containing this value have the matching portion highlighted. Matching is case-insensitive and applies to all occurrences within the item label. This does not filter the visible items that are rendered: parent components are responsible for maintaining the list of rendered items.\n\t\t */\n\t\tsearchTerm: {schema: {type: 'string'}},\n\t\t/**\n\t\t * Configures the type of each parent's expand/collapse icon.\n\t\t *\n\t\t * @type {('chevron'|'caret'|'plus-minus')}\n\t\t * @uib.label Trigger Icon\n\t\t * @uib.description Defines the symbol to expand tree items.\n\t\t */\n\t\ttriggerIcon: {\n\t\t\tdefault: 'chevron',\n\t\t\tschema: {type: 'string', enum: ['chevron', 'caret', 'plus-minus']}\n\t\t}\n\t},\n\tinitialState: {\n\t\thasFocus: false,\n\t\tdragdropState: {focusId: null, initialFocusId: null, cursorAbove: true},\n\t\tcurrentTooltip: {ref: null, content: '', opened: false}\n\t},\n\tview,\n\tstyles,\n\teventHandlers: [\n\t\t{\n\t\t\tevents: ['keydown'],\n\t\t\teffect: (coeffects) => {\n\t\t\t\tconst {host, action} = coeffects;\n\t\t\t\tconst {key, shiftKey} = action.payload.event;\n\t\t\t\tconst dragContext = getDragContext(host);\n\t\t\t\tif (!dragContext && !shiftKey && [' ', 'Enter'].includes(key)) {\n\t\t\t\t\t// Toggle selection or load more\n\t\t\t\t\tconst focused = getFocusedElement(host);\n\t\t\t\t\tconst treeItem = getHostTreeItem(focused);\n\t\t\t\t\tif (focused === treeItem) {\n\t\t\t\t\t\taction.preventDefault();\n\t\t\t\t\t\tfocused.querySelector('.now-content-tree-node').click();\n\t\t\t\t\t}\n\t\t\t\t\tif (focused !== treeItem && isTreeItemLoadMore(treeItem)) {\n\t\t\t\t\t\t// the user pressed space/enter on the show more button,\n\t\t\t\t\t\t// move their focus to the previous item or it will be lost\n\t\t\t\t\t\t// when the new children are added to the tree\n\t\t\t\t\t\taction.preventDefault();\n\t\t\t\t\t\tfocused.click();\n\t\t\t\t\t\tfocusPreviousTreeItem(host);\n\t\t\t\t\t}\n\t\t\t\t} else if (['ArrowDown', 'ArrowUp', 'Home', 'End'].includes(key)) {\n\t\t\t\t\t// Move between rows\n\t\t\t\t\taction.preventDefault();\n\t\t\t\t\tif (dragContext) {\n\t\t\t\t\t\thandleKeyboardDrag(dragContext, coeffects);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (key === 'ArrowDown') {\n\t\t\t\t\t\tfocusNextTreeItem(host);\n\t\t\t\t\t}\n\t\t\t\t\tif (key === 'ArrowUp') {\n\t\t\t\t\t\tfocusPreviousTreeItem(host);\n\t\t\t\t\t}\n\t\t\t\t\tif (key === 'Home') {\n\t\t\t\t\t\tfocusFirstTreeItem(host);\n\t\t\t\t\t}\n\t\t\t\t\tif (key === 'End') {\n\t\t\t\t\t\tfocusLastTreeItem(host);\n\t\t\t\t\t}\n\t\t\t\t} else if (['ArrowRight', 'ArrowLeft'].includes(key)) {\n\t\t\t\t\t// Move within a given row\n\t\t\t\t\taction.preventDefault();\n\t\t\t\t\tconst focused = getFocusedElement(host);\n\t\t\t\t\tconst treeItem = getHostTreeItem(focused);\n\t\t\t\t\tif (!treeItem) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (focused === treeItem) {\n\t\t\t\t\t\t// the tree item itself is focused\n\t\t\t\t\t\tconst isParent = isTreeItemParent(treeItem);\n\t\t\t\t\t\tconst isExpanded = isTreeItemExpanded(treeItem);\n\t\t\t\t\t\tif (key === 'ArrowLeft' && isParent && isExpanded) {\n\t\t\t\t\t\t\tgetTreeItemTrigger(treeItem).click();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (key === 'ArrowRight' && isParent && !isExpanded) {\n\t\t\t\t\t\t\tgetTreeItemTrigger(treeItem).click();\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t!dragContext &&\n\t\t\t\t\t\t\tkey === 'ArrowRight' &&\n\t\t\t\t\t\t\t(!isParent || isExpanded)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tfocusNextTreeItemAction(treeItem, focused);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!dragContext && focused !== treeItem) {\n\t\t\t\t\t\t// one of the tree item child actions is focused\n\t\t\t\t\t\tif (key === 'ArrowLeft') {\n\t\t\t\t\t\t\tfocusPreviousTreeItemAction(treeItem, focused);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (key === 'ArrowRight') {\n\t\t\t\t\t\t\tfocusNextTreeItemAction(treeItem, focused);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (key === 'Tab') {\n\t\t\t\t\tif (dragContext) {\n\t\t\t\t\t\tcancelDrag(host);\n\t\t\t\t\t}\n\t\t\t\t\t// Move focus\n\t\t\t\t\tconst focused = getFocusedElement(host);\n\t\t\t\t\tconst treeItem = getHostTreeItem(focused);\n\t\t\t\t\tif (!treeItem) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!shiftKey) {\n\t\t\t\t\t\tconst treeItemAction = getNextTreeItemAction(treeItem, focused);\n\t\t\t\t\t\tif (treeItemAction) {\n\t\t\t\t\t\t\taction.preventDefault();\n\t\t\t\t\t\t\ttreeItemAction.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (shiftKey) {\n\t\t\t\t\t\tconst treeItemAction = getPreviousTreeItemAction(treeItem, focused);\n\t\t\t\t\t\tif (treeItemAction) {\n\t\t\t\t\t\t\taction.preventDefault();\n\t\t\t\t\t\t\ttreeItemAction.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t],\n\tactionHandlers: {\n\t\t...createTooltipActionHandler(hideTooltip),\n\t\t[COMPONENT_DISCONNECTED]: ({action}) => {\n\t\t\tconst componentId = action.meta.id;\n\t\t\tunschedule(componentId);\n\t\t},\n\t\t'NOW_TOOLTIP#OPENED_SET': ({action, updateState}) => {\n\t\t\tconst {value, target} = action.payload;\n\t\t\tconst componentId = action.meta.path[action.meta.path.length - 1];\n\t\t\tif (target === 'content' && value) {\n\t\t\t\tunschedule(componentId);\n\t\t\t}\n\n\t\t\tif ((target === 'content' || target === 'keyboard') && !value) {\n\t\t\t\tschedule(componentId, () => hideTooltip(updateState));\n\t\t\t}\n\t\t},\n\t\t'PRIVATE#DRAGDROP_START': (coeffects) => {\n\t\t\tconst {action, updateState} = coeffects;\n\t\t\tconst {target, context} = action.payload;\n\t\t\t// set initial insertion point above\n\t\t\tupdateState({\n\t\t\t\toperation: 'set',\n\t\t\t\tpath: 'dragdropState',\n\t\t\t\tvalue: {\n\t\t\t\t\tfocusId: target.id,\n\t\t\t\t\tinitialFocusId: target.id,\n\t\t\t\t\tcursorAbove: true\n\t\t\t\t},\n\t\t\t\tshouldRender: false\n\t\t\t});\n\t\t\t// for keyboard, show initial drag image\n\t\t\tif (context.getType() !== 'mouse') {\n\t\t\t\tupdateDragCursor(context, coeffects, true);\n\t\t\t}\n\t\t},\n\t\t'PRIVATE#DRAGDROP_ENTER': (coeffects) => {\n\t\t\tconst {action, properties, dispatch, host} = coeffects;\n\t\t\tconst {target, context} = action.payload;\n\t\t\tif (target.id && target.id != '') {\n\t\t\t\tconst targetPath = getPathToItem(properties.items, target.id);\n\t\t\t\tconst item = getPathItem(properties.items, targetPath);\n\n\t\t\t\t// if entering a collapsed item (not on keyboard), schedule auto-expansion\n\t\t\t\tif (context.getType() !== 'key') {\n\t\t\t\t\tconst isCollapsed =\n\t\t\t\t\t\tArray.isArray(item.children) &&\n\t\t\t\t\t\t!hasPath(properties.expandedItems, targetPath);\n\t\t\t\t\tif (isCollapsed) {\n\t\t\t\t\t\tunschedule('expand');\n\t\t\t\t\t\tschedule(\n\t\t\t\t\t\t\t'expand',\n\t\t\t\t\t\t\t() => expandItem(item, targetPath, dispatch, properties),\n\t\t\t\t\t\t\tAUTO_EXPAND_DELAY\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// dragCursor updated in OVER handler for mouse/touch\n\t\t\tif (!isValidDrop(target, context, properties)) {\n\t\t\t\thideDragCursor(host);\n\t\t\t}\n\t\t},\n\t\t'PRIVATE#DRAGDROP_OVER': (coeffects) => {\n\t\t\tconst {action, host} = coeffects;\n\t\t\tconst {target, context} = action.payload;\n\t\t\tif (target === host) return;\n\t\t\tconst targetBounds = target.getBoundingClientRect();\n\t\t\tconst lastDragPos = context.getLastDragPosition();\n\t\t\tconst cursorAbove =\n\t\t\t\tlastDragPos.y - targetBounds.top < targetBounds.height / 2;\n\t\t\tupdateDragCursor(context, coeffects, cursorAbove);\n\t\t},\n\t\t'PRIVATE#DRAGDROP_LEAVE': () => {\n\t\t\tunschedule('expand');\n\t\t},\n\t\t'PRIVATE#DRAGDROP_DROP': (coeffects) => {\n\t\t\t// if we scheduled a hover-expansion, cancel it\n\t\t\tunschedule('expand');\n\t\t\thandleDrop(coeffects);\n\t\t\tconst {host, state, updateState} = coeffects;\n\t\t\tconst {\n\t\t\t\tdragdropState: {initialFocusId}\n\t\t\t} = state;\n\t\t\tschedule(\n\t\t\t\t'refocus',\n\t\t\t\t() => {\n\t\t\t\t\tconst item = host.shadowRoot.querySelector(`#${initialFocusId}`);\n\t\t\t\t\tif (item) item.focus();\n\t\t\t\t\tupdateState({\n\t\t\t\t\t\toperation: 'set',\n\t\t\t\t\t\tpath: 'dragdropState',\n\t\t\t\t\t\tvalue: {focusId: null, initialFocusId: null, cursorAbove: true},\n\t\t\t\t\t\tshouldRender: false\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t100\n\t\t\t);\n\t\t},\n\t\t'PRIVATE#DRAGDROP_END': (coeffects) => cleanupDragDrop(coeffects)\n\t},\n\tbehaviors: [\n\t\t{\n\t\t\tbehavior: focusBehavior\n\t\t},\n\t\t{\n\t\t\tbehavior: dragdropBehavior,\n\t\t\toptions: {\n\t\t\t\tdragSources: 'li',\n\t\t\t\tdropTargets: 'li',\n\t\t\t\tdragImage: (target) => {\n\t\t\t\t\t// clean up focus ring issues with sub-components in the item\n\t\t\t\t\ttarget.focus();\n\t\t\t\t\ttarget.classList.add('droppable');\n\t\t\t\t\tconst item = target.querySelector('div.now-content-tree-node');\n\t\t\t\t\treturn item;\n\t\t\t\t},\n\t\t\t\tdragCount: (target, coeffects) => {\n\t\t\t\t\tconst {properties} = coeffects;\n\t\t\t\t\tconst itemPath = getPathToItem(properties.items, target.id);\n\t\t\t\t\treturn hasPath(properties.selectedItems, itemPath)\n\t\t\t\t\t\t? properties.selectedItems.length\n\t\t\t\t\t\t: 1;\n\t\t\t\t},\n\t\t\t\tdragData: (dragSource, {properties}) => {\n\t\t\t\t\tconst {items, selectedItems} = properties;\n\t\t\t\t\tconst itemPath = getPathToItem(items, dragSource.id);\n\t\t\t\t\tif (itemPath && itemPath.length) {\n\t\t\t\t\t\t// if the path is in the current selection, move the whole selection. Else just move the item\n\t\t\t\t\t\tconst itemPaths = hasPath(selectedItems, itemPath)\n\t\t\t\t\t\t\t? selectedItems\n\t\t\t\t\t\t\t: [itemPath];\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tformat: 'now-nds/content-tree-item-path',\n\t\t\t\t\t\t\tdata: itemPaths\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t],\n\tdispatches: {\n\t\t/**\n\t\t * Dispatched when the user clicks an actionable tree item label. Payload\n\t\t * contains a reference to the clicked item.\n\t\t * @type {{item: Object}}\n\t\t * @uib.description Dispatched when the user clicks an actionable tree item label\n\t\t */\n\t\t'NOW_CONTENT_TREE#ACTIONABLE_ITEM_CLICKED': {\n\t\t\tschema: {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\titem: {type: 'object'}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Dispatched when the user clicks a tree item. Payload contains a\n\t\t * reference to the clicked item.\n\t\t * @type {{item: Object}}\n\t\t * @uib.description Dispatched when the user clicks a tree item\n\t\t */\n\t\t'NOW_CONTENT_TREE#ITEM_CLICKED': {\n\t\t\tschema: {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\titem: {type: 'object'}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Dispatched when a user triggers loading of a parent item's children\n\t\t * from the server. Add the item's path to the `loadingItems` list\n\t\t * to show a loading indicator, remove the item's path when its children\n\t\t * are loaded, or mark the loading as failed with `error`.\n\t\t * @type {{path: string[], item: Object}}\n\t\t * @uib.description Dispatched when a user triggers loading of a parent item's children from the server.\n\t\t */\n\t\t'NOW_CONTENT_TREE#LOADING_REQUESTED': {\n\t\t\tschema: {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\tpath: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\titem: {type: 'object'}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Dispatched when a user cancels loading of a parent item's children\n\t\t * from the server. Remove the item's path from the `loadingItems` list\n\t\t * even if it is currently in the error state. If the request can't be\n\t\t * cancelled (for example, if it used `fetch`) and it succeeds later, then handle its\n\t\t * response and add the children without re-expanding the item. If the\n\t\t * request can't be cancelled and it fails later, then don't re-add the\n\t\t * item to `loadingItems` with an error message.\n\t\t * @type {{path: string[], item: Object}}\n\t\t * @uib.description Dispatched when a user cancels loading of a parent item's children from the server.\n\t\t */\n\t\t'NOW_CONTENT_TREE#LOADING_CANCELLED': {\n\t\t\tschema: {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\tpath: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\titem: {type: 'object'}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Dispatched when a user clicks a tree item action icon. Payload\n\t\t * includes a reference to the clicked item and action. Action type can be\n\t\t * overridden by setting `action.clickActionType`.\n\t\t * @type {{item: Object, action: Object, domTarget: HTMLElement, actionTarget: HTMLElement}}\n\t\t * @uib.description Dispatched when a user clicks a tree item action icon\n\t\t */\n\t\t'NOW_CONTENT_TREE#ACTION_CLICKED': {\n\t\t\tschema: {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\taction: {type: 'object'},\n\t\t\t\t\tdomTarget: {type: 'object'},\n\t\t\t\t\titem: {type: 'object'},\n\t\t\t\t\tactionTarget: {type: 'object'}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Dispatched when a user's mouse hovers over a tree item action icon.\n\t\t * Payload includes a reference to the hovered item and action. Action\n\t\t * type can be overridden by setting `action.mouseenterActionType`.\n\t\t * @type {{item: Object, action: Object, domTarget: HTMLElement}}\n\t\t * @uib.description Dispatched when a user's mouse hovers over a tree item action icon.\n\t\t */\n\t\t'NOW_CONTENT_TREE#ACTION_MOUSEENTER': {\n\t\t\tschema: {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\taction: {type: 'object'},\n\t\t\t\t\tdomTarget: {type: 'object'},\n\t\t\t\t\titem: {type: 'object'}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Dispatched when a user's mouse stops hovering over a tree item action icon.\n\t\t * Payload includes a reference to the hovered item and action. Action\n\t\t * type can be overridden by setting `action.mouseleaveActionType`.\n\t\t * @type {{item: Object, action: Object, domTarget: HTMLElement}}\n\t\t * @uib.description Dispatched when a user's mouse stops hovering over a tree item action icon\n\t\t */\n\t\t'NOW_CONTENT_TREE#ACTION_MOUSELEAVE': {\n\t\t\tschema: {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\taction: {type: 'object'},\n\t\t\t\t\tdomTarget: {type: 'object'},\n\t\t\t\t\titem: {type: 'object'}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n","module.exports = __TECTONIC__$servicenow_library_enhanced_element_19_8_3;","module.exports = __TECTONIC__$servicenow_library_enhanced_utils_19_8_3;","\n        var result = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./_now-content-tree.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}.now-m-block--sm{margin-block-end:.5rem}.now-m-block--sm,.now-m-block-start--sm{margin-block-start:.5rem}.now-m-block-end--sm{margin-block-end:.5rem}.now-m-inline--sm{margin-inline-end:.5rem}.now-m-inline--sm,.now-m-inline-start--sm{margin-inline-start:.5rem}.now-m-inline-end--sm{margin-inline-end:.5rem}.now-m-block--xxl{margin-block-end:2rem}.now-m-block--xxl,.now-m-block-start--xxl{margin-block-start:2rem}.now-m-block-end--xxl{margin-block-end:2rem}.now-m-inline--xxl{margin-inline-end:2rem}.now-m-inline--xxl,.now-m-inline-start--xxl{margin-inline-start:2rem}.now-m-inline-end--xxl{margin-inline-end:2rem}.now-dragdrop-image{position:absolute;cursor:none;background-color:transparent;pointer-events:none}.now-dragdrop-badge{position:absolute;display:flex;overflow:hidden;justify-content:center;align-items:center;width:1.5rem;height:1.5rem;border-width:1px;border-style:solid;border-color:RGB(var(--mv9-pZrfpZvX_krpft--kvZptZ-JvjvZ,var(--now-color--neutral-0,255,255,255)));border-radius:50%;font-size:.75rem;line-height:1.33333;font-family:var(--mv9-pZrfpZvX_krpft--Pvmz-PrTAjO,var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif));color:RGB(var(--mv9-pZrfpZvX_krpft--JvjvZ,var(--now-color--neutral-0,255,255,255)));background-color:RGB(var(--mv9-pZrfpZvX_krpft--krJUfZvWmp-JvjvZ,var(--now-color_alert--info-2,14,120,196)))}.now-dragdrop-badge,.now-dragdrop-ghost{box-shadow:0 2px .25rem 0 RGBA(var(--now-color--neutral-21,0,0,0),.25);pointer-events:none}.now-dragdrop-ghost{opacity:.5;background-color:RGBA(var(--mv9-pZrfpZvX_f8v1z--krJUfZvWmp-JvjvZ,var(--now-color--neutral-0,255,255,255)),.3)}:host{display:block}.now-content-tree{display:flex;overflow:auto;height:100%;font-family:var(--mv9-Jvmztmz-zZtt--Pvmz-PrTAjO,var(--mv9-mrsAfrzAvm--Pvmz-PrTAjO,var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)));color:RGB(var(--mv9-Jvmztmz-zZtt--JvjvZ,var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28))));font-style:var(--mv9-Jvmztmz-zZtt--Pvmz-1zOjt,var(--mv9-mrsAfrzAvm--Pvmz-1zOjt,normal));font-weight:var(--mv9-Jvmztmz-zZtt--Pvmz-9tAf8z,var(--mv9-mrsAfrzAvm--Pvmz-9tAf8z,normal));font-variant:normal;letter-spacing:normal;word-spacing:normal;text-transform:var(--mv9-Jvmztmz-zZtt--ztuz-zZrm1PvZT,var(--mv9-mrsAfrzAvm--ztuz-zZrm1PvZT,none));text-indent:0;text-shadow:none}.now-content-tree.will-truncate{overflow-x:hidden}.now-content-tree.will-truncate .now-line-height-crop{min-width:0}.now-content-tree.-sm .now-content-tree-status+*{margin-inline-start:.25rem}.now-content-tree.-md .now-content-tree-status+*{margin-inline-start:.5rem}.now-content-tree-ul{flex-grow:1;margin-block-start:0;margin-block-end:0;padding-inline-start:0;list-style:none}.now-content-tree-ul li:focus{outline:0}.now-content-tree-ul li:focus:not(.droppable)>.now-content-tree-node{box-shadow:inset 0 0 0 2px RGB(var(--now-color_focus-ring,var(--now-color--secondary-1,1,119,142)))}.-sm .now-content-tree-ul .now-content-tree-ul{margin-inline-start:1rem}.-md .now-content-tree-ul .now-content-tree-ul{margin-inline-start:1.5rem}.will-truncate.-sm .now-content-tree-ul,.will-wrap.-sm .now-content-tree-ul{width:calc(100% - 1rem)}.will-truncate.-md .now-content-tree-ul,.will-wrap.-md .now-content-tree-ul{width:calc(100% - 1.5rem)}.now-content-tree-node{display:flex;align-items:center;width:100%;padding-inline-end:.5rem;background-color:RGBA(var(--mv9-Jvmztmz-zZtt--krJUfZvWmp-JvjvZ,var(--now-color--neutral-0,255,255,255)),var(--mv9-Jvmztmz-zZtt--krJUfZvWmp-JvjvZ-rjX8r,0))}.now-content-tree-node:hover{background-color:RGBA(var(--mv9-Jvmztmz-zZtt--krJUfZvWmp-JvjvZ--8vstZ,var(--now-color--primary-0,221,237,233)),.35)}.now-content-tree-node.is-selected{background-color:RGB(var(--mv9-Jvmztmz-zZtt--krJUfZvWmp-JvjvZ--1tjtJztp,var(--now-color--primary-0,221,237,233)))}.now-content-tree-node.is-selected-child{background-color:RGBA(var(--mv9-Jvmztmz-zZtt--krJUfZvWmp-JvjvZ--1tjtJztp-J8Ajp,var(--now-color--neutral-9,99,114,116)),.1)}.now-content-tree-node.is-disabled{cursor:not-allowed;color:RGBA(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)),.3)}.now-content-tree-node.show-dividers{border-block-end-width:1px;border-block-end-style:solid;border-block-end-color:RGB(var(--mv9-Jvmztmz-zZtt_pAsAptZ--JvjvZ,var(--now-color_divider--tertiary,var(--now-color--neutral-3,209,214,214))))}.now-content-tree-node.show-actions .now-content-tree-status{visibility:hidden}.now-content-tree-node.show-actions:hover .now-content-tree-status{visibility:visible}.-sm .now-content-tree-node{min-height:1.5rem}.-md .now-content-tree-node{min-height:2rem}.will-wrap .now-content-tree-node{align-items:flex-start}.-sm.will-wrap .now-content-tree-node>*{margin-block-start:.375rem;margin-block-end:.375rem}.-md.will-wrap .now-content-tree-node>*{margin-block-start:.5rem;margin-block-end:.5rem}.now-content-tree-leaf{display:flex;flex-grow:1;align-items:center;white-space:nowrap}.will-truncate .now-content-tree-leaf,.will-wrap .now-content-tree-leaf{flex-basis:0%;min-width:0}.will-truncate .now-content-tree-leaf .now-line-height-crop,.will-wrap .now-content-tree-leaf .now-line-height-crop{width:100%}.will-wrap .now-content-tree-leaf{align-items:flex-start;white-space:pre-wrap}.will-wrap .now-content-tree-leaf .now-line-height-crop{margin-block-start:1px}.-sm .now-content-tree-leaf{font-size:.75rem;line-height:1.33333}.-sm .now-content-tree-leaf+*{margin-inline-start:1rem}.-sm .now-content-tree-leaf.is-leaf-node{margin-inline-start:1.125rem}.-sm .now-content-tree-leaf .now-line-height-crop:after,.-sm .now-content-tree-leaf .now-line-height-crop:before{content:\\\"\\\";display:block;height:0}.-sm .now-content-tree-leaf .now-line-height-crop:before{margin-block-start:calc(var(--now-line-height-crop--before, -.25em)*1.06667)}.-sm .now-content-tree-leaf .now-line-height-crop:after{margin-block-end:calc(var(--now-line-height-crop--after, -.125em)*1.06667)}.-sm .now-content-tree-leaf .now-line-height-crop+.-sm .now-content-tree-leaf .now-line-height-crop{margin-block-start:calc(var(--now-line-height-crop--after, -.125em)*1.06667*-1)}.-md .now-content-tree-leaf{font-size:1rem;line-height:1.25}.-md .now-content-tree-leaf+*{margin-inline-start:1.5rem}.-md .now-content-tree-leaf.is-leaf-node{margin-inline-start:2rem}.-md .now-content-tree-leaf .now-line-height-crop:after,.-md .now-content-tree-leaf .now-line-height-crop:before{content:\\\"\\\";display:block;height:0}.-md .now-content-tree-leaf .now-line-height-crop:before{margin-block-start:calc(var(--now-line-height-crop--before, -.25em)*1)}.-md .now-content-tree-leaf .now-line-height-crop:after{margin-block-end:calc(var(--now-line-height-crop--after, -.125em)*1)}.-md .now-content-tree-leaf .now-line-height-crop+.-md .now-content-tree-leaf .now-line-height-crop{margin-block-start:calc(var(--now-line-height-crop--after, -.125em)*1*-1)}.now-content-tree-trigger{--mv9-kWzzvm--ztZzArZO--JvjvZ:var(--mv9-Jvmztmz-zZtt_zZAfftZ--JvjvZ,var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116)));--mv9-kWzzvm--ztZzArZO--JvjvZ--8vstZ:var(--mv9-Jvmztmz-zZtt_zZAfftZ--JvjvZ--8vstZ,var(--now-color--secondary-1,1,119,142));--mv9-kWzzvm--ztZzArZO--JvjvZ--rJzAst:var(--mv9-Jvmztmz-zZtt_zZAfftZ--JvjvZ--rJzAst,var(--mv9-Jvmztmz-zZtt_zZAfftZ--JvjvZ,var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116))));--mv9-kWzzvm--krZt_ztZzArZO--krJUfZvWmp-JvjvZ--8vstZ:var(--mv9-Jvmztmz-zZtt_zZAfftZ--krJUfZvWmp-JvjvZ--8vstZ,var(--now-color--secondary-2,1,89,107));--mv9-kWzzvm--krZt_ztZzArZO--krJUfZvWmp-JvjvZ-rjX8r--8vstZ:var(--mv9-Jvmztmz-zZtt_zZAfftZ--krJUfZvWmp-JvjvZ-rjX8r--8vstZ,.1);--mv9-kWzzvm--krZt_ztZzArZO--krJUfZvWmp-JvjvZ--rJzAst:var(--mv9-Jvmztmz-zZtt_zZAfftZ--krJUfZvWmp-JvjvZ--rJzAst,var(--now-color--secondary-2,1,89,107));--mv9-kWzzvm--krZt_ztZzArZO--krJUfZvWmp-JvjvZ-rjX8r--rJzAst:var(--mv9-Jvmztmz-zZtt_zZAfftZ--krJUfZvWmp-JvjvZ-rjX8r--rJzAst,.25)}.-sm .now-content-tree-trigger{margin-inline-start:.25rem;margin-inline-end:.125rem}.-md .now-content-tree-trigger{margin-inline-start:.5rem;margin-inline-end:.5rem}.now-content-tree-icon.-identifier{color:RGB(var(--mv9-Jvmztmz-zZtt_AJvm-AptmzAPAtZ--JvjvZ,var(--now-color--neutral-9,99,114,116)))}.now-content-tree-icon.-identifier.is-actionable{color:RGB(var(--mv9-Jvmztmz-zZtt_AJvm-AptmzAPAtZ--rJzAvmrkjt--JvjvZ,var(--now-color--secondary-1,1,119,142)))}.now-content-tree-icon.-identifier.is-placeholder{color:RGB(var(--mv9-Jvmztmz-zZtt_XjrJt8vjptZ--JvjvZ,var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28))))}.now-content-tree-icon.-error{color:RGB(var(--mv9-Jvmztmz-zZtt_AJvm--JvjvZ--tZZvZ,var(--now-color_alert--critical-2,200,60,54)))}.-sm .now-content-tree-icon.-error{margin-inline-start:.25rem;margin-inline-end:.25rem}.-md .now-content-tree-icon.-error{margin-inline-start:.5rem;margin-inline-end:.5rem}.-sm .now-content-tree-icon.-identifier{margin-inline-end:.25rem}.-md .now-content-tree-icon.-identifier{margin-inline-end:.5rem}.is-disabled .now-content-tree-icon{color:RGBA(var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28)),.3)}.now-content-tree-button{display:flex;align-items:center;width:inherit;margin:0;border:none;padding:0;font-style:var(--mv9-Jvmztmz-zZtt--Pvmz-1zOjt,var(--mv9-mrsAfrzAvm--Pvmz-1zOjt,normal));font-weight:var(--mv9-Jvmztmz-zZtt--Pvmz-9tAf8z,var(--mv9-mrsAfrzAvm--Pvmz-9tAf8z,normal));font-family:var(--mv9-Jvmztmz-zZtt--Pvmz-PrTAjO,var(--mv9-mrsAfrzAvm--Pvmz-PrTAjO,var(--now-font-family,\\\"Source Sans Pro\\\",sans-serif)));text-transform:var(--mv9-Jvmztmz-zZtt--ztuz-zZrm1PvZT,var(--mv9-mrsAfrzAvm--ztuz-zZrm1PvZT,none));cursor:pointer;background-color:transparent;color:RGB(var(--mv9-kWzzvm--krZt_1tJvmprZO--JvjvZ,var(--now-color--secondary-1,1,119,142)))}:host(:not([dir=rtl])) .now-content-tree-button,:root:not([dir=rtl]) .now-content-tree-button{text-align:left}:host([dir=rtl]) .now-content-tree-button,:root[dir=rtl] .now-content-tree-button{text-align:right}.now-content-tree-button:hover{color:RGB(var(--mv9-kWzzvm--krZt_1tJvmprZO--JvjvZ--8vstZ,var(--now-color--secondary-2,1,89,107)))}.now-content-tree-button:active{color:RGB(var(--mv9-kWzzvm--krZt_1tJvmprZO--JvjvZ--rJzAst,var(--now-color--secondary-3,1,60,71)))}.now-content-tree-button::-moz-focus-inner{border-style:none}.now-content-tree-button:focus{box-shadow:inset 0 0 0 2px RGB(var(--now-color_focus-ring,var(--now-color--secondary-1,1,119,142))),inset 0 0 0 3px RGB(var(--now-color_focus-ring_shadow,var(--now-color--neutral-0,255,255,255))),0 1px .125rem 0 RGBA(var(--now-color--neutral-21,0,0,0),.25);outline:none}.now-content-tree-button.is-placeholder{color:RGB(var(--mv9-Jvmztmz-zZtt_XjrJt8vjptZ--JvjvZ,var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28))))}.now-content-tree-button.is-placeholder:hover{color:RGB(var(--mv9-Jvmztmz-zZtt_XjrJt8vjptZ--JvjvZ--8vstZ,var(--now-color--secondary-1,1,119,142)))}.now-content-tree-button.is-placeholder:active{color:RGB(var(--mv9-Jvmztmz-zZtt_XjrJt8vjptZ--JvjvZ--rJzAst,var(--now-color--secondary-3,1,60,71)))}.now-content-tree-button.is-disabled{cursor:not-allowed;color:RGBA(var(--mv9-kWzzvm--JvjvZ--pA1rkjtp,var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28))),.25)}.-sm .now-content-tree-button{min-height:1rem;font-size:.75rem;line-height:1.33333}.-md .now-content-tree-button{min-height:1.25rem;font-size:1rem;line-height:1.25}.is-selected-child .now-content-tree-button,.is-selected .now-content-tree-button{color:RGB(var(--mv9-kWzzvm--1tJvmprZO_8Af8-JvmzZr1z--JvjvZ,var(--now-color--secondary-2,1,89,107)))}.is-selected-child .now-content-tree-button:hover,.is-selected .now-content-tree-button:hover{color:RGB(var(--mv9-kWzzvm--1tJvmprZO_8Af8-JvmzZr1z--JvjvZ--8vstZ,var(--now-color--secondary-3,1,60,71)))}.is-selected-child .now-content-tree-button:active,.is-selected .now-content-tree-button:active{color:RGB(var(--mv9-kWzzvm--1tJvmprZO_8Af8-JvmzZr1z--JvjvZ--rJzAst,var(--now-color--neutral-18,22,27,28)))}.will-wrap .now-content-tree-button{padding-block-end:.125rem;white-space:normal}.now-content-tree-label.-error{color:RGB(var(--mv9-Jvmztmz-zZtt_jrktj--JvjvZ--tZZvZ,var(--now-color_text--tertiary,var(--now-color--neutral-9,99,114,116))))}.now-content-tree-label.-loader{color:RGB(var(--mv9-Jvmztmz-zZtt_jrktj--JvjvZ--jvrpAmf,var(--now-color--primary-1,30,133,109)))}.now-content-tree-label.is-placeholder{color:RGB(var(--mv9-Jvmztmz-zZtt_XjrJt8vjptZ--JvjvZ,var(--now-color_text--primary,var(--now-color--neutral-18,22,27,28))))}.now-content-tree-button.is-placeholder,.now-content-tree-label.is-placeholder{font-style:var(--mv9-Jvmztmz-zZtt_XjrJt8vjptZ--Pvmz-1zOjt,italic);font-weight:var(--mv9-Jvmztmz-zZtt_XjrJt8vjptZ--Pvmz-9tAf8z,600)}.now-content-tree-button mark,.now-content-tree-label mark{font-weight:700;color:inherit;background-color:transparent}.will-truncate .now-content-tree-button,.will-truncate .now-content-tree-label{display:block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.now-content-tree-highlighted-value-parent{width:6rem;line-height:0}.-sm.will-wrap .now-content-tree-highlighted-value-parent{margin-block-start:.25rem;margin-block-end:.25rem}.now-content-tree-highlighted-value{display:inline-flex;max-width:6rem}.now-content-tree-dragdrop{position:absolute;display:flex;visibility:hidden;align-items:center}.now-content-tree-dragdrop-head{width:.4375rem;height:.4375rem;border-width:1px;border-style:solid;border-color:RGB(var(--mv9-Jvmztmz-zZtt_pZrfpZvX--JvjvZ,var(--now-color_alert--info-2,14,120,196)));border-radius:.21875rem;background-color:RGB(var(--mv9-Jvmztmz-zZtt_pZrfpZvX--krJUfZvWmp-JvjvZ,var(--now-color_background--primary,var(--now-color--neutral-0,255,255,255))))}.now-content-tree-dragdrop-tail{width:100%;height:1px;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:RGB(var(--mv9-Jvmztmz-zZtt_pZrfpZvX--JvjvZ,var(--now-color_alert--info-2,14,120,196)))}.now-content-tree-drop-target-parent>.now-content-tree-node{box-shadow:inset 0 0 0 1px RGB(var(--mv9-Jvmztmz-zZtt_pZvX-zrZftz-XrZtmz--kvZptZ-JvjvZ,var(--now-color_alert--info-2,14,120,196)))}\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","module.exports = __TECTONIC__$servicenow_now_collapse;","module.exports = __TECTONIC__$servicenow_behavior_focus_19_8_3;","module.exports = __TECTONIC__$servicenow_behavior_dragdrop_19_8_3;","module.exports = __TECTONIC__$servicenow_now_avatar;","module.exports = __TECTONIC__$servicenow_now_button;","module.exports = __TECTONIC__$servicenow_now_highlighted_value;","module.exports = __TECTONIC__$servicenow_now_icon;","module.exports = __TECTONIC__$servicenow_now_badge;","module.exports = __TECTONIC__$servicenow_now_loader;","module.exports = __TECTONIC__$servicenow_now_tooltip;","module.exports = __TECTONIC__lodash_4_17_4[\"omit\"];","module.exports = __TECTONIC__sn_translate;","/**\n * Replaces all occurrence of `searchTerm` found in `string` with styled DOM\n * nodes. The search is _not_ case-sensitive.\n *\n * @param searchTerm {string} - The substring to look for within the larger\n * `string`\n * @param string {string} - The input string to search in.\n *\n * @returns {Array<string|VDomNode>} - the minimal amount of data needed\n * to render correctly. This may be a string literal (no matches found), or an\n * array of mixed strings + vdom nodes.\n */\nexport default function highlightString(searchTerm, string) {\n\tif (!searchTerm) {\n\t\treturn string;\n\t}\n\n\t// elements in this array will be a mix of types. String literals for the\n\t// non-highlighted portitions and snabbdom nodes (<mark> tags) for the\n\t// highlighted portions. snabbdom is perfectly happy rendering this array as\n\t// children.\n\tconst result = [];\n\tconst lowerString = string.toLowerCase();\n\tconst lowerSearchTerm = searchTerm.toLowerCase();\n\tconst highlightLength = lowerSearchTerm.length;\n\n\tlet lastIndex = 0;\n\tlet nextIndex = 0;\n\twhile ((nextIndex = lowerString.indexOf(lowerSearchTerm, lastIndex)) !== -1) {\n\t\t// lastIndex = beginning of string OR where the previous highlighted string ended\n\t\t// nextIndex = where the next highlight string starts\n\t\t//\n\t\t// if these two values are not equal, it means there is non-highlighted\n\t\t// content that we need to deal with.\n\t\t//\n\t\t// e.g.: on the first iteration\n\t\t//\n\t\t//       searchTerm = \"world\"\n\t\t//       label = \"hello world\"\n\t\t//                     \n\t\t//      lastIndex       nextIndex\n\t\t//\n\t\t// Need to push the prefix \"hello \" into the result.\n\t\tif (nextIndex > lastIndex) {\n\t\t\tresult.push(string.slice(lastIndex, nextIndex));\n\t\t}\n\n\t\tconst highlight = (\n\t\t\t<mark>{string.slice(nextIndex, nextIndex + highlightLength)}</mark>\n\t\t);\n\t\tresult.push(highlight);\n\n\t\tlastIndex = nextIndex + highlightLength;\n\t}\n\n\tif (result.length === 0) {\n\t\treturn string;\n\t}\n\n\t// content between the last highlight and end of the string\n\tif (lastIndex !== string.length) {\n\t\tresult.push(string.slice(lastIndex));\n\t}\n\n\treturn result;\n}\n","const statusesSchema = {\n\ttype: 'object',\n\tproperties: {\n\t\ttype: {type: 'string', enum: ['badge', 'presence', 'icon']},\n\t\ticon: {type: 'string'},\n\t\tlabel: {type: 'string', translatable: true},\n\t\tpresence: {type: 'string', enum: ['available', 'busy', 'away', 'offline']},\n\t\tstatus: {\n\t\t\ttype: 'string',\n\t\t\tenum: [\n\t\t\t\t'critical',\n\t\t\t\t'high',\n\t\t\t\t'warning',\n\t\t\t\t'moderate',\n\t\t\t\t'info',\n\t\t\t\t'positive',\n\t\t\t\t'low'\n\t\t\t]\n\t\t},\n\t\tvalue: {type: 'number'},\n\t\tround: {type: 'boolean'},\n\t\tdescription: {type: 'string', translatable: true}\n\t}\n};\n\nconst actionSchema = {\n\ttype: 'object',\n\tproperties: {\n\t\ticon: {type: 'string'},\n\t\tlabel: {type: 'string', translatable: true},\n\t\tclickActionType: {type: 'string'},\n\t\tmouseenterActionType: {type: 'string'},\n\t\tmouseleaveActionType: {type: 'string'}\n\t}\n};\n\nconst highlightedValueSchema = {\n\ttype: 'object',\n\tproperties: {\n\t\tlabel: {type: 'string', translatable: true},\n\t\tstatus: {type: 'string'},\n\t\twidth: {type: 'string'}\n\t}\n};\n\nconst identifierSchema = {\n\ttype: 'object',\n\tproperties: {\n\t\ttype: {type: 'string', enum: ['icon', 'avatar']},\n\t\ticon: {type: 'string'},\n\t\tuserName: {type: 'string'},\n\t\timageSrc: {type: 'string'},\n\t\tariaHidden: {type: 'string', enum: ['true', 'false']}\n\t}\n};\n\nexport const itemsSchema = {\n\t$id: 'itemsSchema',\n\ttype: 'array',\n\titems: {\n\t\ttype: 'object',\n\t\tproperties: {\n\t\t\tid: {type: ['string', 'number']},\n\t\t\tlabel: {type: 'string', translatable: true},\n\t\t\tchildren: {type: 'array', items: {$ref: 'itemsSchema#/items'}},\n\t\t\tchildrenAvailable: {type: 'number'},\n\t\t\tidentifierProps: identifierSchema,\n\t\t\tactionable: {type: 'boolean'},\n\t\t\tactions: {type: 'array', items: actionSchema},\n\t\t\tstatuses: {type: 'array', items: statusesSchema},\n\t\t\thighlightedValueProps: {type: 'array', items: highlightedValueSchema},\n\t\t\tdisabled: {type: 'boolean'},\n\t\t\tvariant: {type: 'string', enum: ['placeholder']}\n\t\t}\n\t}\n};\n","module.exports = __TECTONIC__$servicenow_ui_core;","import {\n\tgetPathToItem,\n\tisParent,\n\tspliceItemsAtPath,\n\trebasePath,\n\tgetPathItem\n} from './paths';\nimport {\n\tgetFocusedElement,\n\tgetVisibleTreeItems,\n\tisTreeItemExpanded\n} from './elements';\nimport {getParentItem} from './dom';\nimport {isLastSubtreeItemFocused, getNextFocusableTreeItem} from './focus';\n\nexport function hideDragCursor(host) {\n\tconst cursor = host.shadowRoot.querySelector('.now-content-tree-dragdrop');\n\tcursor.style.visibility = 'hidden';\n\tconst curParents = host.shadowRoot.querySelectorAll(\n\t\t'li.now-content-tree-drop-target-parent'\n\t);\n\tcurParents.forEach((p) =>\n\t\tp.classList.remove('now-content-tree-drop-target-parent')\n\t);\n}\nexport function cleanupDragDrop(coeffects) {\n\tconst {host} = coeffects;\n\thideDragCursor(host);\n}\n\nexport function showDragCursor(\n\tdragContext,\n\thost,\n\ttarget,\n\titemPath,\n\tcursorAbove\n) {\n\tconst cursor = host.shadowRoot.querySelector('.now-content-tree-dragdrop');\n\tif (!cursor) return;\n\tconst targetBounds = target.getBoundingClientRect();\n\tcursor.style.left = `${targetBounds.left + window.scrollX}px`;\n\tcursor.style.top = `${(cursorAbove ? targetBounds.top : targetBounds.bottom) +\n\t\twindow.scrollY -\n\t\t4}px`;\n\tcursor.style.width = `${targetBounds.width}px`;\n\tcursor.style.visibility = 'visible';\n\t// hilite parent\n\tconst curParents = host.shadowRoot.querySelectorAll(\n\t\t'li.now-content-tree-drop-target-parent'\n\t);\n\tconst parent =\n\t\titemPath.length > 1\n\t\t\t? host.shadowRoot.getElementById(itemPath[itemPath.length - 2])\n\t\t\t: null;\n\tcurParents.forEach((p) => {\n\t\tif (p !== parent) p.classList.remove('now-content-tree-drop-target-parent');\n\t});\n\tif (parent) {\n\t\tparent.classList.add('now-content-tree-drop-target-parent');\n\t}\n\t// move dragImage too, if needed\n\tmoveDragImage(dragContext, target, cursorAbove);\n}\nexport function isValidDrop(target, context, properties) {\n\tif (!target.id || target.id === '') return false;\n\tconst targetPath = getPathToItem(properties.items, target.id);\n\tconst targetPathFlat = targetPath.join('_');\n\tconst items = context.getData('now-nds/content-tree-item-path');\n\t// don't allow dropping an item on itself.\n\tconst itemsIncludesTarget = items.reduce(\n\t\t(acc, item) => acc || targetPathFlat === item.join('_'),\n\t\tfalse\n\t);\n\treturn (\n\t\t!itemsIncludesTarget &&\n\t\tcontext.isValidDropTarget(target) &&\n\t\tArray.isArray(items) &&\n\t\titems.length > 0 &&\n\t\titems.reduce((acc, item) => acc && !isParent(item, targetPath), true)\n\t);\n}\nfunction moveDragImage(dragContext, target, cursorAbove) {\n\t// move dragImage too, if needed\n\tif (dragContext.getType() === 'mouse') return;\n\tconst targetBounds = target.getBoundingClientRect();\n\tconst item = target.querySelector('div.now-content-tree-node');\n\tconst itemHeight = item\n\t\t? item.getBoundingClientRect().height\n\t\t: targetBounds.height;\n\tconst xPos = targetBounds.left + 32;\n\tconst yPos = cursorAbove\n\t\t? targetBounds.top + 6\n\t\t: targetBounds.bottom - (itemHeight - 6);\n\tdragContext.moveDragImage(xPos, yPos);\n}\nexport function updateDragCursor(dragContext, coeffects, cursorAbove) {\n\tconst {action, host, properties, updateState} = coeffects;\n\tconst isKeyboard = dragContext.getType() === 'key';\n\tconst target = isKeyboard ? getFocusedElement(host) : action.payload.target;\n\tconst itemPath = getPathToItem(properties.items, target.id);\n\tupdateState({\n\t\tpath: 'dragdropState.focusId',\n\t\toperation: 'set',\n\t\tvalue: target.id,\n\t\tshouldRender: false\n\t});\n\tupdateState({\n\t\tpath: 'dragdropState.cursorAbove',\n\t\toperation: 'set',\n\t\tvalue: cursorAbove,\n\t\tshouldRender: false\n\t});\n\tif (isValidDrop(target, dragContext, properties)) {\n\t\tshowDragCursor(dragContext, host, target, itemPath, cursorAbove);\n\t} else {\n\t\thideDragCursor(host);\n\t}\n}\nexport function handleKeyboardDrag(dragContext, coeffects) {\n\tconst {host, action, state, properties, updateState} = coeffects;\n\tconst {key} = action.payload.event;\n\tconst target = getFocusedElement(host);\n\tconst targetList = target.parentNode;\n\tconst listIndex = Array.from(targetList.children).findIndex(\n\t\t(i) => i === target\n\t);\n\tconst parentItem = getParentItem(host, target);\n\tconst allItems = getVisibleTreeItems(host);\n\tconst isValidDropTarget = isValidDrop(target, dragContext, properties);\n\tconst hasChildren =\n\t\tisTreeItemExpanded(target) && target.querySelector('now-collapse') !== null;\n\tconst oldState = state.dragdropState;\n\tconst newState = {...state.dragdropState};\n\n\t// compute new state.\n\t// for logic, see: https://miro.com/app/board/o9J_krp4dEU=/?moveToWidget=3074457347344093553&cot=13\n\tif (key === 'Home') {\n\t\tnewState.focusId = allItems[0].id;\n\t\tnewState.cursorAbove = true;\n\t} else if (key === 'End') {\n\t\tnewState.focusId = allItems[allItems.length - 1].id;\n\t\tnewState.cursorAbove = false;\n\t} else if (key === 'ArrowUp') {\n\t\tconst targetIndex = allItems.findIndex((i) => i === target);\n\t\t// insertion cursor above an item\n\t\tif (!isValidDropTarget || oldState.cursorAbove) {\n\t\t\t// ...and it is not the first item\n\t\t\tif (listIndex > 0) {\n\t\t\t\tconst prevSibling = targetList.children[listIndex - 1];\n\t\t\t\tconst prevSiblingList = prevSibling.querySelector('ul');\n\t\t\t\tconst prevSiblingExpanded = isTreeItemExpanded(prevSibling);\n\t\t\t\t//  ...and the previous item has children and is expanded, so set cursor below previous item's last child\n\t\t\t\tif (prevSibling && prevSiblingExpanded && prevSiblingList) {\n\t\t\t\t\tnewState.focusId =\n\t\t\t\t\t\tprevSiblingList.children[prevSiblingList.children.length - 1].id;\n\t\t\t\t\tnewState.cursorAbove = false;\n\t\t\t\t\t// ...if no children, set cursor above previous sibling\n\t\t\t\t} else {\n\t\t\t\t\tnewState.focusId = allItems[Math.max(0, targetIndex - 1)].id;\n\t\t\t\t\tnewState.cursorAbove = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewState.focusId = allItems[Math.max(0, targetIndex - 1)].id;\n\t\t\t\tnewState.cursorAbove = true;\n\t\t\t}\n\t\t} else if (hasChildren && !oldState.cursorAbove) {\n\t\t\tconst kids = target.querySelector('ul').children;\n\t\t\tnewState.focusId = kids[kids.length - 1].id;\n\t\t\tnewState.cursorAbove = false;\n\t\t} else {\n\t\t\tnewState.focusId = oldState.focusId;\n\t\t\tnewState.cursorAbove = true;\n\t\t}\n\t} else if (key === 'ArrowDown') {\n\t\tconst isLastSubtreeItem = isLastSubtreeItemFocused(host);\n\t\tconst nextItem = getNextFocusableTreeItem(host);\n\t\tconst grandParentItem = parentItem ? getParentItem(host, parentItem) : null;\n\t\tconst parentList = parentItem ? parentItem.parentNode : null;\n\t\tconst parentIndex = parentItem\n\t\t\t? Array.from(parentList.children).findIndex((i) => i === parentItem)\n\t\t\t: null;\n\t\tconst parentNextSibling = parentItem\n\t\t\t? parentList.children[\n\t\t\t\t\tMath.min(parentIndex + 1, parentList.children.length - 1)\n\t\t\t  ]\n\t\t\t: null;\n\t\t// if we're above an expanded node, move into the subtree\n\t\tif (!isValidDropTarget || (hasChildren && oldState.cursorAbove)) {\n\t\t\tnewState.focusId = nextItem ? nextItem.id : oldState.focusId;\n\t\t\tnewState.cursorAbove = true;\n\t\t} else if (!isLastSubtreeItem || (!oldState.cursorAbove && !parentItem)) {\n\t\t\tconst nextSibling =\n\t\t\t\ttargetList.children[\n\t\t\t\t\tMath.min(listIndex + 1, targetList.children.length - 1)\n\t\t\t\t];\n\t\t\t// if we're not at the end of this subtree or it's a leaf node, go to the next sibling\n\t\t\tif (listIndex < targetList.children.length - 1) {\n\t\t\t\tnewState.focusId = nextSibling.id;\n\t\t\t\tnewState.cursorAbove = true;\n\t\t\t}\n\t\t\t// if it's the last subtree item and the cursor is above, move cursor to the end\n\t\t} else if (isLastSubtreeItem && oldState.cursorAbove) {\n\t\t\tnewState.focusId = oldState.focusId;\n\t\t\tnewState.cursorAbove = false;\n\t\t\t// if it's the last subtree items and the cursor is below, move to below our parent\n\t\t} else if (\n\t\t\tisLastSubtreeItem &&\n\t\t\t!oldState.cursorAbove &&\n\t\t\tparentItem &&\n\t\t\tgrandParentItem &&\n\t\t\t!parentNextSibling\n\t\t) {\n\t\t\tnewState.focusId = parentItem.id;\n\t\t\tnewState.cursorAbove = false;\n\t\t\t// if it's the last subtree items and the cursor is below, move to our parent's next sibling\n\t\t} else if (isLastSubtreeItem && !oldState.cursorAbove && parentItem) {\n\t\t\tnewState.focusId = parentNextSibling.id;\n\t\t\tnewState.cursorAbove = parentIndex < parentList.children.length - 1;\n\t\t}\n\t}\n\n\t// save the state and schedule the cursor update\n\tupdateState({\n\t\tpath: 'dragdropState',\n\t\toperation: 'set',\n\t\tvalue: newState,\n\t\tshouldRender: false\n\t});\n\n\t// put focus on correct node\n\tconst itemToFocus = host.shadowRoot.querySelector(`#${newState.focusId}`);\n\titemToFocus.focus();\n\n\t// update insertion cursor and drag image\n\tconst newItemPath = getPathToItem(properties.items, newState.focusId);\n\tconst newItemValid = isValidDrop(itemToFocus, dragContext, properties);\n\tif (newItemValid) {\n\t\tshowDragCursor(\n\t\t\tdragContext,\n\t\t\thost,\n\t\t\titemToFocus,\n\t\t\tnewItemPath,\n\t\t\tnewState.cursorAbove\n\t\t);\n\t} else {\n\t\thideDragCursor(host);\n\t}\n\tmoveDragImage(dragContext, itemToFocus, newState.cursorAbove);\n}\n\nexport function handleDrop(coeffects) {\n\tconst {action, properties, dispatch, state} = coeffects;\n\tconst {target, context} = action.payload;\n\tconst {dragdropState} = state;\n\n\t// FF will sometimes not fire dragend if there are dom manipulations, so cleanup here too.\n\t// https://bugzilla.mozilla.org/show_bug.cgi?id=460801\n\tcleanupDragDrop(coeffects);\n\n\tif (!isValidDrop(target, context, properties)) return;\n\n\t// move the items\n\tconst items = context.getData('now-nds/content-tree-item-path');\n\tconst newItems = [...properties.items];\n\tconst itemsToMove = [];\n\titems.forEach((nextItem) => {\n\t\tconst itemToMove = spliceItemsAtPath(newItems, nextItem, 1);\n\t\tif (itemToMove && itemToMove.length > 0) {\n\t\t\titemsToMove.push(itemToMove[0]);\n\t\t}\n\t});\n\tconst toPath = getPathToItem(newItems, target.id);\n\tspliceItemsAtPath(\n\t\tnewItems,\n\t\ttoPath,\n\t\t0,\n\t\titemsToMove,\n\t\t!dragdropState.cursorAbove\n\t);\n\tdispatch('NOW_CONTENT_TREE#ITEMS_SET', {name: 'items', value: newItems});\n\n\t// update selectedItems\n\tconst newParent = toPath.slice(0, toPath.length - 1);\n\tlet newExpanded = [...properties.expandedItems];\n\titems.forEach((oldRoot) => {\n\t\tnewExpanded = rebasePath(newExpanded, oldRoot, newParent);\n\t});\n\t// remove newly childless nodes\n\tfor (let i = newExpanded.length - 1; i >= 0; i--) {\n\t\tconst nextExpPath = newExpanded[i];\n\t\tconst nextExp = getPathItem(newItems, nextExpPath);\n\t\tif (!nextExp || !nextExp.children || nextExp.children.length === 0) {\n\t\t\tnewExpanded.splice(i, 1);\n\t\t}\n\t}\n\tdispatch('NOW_CONTENT_TREE#EXPANDED_ITEMS_SET', {value: newExpanded});\n\n\t// update expandedItems\n\tlet newSelected = [...properties.selectedItems];\n\titems.forEach((oldRoot) => {\n\t\tnewSelected = rebasePath(newSelected, oldRoot, newParent);\n\t});\n\tdispatch('NOW_CONTENT_TREE#SELECTED_ITEMS_SET', {value: newSelected});\n}\n"],"sourceRoot":""}