{"version":3,"sources":["webpack://__TECTONIC__$devsnc_sn_openframe_uxb/webpack/bootstrap","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__lodash_4_17_15\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__$servicenow_ui_renderer_snabbdom\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/openframeWrapper/constants.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/constants.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__$servicenow_ui_core\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/openframe.effects.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__$servicenow_ui_effect_graphql\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__$servicenow_ui_effect_amb\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/openFrameEventsHelper.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__sn_uxpage_presource_7_0_0\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__$servicenow_behavior_key_binding_19_0_11\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/_componentOpenframe.scss?cdbb","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__$servicenow_behavior_rtl_19_0_11\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/sn-openframe-uxb/schemas/urlSchema.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/index.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/componentOpenframeElement.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__$servicenow_ui_effect_http\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/openframeQuery.read.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/openframeMutation.update.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__sn_seismic_post_message\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/events.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/dispatchers.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/format-messages.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/caseContextHelper.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/accountContextHelper.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/contactContextHelper.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/openframeHeaderFooter.effects.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__$servicenow_ui_effect_update_state\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/util.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/openframe.view.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__sn_translate\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/componentOpenframe/_componentOpenframe.scss","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./node_modules/css-loader/lib/css-base.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/external \"__TECTONIC__$servicenow_now_legacy_icon\"","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/openframeWrapper/openframeWrapperElement.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/openframeWrapper/actionHandlers.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/openframeWrapper/dataHandlers.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/openframeWrapper/util.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/openframeWrapper/selectors.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/openframeWrapper/dataSources.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/sn-openframe-uxb/snOpenframeUXB.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/sn-openframe-uxb/schemas/userSchema.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/sn-openframe-uxb/schemas/configurationSchema.js","webpack://__TECTONIC__$devsnc_sn_openframe_uxb/./src/sn-openframe-uxb/schemas/configSchema.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__TECTONIC__lodash_4_17_15","__TECTONIC__$servicenow_ui_renderer_snabbdom","READ_PRESENCE_STATE_DATA","SUBSCRIBE_AGENT_PRESENCE","SUBSCRIBE_AGENT_CHANNEL_AVAIABILITY","SUBSCRIBE_PRESENCE_STATE","SUBSCRIBE_SERVICE_CHANNEL","SUBSCRIBE_GROUP_MEMBER","UPDATE_STATE_WITH_PRESENCE_DATA","PRESENCE_STATE_WATCHER","OFFLINE_SYS_ID","AVAILABLE_STATE","AWAY_STATE","OFFLINE_STATE","PARTIALLY_AVAILABLE_STATE","STATE_CSS_MAP","WORK_ITEMS_CHANGED","WORK_ITEMS_SUBSCRIBED","WORK_ITEM_SUBSCRIPTION","WORK_ITEM_REASON_SUCCEEDED","WORK_ITEM_REASON_FAILED","SUBSCRIBE_WORK_ITEM_REJECT","WORK_ITEM_REJECT_EVENT","WORK_ITEM_REJECT_SUCCESS","WORK_ITEM_REJECT_FAIL","EXECUTE_AWA_WORK_ITEM_READ","REJECTION_CONTEXT","INTERACTION_EVENT_MAP","OPENFRAME_AWA_WORKITEM_ACCEPTED","OPENFRAME_AWA_WORKITEM_REJECTED","OPENFRAME_AWA_WORKITEM_OFFERED","SUBSCRIBE_INTERACTION_CHANGES","INTERACTION_UPDATED","INTERACTION_WATCHER","REASON_INTERACTION_INACTIVE","REASON_INTERACTION_REASSIGNED","INTERACTION_CREATE_ENDPOINT","UPDATE_MODULE_STATUS","UNKNOWN","actionTypesToProps","MAP_ICON_NAME","START_OPENFRAME_LOADING","OPENFRAME_COMPONENT_WORKSPACE_LOAD_RETRY_COUNT","INITIALIZE_POST_MESSAGE","NAV_SELECTED","VIEW_PHONE","PRIME_NAV_SOURCE_CHANGED","__TECTONIC__$servicenow_ui_core","COMPONENT_BOOTSTRAPPED","actionTypes","COMPONENT_PROPERTY_CHANGED","OPENFRAME_ACTIONS","FETCH_OPENFRAME_CONTACT","FETCH_OPENFRAME_CONTACT_STARTED","FETCH_OPENFRAME_CONTACT_SUCCEEDED","FETCH_OPENFRAME_CONTACT_FAILED","FETCH_OPENFRAME_ACCOUNT","FETCH_OPENFRAME_ACCOUNT_STARTED","FETCH_OPENFRAME_ACCOUNT_SUCCEEDED","FETCH_OPENFRAME_ACCOUNT_FAILED","FETCH_OPENFRAME_CASE","FETCH_OPENFRAME_CASE_STARTED","FETCH_OPENFRAME_CASE_SUCCEEDED","FETCH_OPENFRAME_CASE_FAILED","FETCH_OPENFRAME_INTERACTION","FETCH_OPENFRAME_INTERACTION_STARTED","FETCH_OPENFRAME_INTERACTION_SUCCEEDED","FETCH_OPENFRAME_INTERACTION_FAILED","OPENFRAME_INIT_DELAYED","FETCH_OPENFRAMECONFIG_EFFECT","OPENFRAME_LOCAL_IFRAME_LOAD","OPENFRAME_RESPONSE","OPENFRAME_REQUEST","OPENFRAME_SET_TITLE","OPENFRAME_SET_SUBTITLE","OPENFRAME_SET_HEADER_TITLE_ICON","OPENFRAME_SET_HEADER_ICONS","OPENFRAME_SET_FRAME_MODE","OPENFRAME_HIDE","OPENFRAME_SHOW","OPENFRAME_SET_SIZE","OPENFRAME_SET_HEIGHT","OPENFRAME_SET_WIDTH","OPENFRAME_SET_TOP_FRAME_URL","OPENFRAME_OPEN_INTERACTION","OPENFRAME_SET_PRESENCE_INDICATOR","OPENFRAME_AGENT_OFF_INTERACTION","OPEN_PHONE","WORKSPACE_NAV_SELECTED","OPENFRAME_RERENDER","OUTGOING_CALL","UPDATE_AGENT_PRESENCE","RECORD_WATCHER_SUBSCRIPTION","AGENT_PRESENCE_STATE_WATCHER","OPENFRAME_AWA_AGENT_PRESENCE","COLOR_STATUS_MAPPING","fetchOpenframeContactEffect","createGraphQLEffect","contactDetailsQuery_read","variableList","startActionType","successActionType","errorActionType","fetchOpenframeAccountEffect","accountDetailsQuery_read","fetchOpenframeCaseEffect","caseDetailsQuery_read","updateAgentPresenceEffect","agentPresenceMutation_update","recordWatcherHandler","createAmbSubscriptionEffect","fetchOpenframeInteractionEffect","createHttpEffect","method","dataParam","handleStarted","handleFailure","coeffects","extractPresourceConfig","window","openframeConfig","openframeRequest","state","action","updateState","payload","id","isLegacy","meta","properties","pm","post","frameResponse","isSuccess","context","result","topDomain","location","origin","openframe_init","data","completed","config","configuration","local","visible","openframeCommunication","dispatch","communicationMeta","sysId","sysid","table","sys_id","number","phoneNumber","outgoingResponse","entity","query","displayValue","label","tableName","interaction","interactionSysId","direction","context_table","context_document","ctiContext","sent","noBatch","openframeLocalIframeLoad","updateProperties","contentWindowInit","target","waitOpenframeInit","position","openframeInitStatus","retryTime","interval","setInterval","clearInterval","handlerMap","pathAndHostOriginData","hostOrigin","createdPm","thisState","props","events","path","constructMessage","deconstructMessage","transform","initializePostMessage","isAbsolute","scheme","authority","stringValue","extractPathAndHostOrigin","initializeWrapper","updatePhoneOnToolbar","showFrame","subscribe","assign","contactDetails","entityData","contactContextHelper","contactInteractionHelper","accountDetails","accountContextHelper","accountInteractionHelper","caseDetails","caseContextHelper","caseInteractionHelper","push","openframeHeaderTitle","openframeHeaderSubTitle","openframeHeaderTitleIcon","openframeFooterIcons","showMinimize","frameEvent","opened","updateOpenframeAction","openframeSetSize","operation","height","width","interaction_sys_id","index","indexOf","subQuery","substring","length","entityID","getEntitySysID","parent_table","parent_sys_id","params","color","status","fireEvent","taskId","presenceData","handleOnBootstrap","handleOnPropertyChange","openframeInitSuccess","__TECTONIC__$servicenow_ui_effect_graphql","__TECTONIC__$servicenow_ui_effect_amb","event","type","eventName","args","JSON","stringify","metaData","match","exec","__TECTONIC__sn_uxpage_presource_7_0_0","__TECTONIC__$servicenow_behavior_key_binding_19_0_11","toString","__TECTONIC__$servicenow_behavior_rtl_19_0_11","urlSchema","fragment","host","fullName","port","schemeSpecificPart","userInfo","isOpaque","default","createCustomElement","renderer","snabbdom","view","legacyHandleAllActions","initialState","user","title","subtitle","icons","message","titleIcon","selectable","openPhone","selectedNav","schema","source","actionHandlers","styles","behaviors","rtlBehavior","__TECTONIC__$servicenow_ui_effect_http","openFrameConfigQuery_read","__TECTONIC__sn_seismic_post_message","icon_name","show","icon","select","parsed","parse","prevData","results","caseEntity","sys_class_name","acc","account","_reference","contact","consumer","customerCase","accountId","primaryContactId","primary_contact","openframeSetTitle","openframeSetSubtitle","openframeSetHeaderTitleIcon","openframeSetIcons","__TECTONIC__$servicenow_ui_effect_update_state","getFocusedElement","Promise","resolve","setTimeout","requestAnimationFrame","tabbableNodes","findTabbableNodes","focus","reject","maxAttempts","getProperty","attempts","dispatchInit","then","shadowRoot","activeElement","iconClicked","headerIconClicked","resizeIconClicked","newFrameMode","openInteraction","openframeSetHeight","openframeSetWidth","_getCSSClassNameForMainFrame","finalHeight","finalWidth","titleicon","imageURL","frameHeight","frameWidth","defaultTitle","defaultSubTitle","subTitle","iframeAllow","collapsedViewEnabled","defaultTitleIcon","bodyStyle","frameStyle","iframeAllowAttr","iframeRef","createRef","footerStyle","Math","ceil","showCollapseExpand","showOpenframeWrapper","className","hidden","style","tabIndex","role","on-click","onkeydown","src","aria-label","imageTitle","weight","size","ref","allow","contentWindow","current","map","item","__TECTONIC__sn_translate","useSourceMap","list","this","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","sourceURLs","sources","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","__TECTONIC__$servicenow_now_legacy_icon","COMPONENT_CONNECTED","COMPONENT_DISCONNECTED","preUserData","handleOnComponentConnected","handleOnComponentDisconnected","readPresenceStateData","updateStateWithPresenceData","agentPresenceAMBChannel","agentChannelPresenceAMBChannel","presenceStateAMBChannel","serviceChannelAMBChannel","groupMemberAMBChannel","workItemSubscription","workItemSubscribed","updateWorkItemsHandler","awaWorkItemRejectionAMBChannel","readAwaWorkItem","executeAWAWorkitemReadHandler","subscribeInteractionChanges","interactionUpdated","workItems","isRejectionEvent","availableWorkItems","extractRejectedWorkItem","forEach","element","workItem","serviceChannel","document","rejection","reason","workItemState","dispatchWorkItems","extractInteractionData","getCurrentUserId","subscribeChannels","userId","extractPresenceDataFromPayload","presence","getPresencePayload","currentUser","filter","replace","psData","getPsData","agent_presence","presenceStatesData","parseStateIcon","presence_state","currentState","getName","currentIconStatus","getIconStatus","currentStateSysId","getStateSysId","currentAgentStateId","getAgentStateId","presenceStateSysID","available","channels","some","presenceState","available_to_receive_work_items","presenceStates","agent_channel_availability","channel","service_channel_id","restrict_update","eventMap","toLowerCase","interactionData","interactionPayload","subtype","GlideRecord_Query","awa_work_item_rejection","returnValue","queryReason","queryWorkItem","_query","awa_work_item","_results","record","work_item","queue","service_channel","sysID","document_sys_id","document_id","document_table","stateIconType","sort","a","b","getCurrentStateIconClass","every","availability","presenceStateSource","agentPresence","agentPresenceStatesGraphlQLDatasource_read","messageReceivedActionType","subscribeSucceededActionType","workItemFirstRead","rejectReasonWorkItem","REJECT_REASON","awaWorkItemReadQuery","templateVarList","userSchema","configurationSchema","enum","dispatches","effect","stopPropagation","firstName","lastName","roles","avatar","initials","timeZone","timeFormat","language","domain","configSchema","navIconClass","showPresenceIndicator","url"],"mappings":"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","file":"sn-openframe-uxb.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","module.exports = __TECTONIC__lodash_4_17_15;","module.exports = __TECTONIC__$servicenow_ui_renderer_snabbdom;","export const READ_PRESENCE_STATE_DATA = 'READ_PRESENCE_STATE_DATA';\nexport const SUBSCRIBE_AGENT_PRESENCE = 'SUBSCRIBE_AGENT_PRESENCE';\nexport const SUBSCRIBE_AGENT_CHANNEL_AVAIABILITY = 'SUBSCRIBE_AGENT_CHANNEL_AVAIABILITY';\nexport const SUBSCRIBE_PRESENCE_STATE = 'SUBSCRIBE_PRESENCE_STATE';\nexport const SUBSCRIBE_SERVICE_CHANNEL = 'SUBSCRIBE_SERVICE_CHANNEL';\nexport const SUBSCRIBE_GROUP_MEMBER = 'SUBSCRIBE_GROUP_MEMBER';\nexport const UPDATE_STATE_WITH_PRESENCE_DATA = 'UPDATE_STATE_WITH_PRESENCE_DATA';\nexport const PRESENCE_STATE_WATCHER = 'PRESENCE_STATE_WATCHER';\nexport const OFFLINE_SYS_ID = '9cd83267575313005baaaa65ef94f98b';\nexport const AVAILABLE_STATE = 'available';\nexport const AWAY_STATE = 'away';\nexport const OFFLINE_STATE = 'offline';\nexport const PARTIALLY_AVAILABLE_STATE = 'partially available';\nexport const STATE_CSS_MAP = {\n\t[AWAY_STATE]: 'is-busy',\n\t[AVAILABLE_STATE]: 'is-available',\n\t[OFFLINE_STATE]: 'is-inactive',\n\t[PARTIALLY_AVAILABLE_STATE]: 'is-available-partial'\n};\n\n// work item constants.\nexport const WORK_ITEMS_CHANGED = 'WORK_ITEMS_CHANGED';\nexport const WORK_ITEMS_SUBSCRIBED = 'WORK_ITEM_SUBSCRIPTION#SUBSCRIBED';\nexport const WORK_ITEM_SUBSCRIPTION = 'WORK_ITEM_SUBSCRIPTION';\n// export const WORK_ITEMS_CHANGED = 'WORK_ITEM_SUBSCRIPTION#CHANGED';\nexport const WORK_ITEM_REASON_SUCCEEDED = 'WORK_ITEM_REASON_SUCCEEDED';\nexport const WORK_ITEM_REASON_FAILED = 'WORK_ITEM_REASON_FAILED';\nexport const SUBSCRIBE_WORK_ITEM_REJECT = 'SUBSCRIBE_WORK_ITEM_REJECT';\nexport const WORK_ITEM_REJECT_EVENT = 'WORK_ITEM_REJECT_EVENT';\nexport const WORK_ITEM_REJECT_SUCCESS = 'WORK_ITEM_REJECT_SUCCESS';\nexport const WORK_ITEM_REJECT_FAIL = 'WORK_ITEM_REJECT_FAIL';\nexport const EXECUTE_AWA_WORK_ITEM_READ = 'EXECUTE_AWA_WORK_ITEM_READ';\nexport const REJECTION_CONTEXT = 'REJECTION_CONTEXT';\nexport const INTERACTION_EVENT_MAP = {\n\tOPENFRAME_AWA_WORKITEM_ACCEPTED: 'OPENFRAME_AWA_WORKITEM_ACCEPTED',\n\tOPENFRAME_AWA_WORKITEM_REJECTED: 'OPENFRAME_AWA_WORKITEM_REJECTED',\n\tOPENFRAME_AWA_WORKITEM_OFFERED: 'OPENFRAME_AWA_WORKITEM_OFFERED'\n}\n\n// Interaction constants\nexport const SUBSCRIBE_INTERACTION_CHANGES = 'SUBSCRIBE_INTERACTION_CHANGES';\nexport const INTERACTION_UPDATED = 'INTERACTION_UPDATED';\nexport const INTERACTION_WATCHER = 'INTERACTION_WATCHER';\nexport const REASON_INTERACTION_INACTIVE = \"INTERACTION_INACTIVE\";\nexport const REASON_INTERACTION_REASSIGNED = \"INTERACTION_REASSIGNED\";\n","const actionTypesToProps = {\n\t'ECHO': 'echo',\n\t'PARTNER': 'partner',\n\t'VISIBLE': 'visible',\n\t'openframe_response': 'openframeResponse',\n\t'openframe_init': 'openframe_init',\n\t'openframe_show': 'openframeShow',\n\t'openframe_hide': 'openframeHide',\n\t'openframe_visible': 'openframe_visible',\n\t'openframe_request': 'openframeRequest',\n\t'openframe_get_config': 'openframe_get_config',\n\t'openframe_set_header_title': 'openframe_set_header_title',\n\t'openframe_set_header_title_icon': 'openframeSetHeaderTitleIcon',\n\t'openframe_set_title': 'openframeSetTitle',\n\t'openframe_set_subtitle': 'openframeSetSubtitle',\n\t'openframe_set_header_icons': 'openframeSetHeaderIcons',\n\t'openframe_set_top_frame_url': 'openframeSetTopFrameUrl',\n\t'openframe_communication_failure': 'openframe_communication_failure',\n\t'openframe_set_size': 'openframeSetSize',\n\t'openframe_collapse': 'openframe_collapse',\n\t'openframe_expand': 'openframe_expand',\n\t'openframe_interaction_request': 'interactionRequest',\n\t'openframe_interaction_response':'interactionResponse',\n\t'openframe_interaction_transfer':'interactionTransfer',\n\t'openframe_open_interaction': 'openInteraction',\n\t'ITEM_SELECTED': 'itemSelected',\n\t'OUTGOING_CALL': 'outgoingCall',\n\t'OPEN_PHONE': 'communicationMeta',\n\t'openframe_set_frame_mode' : 'openframeSetFrameMode',\n\t'openframe_set_height' : 'openframeSetHeight',\n\t'openframe_set_width' : 'openframeSetWidth',\n\t'WORKSPACE_NAV_SELECTED' : 'workspaceNavSelected'\n};\nexport const INTERACTION_CREATE_ENDPOINT = '/api/now/openframe/interaction';\nexport const UPDATE_MODULE_STATUS = 'UPDATE_MODULE_STATUS';\nexport const UNKNOWN = 'UNKNOWN';\nexport { actionTypesToProps };\nexport const MAP_ICON_NAME = {\n\t\"icon-phone\":\"phone-outline\",\n\t\"icon-video\":\"video-chat-outline\"\n};\nexport const START_OPENFRAME_LOADING = 'START_OPENFRAME_LOADING';\nexport const OPENFRAME_COMPONENT_WORKSPACE_LOAD_RETRY_COUNT = 'sn_openframe.component_workspace_load_retry_count';\nexport const INITIALIZE_POST_MESSAGE = 'INITIALIZE_POST_MESSAGE';\nexport const NAV_SELECTED = 'NAV_SELECTED';\nexport const VIEW_PHONE = 'VIEW_PHONE';\nexport const PRESENCE_STATE_WATCHER = 'PRESENCE_STATE_WATCHER';\nexport const OPENFRAME_AWA_WORKITEM_ACCEPTED = 'OPENFRAME_AWA_WORKITEM_ACCEPTED';\nexport const OPENFRAME_AWA_WORKITEM_REJECTED = 'OPENFRAME_AWA_WORKITEM_REJECTED';\nexport const OPENFRAME_AWA_WORKITEM_OFFERED = 'OPENFRAME_AWA_WORKITEM_OFFERED';\nexport const INTERACTION_WATCHER = 'INTERACTION_WATCHER';\nexport const PRIME_NAV_SOURCE_CHANGED = 'PRIME_NAV_SOURCE_CHANGED';\n","module.exports = __TECTONIC__$servicenow_ui_core;","import { get } from 'lodash';\nimport { createGraphQLEffect } from '@servicenow/ui-effect-graphql';\nimport { createHttpEffect } from '@servicenow/ui-effect-http';\nimport { createAmbSubscriptionEffect } from '@servicenow/ui-effect-amb';\nimport { actionTypes } from '@servicenow/ui-core';\nimport {\n\tINTERACTION_CREATE_ENDPOINT,\n\tMAP_ICON_NAME,\n\tNAV_SELECTED,\n\tVIEW_PHONE,\n\tPRESENCE_STATE_WATCHER,\n\tOPENFRAME_AWA_WORKITEM_ACCEPTED,\n\tOPENFRAME_AWA_WORKITEM_REJECTED,\n\tOPENFRAME_AWA_WORKITEM_OFFERED,\n\tINTERACTION_WATCHER,\n\tUPDATE_MODULE_STATUS\n} from './constants';\nimport { openFrameConfigQuery_read, contactDetailsQuery_read, caseDetailsQuery_read, accountDetailsQuery_read } from './openframeQuery.read';\nimport { agentPresenceMutation_update } from './openframeMutation.update';\nimport { create } from 'sn-seismic-post-message';\nimport events from './events';\nimport { updatePhoneOnToolbar, updateOpenframeAction } from './dispatchers';\nimport { constructMessage, deconstructMessage, transform } from './format-messages';\nimport { frameResponse, outgoingResponse, getEntitySysID } from './openFrameEventsHelper';\nimport { caseContextHelper, caseInteractionHelper } from './caseContextHelper';\nimport { accountContextHelper, accountInteractionHelper } from './accountContextHelper';\nimport { contactContextHelper, contactInteractionHelper } from './contactContextHelper';\n\nimport {\n\topenframeHeaderTitle,\n\topenframeHeaderSubTitle,\n\topenframeHeaderTitleIcon,\n\topenframeFooterIcons,\n} from './openframeHeaderFooter.effects';\nimport {handleOnBootstrap, handleOnPropertyChange} from \"./util\";\n\nconst {COMPONENT_BOOTSTRAPPED, COMPONENT_PROPERTY_CHANGED} = actionTypes;\n\nexport const OPENFRAME_ACTIONS = {\n\t/** GraphQL events */\n\tFETCH_OPENFRAME_CONTACT: 'FETCH_OPENFRAME_CONTACT',\n\tFETCH_OPENFRAME_CONTACT_STARTED: 'FETCH_OPENFRAME_CONTACT_STARTED',\n\tFETCH_OPENFRAME_CONTACT_SUCCEEDED: 'FETCH_OPENFRAME_CONTACT_SUCCEEDED',\n\tFETCH_OPENFRAME_CONTACT_FAILED: 'FETCH_OPENFRAME_CONTACT_FAILED',\n\tFETCH_OPENFRAME_ACCOUNT: 'FETCH_OPENFRAME_ACCOUNT',\n\tFETCH_OPENFRAME_ACCOUNT_STARTED: 'FETCH_OPENFRAME_ACCOUNT_STARTED',\n\tFETCH_OPENFRAME_ACCOUNT_SUCCEEDED: 'FETCH_OPENFRAME_ACCOUNT_SUCCEEDED',\n\tFETCH_OPENFRAME_ACCOUNT_FAILED: 'FETCH_OPENFRAME_ACCOUNT_FAILED',\n\tFETCH_OPENFRAME_CASE: 'FETCH_OPENFRAME_CASE',\n\tFETCH_OPENFRAME_CASE_STARTED: 'FETCH_OPENFRAME_CASE_STARTED',\n\tFETCH_OPENFRAME_CASE_SUCCEEDED: 'FETCH_OPENFRAME_CASE_SUCCEEDED',\n\tFETCH_OPENFRAME_CASE_FAILED: 'FETCH_OPENFRAME_CASE_FAILED',\n\tFETCH_OPENFRAME_INTERACTION: 'FETCH_OPENFRAME_INTERACTION',\n\tFETCH_OPENFRAME_INTERACTION_STARTED: 'FETCH_OPENFRAME_INTERACTION_STARTED',\n\tFETCH_OPENFRAME_INTERACTION_SUCCEEDED: 'FETCH_OPENFRAME_INTERACTION_SUCCEEDED',\n\tFETCH_OPENFRAME_INTERACTION_FAILED: 'FETCH_OPENFRAME_INTERACTION_FAILED',\n\tOPENFRAME_INIT_DELAYED: 'OPENFRAME_INIT_DELAYED',\n\t/** Local events */\n\tFETCH_OPENFRAMECONFIG_EFFECT: 'FETCH_OPENFRAMECONFIG_EFFECT',\n\tOPENFRAME_LOCAL_IFRAME_LOAD: 'OPENFRAME_LOCAL_IFRAME_LOAD',\n\t/** OpenFrameAPI EVENTS */\n\tOPENFRAME_RESPONSE: 'openframe_response',\n\tOPENFRAME_REQUEST: 'openframe_request',\n\tOPENFRAME_SET_TITLE: 'openframe_set_title',\n\tOPENFRAME_SET_SUBTITLE: 'openframe_set_subtitle',\n\tOPENFRAME_SET_HEADER_TITLE_ICON: 'openframe_set_header_title_icon',\n\tOPENFRAME_SET_HEADER_ICONS: 'openframe_set_header_icons',\n\tOPENFRAME_SET_FRAME_MODE: 'openframe_set_frame_mode',\n\tOPENFRAME_HIDE: 'openframe_hide',\n\tOPENFRAME_SHOW: 'openframe_show',\n\tOPENFRAME_SET_SIZE: 'openframe_set_size',\n\tOPENFRAME_SET_HEIGHT: 'openframe_set_height',\n\tOPENFRAME_SET_WIDTH: 'openframe_set_width',\n\tOPENFRAME_SET_TOP_FRAME_URL: 'openframe_set_top_frame_url',\n\tOPENFRAME_OPEN_INTERACTION: 'openframe_open_interaction',\n\tOPENFRAME_SET_PRESENCE_INDICATOR: 'openframe_set_presence_indicator',\n\tOPENFRAME_AWA_WORKITEM_ACCEPTED: 'openframe_awa_workitem_accepted',\n\tOPENFRAME_AWA_WORKITEM_REJECTED: 'openframe_awa_workitem_rejected',\n\tOPENFRAME_AWA_WORKITEM_OFFERED: 'openframe_awa_workitem_offered',\n\tOPENFRAME_AGENT_OFF_INTERACTION: 'openframe_agent_off_interaction',\n\t/** Workspace only EVENTS */\n\tOPEN_PHONE: 'OPEN_PHONE',\n\tWORKSPACE_NAV_SELECTED: 'WORKSPACE_NAV_SELECTED',\n\tOPENFRAME_RERENDER: 'OPENFRAME_RERENDER',\n\tOUTGOING_CALL: 'OUTGOING_CALL',\n\tSTART_OPENFRAME_LOADING: 'START_OPENFRAME_LOADING',\n\tUPDATE_AGENT_PRESENCE: 'UPDATE_AGENT_PRESENCE',\n\tRECORD_WATCHER_SUBSCRIPTION: 'RECORD_WATCHER_SUBSCRIPTION',\n\t/** AWA agent presence state watcher*/\n\tAGENT_PRESENCE_STATE_WATCHER: 'agent_presence_state_watcher',\n\t/** AWA agent presence state communicator event (OpenFrame) */\n\tOPENFRAME_AWA_AGENT_PRESENCE: 'openframe_awa_agent_presence',\n\t/** Initialize post message API*/\n\tINITIALIZE_POST_MESSAGE: 'INITIALIZE_POST_MESSAGE'\n};\n\nconst COLOR_STATUS_MAPPING = {\n\t'orange': 'away',\n\t'green': 'available',\n\t'grey': 'offline',\n\t'red': 'busy'\n};\n\n/** GraphQL effects - START */\nexport const fetchOpenframeContactEffect = createGraphQLEffect(contactDetailsQuery_read, {\n\tvariableList: ['sys_id'],\n\tstartActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_CONTACT_STARTED,\n\tsuccessActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_CONTACT_SUCCEEDED,\n\terrorActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_CONTACT_FAILED\n});\n\nexport const fetchOpenframeAccountEffect = createGraphQLEffect(accountDetailsQuery_read, {\n\tvariableList: ['sys_id'],\n\tstartActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_ACCOUNT_STARTED,\n\tsuccessActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_ACCOUNT_SUCCEEDED,\n\terrorActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_ACCOUNT_FAILED\n});\n\nexport const fetchOpenframeCaseEffect = createGraphQLEffect(caseDetailsQuery_read, {\n\tvariableList: ['sys_id'],\n\tstartActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_CASE_STARTED,\n\tsuccessActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_CASE_SUCCEEDED,\n\terrorActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_CASE_FAILED\n});\n\nexport const updateAgentPresenceEffect = createGraphQLEffect(agentPresenceMutation_update, {\n\tvariableList: ['state']\n});\n\nexport const recordWatcherHandler = createAmbSubscriptionEffect('/openframe/agent_status', {\n});\n\nexport const fetchOpenframeInteractionEffect = createHttpEffect(INTERACTION_CREATE_ENDPOINT, {\n\tmethod: 'post',\n\tdataParam: 'data',\n\tstartActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_INTERACTION_STARTED,\n\tsuccessActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_INTERACTION_SUCCEEDED,\n\terrorActionType: OPENFRAME_ACTIONS.FETCH_OPENFRAME_INTERACTION_FAILED\n});\n/** GraphQL effects - END */\n\n/** GraphQL effect handlers - START */\nconst handleStarted = () => {\n\t// console.log('started :',state);\n};\n\nconst handleFailure = (coeffects) => {\n\t// const { action } = coeffects;\n\t// console.log('failure :', action.type);\n};\n\nconst handleConfigStateEffect = ({state, action, updateState}) => {\n\tstate.config = state.properties.isLegacy ? Object.assign({}, get(action, 'payload')) :Object.assign({}, Object.assign({},get(state.properties.configuration, 'config')));\n\tupdateState({\n\t\t...state\n\t});\n};\n\nconst extractPresourceConfig = (window) => {\n\tlet openframeConfig = get(window, 'ux_globals.presource[\"sn-component-openframe:openFrameConfig\"]', false);\n\treturn get(openframeConfig, 'data.AppOpenframe_Query');\n};\n\nconst extractPathAndHostOrigin = (config) => {\n\tlet hostOrigin = get(config, 'config.url', false);\n\tlet path = '';\n\tif (hostOrigin.isAbsolute) {\n\t\tpath = hostOrigin.scheme + '://' + hostOrigin.authority;\n\t\thostOrigin = hostOrigin.stringValue;\n\t} else {\n\t\tpath = window.location.origin;\n\t\thostOrigin = `${path}/${hostOrigin.stringValue}`;\n\t}\n\treturn { path, hostOrigin };\n};\n\nconst initializePostMessage = (state, pathAndHostOriginData, dispatch, updateState) => {\n\tstate.hostOrigin = pathAndHostOriginData.hostOrigin;\n\tif (!state.createdPm) {\n\t\tlet thisState = {\n\t\t\tprops:{\n\t\t\t\tdispatch: dispatch\n\t\t\t}\n\t\t};\n\t\tstate.pm = create(events, thisState, {\n\t\t\torigin: pathAndHostOriginData.path,\n\t\t\tconstructMessage,\n\t\t\tdeconstructMessage,\n\t\t\ttransform\n\t\t});\n\t\tstate.createdPm = true;\n\t\tupdateState({\n\t\t\t...state\n\t\t});\n\t}\n};\n\nconst handlePostMessageInit = (coeffects) => {\n\tconst { state, dispatch, updateState } = coeffects;\n\tconst {isLegacy, configuration = {}} = state.properties;\n\tconst config = isLegacy ? extractPresourceConfig(window) : configuration;\n\tif (get(config, 'config.url', false)) {\n\t\tlet pathAndHostOriginData = extractPathAndHostOrigin(config);\n\t\tinitializePostMessage(state, pathAndHostOriginData, dispatch, updateState);\n\t\tupdateState({\n\t\t\t...state,\n\t\t\tinitializeWrapper: true\n\t\t});\n\t}\n};\n\nconst handleStartOpenframeLoading = (coeffects) => {\n\tconst { state, dispatch, updateState } = coeffects;\n\tconst {isLegacy} = state.properties;\n\tconst config = state.properties.isLegacy ? extractPresourceConfig(window) : state.properties.configuration;\n\tif (get(config, 'config.url', false)) {\n\t\tdispatch(OPENFRAME_ACTIONS.FETCH_OPENFRAMECONFIG_EFFECT, config);\n\t\tupdatePhoneOnToolbar(dispatch, config.showFrame, MAP_ICON_NAME[config.config['navIconClass']], isLegacy);\n\t\tdispatch(OPENFRAME_ACTIONS.RECORD_WATCHER_SUBSCRIPTION, {\n\t\t\tsubscribe: true\n\t\t});\n\t}\n};\n\nconst handleContactFetchSucceeded = (coeffects) => {\n\tconst { state, action, dispatch, updateState } = coeffects;\n\tlet contactDetails = get(action, 'payload.data.GlideRecord_Query.customer_contact._results[0]');\n\tlet entityData = contactContextHelper(contactDetails);\n\tlet interaction = contactInteractionHelper(contactDetails);\n\tif (state.communicationMeta.number || state.communicationMeta.phoneNumber) {\n\t\tlet context = outgoingResponse(state.communicationMeta, entityData);\n\t\tstate.local.ctiContext = { sent: false, context };\n\t\tupdateState({\n\t\t\t...state\n\t\t});\n\t\tdispatch(OPENFRAME_ACTIONS.FETCH_OPENFRAME_INTERACTION, { data: interaction, noBatch: true });\n\t}\n};\n\nconst handleAccountFetchSucceeded = (coeffects) => {\n\tconst { state, action, dispatch, updateState } = coeffects;\n\tconst accountDetails = get(action, 'payload.data.GlideRecord_Query.customer_account._results[0]');\n\tlet entityData = accountContextHelper(accountDetails);\n\tlet interaction = accountInteractionHelper(accountDetails);\n\tif (state.communicationMeta.number || state.communicationMeta.phoneNumber) {\n\t\tlet context = outgoingResponse(state.communicationMeta, entityData);\n\t\tstate.local.ctiContext = { sent: false, context };\n\t\tupdateState({\n\t\t\t...state\n\t\t});\n\t\tdispatch(OPENFRAME_ACTIONS.FETCH_OPENFRAME_INTERACTION, { data: interaction, noBatch: true });\n\t}\n};\n\nconst handleCaseFetchSucceeded = (coeffects) => {\n\tconst { state, action, dispatch, updateState } = coeffects;\n\tlet caseDetails = get(action, 'payload.data.GlideRecord_Query.sn_customerservice_case._results[0]');\n\tlet entityData = caseContextHelper(caseDetails);\n\tlet interaction = caseInteractionHelper(caseDetails);\n\tif (state.communicationMeta.number || state.communicationMeta.phoneNumber) {\n\t\tlet context = outgoingResponse(state.communicationMeta, entityData);\n\t\tstate.local.ctiContext = { sent: false, context };\n\t\tupdateState({\n\t\t\t...state\n\t\t});\n\t\tdispatch(OPENFRAME_ACTIONS.FETCH_OPENFRAME_INTERACTION, { data: interaction, noBatch: true });\n\t}\n};\n\nconst handleInteractionFetchSucceeded = ({state, action, updateState, dispatch, updateProperties}) => {\n\tconst interaction = get(action, 'payload.result.fields', false);\n\tlet { context } = state.local.ctiContext;\n\tif (interaction) {\n\t\tcontext.payload.data.data.push({\n\t\t\t'entity': 'interaction',\n\t\t\t'query': `sys_id=${interaction.interactionSysId}`,\n\t\t\t'value': interaction.number,\n\t\t\t'label': 'Interaction',\n\t\t\t'display': false\n\t\t});\n\t}\n\tstate.pm.post(context.method, frameResponse(context.method, context.payload));\n// TODO: make sure the propertiers are updated and everything is reset.\n\t// if(!isLegacy){\n\t// \tupdateProperties({\n\t// \t\tnumber: '',\n\t// \t\tsysId:'',\n\t// \t\tsource:'',\n\t// \t\ttable:''\n\t// \t});\n\t// }\n\tstate.local.ctiContext = { sent: true };\n\tupdateState({\n\t\t...state,\n\t});\n};\n\n/** GraphQL effect handlers - END */\n\n/** OpenframeAPI events effect handlers - START */\n\nexport const openframeRequest = ({state, action, updateState}) => {\n\tlet { id, method, meta } = action.payload;\n\tconst {isLegacy} = state.properties;\n\tif (method === 'openframe_init') {\n\t\tif (get(state, 'local.contentWindowInit', false)) {\n\t\t\tstate.pm.post(OPENFRAME_ACTIONS.OPENFRAME_RESPONSE, frameResponse(OPENFRAME_ACTIONS.OPENFRAME_RESPONSE, { isSuccess: true, context: { id, result: { topDomain: window.location.origin } } }));\n\t\t} else {\n\t\t\tstate.openframe_init = { data: { isSuccess: true, context: { id, result: { topDomain: window.location.origin } }, completed: false } };\n\t\t\tupdateState({...state});\n\t\t}\n\t} else if (method === 'openframe_get_config') {\n\t\tstate.pm.post(OPENFRAME_ACTIONS.OPENFRAME_RESPONSE, frameResponse(OPENFRAME_ACTIONS.OPENFRAME_RESPONSE, { isSuccess: true, context: { id, result: isLegacy ? state.config.config : state.properties.configuration.config } }));\n\t} else if (method === 'openframe_visible') {\n\t\tstate.pm.post(OPENFRAME_ACTIONS.OPENFRAME_RESPONSE, frameResponse(OPENFRAME_ACTIONS.OPENFRAME_RESPONSE, { isSuccess: true, context: { id, result: state.local.visible } }));\n\t}\n};\n\nconst openframeHideEffect = (coeffects) => {\n\tconst { state, dispatch, updateProperties, updateState } = coeffects;\n\tconst {isLegacy, opened} = state.properties;\n\tif (state.local.visible) {\n\t\tstate.local.visible = false;\n\t\tif(opened){\n\t\t\tupdateProperties({visible: false, opened: false})\n\t\t} else {\n\t\t\tupdateProperties({visible: false});\n\t\t}\n\t\tupdateOpenframeAction(dispatch, false, isLegacy);\n\t\tupdateState({\n\t\t\t...state\n\t\t});\n\t}\n\tdispatch(OPENFRAME_ACTIONS.OPENFRAME_RERENDER);\n\tstate.pm.post('openframe_hidden', frameResponse('openframe_hidden', {}));\n};\n\nconst openframeShowEffect = (coeffects) => {\n\tconst { state, dispatch, updateProperties, updateState } = coeffects;\n\tconst {isLegacy, opened} = state.properties;\n\tif (!state.local.visible) {\n\t\tstate.local.visible = true;\n\t\tif(!opened){\n\t\t\tupdateProperties({visible: true, opened: true});\n\t\t} else {\n\t\t\tupdateProperties({visible: true});\n\t\t}\n\t\tupdateOpenframeAction(dispatch, true, isLegacy);\n\t\tupdateState({\n\t\t\t...state\n\t\t});\n\t}\n\tdispatch(OPENFRAME_ACTIONS.OPENFRAME_RERENDER);\n\tstate.pm.post('openframe_shown', frameResponse('openframe_shown', {}));\n};\n\nconst openframeSetSizeEffect = ({action, updateState, state}) => {\n\tconst openframeSetSize = get(action, 'payload');\n\tdelete openframeSetSize.meta;\n\tupdateState({\n\t\tpath: 'openframeSetSize',\n\t\tvalue: openframeSetSize,\n\t\toperation: 'set'\n\t});\n};\n\nconst openframeSetHeight = ({state, action, updateState}) => {\n\tlet openframeSetSize = {};\n\tif (get(state, 'openframeSetSize')) {\n\t\topenframeSetSize = state.openframeSetSize;\n\t}\n\tif (get(action, 'payload.height')) {\n\t\topenframeSetSize.height = get(action, 'payload.height');\n\t}\n\tupdateState({\n\t\t...state,\n\t\topenframeSetSize\n\t});\n};\n\nconst openframeSetWidth = ({state, action, updateState}) => {\n\tlet openframeSetSize = {};\n\tlet operation = 'set';\n\tif (get(state, 'openframeSetSize')) {\n\t\toperation = 'merge';\n\t\topenframeSetSize = state.openframeSetSize;\n\t}\n\tif (get(action, 'payload.width')) {\n\t\topenframeSetSize.width = get(action, 'payload.width');\n\t}\n\tupdateState({\n\t\tpath: 'openframeSetSize',\n\t\tvalue: openframeSetSize,\n\t\toperation: operation\n\t});\n};\n\nconst openframeSetTopFrameUrl = (coeffects) => {\n\tconst { action, dispatch, state } = coeffects;\n\tconst { isLegacy } = state.properties;\n\tif (get(action, 'payload.form')) {\n\t\tlet { entity, query, interaction_sys_id } = get(action, 'payload.form');\n\t\tlet sysparm = \"sysparm_query=\";\n\t\tlet index = query.indexOf(sysparm);\n\t\tlet subQuery = \"\";\n\t\tif (index != -1) {\n\t\t\t// truncated query params\n\t\t\tsubQuery = query.substring(index + sysparm.length);\n\t\t}\n\t\tlet entityID = getEntitySysID(query);\n\t\tif (entity && entityID) {\n\t\t\tif (interaction_sys_id) {\n\t\t\t\t// Item selected component specific custom action and client script\n\t\t\t\t// include it in now-ui and sys_ux_event generated\n\t\t\t\t// make sure the payload structure is defined\n\t\t\t\t// verify in the build [target/update]\n\t\t\t\tif(!isLegacy){\n\t\t\t\t\tdispatch('SN_OPENFRAME_UXB#INTERNAL_ITEM_SELECTED',  { 'table': entity, 'sys_id': entityID, parent_table: 'interaction', parent_sys_id: interaction_sys_id, params: { query: subQuery } });\n\t\t\t\t} else {\n\t\t\t\t\tdispatch('ITEM_SELECTED', { 'table': entity, 'sys_id': entityID, parent_table: 'interaction', parent_sys_id: interaction_sys_id, params: { query: subQuery } });\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(!isLegacy){\n\t\t\t\t\tdispatch('SN_OPENFRAME_UXB#INTERNAL_ITEM_SELECTED',  { 'table': entity, 'sys_id': entityID, parent_table: entity, parent_sys_id: entityID, params: { query: subQuery } });\n\t\t\t\t} else {\n\t\t\t\t\tdispatch('ITEM_SELECTED', { 'table': entity, 'sys_id': entityID, parent_table: entity, parent_sys_id: entityID, params: { query: subQuery } });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst openframeOpenInteraction = (coeffects) => {\n\tconst { action, dispatch, state } = coeffects;\n\tconst { isLegacy } = state.properties;\n\tif (get(action, 'payload.interaction_sys_id')) {\n\t\tif(!isLegacy){\n\t\t\tdispatch('SN_OPENFRAME_UXB#INTERNAL_ITEM_SELECTED', {\n\t\t\t\ttable: 'interaction',\n\t\t\t\tsys_id: get(action, 'payload.interaction_sys_id'),\n\t\t\t\tparent_table: 'interaction',\n\t\t\t\tparent_sys_id: get(action, 'payload.interaction_sys_id')\n\t\t\t});\n\t\t} else {\n\t\t\tdispatch('ITEM_SELECTED', {\n\t\t\t\ttable: 'interaction',\n\t\t\t\tsys_id: get(action, 'payload.interaction_sys_id'),\n\t\t\t\tparent_table: 'interaction',\n\t\t\t\tparent_sys_id: get(action, 'payload.interaction_sys_id')\n\t\t\t});\n\t\t}\n\t}\n};\n\nconst openframeSetPresenceIndicator = (coeffects) => {\n\tconst { state, action, dispatch } = coeffects;\n\tconst {isLegacy} = state.properties;\n\tif (get(action, 'payload')) {\n\t\tconst color = get(action, 'payload.color');\n\t\tconst status = get(action, 'payload.state');\n\t\tconst showPresenceIndicator = isLegacy\n\t\t\t? get(state, 'config.config.showPresenceIndicator', false)\n\t\t\t: get(state, 'properties.configuration.config.showPresenceIndicator', false);\n\t\tif ( showPresenceIndicator === 'true' &&\n\t\t\tget(COLOR_STATUS_MAPPING, `${color}`, false)) {\n\t\t\tif (isLegacy) {\n\t\t\t\tdispatch(UPDATE_MODULE_STATUS, {\n\t\t\t\t\tid: 'cti',\n\t\t\t\t\tstatus: get(COLOR_STATUS_MAPPING, `${color}`) // add the default value\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdispatch('PRIME_NAV_SOURCE_CHANGED', {\n\t\t\t\t\tid: 'cti',\n\t\t\t\t\tstatus: get(COLOR_STATUS_MAPPING, `${color}`) // add the default value\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tdispatch(OPENFRAME_ACTIONS.UPDATE_AGENT_PRESENCE, { state: status });\n\t}\n};\n\nexport const openframeCommunication = (coeffects) => {\n\tconst { state, action, dispatch, updateState } = coeffects;\n\tconst communicationMeta = get(action, 'payload');\n\tlet sysId = communicationMeta.sysid || communicationMeta.sysId;\n\tif (communicationMeta.table === 'sn_customerservice_case') {\n\t\tdispatch(OPENFRAME_ACTIONS.FETCH_OPENFRAME_CASE, { sys_id: sysId });\n\t} else if (communicationMeta.table === 'customer_account') {\n\t\tdispatch(OPENFRAME_ACTIONS.FETCH_OPENFRAME_ACCOUNT, { sys_id: sysId });\n\t} else if (communicationMeta.table === 'customer_contact') {\n\t\tdispatch(OPENFRAME_ACTIONS.FETCH_OPENFRAME_CONTACT, { sys_id: sysId });\n\t} else {\n\t\tif (communicationMeta.number || communicationMeta.phoneNumber) {\n\t\t\tlet context = outgoingResponse(communicationMeta, [{\n\t\t\t\tentity: communicationMeta.table,\n\t\t\t\tquery: `sys_id=${sysId}`,\n\t\t\t\tvalue: communicationMeta.displayValue,\n\t\t\t\tlabel: communicationMeta.tableName\n\t\t\t}]);\n\t\t\tlet interaction = {\n\t\t\t\tinteractionSysId: -1,\n\t\t\t\tdirection: 'outbound',\n\t\t\t\tcontext_table: communicationMeta.table,\n\t\t\t\tcontext_document: sysId\n\t\t\t};\n\t\t\tstate.local.ctiContext = { sent: false, context };\n\t\t\tdispatch(OPENFRAME_ACTIONS.FETCH_OPENFRAME_INTERACTION, { data: interaction, noBatch: true });\n\t\t}\n\t}\n\tstate.communicationMeta = communicationMeta;\n\tupdateState({\n\t\t...state,\n\t\tcommunicationMeta: communicationMeta\n\t});\n};\n\n/** OpenframeAPI events effect handlers - START */\n\n/** Openframe component local handlers - START */\nexport const openframeLocalIframeLoad = (coeffects) => {\n\tconst { state, action, dispatch, updateProperties, updateState } = coeffects;\n\tstate.local.contentWindowInit = true;\n\tstate.pm.target(get(action, 'payload.contentWindow'));\n\tlet openframe_init = get(state, 'openframe_init');\n\tif (openframe_init && openframe_init.data) {\n\t\tstate.pm.post(OPENFRAME_ACTIONS.OPENFRAME_RESPONSE, frameResponse(OPENFRAME_ACTIONS.OPENFRAME_RESPONSE, openframe_init.data));\n\t\tstate.openframe_init = {};\n\t} else {\n\t\twaitOpenframeInit(coeffects);\n\t}\n\tupdateState({\n\t\t...state,\n\t\tposition : get(state, 'properties.position')\n\t});\n\tupdateProperties({ openframeInitStatus: true });\n};\n\nexport const waitOpenframeInit = (coeffects) => {\n\tlet { state, updateState, updateProperties, dispatch } = coeffects;\n\tlet retryTime = 3;\n\tlet retryInterval = 500;\n\tlet interval = setInterval(() => {\n\t\tif (retryTime > 0) {\n\t\t\tdispatch(OPENFRAME_ACTIONS.OPENFRAME_INIT_DELAYED, {});\n\t\t\tretryTime--;\n\t\t} else {\n\t\t\tclearInterval(interval);\n\t\t}\n\t}, retryInterval);\n\n}\n\n// For some reason if the timing of openframe init is out of sync with init request\n// there is a timeout. This is a workaround fix.\nconst openframeInitDelayHandler = (coeffects) => {\n\tlet {updateState, updateProperties, state} = coeffects;\n\tlet openframe_init = get(state, 'openframe_init');\n\tif(openframe_init && openframe_init.data && !state.openframeInitSuccess){\n\t\tstate.pm.post(OPENFRAME_ACTIONS.OPENFRAME_RESPONSE, frameResponse(OPENFRAME_ACTIONS.OPENFRAME_RESPONSE, openframe_init.data));\n\t\tstate.openframe_init = {}\n\t\tupdateState({\n\t\t\t...state,\n\t\t\tposition : get(state, 'properties.position')\n\t\t});\n\t\tupdateProperties({ openframeInitStatus: true });\n\t\tupdateState({openframeInitSuccess: true});\n\t}\n}\n\nconst workspaceNavSelected = (coeffects) => {\n\tconst { state, dispatch, action, updateProperties } = coeffects;\n\tif (get(action, 'payload.id') == 'cti' && get(action, 'payload.select') != state.local.visible) {\n\t\tstate.local.visible = get(action, 'payload.select');\n\t\tupdateProperties({visible: get(action, 'payload.select')});\n\t\tlet fireEvent = get(action, 'payload.select') ? OPENFRAME_ACTIONS.OPENFRAME_SHOW : OPENFRAME_ACTIONS.OPENFRAME_HIDE;\n\t\tif (get(state, 'pm', false)) {\n\t\t\tdispatch(fireEvent);\n\t\t}\n\t}\n};\n\nconst openframeFrameMode = (coeffects) => {\n\tconst { state, action, dispatch, updateState } = coeffects;\n\tstate.showMinimize.value = (get(action, 'payload.message') === 'expand') ? false : true;\n\tupdateState({\n\t\t...state\n\t});\n\tlet frameEvent = state.showMinimize.value ? 'openframe_collapse' : 'openframe_expand';\n\tstate.pm.post(frameEvent, frameResponse(frameEvent));\n};\n\nconst outgoingCall = (coeffects) => {\n\tconst { state, action } = coeffects;\n\tif (get(action, 'payload.phoneNumber')) {\n\t\tlet metaData = { 'phoneNumber': get(action, 'payload.phoneNumber'), taskId: '' };\n\t\tlet data = { 'metaData': metaData, 'data': [] };\n\t\tlet payload = { 'type': 'OUTGOING_CALL', 'data': data };\n\t\tlet context = { 'payload': payload, 'method': 'openframe_communication' };\n\t\tupdateState({\n\t\t\t...state\n\t\t});\n\t\tstate.pm.post(context.method, frameResponse(context.method, context.payload));\n\t}\n};\n\nconst openframeRerender = ({state, updateState}) => {\n\tupdateState({\n\t\t...state\n\t});\n};\n/** Openframe component local handlers - END */\n\n/** AWA Agent presence state watcher - START */\nconst agentPresenceStateWatcher = ({state, action}) => {\n\tconst awaPresenceStateData = get(action, 'payload');\n\tlet context = { 'result': awaPresenceStateData.presenceData };\n\tstate.pm.post(OPENFRAME_ACTIONS.OPENFRAME_AWA_AGENT_PRESENCE, frameResponse(OPENFRAME_ACTIONS.OPENFRAME_AWA_AGENT_PRESENCE, context));\n};\n\n\nconst handleWorkitemAccepted = ({state, action}) => {\n\tstate.pm.post(OPENFRAME_ACTIONS.OPENFRAME_AWA_WORKITEM_ACCEPTED, frameResponse(OPENFRAME_ACTIONS.OPENFRAME_AWA_WORKITEM_ACCEPTED, {result: action.payload}));\n};\n\nconst handleWorkitemRejected = ({state, action}) => {\n\tstate.pm.post(OPENFRAME_ACTIONS.OPENFRAME_AWA_WORKITEM_REJECTED, frameResponse(OPENFRAME_ACTIONS.OPENFRAME_AWA_WORKITEM_REJECTED, {payload: action.payload}));\n};\n\nconst handleWorkitemOffered = ({state, action}) => {\n\tstate.pm.post(OPENFRAME_ACTIONS.OPENFRAME_AWA_WORKITEM_OFFERED, frameResponse(OPENFRAME_ACTIONS.OPENFRAME_AWA_WORKITEM_OFFERED, {result: action.payload}));\n};\n/** AWA Agent presence state watcher - END */\n\n/** Agent Off Interaction watcher - START */\nconst interactionWatcher = ({state, action}) => {\n\tconst interactionPayload = get(action, 'payload');\n\tlet context = { 'result' : interactionPayload };\n\tstate.pm.post(OPENFRAME_ACTIONS.OPENFRAME_AGENT_OFF_INTERACTION, frameResponse(OPENFRAME_ACTIONS.OPENFRAME_AGENT_OFF_INTERACTION, context));\n};\n/** Agent Off Interaction watcher - END */\n\nexport const handlerMap =\n{\n\t[OPENFRAME_ACTIONS.INITIALIZE_POST_MESSAGE]: handlePostMessageInit,\n\t[OPENFRAME_ACTIONS.START_OPENFRAME_LOADING]: handleStartOpenframeLoading,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAMECONFIG_EFFECT]: handleConfigStateEffect,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_CONTACT]: fetchOpenframeContactEffect,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_CONTACT_STARTED]: handleStarted,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_CONTACT_SUCCEEDED]: handleContactFetchSucceeded,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_CONTACT_FAILED]: handleFailure,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_ACCOUNT]: fetchOpenframeAccountEffect,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_ACCOUNT_STARTED]: handleStarted,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_ACCOUNT_SUCCEEDED]: handleAccountFetchSucceeded,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_ACCOUNT_FAILED]: handleFailure,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_CASE]: fetchOpenframeCaseEffect,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_CASE_STARTED]: handleStarted,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_CASE_SUCCEEDED]: handleCaseFetchSucceeded,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_CASE_FAILED]: handleFailure,\n\t[OPENFRAME_ACTIONS.UPDATE_AGENT_PRESENCE]: updateAgentPresenceEffect,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_INTERACTION]: fetchOpenframeInteractionEffect,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_INTERACTION_STARTED]: handleStarted,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_INTERACTION_SUCCEEDED]: handleInteractionFetchSucceeded,\n\t[OPENFRAME_ACTIONS.FETCH_OPENFRAME_INTERACTION_FAILED]: handleFailure,\n\t[OPENFRAME_ACTIONS.OPENFRAME_RERENDER]: openframeRerender,\n\t[OPENFRAME_ACTIONS.OPENFRAME_REQUEST]: openframeRequest,\n\t[OPENFRAME_ACTIONS.OPENFRAME_LOCAL_IFRAME_LOAD]: openframeLocalIframeLoad,\n\t[OPENFRAME_ACTIONS.OPENFRAME_SET_TITLE]: openframeHeaderTitle,\n\t[OPENFRAME_ACTIONS.OPENFRAME_SET_SUBTITLE]: openframeHeaderSubTitle,\n\t[OPENFRAME_ACTIONS.OPENFRAME_SET_HEADER_TITLE_ICON]: openframeHeaderTitleIcon,\n\t[OPENFRAME_ACTIONS.OPENFRAME_SET_HEADER_ICONS]: openframeFooterIcons,\n\t[OPENFRAME_ACTIONS.OPENFRAME_SET_FRAME_MODE]: openframeFrameMode,\n\t[OPENFRAME_ACTIONS.OPENFRAME_HIDE]: openframeHideEffect,\n\t[OPENFRAME_ACTIONS.OPENFRAME_SHOW]: openframeShowEffect,\n\t[OPENFRAME_ACTIONS.OPENFRAME_SET_SIZE]: openframeSetSizeEffect,\n\t[OPENFRAME_ACTIONS.OPENFRAME_SET_HEIGHT]: openframeSetHeight,\n\t[OPENFRAME_ACTIONS.OPENFRAME_SET_WIDTH]: openframeSetWidth,\n\t[OPENFRAME_ACTIONS.OPENFRAME_SET_TOP_FRAME_URL]: openframeSetTopFrameUrl,\n\t[OPENFRAME_ACTIONS.OPENFRAME_OPEN_INTERACTION]: openframeOpenInteraction,\n\t[OPENFRAME_ACTIONS.OPENFRAME_SET_PRESENCE_INDICATOR]: openframeSetPresenceIndicator,\n\t[VIEW_PHONE]: openframeCommunication,\n\t[NAV_SELECTED]: workspaceNavSelected,\n\t[OPENFRAME_ACTIONS.OUTGOING_CALL]: outgoingCall,\n\t[OPENFRAME_ACTIONS.RECORD_WATCHER_SUBSCRIPTION]: recordWatcherHandler,\n\t[PRESENCE_STATE_WATCHER]: agentPresenceStateWatcher,\n\t[COMPONENT_BOOTSTRAPPED]: handleOnBootstrap,\n\t[COMPONENT_PROPERTY_CHANGED]: handleOnPropertyChange,\n\t[OPENFRAME_AWA_WORKITEM_ACCEPTED]: handleWorkitemAccepted,\n\t[OPENFRAME_AWA_WORKITEM_REJECTED]: handleWorkitemRejected,\n\t[OPENFRAME_AWA_WORKITEM_OFFERED]: handleWorkitemOffered,\n\t[INTERACTION_WATCHER]: interactionWatcher,\n\t[OPENFRAME_ACTIONS.OPENFRAME_INIT_DELAYED]: openframeInitDelayHandler\n};\n","module.exports = __TECTONIC__$servicenow_ui_effect_graphql;","module.exports = __TECTONIC__$servicenow_ui_effect_amb;","const event = { type: 'NOW.PostMessage' };\n\nconst frameResponse = (eventName, args) => {\n\treturn JSON.stringify(Object.assign({ eventName, args }, event));\n};\n\nconst outgoingResponse = (communicationMeta, entityData = []) => {\n\tlet data = {\n\t\tdata: entityData, metaData: {\n\t\t\tphoneNumber: communicationMeta.number || communicationMeta.phoneNumber, taskId: communicationMeta.sysid\n\t\t}\n\t}\n\tlet payload = { \"type\": \"OUTGOING_CALL\", data };\n\tlet context = { \"payload\": payload, \"method\": \"openframe_communication\" };\n\treturn context;\n}\n\nconst getEntitySysID = (query) => {\n\tvar myRegexp = /(sys_id|sysId)=([^&\\^]+)/;\n\tvar match = myRegexp.exec(query);\n\tif (!match || match.length != 3)\n\t\treturn 0;\n\treturn match[2];\n}\nexport { frameResponse, outgoingResponse, getEntitySysID };\n","module.exports = __TECTONIC__sn_uxpage_presource_7_0_0;","module.exports = __TECTONIC__$servicenow_behavior_key_binding_19_0_11;","\n        var result = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/src/index.js??ref--6-2!../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./_componentOpenframe.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","module.exports = __TECTONIC__$servicenow_behavior_rtl_19_0_11;","export const urlSchema = {\n\ttype: 'object',\n\tproperties: {\n\t\tauthority: { type: 'string' },\n\t\tfragment: { type: 'string' },\n\t\thost: { type: 'string' },\n\t\tfullName: { type: 'string' },\n\t\tpath: { type: 'string' },\n\t\tport: { type: 'number' },\n\t\tquery: { type: 'string' },\n\t\tscheme: { type: 'string' },\n\t\tschemeSpecificPart: { type: 'string' },\n\t\tuserInfo: { type: 'string' },\n        isAbsolute: { type: 'boolean' },\n        isOpaque: { type: 'boolean' },\n        stringValue: { type: 'string' }\n\t}\n};","export {default as componentOpenframeElement} from './componentOpenframe/componentOpenframeElement';\nexport { default as snOpenframeUxb } from './sn-openframe-uxb/snOpenframeUXB';\n","import { createCustomElement } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport { handlerMap, OPENFRAME_ACTIONS } from './openframe.effects';\nimport { view } from './openframe.view.js';\nimport styles from './_componentOpenframe.scss';\nimport { NAV_SELECTED, VIEW_PHONE, PRESENCE_STATE_WATCHER } from './constants';\nimport { findTabbableNodes } from \"@servicenow/behavior-key-binding\";\nimport rtlBehavior from '@servicenow/behavior-rtl';\n\nexport default createCustomElement('sn-component-openframe', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview\n\t},\n\tlegacyHandleAllActions: false,\n\tinitialState: {\n\t\topenframeInitSuccess: false,\n\t\tconfig: {},\n\t\tlocal: { visible : false },\n\t\tshowMinimize: {value:false},\n\t\topenframe_init: {}\n\t},\n\tproperties: {\n\t\tuser:{},\n\t\tconfiguration:{},\n\t\ttitle: { default: '' },\n\t\tisLegacy:{default: true},\n\t\tsubtitle: { default: '' },\n\t\ticons: {\n\t\t\tmessage: []\n\t\t},\n\t\ttitleIcon: { default: {} },\n\t\tcreatedPm: false,\n\t\tpm: { default: {} },\n\t\tposition: { default: '' },\n\t\tvisible: {selectable: false, default: false},\n\t\topenframeInitStatus: { default: false, selectable: true},\n\t\topenPhone: {selectable: false, default: null},\n\t\tselectedNav: {selectable: false, default: null},\n\t\topened: { schema: { type: 'boolean' }},\n\t\tnumber: {default: null, schema: { type: 'string' }},\n\t\tsysId: {default: null, schema: { type: 'string' }},\n\t\ttable: {default: null, schema: { type: 'string' }},\n\t\tsource: {default: null, schema: { type: 'string' }}\n\t},\n\tactionHandlers: handlerMap,\n\tstyles,\n\tbehaviors: [rtlBehavior]\n});\n","module.exports = __TECTONIC__$servicenow_ui_effect_http;","export const openFrameConfigQuery_read = `query {\n    AppOpenframe_Query {\n      showFrame\n      config {\n        title\n        subTitle\n        configuration\n        height\n        width\n        navIconClass\n        titleIcon\n        collapsedViewEnabled\n        iframeAllow\n        showPresenceIndicator\n        url {\n          authority\n          fragment\n          host\n          path\n          port\n          query\n          scheme\n          schemeSpecificPart\n          userInfo\n          isAbsolute\n          isOpaque\n          stringValue\n        }\n      }\n    }\n  }`;\n\nexport const contactDetailsQuery_read = `query ($sys_id: String) {\n    GlideRecord_Query {\n      customer_contact(sys_id: $sys_id) {\n        _results {\n          name {\n            displayValue\n          }\n          sys_class_name {\n            displayValue\n            value\n          }\n          sys_id{\n            value\n          }\n          account {\n            _reference {\n              sys_class_name {\n                displayValue\n                value\n              }\n              sys_id{\n                value\n              }\n              name {\n                displayValue\n              }\n  \n            }\n          }\n        }\n      }\n    }\n  }\n  `;\n  \nexport const caseDetailsQuery_read = `query ($sys_id: String) {\n    GlideRecord_Query {\n      sn_customerservice_case(sys_id: $sys_id) {\n        _results {\n          number{\n            displayValue\n          }\n          sys_class_name {\n            displayValue\n            value\n          }\n          sys_id{\n            value\n          }\n          account {\n            _reference {\n              name {\n                value\n                displayValue\n              }\n              sys_id {\n                value\n                displayValue\n              }\n            }\n          }\n          contact {\n            _reference {\n              name{\n                displayValue\n              }\n              user_name {\n                displayValue\n                value\n              }\n              sys_id{\n                value\n              }\n            }\n          }\n          consumer{\n            _reference {\n              name{\n                value\n              }\n              sys_id {\n                value\n              }\n              user {\n                displayValue\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  `;\n\nexport const accountDetailsQuery_read = `query ($sys_id: String) {\n    GlideRecord_Query {\n      customer_account(sys_id: $sys_id) {\n        _results {\n          name {\n            displayValue\n          }\n          sys_class_name {\n            displayValue\n            value\n          }\n          sys_id{\n            value\n          }\n          primary_contact {\n            _reference {\n              sys_class_name {\n                displayValue\n                value\n              }\n              sys_id{\n                value\n              }\n              name {\n                displayValue\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  `;","export const agentPresenceMutation_update = `mutation($state: String!) {\n    AppOpenframe_Mutation {\n        AppOpenframe_insert_or_update_agent_presence(state: $state)\n    }\n}`;","module.exports = __TECTONIC__sn_seismic_post_message;","export default[\n\t'ECHO',\n\t'PARTNER',\n\t'GET_CONFIGREQUEST',\n\t'RESPONSE',\n\t'SET_TOP_FRAME_URL',\n\t'OPENFRAME_INIT',\n\t'VISIBLE',\n\t'CALL_EVENT',\n\t'OPENFRAME_BEFORE_DESTROY',\n\t'POST_TO_PARTNER',\n\t// OPENFRAME events\n\t'openframe_header_icon_clicked',\n\t'openframe_hidden',\n\t'openframe_set_size',\n\t'openframe_collapse',\n\t'openframe_expand',\n\t// partner events\n\t'openframe_init', /* {\"type\":\"NOW.PostMessage\",\"eventName\":\"openframe_request\",\"args\":{\"id\":\"openframe_init_12657821564.18263\",\"method\":\"openframe_init\",\"payload\":{}}}\" */\n\t'openframe_show',\n\t'openframe_hide', //\n\t'openframe_visible',\t\n\t'openframe_request',\n\t'openframe_set_title',\n\t'openframe_set_subtitle',\n\t// 'openframe_response\n\t'openframe_get_config', // {\"type\":\"NOW.PostMessage\",\"eventName\":\"openframe_request\",\"args\":{\"id\":\"openframe_get_config_1207795260893.5676\",\"method\":\"openframe_get_config\",\"payload\":{}}}\n\t'openframe_set_header_title', /* \"{\"type\":\"NOW.PostMessage\",\"eventName\":\"openframe_set_header_title\",\"args\":{\"title\":\"Outgoing Call\"}}\"\n\tSUBTITLE : \"{\"type\":\"NOW.PostMessage\",\n\t\"eventName\":\"openframe_set_header_title\",\"args\":{\"subtitle\":\"+14086809142\"}}\" */\n\t'openframe_set_header_title_icon', // \"{\"type\":\"NOW.PostMessage\",\"eventName\":\"openframe_set_header_title_icon\",\"args\":{\"id\":11,\"imageTitle\":\"Outgoing Call\",\"imageURL\":\"/images/com.sn_openframe/outgoing_call.png\"}}\"\n\t'openframe_set_header_icons', // \"{\"type\":\"NOW.PostMessage\",\"eventName\":\"openframe_set_header_icons\",\"args\":[{\"id\":0,\"imageTitle\":\"Mute\",\"imageURL\":\"/images/com.sn_openframe/mute.png\"},{\"id\":2,\"imageTitle\":\"Hold\",\"imageURL\":\"/images/com.sn_openframe/hold.png\"},{\"id\":5,\"imageTitle\":\"Hide Dialpad\",\"imageURL\":\"/images/com.sn_openframe/dial_pad_active.png\"}]}\"\n\t'openframe_set_top_frame_url',\n\t'openframe_communication_failure',\n\t'openframe_interaction_request',\n\t'openframe_interaction_response',\n\t'openframe_interaction_transfer',\n\t'openframe_open_interaction',\n\t'openframe_set_frame_mode',\n\t'openframe_set_height',\n\t'openframe_set_width',\n\t'openframe_set_presence_indicator',\n\t'agent_presence_state_watcher',\n\t'openframe_awa_agent_presence',\n\t'openframe_init_complete',\n\t'openframe_agent_off_interaction'\n];\n","import { UPDATE_MODULE_STATUS } from './constants';\n\nexport function updatePhoneOnToolbar(dispatch, visible, icon_name, isLegacy) {\n\tconst action = {\n\t\tid: 'cti',\n\t\tshow: visible,\n\t\ticon: icon_name\n\t};\n\tif (isLegacy) {\n\t\tdispatch(UPDATE_MODULE_STATUS, action);\n\t} else {\n\t\tdispatch('PRIME_NAV_SOURCE_CHANGED', action);\n\t}\n}\n\nexport function updateOpenframeAction(dispatch, select, isLegacy) {\n\tconst action = {\n\t\tid: 'cti',\n\t\tselect: select\n\t};\n\tif (isLegacy) {\n\t\tdispatch(UPDATE_MODULE_STATUS, action);\n\t} else {\n\t\tdispatch('HANDLE_OPENED_PROPERTY_CHANGE', select);\n\t\tdispatch('PRIME_NAV_SOURCE_CHANGED', action);\n\t}\n}\n","import { actionTypesToProps } from './constants';\n\nconst constructMessage = (event, message) => {\n\treturn event === 'POST_TO_PARTNER' ? JSON.stringify(message) : message;\n};\n\nconst deconstructMessage = (data) => {\n\tif (typeof data === 'object') {\n\t\treturn data;\n\t}\n\n\tconst parsed = JSON.parse(data);\n\tconst { args: message, eventName: event } = parsed;\n\tif (event === 'openframe_set_header_title') {\n\t\tif (message && message.title) {\n\t\t\treturn {\n\t\t\t\tevent: 'openframe_set_title',\n\t\t\t\tmessage\n\t\t\t};\n\t\t} else if (message && message.subtitle) {\n\t\t\treturn {\n\t\t\t\tevent: 'openframe_set_subtitle',\n\t\t\t\tmessage\n\t\t\t};\n\t\t}\n\t}\n\treturn {\n\t\tevent,\n\t\tmessage\n\t};\n};\n\nconst transform = (props, event, message) => {\n\tconst prevData = props[actionTypesToProps[event]] || {};\n\treturn Object.assign({}, prevData, message);\n};\n\nexport { constructMessage, deconstructMessage, transform };\n","import { get } from 'lodash';\n\nexport const caseContextHelper = (results) => {\n\tif (!results) {\n\t\treturn [];\n\t}\n\tlet entityData = [];\n\n\tlet caseId = get(results, 'sys_id.value', false);\n\tif (caseId) {\n\t\tlet caseEntity = {\n\t\t\tentity: results.sys_class_name.value,\n\t\t\tquery: `sys_id={results.sys_id.value}`,\n\t\t\tvalue: results.number.displayValue,\n\t\t\tlabel: results.sys_class_name.displayValue\n\t\t};\n\t\tentityData.push(caseEntity);\n\t}\n\n\tlet accountId = get(results, 'account._reference.sys_id.value', false);\n\tif (accountId) {\n\t\tlet acc = results.account._reference;\n\t\tentityData.push({\n\t\t\tentity: 'customer_account',\n\t\t\tquery: `sys_id=${acc.sys_id.value}`,\n\t\t\tvalue: acc.name.value,\n\t\t\tlabel: 'Account'\n\t\t});\n\t}\n\n\tlet contactId = get(results, 'contact._reference.sys_id.value', false);\n\tif (contactId) {\n\t\tlet contact = results.contact._reference;\n\t\tentityData.push({\n\t\t\tentity: 'customer_contact',\n\t\t\tquery: `sys_id=${contact.sys_id.value}`,\n\t\t\tvalue: contact.name.displayValue,\n\t\t\tlabel: 'Contact'\n\t\t});\n\t}\n\n\tlet consumerId = get(results, 'consumer._reference.sys_id.value', false);\n\tif (consumerId) {\n\t\tlet consumer = results.consumer._reference;\n\t\tentityData.push({\n\t\t\tentity: 'csm_consumer',\n\t\t\tquery: `sys_id=${consumer.sys_id.value}`,\n\t\t\tvalue: consumer.name.value,\n\t\t\tlabel: 'Consumer'\n\t\t});\n\t}\n\treturn entityData;\n};\n\nexport let caseInteractionHelper = (results) => {\n\tif (!results) {\n\t\treturn {};\n\t}\n\tlet interaction = {\n\t\tinteractionSysId: -1,\n\t\tdirection: 'outbound'\n\t};\n\n\tlet customerCase = get(results, 'sys_id.value', false);\n\tif (customerCase) {\n\t\tinteraction.context_document = customerCase;\n\t\tinteraction.context_table = results.sys_class_name.value;\n\t}\n\n\tlet account = get(results, 'account._reference.sys_id.value', false);\n\tif (account) {\n\t\tinteraction.account = account;\n\t}\n\n\tlet contact = get(results, 'contact._reference.sys_id.value', false);\n\tif (contact) {\n\t\tinteraction.contact = contact;\n\t}\n\n\tlet consumer = get(results, 'consumer._reference.sys_id.value', false);\n\tif (consumer) {\n\t\tinteraction.contact = consumer;\n\t}\n\n\treturn interaction;\n\n};\n","import { get } from 'lodash';\nexport const accountContextHelper = (results) => {\n\tlet entityData = [];\n\tif (!results) {\n\t\treturn [];\n\t}\n\n\tlet accountId = results.sys_id.value;\n\tif (accountId) {\n\t\tentityData.push({\n\t\t\tentity: results.sys_class_name.value,\n\t\t\tquery: `sys_id=${accountId}`,\n\t\t\tvalue: results.name.displayValue,\n\t\t\tlabel: results.sys_class_name.displayValue\n\t\t});\n\t}\n\n\tlet primaryContactId = get(results, 'primary_contact._reference.sys_id.value', false);\n\tif (primaryContactId) {\n\t\tentityData.push({\n\t\t\tentity: results.primary_contact._reference.sys_class_name.value,\n\t\t\tquery: `sys_id=${primaryContactId}`,\n\t\t\tvalue: results.primary_contact._reference.name.displayValue,\n\t\t\tlabel: results.primary_contact._reference.sys_class_name.displayValue\n\t\t});\n\t}\n\treturn entityData;\n};\n\nexport const accountInteractionHelper = (results) => {\n\tif (!results) {\n\t\treturn {};\n\t}\n\n\tlet interaction = {\n\t\tinteractionSysId: -1,\n\t\tdirection: 'outbound'\n\t};\n\tlet account = get(results, 'sys_id.value', false);\n\tif (account) {\n\t\tinteraction.context_document = account;\n\t\tinteraction.context_table = results.sys_class_name.value;\n\t\tinteraction.account = account;\n\t}\n\treturn interaction;\n};","import { get } from 'lodash';\n\nexport const contactContextHelper = (results) => {\n\tif (!results) {\n\t\treturn [];\n\t}\n\tlet entityData = [];\n\n\tlet contactId = get(results, 'sys_id.value', false);\n\tif (contactId) {\n\t\tentityData.push({\n\t\t\tentity: results.sys_class_name.value,\n\t\t\tquery: `sys_id=${results.sys_id.value}`,\n\t\t\tvalue: results.name.displayValue,\n\t\t\tlabel: results.sys_class_name.displayValue\n\t\t});\n\t}\n\n\tlet accountId = get(results, 'account._reference.sys_id.value', false);\n\tif (accountId) {\n\t\tentityData.push({\n\t\t\tentity: results.account._reference.sys_class_name.value,\n\t\t\tquery: `sys_id=${accountId}`,\n\t\t\tvalue: results.account._reference.name.displayValue,\n\t\t\tlabel: results.account._reference.sys_class_name.displayValue\n\t\t});\n\t}\n\treturn entityData;\n};\n\nexport const contactInteractionHelper = (results) => {\n\tif (!results) {\n\t\treturn {};\n\t}\n\tlet interaction = {\n\t\tinteractionSysId: -1,\n\t\tdirection: 'outbound'\n\t};\n\n\tlet contact = get(results, 'sys_id.value', false);\n\tif (contact) {\n\t\tinteraction.context_document = contact;\n\t\tinteraction.context_table = results.sys_class_name.value;\n\t\tinteraction.contact = contact;\n\t}\n\n\tlet account = get(results, 'account._reference.sys_id.value', false);\n\tif (account) {\n\t\tinteraction.account = account;\n\t}\n\treturn interaction;\n};","import { get } from 'lodash';\nimport { createUpdateStateEffect } from '@servicenow/ui-effect-update-state';\n\n/** OpenframeAPI header events effect handlers - START */\nexport const openframeHeaderTitle = ({state, action, updateState}) => {\n\tlet title = get(action, 'payload.title');\n\tlet openframeSetTitle = {};\n\topenframeSetTitle.title = title;\n\tif (state.openframeSetTitle != openframeSetTitle) {\n\t\tupdateState({\n\t\t\tpath: 'openframeSetTitle',\n\t\t\tvalue: openframeSetTitle,\n\t\t\toperation: 'set'\n\t\t});\n\t};\n};\n\nexport const openframeHeaderSubTitle = ({state, action, updateState}) => {\n\tlet subtitle = get(action, 'payload.subtitle');\n\tlet openframeSetSubtitle = {};\n\topenframeSetSubtitle.subtitle = subtitle;\n\tif (state.openframeSetSubtitle != openframeSetSubtitle) {\n\t\tupdateState({\n\t\t\tpath: 'openframeSetSubtitle',\n\t\t\tvalue: openframeSetSubtitle,\n\t\t\toperation: 'set'\n\t\t});\n\t};\n};\n\nexport const openframeHeaderTitleIcon = ({state, action, updateState}) => {\n\tlet titleIcon = get(action, 'payload');\n\tdelete titleIcon.meta;\n\tlet openframeSetHeaderTitleIcon = {};\n\topenframeSetHeaderTitleIcon = titleIcon;\n\tif (state.openframeSetHeaderTitleIcon != openframeSetHeaderTitleIcon) {\n\t\tupdateState({\n\t\t\tpath: 'openframeSetHeaderTitleIcon',\n\t\t\tvalue: openframeSetHeaderTitleIcon,\n\t\t\toperation: 'set'\n\t\t});\n\t};\n};\n\nexport const openframeFooterIcons = ({ action, updateState, state}) => {\n\tlet icons = get(action, 'payload');\n\tdelete icons.meta;\n\tlet openframeSetIcons = {};\n\topenframeSetIcons = icons;\n\tupdateState({\n\t\topenframeSetIcons\n\t});\n};\n/** OpenframeAPI header events effect handlers - END */\n","module.exports = __TECTONIC__$servicenow_ui_effect_update_state;","import {getProperty} from 'sn-uxpage-presource';\nimport { get } from 'lodash';\nimport {\n\tINITIALIZE_POST_MESSAGE,\n\tOPENFRAME_COMPONENT_WORKSPACE_LOAD_RETRY_COUNT, START_OPENFRAME_LOADING, NAV_SELECTED, VIEW_PHONE\n} from './constants';\nimport {findTabbableNodes} from \"@servicenow/behavior-key-binding\";\n\nvar checkPresourceConfiguration = () => {\n\treturn new Promise((resolve, reject) => {\n\t\tconst maxAttempts = getProperty(OPENFRAME_COMPONENT_WORKSPACE_LOAD_RETRY_COUNT) || 3;\n\t\tlet config = null;\n\t\tlet attempts = 0;\n\t\tconst retryTime = 1000;\n\n\t\tlet interval = setInterval(() => {\n\t\t\tconst openframeConfig = get(window ,'ux_globals.presource[\"sn-component-openframe:openFrameConfig\"]', false);\n\t\t\tconfig = get(openframeConfig, 'data.AppOpenframe_Query');\n\t\t\tif(get(config, 'showFrame')==='true') {\n\t\t\t\tif (get(config, 'config.url', false)) {\n\t\t\t\t\tclearInterval(interval);\n\t\t\t\t\treturn resolve({\n\t\t\t\t\t\tdispatchInit: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tattempts++;\n\t\t\tif(attempts>=maxAttempts){\n\t\t\t\tclearInterval(interval);\n\t\t\t\treturn reject({\n\t\t\t\t\tdispatchInit: false\n\t\t\t\t});\n\t\t\t}\n\t\t}, retryTime);\n\t});\n};\n\nfunction getFocusedElement(host) {\n\treturn host.shadowRoot.activeElement;\n}\n\nfunction afterNextRender() {\n\treturn new Promise((resolve) =>\n\t\tsetTimeout(() => window.requestAnimationFrame(resolve), 0)\n\t);\n}\n\nexport function handleOnBootstrap(coeffects) {\n\tlet {dispatch, state} = coeffects;\n\tif(state.properties.configuration){\n\t\tdispatch(INITIALIZE_POST_MESSAGE);\n\t\tdispatch(START_OPENFRAME_LOADING);\n\t} else {\n\t\tcheckPresourceConfiguration()\n\t\t.then(() => {\n\t\t\tdispatch(INITIALIZE_POST_MESSAGE);\n\t\t\tdispatch(START_OPENFRAME_LOADING);\n\t\t}, ()=>{});\n\t}\n\n}\n\nexport async function handleOnPropertyChange({action, updateProperties, state, dispatch}) {\n\tconst {host, name, value} = action.payload;\n\tconst {number, table, sysId, source, isLegacy} = state.properties;\n\tif (host.visible && !getFocusedElement(host)) {\n\t\tawait afterNextRender();\n\t\tconst tabbableNodes = findTabbableNodes(host);\n\t\tif (tabbableNodes[0]) {\n\t\t\ttabbableNodes[0].focus();\n\t\t}\n\t}\n\n\tif(name === 'openPhone'){\n\t\tif(isLegacy){\n\t\t\tdispatch(VIEW_PHONE, value);\n\t\t}\n\t}\n\n\tif (name === 'opened' ) {\n\t\tupdateProperties({\n\t\t\tselectedNav: {\n\t\t\t\tid: 'cti',\n\t\t\t\tselect: value\n\t\t\t}\n\t\t});\n\t}\n\tif(name === 'selectedNav'){\n\t\tdispatch(NAV_SELECTED, value);\n\t}\n\n\tif(!isLegacy && name === 'source' && (value ==='form_field' || value ==='ribbon')){\n\t\tdispatch(VIEW_PHONE, {number: number, sysId: sysId, table: table, source: source});\n\t}\n}\n","import { createRef } from '@servicenow/ui-renderer-snabbdom';\nimport { get } from 'lodash';\nimport { frameResponse } from './openFrameEventsHelper';\nimport { OPENFRAME_ACTIONS } from \"./openframe.effects\";\nimport { t } from 'sn-translate';\nimport style from './_componentOpenframe.scss';\nimport \"@servicenow/now-legacy-icon\";\nimport '../openframeWrapper/openframeWrapperElement'\n\nfunction _getCSSClassNameForMainFrame(state) {\n\tif (!state.properties.isLegacy) {\n\t\tif (get(state.properties.configuration, 'showFrame', false)) {\n\t\t\treturn state.properties.configuration.position ?\n\t\t\t\tstate.properties.configuration.position :\n\t\t\t\t'bottom-left';\n\t\t}\n\t\treturn 'hide-frame';\n\t} else {\n\t\tif (get(state, 'local.visible', false) && get(state, 'config.showFrame')) {\n\t\t\tif (state.properties.position) {\n\t\t\t\treturn state.properties.position;\n\t\t\t} else {\n\t\t\t\treturn 'bottom-left';\n\t\t\t}\n\t\t}\n\t\treturn 'hide-frame';\n\t}\n}\n\nexport const iconClicked = (pm, icon) => {\n\tpm.post('openframe_header_icon_clicked', frameResponse('openframe_header_icon_clicked', icon));\n\tpm.post('openframe_icon_clicked', frameResponse('openframe_icon_clicked', icon));\n};\nexport const headerIconClicked = (pm, titleIcon) => {\n\tpm.post('openframe_header_icon_clicked', frameResponse('openframe_header_icon_clicked', titleIcon));\n\tpm.post('openframe_title_icon_clicked', frameResponse('openframe_title_icon_clicked', titleIcon));\n};\nexport const resizeIconClicked = (dispatch, pm, newFrameMode) => {\n\tdispatch(OPENFRAME_ACTIONS.OPENFRAME_SET_FRAME_MODE, newFrameMode ? { 'message': 'collapse' } : { 'message': 'expand' })\n};\n\nexport const view = (state, dispatch) => {\n\tlet { config, openframeSetTitle, openframeSetSubtitle, openframeRequest, openframeSetHeaderTitleIcon, openframeSetIcons, openInteraction, openframeSetSize, openframeSetHeight, openframeSetWidth } = state;\n\tlet visible = _getCSSClassNameForMainFrame(state);\n\tlet headerStyle = {\n\t\twidth: get(openframeSetSize, 'width') ? openframeSetSize.width : '320px',\n\t\theight: '100px'\n\t};\n\tlet finalHeight, finalWidth;\n\tif (openframeSetSize && openframeSetSize.height) {\n\t\tfinalHeight = openframeSetSize.height;\n\t}\n\tif (openframeSetSize && openframeSetSize.width) {\n\t\tfinalWidth = openframeSetSize.width;\n\t}\n\tlet titleicon = {imageURL:''};\n\tlet isLegacy = state.properties.isLegacy;\n\tlet { height: frameHeight, width: frameWidth, title: defaultTitle, subTitle: defaultSubTitle, iframeAllow: iframeAllow, collapsedViewEnabled: collapsedViewEnabled, titleIcon: defaultTitleIcon } = isLegacy ? get(state, 'config.config', '') : get(state, 'properties.configuration.config', '') ;\n\n\tlet bodyStyle = {\n\t\twidth: (finalWidth ? finalWidth : frameWidth) + 'px',\n\t};\n\ttitleicon.imageURL = defaultTitleIcon;\n\ttitleicon = (get(state, 'openframeSetHeaderTitleIcon.imageURL', false)) ? state.openframeSetHeaderTitleIcon : titleicon;\n\n\tlet frameStyle = {\n\t\twidth: (finalWidth ? finalWidth : frameWidth) + 'px',\n\t\theight: (finalHeight ? finalHeight : frameHeight) + 'px'\n\t};\n\tlet hostOrigin = state.hostOrigin;\n\tlet iframeAllowAttr = iframeAllow ? iframeAllow : '';\n\tconst iframeRef = createRef();\n\tlet footerStyle = { height: Math.ceil(get(openframeSetIcons, 'message.length', 0) / 5) * 50 + 'px' };\n\tlet showCollapseExpand = collapsedViewEnabled==='true';\n\tlet showOpenframeWrapper = state.initializeWrapper;\n\tconst opened = !isLegacy ? state.properties.opened : true;\n\treturn (\n\t\t<section className=\"sn-component-openframe\" hidden={!opened }>\n\t\t\t{showOpenframeWrapper ? (!isLegacy ? <sn-openframe-wrapper user={state.properties.user}></sn-openframe-wrapper> : <sn-openframe-wrapper></sn-openframe-wrapper>) : null}\n\t\t\t<div className={`sn-openframe sn-openframe-mainFrame ${visible}`} style={bodyStyle}>\n\t\t\t\t<div className=\"handle sn-openframe-header\">\n\t\t\t\t\t<div className=\"sn-openframe-header-content -static\">\n\t\t\t\t\t\t<span tabIndex={0} role=\"button\" on-click={() => { headerIconClicked(state.pm, state.openframeSetHeaderTitleIcon); }}\n\t\t\t\t\t\t\tonkeydown={(event) => { if (event.key == 'Enter') { headerIconClicked(state.pm, state.openframeSetHeaderTitleIcon); } }}>\n\t\t\t\t\t\t\t{get(titleicon, 'imageURL', false)\n\t\t\t\t\t\t\t\t? <img src={titleicon.imageURL} aria-label={titleicon.imageTitle} />\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"sn-openframe-header-content\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t{get(openframeSetTitle, 'title', false) || defaultTitle}\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{get(openframeSetSubtitle, 'subtitle', false) || defaultSubTitle}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t{showCollapseExpand ? (\n\t\t\t\t\t\t<div className=\"sn-openframe-header-content\">\n\t\t\t\t\t\t\t{state.showMinimize.value ? (\n\t\t\t\t\t\t\t\t<span tabIndex={0} role=\"button\" on-click={() => { resizeIconClicked(dispatch, state.pm, false); }}\n\t\t\t\t\t\t\t\t\tonkeydown={(event) => { if (event.key == 'Enter') { resizeIconClicked(dispatch, state.pm, false); } }}>\n\t\t\t\t\t\t\t\t\t<now-legacy-icon type=\"plus-square\" weight=\"bold\" size=\"lg\" aria-label={t('Expand')}></now-legacy-icon>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<span tabIndex={0} role=\"button\" on-click={() => { resizeIconClicked(dispatch, state.pm, true); }}\n\t\t\t\t\t\t\t\t\t\tonkeydown={(event) => { if (event.key == 'Enter') { resizeIconClicked(dispatch, state.pm, true); } }}>\n\t\t\t\t\t\t\t\t\t\t<now-legacy-icon type=\"minus-square\" weight=\"bold\" size=\"lg\" aria-label={t('Collapse')}></now-legacy-icon>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>) : (<div className=\"sn-openframe-header-content\" />)\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"sn-openframe-frame\" style={{ height: ((finalHeight ? finalHeight : frameHeight) - 1) + 'px' }} >\n\t\t\t\t\t{hostOrigin ? <iframe src={hostOrigin} id=\"iframe\" className=\"frame\" aria-label={t('Openframe')} ref={iframeRef}\n\t\t\t\t\t\tstyle={frameStyle}\n\t\t\t\t\t\tallow={iframeAllowAttr} src={hostOrigin}\n\t\t\t\t\t\ton-load={() => { dispatch(OPENFRAME_ACTIONS.OPENFRAME_LOCAL_IFRAME_LOAD, { contentWindow: iframeRef.current.contentWindow }) }}\n\t\t\t\t\t/> : null}\n\t\t\t\t</div>\n\t\t\t\t{<div className=\"sn-openframe-footer\" style={footerStyle}>\n\t\t\t\t\t{get(openframeSetIcons, 'message', []).map((item) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button type=\"button\" className=\"sn-openframe-footer-btn\" key={item.imageURL} on-click={() => {\n\t\t\t\t\t\t\t\ticonClicked(state.pm, item);\n\t\t\t\t\t\t\t}}><img src={item.imageURL} aria-label={t(item.imageTitle)} /></button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>}\n\t\t\t</div>\n\n\t\t</section>\n    );\n};\n\n\n","module.exports = __TECTONIC__sn_translate;","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{box-sizing:border-box;line-height:var(--now-line-height,1.25);font-family:var(--now-font-family,\\\"Source Sans Pro\\\",\\\"Helvetica Neue\\\",helvetica,arial,sans-serif)}:host([hidden]){display:none}*,:after,:before{box-sizing:border-box}.sn-openframe{background:RBG(var(--now-color--background-primary,var(--now-color--neutral-0,255,255,255)));border:RGB(var(--now-color--neutral-4,191,197,198));border-radius:.125rem;box-shadow:0 4px .5rem 0 RGBA(var(--now-color--neutral-21,0,0,0),.25);color:RGB(var(--now-color--text-primary,var(--now-color--neutral-18,22,27,28)));font-family:Source Sans Pro,Helvetica Neue,helvetica,arial,sans-serif;font-size:1.25rem;overflow:hidden;position:relative;width:18.5rem;z-index:1000;font-style:normal;font-variant:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;text-indent:0;text-shadow:none;white-space:normal}:host(:not([dir=rtl])) .sn-openframe,:root:not([dir=rtl]) .sn-openframe{text-align:left}:host([dir=rtl]) .sn-openframe,:root[dir=rtl] .sn-openframe{text-align:right}.sn-openframe-mainFrame{border-width:0;overflow:visible;position:fixed;width:20rem;z-index:900}.sn-openframe-header{background:RGB(var(--now-color--neutral-12,66,80,81));border-radius:.125rem .125rem 0 0;display:flex;height:4rem;padding:.75rem 0;position:relative;width:100%}.sn-openframe-header-content{display:inline-flex;flex:1 1 auto;flex-direction:column;overflow:hidden;padding:0 .5rem;position:relative}:host(:not([dir=rtl])) .sn-openframe-header-content:first-of-type,:root:not([dir=rtl]) .sn-openframe-header-content:first-of-type{padding-left:.75rem}:host([dir=rtl]) .sn-openframe-header-content:first-of-type,:root[dir=rtl] .sn-openframe-header-content:first-of-type{padding-right:.75rem}:host(:not([dir=rtl])) .sn-openframe-header-content:first-of-type,:root:not([dir=rtl]) .sn-openframe-header-content:first-of-type{padding-right:0}:host([dir=rtl]) .sn-openframe-header-content:first-of-type,:root[dir=rtl] .sn-openframe-header-content:first-of-type{padding-left:0}.sn-openframe-header-content.is-last-of-type,.sn-openframe-header-content:last-of-type{flex:0 0 auto}:host(:not([dir=rtl])) .sn-openframe-header-content.is-last-of-type,:host(:not([dir=rtl])) .sn-openframe-header-content:last-of-type,:root:not([dir=rtl]) .sn-openframe-header-content.is-last-of-type,:root:not([dir=rtl]) .sn-openframe-header-content:last-of-type{padding-right:.75rem}:host([dir=rtl]) .sn-openframe-header-content.is-last-of-type,:host([dir=rtl]) .sn-openframe-header-content:last-of-type,:root[dir=rtl] .sn-openframe-header-content.is-last-of-type,:root[dir=rtl] .sn-openframe-header-content:last-of-type{padding-left:.75rem}:host(:not([dir=rtl])) .sn-openframe-header-content.is-last-of-type,:host(:not([dir=rtl])) .sn-openframe-header-content:last-of-type,:root:not([dir=rtl]) .sn-openframe-header-content.is-last-of-type,:root:not([dir=rtl]) .sn-openframe-header-content:last-of-type{padding-left:0}:host([dir=rtl]) .sn-openframe-header-content.is-last-of-type,:host([dir=rtl]) .sn-openframe-header-content:last-of-type,:root[dir=rtl] .sn-openframe-header-content.is-last-of-type,:root[dir=rtl] .sn-openframe-header-content:last-of-type{padding-right:0}.sn-openframe-header-content.-static{flex:0 0 auto}.sn-openframe-header-content span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:RGB(var(--now-color--neutral-0,255,255,255));display:block;font-size:1rem;line-height:1.25;position:relative}.sn-openframe-header-content strong{font-size:1rem;font-weight:700}.sn-openframe-header-content img{color:RGB(var(--now-color--neutral-4,191,197,198));height:1rem;width:1rem}.sn-openframe-footer{background:RGB(var(--now-color--neutral-8,117,130,132));border-radius:0 0 .125rem .125rem;display:flex;height:3.125rem;overflow:hidden;position:relative;width:100%}.sn-openframe-footer-btn{align-items:center;background:transparent;border:none;border-radius:0;color:RGB(var(--now-color--neutral-0,255,255,255));cursor:pointer;display:inline-flex;flex:1 1 3.625rem;font-size:1.25rem;justify-content:center}:host(:not([dir=rtl])) .sn-openframe-footer-btn:first-of-type,:root:not([dir=rtl]) .sn-openframe-footer-btn:first-of-type{border-bottom-left-radius:.125rem}:host(:not([dir=rtl])) .sn-openframe-footer-btn:last-of-type,:host([dir=rtl]) .sn-openframe-footer-btn:first-of-type,:root:not([dir=rtl]) .sn-openframe-footer-btn:last-of-type,:root[dir=rtl] .sn-openframe-footer-btn:first-of-type{border-bottom-right-radius:.125rem}:host([dir=rtl]) .sn-openframe-footer-btn:last-of-type,:root[dir=rtl] .sn-openframe-footer-btn:last-of-type{border-bottom-left-radius:.125rem}.sn-openframe-footer-btn:only-of-type{border-radius:0}.sn-openframe-footer-btn.is-hover,.sn-openframe-footer-btn:hover{background:RGB(var(--now-color--neutral-10,80,97,99))}.sn-openframe-footer-btn.is-focus,.sn-openframe-footer-btn:focus{background:RGB(var(--now-color--neutral-12,66,80,81));outline:none}.sn-openframe-footer-btn.is-selected{background:RGB(var(--now-color--neutral-12,66,80,81))}.sn-openframe .select2-choice,.sn-openframe .select2-container{align-items:center;background:RGB(var(--now-color--background-secondary,var(--now-color--neutral-1,246,247,247)));border:none!important;cursor:pointer;display:flex;justify-content:center;height:3.5rem;margin:0;padding:.25rem 0;position:relative;width:100%!important}.sn-openframe .select2-choice:focus,.sn-openframe .select2-container:focus{outline:none}.sn-openframe .select2-container-active{background:RGB(var(--now-color--background-secondary,var(--now-color--neutral-1,246,247,247)))!important}.sn-openframe .select2-chosen{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:inline-block;font-size:1.25rem;font-weight:700;line-height:1.25;margin-top:0;margin-bottom:0;max-width:80%}:host(:not([dir=rtl])) .sn-openframe .select2-chosen,:root:not([dir=rtl]) .sn-openframe .select2-chosen{margin-right:.5rem}:host([dir=rtl]) .sn-openframe .select2-chosen,:root[dir=rtl] .sn-openframe .select2-chosen{margin-left:.5rem}:host(:not([dir=rtl])) .sn-openframe .select2-chosen,:root:not([dir=rtl]) .sn-openframe .select2-chosen{margin-left:0}:host([dir=rtl]) .sn-openframe .select2-chosen,:root[dir=rtl] .sn-openframe .select2-chosen{margin-right:0}.sn-openframe .select2-chosen>div{align-items:center;display:inline-flex}.sn-openframe .select2-arrow{height:auto;left:auto;right:auto;position:static;top:auto;width:auto}.sn-openframe .select2-arrow b:before{font-size:.4375rem}.sn-openframe .select2-drop{margin:0;width:100%!important}.bottom-left{bottom:1rem}:host(:not([dir=rtl])) .bottom-left,:root:not([dir=rtl]) .bottom-left{left:0}:host([dir=rtl]) .bottom-left,:root[dir=rtl] .bottom-left{right:0}:host(:not([dir=rtl])) .bottom-left,:root:not([dir=rtl]) .bottom-left{margin-left:3.5rem}:host([dir=rtl]) .bottom-left,:root[dir=rtl] .bottom-left{margin-right:3.5rem}.top-right{top:4.375rem}:host(:not([dir=rtl])) .top-right,:root:not([dir=rtl]) .top-right{right:0}:host([dir=rtl]) .top-right,:root[dir=rtl] .top-right{left:0}:host(:not([dir=rtl])) .top-right,:root:not([dir=rtl]) .top-right{margin-right:.625rem}:host([dir=rtl]) .top-right,:root[dir=rtl] .top-right{margin-left:.625rem}.frame{height:17.625rem;border:0}.hide-frame{visibility:hidden;display:none}:host(:not([dir=rtl])) .openframe-icon,:root:not([dir=rtl]) .openframe-icon{margin-right:.5rem}:host([dir=rtl]) .openframe-icon,:root[dir=rtl] .openframe-icon{margin-left:.5rem}.openframe-hidden{display:none!important}.icons{margin:.25rem;display:inline-block}\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","module.exports = __TECTONIC__$servicenow_now_legacy_icon;","import { createCustomElement, actionTypes } from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nconst {\n\tCOMPONENT_CONNECTED,\n\tCOMPONENT_DISCONNECTED\n} = actionTypes;\nimport {preUserData} from 'sn-uxpage-presource';\nimport {\n\thandleOnComponentConnected,\n\thandleOnComponentDisconnected,\n\tupdateStateWithPresenceData,\n\tworkItemSubscribed,\n\tupdateWorkItemsHandler,\n\treadAwaWorkItem,\n\tinteractionUpdated,\n\tinteractionUnassigned\n} from './actionHandlers';\nimport {\n\tagentPresenceAMBChannel,\n\tagentChannelPresenceAMBChannel,\n\tpresenceStateAMBChannel,\n\tserviceChannelAMBChannel,\n\tgroupMemberAMBChannel,\n\treadPresenceStateData,\n\tworkItemSubscription,\n\texecuteAWAWorkitemReadHandler,\n\tawaWorkItemRejectionAMBChannel,\n\tsubscribeInteractionChanges\n} from './dataSources';\n\nimport {\n\tSUBSCRIBE_AGENT_PRESENCE,\n\tSUBSCRIBE_AGENT_CHANNEL_AVAIABILITY,\n\tSUBSCRIBE_PRESENCE_STATE,\n\tSUBSCRIBE_SERVICE_CHANNEL,\n\tSUBSCRIBE_GROUP_MEMBER,\n\tREAD_PRESENCE_STATE_DATA, \n\tUPDATE_STATE_WITH_PRESENCE_DATA,\n\tWORK_ITEM_SUBSCRIPTION,\n\tWORK_ITEMS_SUBSCRIBED,\n\tWORK_ITEMS_CHANGED,\n\tSUBSCRIBE_WORK_ITEM_REJECT,\n\tWORK_ITEM_REJECT_EVENT,\n\tEXECUTE_AWA_WORK_ITEM_READ,\n\tWORK_ITEM_REJECT_SUCCESS,\n\tSUBSCRIBE_INTERACTION_CHANGES,\n\tINTERACTION_UPDATED\n} from './constants';\n\nexport default createCustomElement('sn-openframe-wrapper', {\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview: null\n\t},\n\tproperties: {\n\t\tuser:{}\n\t},\n\tbehaviors: [preUserData],\n\tactionHandlers: {\n\t\t[COMPONENT_CONNECTED]: handleOnComponentConnected,\n\t\t[COMPONENT_DISCONNECTED]: handleOnComponentDisconnected,\n\t\t[READ_PRESENCE_STATE_DATA]: readPresenceStateData,\n\t\t[UPDATE_STATE_WITH_PRESENCE_DATA]: updateStateWithPresenceData,\n\t\t[SUBSCRIBE_AGENT_PRESENCE]: agentPresenceAMBChannel,\n\t\t[SUBSCRIBE_AGENT_CHANNEL_AVAIABILITY]: agentChannelPresenceAMBChannel,\n\t\t[SUBSCRIBE_PRESENCE_STATE]: presenceStateAMBChannel,\n\t\t[SUBSCRIBE_SERVICE_CHANNEL]: serviceChannelAMBChannel,\n\t\t[SUBSCRIBE_GROUP_MEMBER]: groupMemberAMBChannel,\n\t\t// work item handlers.\n\t\t[WORK_ITEM_SUBSCRIPTION]: workItemSubscription,\n\t\t[WORK_ITEMS_SUBSCRIBED]: workItemSubscribed,\n\t\t[WORK_ITEMS_CHANGED]: updateWorkItemsHandler,\n\t\t[SUBSCRIBE_WORK_ITEM_REJECT]: awaWorkItemRejectionAMBChannel,\n\t\t[WORK_ITEM_REJECT_EVENT]: readAwaWorkItem,\n\t\t[EXECUTE_AWA_WORK_ITEM_READ]:executeAWAWorkitemReadHandler,\n\t\t[WORK_ITEM_REJECT_SUCCESS]: updateWorkItemsHandler,\n\t\t// interaction handlers\n\t\t[SUBSCRIBE_INTERACTION_CHANGES] : subscribeInteractionChanges,\n\t\t[INTERACTION_UPDATED] : interactionUpdated\n\t}\n});","import { subscribeChannels } from './dataHandlers';\nimport { get } from 'lodash';\nimport { READ_PRESENCE_STATE_DATA, PRESENCE_STATE_WATCHER, WORK_ITEM_SUBSCRIPTION, INTERACTION_EVENT_MAP, WORK_ITEMS_CHANGED, \n\t     SUBSCRIBE_INTERACTION_CHANGES, INTERACTION_WATCHER, EXECUTE_AWA_WORK_ITEM_READ, WORK_ITEM_REJECT_SUCCESS, REJECTION_CONTEXT } from './constants';\nimport { extractPresenceDataFromPayload, getPresencePayload, getCurrentUserId, dispatchWorkItems, extractInteractionData, extractRejectedWorkItem  } from './util';\n\nexport const handleOnComponentConnected = ({ state, action, dispatch }) => {\n\t\tlet user = state.properties.user ? state.properties.user.sys_id :getCurrentUserId(state.behaviors);\n\t\tdispatch(READ_PRESENCE_STATE_DATA);\n\t\tsubscribeChannels(dispatch, true, user, '');\n\t\tdispatch(WORK_ITEM_SUBSCRIPTION, {\n\t\t\tsubscribe: true,\n\t\t\tuserId:user\n\t\t});\t\n\t\tdispatch(SUBSCRIBE_INTERACTION_CHANGES, {\n\t\t\tsubscribe: true,\n\t\t\tuserId:user\n\t\t});\n};\n\nexport const handleOnComponentDisconnected = ({ dispatch }) => {\n\tsubscribeChannels(dispatch, false);\n};\n\nexport const updateStateWithPresenceData = ({ state, action, dispatch, updateState }) => {\n\tconst presenceData = extractPresenceDataFromPayload(action.payload);\n\tconst presencePayload = getPresencePayload(action.payload);\n\tlet presenceState = {\n\t\tpresence: presencePayload\n\t}\n\tlet result = {\n\t\tpresenceData:presenceState\n\t}\n\tdispatch(PRESENCE_STATE_WATCHER, result);\n\n};\n\nexport const workItemSubscribed = ({state, action, dispatch, updateState}) =>{\n\t// dispatch(WORK_ITEMS_CHANGED);\n};\n\nexport const readAwaWorkItem = ({state,action, dispatch, updateState}) => {\n\tlet sys_id = get(action.payload.data, 'sys_id', null);\n\tif(sys_id && get(action.payload.data,'operation', null) == 'insert'){\n\t\tdispatch(EXECUTE_AWA_WORK_ITEM_READ,{sys_id: sys_id});\n\t}\n}\n\n\nexport function updateWorkItemsHandler({state, action, dispatch, updateState}) {\n\tlet workItems =[];\n\tlet isRejectionEvent = false;\n\t// type = case, phone, chat etc, can be user type too.\n\tlet availableWorkItems = get(action.payload.data, 'inboxItems',[]);\n\t// rejection case\n\tif(action.type == WORK_ITEM_REJECT_SUCCESS){\n\t\tisRejectionEvent = true;\n\t\tavailableWorkItems = extractRejectedWorkItem(action);\n\t}\n\tif(availableWorkItems && availableWorkItems.length){\n\t\tavailableWorkItems.forEach(element => {\n\t\t\tlet workItem = {\n\t\t\t\tsys_id: get(element.workItem, 'sys_id', null),\n\t\t\t\tsize: get(element.workItem, 'size', null),\n\t\t\t\tserviceChannel : {\n\t\t\t\t\tname: get(element.serviceChannel, 'name', null),\n\t\t\t\t\tsys_id: get(element.serviceChannel, 'sysID', null)\n\t\t\t\t},\n\t\t\t\tdocument: isRejectionEvent ? {\n\t\t\t\t\tsys_id: get(element.document, 'document_sys_id', null),\n\t\t\t\t\ttable: get(element.document, 'document_table', null)\n\t\t\t\t} : {\n\t\t\t\t\t\tsys_id: get(element.workItem, 'document_sys_id', null),\n\t\t\t\t\t\ttable: get(element.workItem, 'document_table', null)\n\t\t\t\t\t}\n\t\t\t}\n\t\t\t// push rejection reason iff a workItem contains reject reason\n\t\t\tif(get(element, 'rejection', null)){\n\t\t\t\tlet rejection = {\n\t\t\t\t\treason: get(element.rejection, 'reason', \"\"),\n\t\t\t\t\tsys_id: get(element.rejection, 'sys_id', \"\")\n\t\t\t\t}\n\t\t\t\tworkItem.rejection = rejection;\n\t\t\t}\n\t\t\tworkItems.push({workItem : workItem, workItemState: get(element.workItem, 'state', null), isRejectionEvent: isRejectionEvent});\n\t\t});\n\t\tif(workItems.length){\n\t\t\tdispatchWorkItems(dispatch,workItems,INTERACTION_EVENT_MAP);\n\t\t}\t\n\t}\n}\n\n// action handler for interaction updates \n// propagate the event of change of assigned to or change of active flag\nexport function interactionUpdated({state, action, dispatch, updateState}) {\n\tlet interactionPayload= extractInteractionData(get(action.payload,'data'));\n\tlet result = {\n\t\tinteraction : interactionPayload\n\t}\n\tdispatch(INTERACTION_WATCHER, result);\n}","import {\n\tSUBSCRIBE_AGENT_PRESENCE,\n\tSUBSCRIBE_AGENT_CHANNEL_AVAIABILITY,\n\tSUBSCRIBE_PRESENCE_STATE,\n\tSUBSCRIBE_SERVICE_CHANNEL,\n\tSUBSCRIBE_GROUP_MEMBER,\n\tSUBSCRIBE_WORK_ITEM_REJECT\n} from './constants';\n\nexport function subscribeChannels(dispatch, subscribe, currentUser) {\n\tdispatch(SUBSCRIBE_AGENT_PRESENCE, {\n\t\tfilter: btoa('agent=' + currentUser).replace(/=/g, '-'),\n\t\tsubscribe\n\t});\n\tdispatch(SUBSCRIBE_AGENT_CHANNEL_AVAIABILITY, {\n\t\tfilter: btoa('agent=' + currentUser).replace(/=/g, '-'),\n\t\tsubscribe\n\t});\n\tdispatch(SUBSCRIBE_PRESENCE_STATE, {\n\t\tfilter: btoa('active=true').replace(/=/g, '-'),\n\t\tsubscribe\n\t});\n\tdispatch(SUBSCRIBE_SERVICE_CHANNEL, {\n\t\tfilter: btoa('active=true').replace(/=/g, '-'),\n\t\tsubscribe\n\t});\n\tdispatch(SUBSCRIBE_GROUP_MEMBER, {\n\t\tfilter: btoa('user=' + currentUser).replace(/=/g, '-'),\n\t\tsubscribe\n\t});\n\tdispatch(SUBSCRIBE_WORK_ITEM_REJECT, {\n\t\tfilter: btoa('rejected_by=' + currentUser).replace(/=/g, '-'),\n\t\tsubscribe\n\t})\n}","import { get } from 'lodash';\nimport {\n\tgetCurrentStateIconClass,\n\tgetPsData,\n\tgetName,\n\tgetIconStatus,\n\tgetStateSysId,\n\tgetAgentStateId\n} from './selectors';\nimport {\n\tOFFLINE_SYS_ID,\n\tAVAILABLE_STATE,\n\tPARTIALLY_AVAILABLE_STATE,\n\tOFFLINE_STATE,\n\tAWAY_STATE,\n\tREJECTION_CONTEXT\n} from './constants'\n\nfunction parseStateIcon(presenceStates) {\n\tconst stateIconType = {};\n\tpresenceStates.map(presenceState => {\n\t\tpresenceState.agent_channel_availability.sort((a, b) => a.name > b.name);\n\t\tif(presenceState.sys_id === OFFLINE_SYS_ID) {\n\t\t\tstateIconType[presenceState.sys_id] = getCurrentStateIconClass(OFFLINE_STATE);\n\t\t} else if(presenceState.available_to_receive_work_items === false) {\n\t\t\tstateIconType[presenceState.sys_id] = getCurrentStateIconClass(AWAY_STATE);\n\t\t} else {\n\t\t\tstateIconType[presenceState.sys_id] = isFullyAvailable(presenceState.agent_channel_availability) ?\n\t\t\t\tgetCurrentStateIconClass(AVAILABLE_STATE) : getCurrentStateIconClass(PARTIALLY_AVAILABLE_STATE);\n\t\t}\n\t});\n\treturn {presenceStates, stateIconType};\n}\n\nfunction isFullyAvailable(agentChannelAvailability) {\n\treturn agentChannelAvailability.every( availability => availability.available );\n}\n\nexport function extractPresenceDataFromPayload(payload) {\n\tconst psData = getPsData(payload);\n\tif (!psData) {\n\t\treturn null;\n\t}\n\n\tconst {agent_presence, presence_state} = psData;\n\tconst presenceStatesData = parseStateIcon(presence_state);\n\tconst currentState = getName(agent_presence);\n\tconst currentIconStatus = getIconStatus(agent_presence);\n\tconst currentStateSysId = getStateSysId(agent_presence);\n\tconst currentAgentStateId = getAgentStateId(agent_presence);\n\tif (currentState === null || currentIconStatus === null || presenceStatesData === null || currentStateSysId === null || currentAgentStateId === null) {\n\t\treturn null;\n\t}\n\treturn {presenceStatesData, currentState, currentIconStatus, currentStateSysId, currentAgentStateId};\n}\n\nexport function getPresencePayload(presenceData) {\n\tconst psData = getPsData(presenceData);\n\tif (!psData) {\n\t\treturn null;\n\t}\n\tconst {agent_presence, presence_state} = psData;\n\tconst presenceStateSysID = get(agent_presence[0],'current_presence_state_id','');\n\tconst presence = {\n\t\tname: getName(agent_presence),\n\t\tsys_id: getStateSysId(agent_presence),\n\t\tavailable: false,\n\t\tchannels: []\n\t};\n\tconst presenceStatesData = parseStateIcon(presence_state);\n\tpresence.available = get(presenceStatesData,'presenceStates',[]).some(presenceState => {\n\t\t\treturn (presenceState.name === presence.name) && presenceState.available_to_receive_work_items;\n\t\t}\n\t);\n\tconst channels = get(presenceStatesData,'presenceStates',[])\n\t\t.filter(presenceStates => {\n\t\t\tpresenceStateSysID\n\t\t\treturn (presenceStates.sys_id === presenceStateSysID) && (presenceStates.agent_channel_availability.length > 0);\n\t\t});\n\tif (!channels.length) {\n\t\tpresence.channels = channels;\n\t} else {\n\t\tpresence.channels = channels[0].agent_channel_availability.map(channel => {\n\t\t\tconst channelObj = {\n\t\t\t\tname: channel.name,\n\t\t\t\tavailable: channel.available,\n\t\t\t\tsys_id: channel.service_channel_id,\n\t\t\t\trestrict_update: channel.restrict_update\n\t\t\t};\n\t\t\treturn channelObj;\n\t\t});\n\t}\n\treturn presence;\n}\n\nexport function getCurrentUserId(behaviors){\n\treturn get(behaviors,'wsUserData.sys_id');\n}\n\nexport function dispatchWorkItems(dispatch, workItems, eventMap) {\n\tworkItems.forEach(element => {\n\t\t// if rejection item\n\t\tif(element.isRejectionEvent){\n\t\t\tdispatch(eventMap.OPENFRAME_AWA_WORKITEM_REJECTED, { workItem : element.workItem });\n\t\t} else {\n\t\t\t// not a rejection item, check if it is a work item offered or work item accepted item\n\t\t\tif(!element.isRejectionEvent && element.workItemState ){\n\t\t\t\tswitch(element.workItemState.toLowerCase()){\n\t\t\t\t\tcase 'pending_accept':\n\t\t\t\t\t\tdispatch(eventMap.OPENFRAME_AWA_WORKITEM_OFFERED, { workItem : element.workItem });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'accepted':\n\t\t\t\t\t\tdispatch(eventMap.OPENFRAME_AWA_WORKITEM_ACCEPTED, { workItem : element.workItem });\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function extractInteractionData(interactionData) {\n\tlet interactionPayload = {\n\t\tsys_id: get(interactionData,'sys_id'),\n\t\tnumber: get(interactionData,'number'),\n\t\ttype: get(interactionData,'type'),\n\t\treason: get(interactionData,'reason')\n\t}\n\t// pass the subtype if it has a non null value\n\tif(get(interactionData,'subtype')) {\n\t\tinteractionPayload.subtype = get(interactionData, 'subtype');\n\t}\n\treturn interactionPayload;\n}\n\nexport function extractRejectedWorkItem(data){\n\tif(!data){\n\t\treturn [];\n\t}\n\tlet payload = (get(data.payload.data.GlideRecord_Query.awa_work_item_rejection, '_results',[]));\n\tlet returnValue = [];\n\tpayload.forEach(element => {\n\t\tlet queryReason = get(element.reason,'_reference', {});\n\t\tlet queryWorkItem = (element._query.GlideRecord_Query.awa_work_item._results \n\t\t\t&& element._query.GlideRecord_Query.awa_work_item._results.length) ? element._query.GlideRecord_Query.awa_work_item._results[0] : {};\n\t\tlet record  = {\n\t\t\tworkItem: {\n\t\t\t\tsys_id: get(element.work_item, 'value', ''),\n\t\t\t\tsize: get(queryWorkItem.size, 'value', null),\n\t\t\t\tstate: get(queryWorkItem.state, 'value', null)\n\t\t\t},\n\t\t\tserviceChannel:{\n\t\t\t\tname: get(queryWorkItem.queue._reference.service_channel._reference.name, 'value', ''),\n\t\t\t\tsysID: get(queryWorkItem.queue._reference.service_channel._reference.sys_id, 'value', '')\n\t\t\t},\n\t\t\tdocument:{\n\t\t\t\tdocument_sys_id: get(queryWorkItem.document_id, 'value', ''),\n\t\t\t\tdocument_table: get(queryWorkItem.document_table, 'value', '')\n\t\t\t},\n\t\t\trejection:{\n\t\t\t\tsys_id: get(queryReason.sys_id, 'value', ''),\n\t\t\t\treason: get(queryReason.reason, 'value', '')\n\t\t\t}\n\t\t}\n\t\treturnValue.push(record);\n\t});\n\treturn returnValue;\n}\n","import { get } from 'lodash';\nimport { STATE_CSS_MAP } from './constants';\n\nexport function getPsData(presenceStateSource) {\n\treturn get(presenceStateSource, 'data.GlideAWA_Query');\n}\n\nexport function getName(agentPresence) {\n\treturn get(agentPresence, '[0].name');\n}\n\nexport function getIconStatus(agentPresence) {\n\treturn get(agentPresence, '[0].state_icon_type');\n}\n\nexport function getStateSysId(agentPresence) {\n\treturn get(agentPresence, '[0].current_presence_state_id');\n}\n\nexport function getAgentStateId(agentPresence) {\n\treturn get(agentPresence, '[0].sys_id');\n}\n\nexport function getCurrentStateIconClass(currentIconStatus) {\n\treturn get(STATE_CSS_MAP, `${currentIconStatus}`, '');\n}","\nimport { UPDATE_STATE_WITH_PRESENCE_DATA, READ_PRESENCE_STATE_DATA, WORK_ITEMS_CHANGED, WORK_ITEMS_SUBSCRIBED, WORK_ITEM_REASON_SUCCEEDED, \n         WORK_ITEM_REASON_FAILED, INTERACTION_UPDATED, WORK_ITEM_REJECT_EVENT, WORK_ITEM_REJECT_SUCCESS } from './constants';\nimport {createGraphQLEffect} from '@servicenow/ui-effect-graphql';\nimport {createAmbSubscriptionEffect} from '@servicenow/ui-effect-amb'\n\nconst workItemChannelPath = '/awa/work_item/:userId';\n\nconst agentPresenceStatesGraphlQLDatasource_read = `query {\n  GlideAWA_Query {\n    agent_presence {\n      current_presence_state_id\n      state_icon_type\n      name\n      sys_id\n    }\n    presence_state {\n      name\n      show_channels\n      sys_id\n      order\n      available_to_receive_work_items\n      agent_channel_availability {\n        name\n        restrict_update\n        service_channel_id\n        sys_id\n        available\n      }\n    }\n  }\n}`;\n\n\nconst REJECT_REASON = `\nquery {\n  GlideRecord_Query {\n    awa_work_item_rejection(queryConditions: \"rejected_by=^work_item=\") {\n      _results {\n        reason{\n          value\n        }\n        rejected_by{\n          value\n      }\n      sys_updated_on{\n          value\n      }\n      work_item{\n        value\n      }\n  }\n}\n}\n}`;\n\nconst awaWorkItemReadQuery =\n`query{\n  GlideRecord_Query {\n    awa_work_item_rejection(queryConditions: \"sys_id={{sys_id}}\") {\n      _results {\n        work_item {\n          value\n        }\n        reason {\n          _reference {\n            reason {\n              value\n            }\n            sys_id {\n              value\n            }\n          }\n        }\n        _query {\n          GlideRecord_Query {\n            awa_work_item(queryConditions: \"sys_id=$$parent.work_item$$\") {\n              _results {\n                size {\n                  value\n                }\n                document_id {\n                  value\n                }\n                document_table {\n                  value\n                }\n                state {\n                  value\n                }\n                queue {\n                  _reference {\n                    service_channel {\n                      _reference {\n                        name {\n                          value\n                        }\n                        sys_id {\n                          value\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}`;\n\n\nexport const readPresenceStateData = createGraphQLEffect(agentPresenceStatesGraphlQLDatasource_read, {\n\tsuccessActionType: UPDATE_STATE_WITH_PRESENCE_DATA\n});\n\nexport const agentPresenceAMBChannel = createAmbSubscriptionEffect('/rw/default/awa_agent_presence/:filter', {\n\tmessageReceivedActionType: READ_PRESENCE_STATE_DATA\n});\n\nexport const agentChannelPresenceAMBChannel = createAmbSubscriptionEffect('/rw/default/awa_agent_channel_availability/:filter', {\n\tmessageReceivedActionType: READ_PRESENCE_STATE_DATA\n});\n\nexport const presenceStateAMBChannel = createAmbSubscriptionEffect('/rw/default/awa_presence_state/:filter', {\n\tmessageReceivedActionType: READ_PRESENCE_STATE_DATA\n});\n\nexport const serviceChannelAMBChannel = createAmbSubscriptionEffect('/rw/default/awa_service_channel/:filter', {\n\tmessageReceivedActionType: READ_PRESENCE_STATE_DATA\n});\n\nexport const groupMemberAMBChannel = createAmbSubscriptionEffect('/rw/default/sys_user_grmember/:filter', {\n\tmessageReceivedActionType: READ_PRESENCE_STATE_DATA\n});\n\nexport const workItemSubscription = createAmbSubscriptionEffect(workItemChannelPath, {\n\tsubscribeSucceededActionType: WORK_ITEMS_SUBSCRIBED,\n\tmessageReceivedActionType: WORK_ITEMS_CHANGED\n});\n\nexport const workItemFirstRead = createGraphQLEffect(workItemChannelPath, {\n\tsuccessActionType: WORK_ITEMS_CHANGED\n});\n\nexport const rejectReasonWorkItem = createGraphQLEffect(REJECT_REASON, {\n\tsuccessActionType: WORK_ITEM_REASON_SUCCEEDED,\n\terrorActionType: WORK_ITEM_REASON_FAILED\n});\n\nexport const awaWorkItemRejectionAMBChannel = createAmbSubscriptionEffect('/rw/default/awa_work_item_rejection/:filter', {\n  messageReceivedActionType: WORK_ITEM_REJECT_EVENT\n});\n\nexport const executeAWAWorkitemReadHandler = createGraphQLEffect(awaWorkItemReadQuery, {\n  templateVarList: ['sys_id'],\n  successActionType: WORK_ITEM_REJECT_SUCCESS\n})\n\n// Interaction \nconst interactionChannelPath = '/openframe/interaction/:userId';\nexport const subscribeInteractionChanges = createAmbSubscriptionEffect( interactionChannelPath, {\n  messageReceivedActionType: INTERACTION_UPDATED\n});\n","import {createCustomElement, actionTypes} from '@servicenow/ui-core';\nimport snabbdom from '@servicenow/ui-renderer-snabbdom';\nimport { isEmpty as _isEmpty} from 'lodash';\nimport { userSchema } from \"./schemas/userSchema\";\nimport { configurationSchema } from './schemas/configurationSchema';\nimport { configSchema } from './schemas/configSchema';\nimport { urlSchema } from './schemas/urlSchema';\nimport rtlBehavior from '@servicenow/behavior-rtl';\n\nconst {\n\tCOMPONENT_CONNECTED,\n\tCOMPONENT_DISCONNECTED,\n\tCOMPONENT_PROPERTY_CHANGED\n} = actionTypes;\n\n\n\nconst snOpenframeUxb = (state, {dispatch}) => {\n\tconst { user, configuration, opened, number = '', table = '', sysId = '', source='cti_button' } = state.properties;\n\treturn !_isEmpty(configuration)\n\t\t? (\n\t\t\t<sn-component-openframe\n\t\t\t\tuser={user}\n\t\t\t\tconfiguration={configuration}\n\t\t\t\tisLegacy={false}\n\t\t\t\topened={opened}\n\t\t\t\tnumber = {number}\n\t\t\t\ttable = {table}\n\t\t\t\tsysId =  {sysId}\n\t\t\t\tsource = {source}\n\t\t\t/>\n\t\t)\n\t\t: null;\n};\n\n/**\n * OpenFrame provides a communication frame that customer service agents use to place and receive customer calls.\n *\n *  *Openframe CTI (Computer Telephony Interface) use cases*\n *  - OpenFrame provides support for embedded and contextual phone conversations, including:\n *\t- Context identification: incoming calls maximize the OpenFrame window and display details about the caller,\n *    including the account, contact or consumer name, and phone number.\n *  - Links to forms: use the openFrameAPI (openServiceNowForm) to create links to forms. When an incoming call is\n *    received, an agent can click the account, contact, consumer, or case number in the OpenFrame window to open\n *    the corresponding record.\n *\t\t- In Agent Workspace, records open in either a primary tab or a sub-tab depending on the tab configuration.\n *\t\t- In the platform interface, records open in TopFrame (i.e., the current page).\n *\t- Click-to-call capability: click phone number fields to make a call.\n *\t\t- In Agent Workspace, agents can click phone number fields on forms and in the Customer 360 ribbon component\n *\t\t  to make a call.\n *\t\t- In the platform interface, agents can click the phone icon next to the Contact or Consumer fields.\n *\t\t\t- If a contact or consumer has one phone number, the call is placed to that number.\n *\t\t\t- If a contact or consumer has more than one phone number, a dialog box displays the available numbers.\n *\t\t\tClick a number to place the call.\n *\n * **Usage**\n * ```jsx\n *  <sn-openframe-uxb user={user} configuration={configuration} opened={opened} isLegacy={false} number={number} source={source} table={table} sysId={sysId}/>\n * ```\n *\n * @seismicElement sn-openframe-uxb\n * @summary An openframe UI builder component that provides communication frame for customer service agents\n * to place and receive customer calls.\n */\ncreateCustomElement('sn-openframe-uxb', {\n\tproperties: {\n\t\t/**\n\t\t * An object of type sys user item. Used by openframe to get user properties\n\t\t * and values.\n\t\t * @type {Object.<User>}\n\t\t */\n\t\tuser: { default: {}, schema: userSchema },\n\t\t/**\n\t\t * Defines the openframe configuration.\n\t\t * @type {Object.<Configuration>}\n\t\t */\n\t\tconfiguration: { default: {}, schema: configurationSchema },\n\t\t/**\n\t\t * Determines component visibility.\n\t\t * @type {boolean}\n\t\t */\n\t\topened: { default: false, schema: { type: 'boolean' } },\n\t\t/**\n\t\t * Phone number including the country code.\n\t\t * \t- e.g. `+12223334445`\n\t\t *\n\t\t * @type {string}\n\t\t */\n\t\tnumber: { default: null, schema: { type: 'string' } },\n\t\t/**\n\t\t * sysId of the table record.\n\t\t * @type {string}\n\t\t */\n\t\tsysId: { default: null, schema: { type: 'string' } },\n\t\t/**\n\t\t * Table name.\n\t\t * @type {string}\n\t\t */\n\t\ttable: { default: null, schema: { type: 'string' } },\n\t\t/**\n    \t* Determines the source for the open phone event.\n\t\t* @type {('cti_button'|'ribbon'|'form_field')}\n\t\t*/\n\t\tsource: {\n\t\t\tdefault: 'cti_button',\n\t\t\tschema: { type: 'string', enum: ['cti_button', 'ribbon', 'form_field'] }\n\t\t}\n\t},\n\trenderer: {\n\t\ttype: snabbdom,\n\t\tview: snOpenframeUxb\n\t},\n\tdispatches: {\n\t\t/**\n\t\t * Dispatched to update the toolbar's phone button information.\n\t\t * @type {{id: 'cti', select: true, show: true, icon: 'phone-outline', status: 'available'}}\n\t\t */\n\t\tPRIME_NAV_SOURCE_CHANGED: {},\n\t},\n\tactionHandlers: {\n\t\t['SN_OPENFRAME_UXB#INTERNAL_ITEM_SELECTED']: {effect:({action, dispatch })=>{\n\t\t\tdispatch('SN_OPENFRAME_UXB#RECORD_OPENED', action.payload);\n\t\t},stopPropagation : true },\n\t\t[COMPONENT_PROPERTY_CHANGED]: (coeffects) => {\n\t\t\t// TODO: remove the next 2 lines after full integration test.\n\t\t\tconst {action, payload, state, dispatch, property} = coeffects;\n\t\t\tconst {name, value } = coeffects.action.payload;\n\t\t},\n\t\t['HANDLE_OPENED_PROPERTY_CHANGE']:({action, updateProperties})=>{\n\t\t\tupdateProperties({opened: action.payload.value});\n\t\t}\n\t\t// TODO: Reset the values here once a call is placed.\n\t\t// ['UNSET_CLICK_TO_CALL_PAYLOAD']: ({updateProperties, state, action})=>{\n\t\t// \tconsole.log(\"Update properties - 1\", state, action)\n\t\t// \tupdateProperties({\n\t\t// \t\tnumber: '',\n\t\t// \t\tsysId: '',\n\t\t// \t\ttable:'',\n\t\t// \t\tsource:''\n\t\t// \t});\n\t\t// }\n\t},\n\tbehaviors: [rtlBehavior]\n\n});\n","export const userSchema = {\n\ttype: 'object',\n\tproperties: {\n\t\tsys_id: { type: 'string' },\n\t\tfirstName: { type: 'string' },\n\t\tlastName: { type: 'string' },\n\t\tfullName: { type: 'string' },\n\t\troles: { type: 'array' },\n\t\tavatar: { type: 'string' },\n\t\tinitials: { type: 'string' },\n\t\ttimeZone: { type: 'string' },\n\t\ttimeFormat: { type: 'string' },\n\t\tlanguage: { type: 'string' },\n\t\tdomain: { type: 'string' }\n\t}\n};\n","export const configurationSchema = {\n\ttype: 'object',\n\tproperties: {\n\t\tshowFrame: { type: 'boolean' },\n\t\tconfig: { type: 'object' }\n\t}\n};","import { urlSchema } from './urlSchema';\n\nexport const configSchema = {\n        type: 'object',\n        properties: {\n                title: { type: 'string' },\n                subTitle: { type: 'string' },\n                configuration: { type: 'string' },\n                height: { type: 'number' },\n                width: { type: 'number' },\n                navIconClass: { type: 'string' },\n                titleIcon: { type: 'string' },\n                collapsedViewEnabled: { type: 'boolean' },\n                iframeAllow: { type: 'string' },\n                showPresenceIndicator: { type: 'boolean' },\n                url: { schema: urlSchema }\n        }\n};"],"sourceRoot":""}